2025-10-08 11:46:02.140 +03:00 [INF] Starting web host...
2025-10-08 11:46:02.465 +03:00 [FTL] Host terminated unexpectedly
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at ModularERP.Program.Main(String[] args) in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 156
2025-10-08 11:46:26.700 +03:00 [INF] Starting web host...
2025-10-08 11:46:27.012 +03:00 [FTL] Host terminated unexpectedly
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at ModularERP.Program.Main(String[] args) in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 156
2025-10-08 11:47:08.583 +03:00 [INF] Starting web host...
2025-10-08 11:47:08.861 +03:00 [FTL] Host terminated unexpectedly
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at ModularERP.Program.Main(String[] args) in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 156
2025-10-08 11:48:25.775 +03:00 [INF] Starting web host...
2025-10-08 11:48:26.851 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-08 11:48:26.896 +03:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-10-08 11:48:26.967 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-08 11:48:26.972 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-08 11:48:26.977 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-08 11:48:27.041 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-08 11:48:27.058 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-08 11:48:27.063 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-08 11:48:27.069 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-08 11:48:27.082 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-10-08 11:48:27.086 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-08 11:48:27.249 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-08 11:48:27.258 +03:00 [INF] Master database initialized successfully
2025-10-08 11:48:28.588 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-08 11:48:28.721 +03:00 [INF] Now listening on: https://localhost:7168
2025-10-08 11:48:28.722 +03:00 [INF] Now listening on: http://localhost:5004
2025-10-08 11:48:28.820 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-08 11:48:28.823 +03:00 [INF] Hosting environment: Development
2025-10-08 11:48:28.825 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-10-08 11:48:28.941 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-08 11:48:29.172 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 233.8896ms
2025-10-08 11:48:29.176 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-08 11:48:29.177 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-08 11:48:29.201 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 24.776ms
2025-10-08 11:48:29.229 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 51.6507ms
2025-10-08 11:48:29.371 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-08 11:48:29.403 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/favicon-32x32.png - null null
2025-10-08 11:48:29.432 +03:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2025-10-08 11:48:29.435 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/favicon-32x32.png - 200 628 image/png 31.8429ms
2025-10-08 11:48:29.502 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 130.7378ms
2025-10-08 11:48:35.428 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/PriceList - null null
2025-10-08 11:48:35.448 +03:00 [INF] Request started
2025-10-08 11:48:35.453 +03:00 [INF] Processing request for tenant: 8bed874f-cf2a-4ffa-a188-4cfef779774a
2025-10-08 11:48:35.457 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController.GetAll (ModularERP)'
2025-10-08 11:48:35.479 +03:00 [INF] Route matched with {action = "GetAll", controller = "PriceList"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(ModularERP.Modules.Inventory.Features.PriceLists.DTO.DTO_PriceListItems.PriceListFilterDto) on controller ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController (ModularERP).
2025-10-08 11:48:35.486 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-08 11:48:35.572 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-10-08 11:48:35.923 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-08 11:48:36.044 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[System.Collections.Generic.IEnumerable`1[[ModularERP.Modules.Inventory.Features.PriceLists.DTO.DTO_PriceListItems.PriceListListDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-08 11:48:36.072 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController.GetAll (ModularERP) in 586.0382ms
2025-10-08 11:48:36.076 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController.GetAll (ModularERP)'
2025-10-08 11:48:36.078 +03:00 [INF] Request completed successfully with status code 200
2025-10-08 11:48:36.082 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/PriceList - 200 null application/json; charset=utf-8 654.3257ms
2025-10-08 11:48:57.807 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/PriceList - application/json 255
2025-10-08 11:48:57.813 +03:00 [INF] Request started
2025-10-08 11:48:57.816 +03:00 [INF] Processing request for tenant: 8bed874f-cf2a-4ffa-a188-4cfef779774a
2025-10-08 11:48:57.818 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController.Create (ModularERP)'
2025-10-08 11:48:57.824 +03:00 [INF] Route matched with {action = "Create", controller = "PriceList"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(ModularERP.Modules.Inventory.Features.PriceLists.DTO.DTO_PriceListItems.CreatePriceListDto) on controller ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController (ModularERP).
2025-10-08 11:48:58.098 +03:00 [INF] Executing CreatedAtActionResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.PriceLists.DTO.DTO_PriceListItems.PriceListDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-08 11:48:58.117 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController.Create (ModularERP) in 288.5831ms
2025-10-08 11:48:58.120 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController.Create (ModularERP)'
2025-10-08 11:48:58.121 +03:00 [INF] Request completed successfully with status code 201
2025-10-08 11:48:58.123 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/PriceList - 201 null application/json; charset=utf-8 316.3687ms
2025-10-08 11:51:48.131 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/PriceList - application/json 253
2025-10-08 11:51:48.136 +03:00 [INF] Request started
2025-10-08 11:51:48.137 +03:00 [INF] Processing request for tenant: 8bed874f-cf2a-4ffa-a188-4cfef779774a
2025-10-08 11:51:48.138 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController.Create (ModularERP)'
2025-10-08 11:51:48.140 +03:00 [INF] Route matched with {action = "Create", controller = "PriceList"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(ModularERP.Modules.Inventory.Features.PriceLists.DTO.DTO_PriceListItems.CreatePriceListDto) on controller ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController (ModularERP).
2025-10-08 11:51:48.166 +03:00 [INF] Executing CreatedAtActionResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.PriceLists.DTO.DTO_PriceListItems.PriceListDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-08 11:51:48.169 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController.Create (ModularERP) in 23.607ms
2025-10-08 11:51:48.171 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController.Create (ModularERP)'
2025-10-08 11:51:48.173 +03:00 [INF] Request completed successfully with status code 201
2025-10-08 11:51:48.176 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/PriceList - 201 null application/json; charset=utf-8 44.9493ms
2025-10-08 11:53:03.596 +03:00 [INF] Starting web host...
2025-10-08 11:53:04.497 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-08 11:53:04.537 +03:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-10-08 11:53:04.621 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-08 11:53:04.627 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-08 11:53:04.633 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-08 11:53:04.692 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-08 11:53:04.709 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-08 11:53:04.715 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-08 11:53:04.722 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-08 11:53:04.736 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-10-08 11:53:04.740 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-08 11:53:04.913 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-08 11:53:04.921 +03:00 [INF] Master database initialized successfully
2025-10-08 11:53:06.384 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-08 11:53:06.499 +03:00 [INF] Now listening on: https://localhost:7168
2025-10-08 11:53:06.501 +03:00 [INF] Now listening on: http://localhost:5004
2025-10-08 11:53:06.575 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-08 11:53:06.578 +03:00 [INF] Hosting environment: Development
2025-10-08 11:53:06.579 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-10-08 11:53:06.989 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-08 11:53:07.113 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 124.3626ms
2025-10-08 11:53:07.116 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-08 11:53:07.116 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-08 11:53:07.133 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 16.0935ms
2025-10-08 11:53:07.163 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 46.6009ms
2025-10-08 11:53:07.286 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-08 11:53:07.421 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 134.7271ms
2025-10-08 11:53:07.523 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/PriceList - application/json 252
2025-10-08 11:53:07.541 +03:00 [INF] Request started
2025-10-08 11:53:07.546 +03:00 [INF] Processing request for tenant: 8bed874f-cf2a-4ffa-a188-4cfef779774a
2025-10-08 11:53:07.549 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController.Create (ModularERP)'
2025-10-08 11:53:07.571 +03:00 [INF] Route matched with {action = "Create", controller = "PriceList"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(ModularERP.Modules.Inventory.Features.PriceLists.DTO.DTO_PriceListItems.CreatePriceListDto) on controller ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController (ModularERP).
2025-10-08 11:53:07.578 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-08 11:53:07.671 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-10-08 11:53:08.046 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-08 11:53:08.320 +03:00 [INF] Executing CreatedAtActionResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.PriceLists.DTO.DTO_PriceListItems.PriceListDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-08 11:53:08.357 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController.Create (ModularERP) in 779.53ms
2025-10-08 11:53:08.360 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController.Create (ModularERP)'
2025-10-08 11:53:08.363 +03:00 [INF] Request completed successfully with status code 201
2025-10-08 11:53:08.369 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/PriceList - 201 null application/json; charset=utf-8 846.2885ms
2025-10-08 11:53:34.671 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/PriceList - application/json 252
2025-10-08 11:53:34.679 +03:00 [INF] Request started
2025-10-08 11:53:34.683 +03:00 [INF] Processing request for tenant: 8bed874f-cf2a-4ffa-a188-4cfef779774a
2025-10-08 11:53:34.684 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController.Create (ModularERP)'
2025-10-08 11:53:34.686 +03:00 [INF] Route matched with {action = "Create", controller = "PriceList"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(ModularERP.Modules.Inventory.Features.PriceLists.DTO.DTO_PriceListItems.CreatePriceListDto) on controller ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController (ModularERP).
2025-10-08 11:53:34.743 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController.Create (ModularERP) in 52.0578ms
2025-10-08 11:53:34.746 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController.Create (ModularERP)'
2025-10-08 11:53:34.749 +03:00 [WRN] Business logic exception occurred: Price list with name 'Sum 2025 Price List' already exists for this company
ModularERP.Common.Exceptions.BusinessLogicException: Price list with name 'Sum 2025 Price List' already exists for this company
   at ModularERP.Modules.Inventory.Features.PriceLists.Handlers.Handlers_PriceListItems.CreatePriceListCommandHandler.Handle(CreatePriceListCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\PriceLists\Handlers\Handlers_PriceListItems\CreatePriceListCommandHandler.cs:line 33
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController.Create(CreatePriceListDto dto) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\PriceLists\Controllers\PriceListController.cs:line 72
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_4>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 229
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-10-08 11:53:34.815 +03:00 [INF] Error response sent with status code 400
2025-10-08 11:53:34.817 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/PriceList - 400 null application/json; charset=utf-8 145.957ms
2025-10-08 11:53:40.227 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/PriceList - application/json 251
2025-10-08 11:53:40.233 +03:00 [INF] Request started
2025-10-08 11:53:40.234 +03:00 [INF] Processing request for tenant: 8bed874f-cf2a-4ffa-a188-4cfef779774a
2025-10-08 11:53:40.235 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController.Create (ModularERP)'
2025-10-08 11:53:40.239 +03:00 [INF] Route matched with {action = "Create", controller = "PriceList"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(ModularERP.Modules.Inventory.Features.PriceLists.DTO.DTO_PriceListItems.CreatePriceListDto) on controller ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController (ModularERP).
2025-10-08 11:53:40.300 +03:00 [INF] Executing CreatedAtActionResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.PriceLists.DTO.DTO_PriceListItems.PriceListDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-08 11:53:40.307 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController.Create (ModularERP) in 63.1925ms
2025-10-08 11:53:40.311 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController.Create (ModularERP)'
2025-10-08 11:53:40.313 +03:00 [INF] Request completed successfully with status code 201
2025-10-08 11:53:40.315 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/PriceList - 201 null application/json; charset=utf-8 87.2856ms
2025-10-08 11:54:08.759 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/PriceList - application/json 251
2025-10-08 11:54:08.765 +03:00 [INF] Request started
2025-10-08 11:54:08.766 +03:00 [INF] Processing request for tenant: 8bed874f-cf2a-4ffa-a188-4cfef779774a
2025-10-08 11:54:08.768 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController.Create (ModularERP)'
2025-10-08 11:54:08.771 +03:00 [INF] Route matched with {action = "Create", controller = "PriceList"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(ModularERP.Modules.Inventory.Features.PriceLists.DTO.DTO_PriceListItems.CreatePriceListDto) on controller ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController (ModularERP).
2025-10-08 11:54:08.782 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController.Create (ModularERP) in 6.1526ms
2025-10-08 11:54:08.786 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController.Create (ModularERP)'
2025-10-08 11:54:08.788 +03:00 [WRN] Business logic exception occurred: Price list with name 'Su 2025 Price List' already exists for this company
ModularERP.Common.Exceptions.BusinessLogicException: Price list with name 'Su 2025 Price List' already exists for this company
   at ModularERP.Modules.Inventory.Features.PriceLists.Handlers.Handlers_PriceListItems.CreatePriceListCommandHandler.Handle(CreatePriceListCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\PriceLists\Handlers\Handlers_PriceListItems\CreatePriceListCommandHandler.cs:line 33
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController.Create(CreatePriceListDto dto) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\PriceLists\Controllers\PriceListController.cs:line 72
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_4>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 229
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-10-08 11:54:08.817 +03:00 [INF] Error response sent with status code 400
2025-10-08 11:54:08.818 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/PriceList - 400 null application/json; charset=utf-8 59.2ms
2025-10-08 11:54:13.105 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/PriceList - application/json 250
2025-10-08 11:54:13.108 +03:00 [INF] Request started
2025-10-08 11:54:13.110 +03:00 [INF] Processing request for tenant: 8bed874f-cf2a-4ffa-a188-4cfef779774a
2025-10-08 11:54:13.112 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController.Create (ModularERP)'
2025-10-08 11:54:13.115 +03:00 [INF] Route matched with {action = "Create", controller = "PriceList"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(ModularERP.Modules.Inventory.Features.PriceLists.DTO.DTO_PriceListItems.CreatePriceListDto) on controller ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController (ModularERP).
2025-10-08 11:54:13.143 +03:00 [INF] Executing CreatedAtActionResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.PriceLists.DTO.DTO_PriceListItems.PriceListDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-08 11:54:13.147 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController.Create (ModularERP) in 24.921ms
2025-10-08 11:54:13.150 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController.Create (ModularERP)'
2025-10-08 11:54:13.152 +03:00 [INF] Request completed successfully with status code 201
2025-10-08 11:54:13.156 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/PriceList - 201 null application/json; charset=utf-8 50.8606ms
2025-10-08 11:58:01.003 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/PriceList/{7df6c132-3fb2-4e73-a71c-ce938a9fb760} - null null
2025-10-08 11:58:01.008 +03:00 [INF] Request started
2025-10-08 11:58:01.009 +03:00 [INF] Processing request for tenant: 8bed874f-cf2a-4ffa-a188-4cfef779774a
2025-10-08 11:58:01.010 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController.GetById (ModularERP)'
2025-10-08 11:58:01.015 +03:00 [INF] Route matched with {action = "GetById", controller = "PriceList"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetById(System.Guid) on controller ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController (ModularERP).
2025-10-08 11:58:01.040 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.PriceLists.DTO.DTO_PriceListItems.PriceListDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-08 11:58:01.043 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController.GetById (ModularERP) in 24.2335ms
2025-10-08 11:58:01.045 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController.GetById (ModularERP)'
2025-10-08 11:58:01.047 +03:00 [INF] Request completed successfully with status code 200
2025-10-08 11:58:01.049 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/PriceList/{7df6c132-3fb2-4e73-a71c-ce938a9fb760} - 200 null application/json; charset=utf-8 46.1207ms
2025-10-08 11:58:21.246 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/PriceList - null null
2025-10-08 11:58:21.250 +03:00 [INF] Request started
2025-10-08 11:58:21.252 +03:00 [INF] Processing request for tenant: 8bed874f-cf2a-4ffa-a188-4cfef779774a
2025-10-08 11:58:21.254 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController.GetAll (ModularERP)'
2025-10-08 11:58:21.262 +03:00 [INF] Route matched with {action = "GetAll", controller = "PriceList"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(ModularERP.Modules.Inventory.Features.PriceLists.DTO.DTO_PriceListItems.PriceListFilterDto) on controller ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController (ModularERP).
2025-10-08 11:58:21.322 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[System.Collections.Generic.IEnumerable`1[[ModularERP.Modules.Inventory.Features.PriceLists.DTO.DTO_PriceListItems.PriceListListDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-08 11:58:21.330 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController.GetAll (ModularERP) in 62.0903ms
2025-10-08 11:58:21.334 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController.GetAll (ModularERP)'
2025-10-08 11:58:21.337 +03:00 [INF] Request completed successfully with status code 200
2025-10-08 11:58:21.340 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/PriceList - 200 null application/json; charset=utf-8 93.9935ms
2025-10-08 11:58:39.699 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/PriceList/{bbd4b345-614f-4f99-aeb8-aea769a5d866} - null null
2025-10-08 11:58:39.704 +03:00 [INF] Request started
2025-10-08 11:58:39.705 +03:00 [INF] Processing request for tenant: 8bed874f-cf2a-4ffa-a188-4cfef779774a
2025-10-08 11:58:39.706 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController.GetById (ModularERP)'
2025-10-08 11:58:39.710 +03:00 [INF] Route matched with {action = "GetById", controller = "PriceList"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetById(System.Guid) on controller ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController (ModularERP).
2025-10-08 11:58:39.721 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.PriceLists.DTO.DTO_PriceListItems.PriceListDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-08 11:58:39.725 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController.GetById (ModularERP) in 10.2756ms
2025-10-08 11:58:39.727 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController.GetById (ModularERP)'
2025-10-08 11:58:39.731 +03:00 [INF] Request completed successfully with status code 200
2025-10-08 11:58:39.734 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/PriceList/{bbd4b345-614f-4f99-aeb8-aea769a5d866} - 200 null application/json; charset=utf-8 34.5772ms
2025-10-08 11:59:10.225 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/PriceList - application/json 249
2025-10-08 11:59:10.228 +03:00 [INF] Request started
2025-10-08 11:59:10.230 +03:00 [INF] Processing request for tenant: 8bed874f-cf2a-4ffa-a188-4cfef779774a
2025-10-08 11:59:10.231 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController.Create (ModularERP)'
2025-10-08 11:59:10.233 +03:00 [INF] Route matched with {action = "Create", controller = "PriceList"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(ModularERP.Modules.Inventory.Features.PriceLists.DTO.DTO_PriceListItems.CreatePriceListDto) on controller ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController (ModularERP).
2025-10-08 11:59:10.252 +03:00 [INF] Executing CreatedAtActionResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.PriceLists.DTO.DTO_PriceListItems.PriceListDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-08 11:59:10.255 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController.Create (ModularERP) in 16.8611ms
2025-10-08 11:59:10.258 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController.Create (ModularERP)'
2025-10-08 11:59:10.259 +03:00 [INF] Request completed successfully with status code 201
2025-10-08 11:59:10.261 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/PriceList - 201 null application/json; charset=utf-8 35.8846ms
2025-10-08 11:59:59.329 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/PriceList - application/json 248
2025-10-08 11:59:59.334 +03:00 [INF] Request started
2025-10-08 11:59:59.336 +03:00 [INF] Processing request for tenant: 8bed874f-cf2a-4ffa-a188-4cfef779774a
2025-10-08 11:59:59.337 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController.Create (ModularERP)'
2025-10-08 11:59:59.340 +03:00 [INF] Route matched with {action = "Create", controller = "PriceList"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(ModularERP.Modules.Inventory.Features.PriceLists.DTO.DTO_PriceListItems.CreatePriceListDto) on controller ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController (ModularERP).
2025-10-08 11:59:59.363 +03:00 [INF] Executing CreatedAtActionResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.PriceLists.DTO.DTO_PriceListItems.PriceListDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-08 11:59:59.366 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController.Create (ModularERP) in 23.0145ms
2025-10-08 11:59:59.369 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController.Create (ModularERP)'
2025-10-08 11:59:59.371 +03:00 [INF] Request completed successfully with status code 201
2025-10-08 11:59:59.373 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/PriceList - 201 null application/json; charset=utf-8 44.1ms
2025-10-08 12:04:41.573 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/PriceList - application/json 247
2025-10-08 12:04:41.578 +03:00 [INF] Request started
2025-10-08 12:04:41.579 +03:00 [INF] Processing request for tenant: 8bed874f-cf2a-4ffa-a188-4cfef779774a
2025-10-08 12:04:41.580 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController.Create (ModularERP)'
2025-10-08 12:04:41.582 +03:00 [INF] Route matched with {action = "Create", controller = "PriceList"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(ModularERP.Modules.Inventory.Features.PriceLists.DTO.DTO_PriceListItems.CreatePriceListDto) on controller ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController (ModularERP).
2025-10-08 12:04:41.611 +03:00 [INF] Executing CreatedAtActionResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.PriceLists.DTO.DTO_PriceListItems.PriceListDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-08 12:04:41.614 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController.Create (ModularERP) in 27.3186ms
2025-10-08 12:04:41.617 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController.Create (ModularERP)'
2025-10-08 12:04:41.620 +03:00 [INF] Request completed successfully with status code 201
2025-10-08 12:04:41.623 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/PriceList - 201 null application/json; charset=utf-8 50.0205ms
2025-10-08 12:11:43.716 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/PriceList/{bbd4b345-614f-4f99-aeb8-aea769a5d866} - null null
2025-10-08 12:11:43.721 +03:00 [INF] Request started
2025-10-08 12:11:43.722 +03:00 [INF] Processing request for tenant: 8bed874f-cf2a-4ffa-a188-4cfef779774a
2025-10-08 12:11:43.722 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController.GetById (ModularERP)'
2025-10-08 12:11:43.724 +03:00 [INF] Route matched with {action = "GetById", controller = "PriceList"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetById(System.Guid) on controller ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController (ModularERP).
2025-10-08 12:11:43.740 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.PriceLists.DTO.DTO_PriceListItems.PriceListDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-08 12:11:43.742 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController.GetById (ModularERP) in 14.1663ms
2025-10-08 12:11:43.747 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController.GetById (ModularERP)'
2025-10-08 12:11:43.749 +03:00 [INF] Request completed successfully with status code 200
2025-10-08 12:11:43.751 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/PriceList/{bbd4b345-614f-4f99-aeb8-aea769a5d866} - 200 null application/json; charset=utf-8 34.3105ms
2025-10-08 12:13:31.127 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7168/api/PriceList/{bbd4b345-614f-4f99-aeb8-aea769a5d866} - application/json 302
2025-10-08 12:13:31.132 +03:00 [INF] Request started
2025-10-08 12:13:31.133 +03:00 [INF] Processing request for tenant: 8bed874f-cf2a-4ffa-a188-4cfef779774a
2025-10-08 12:13:31.134 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController.Update (ModularERP)'
2025-10-08 12:13:31.139 +03:00 [INF] Route matched with {action = "Update", controller = "PriceList"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Update(System.Guid, ModularERP.Modules.Inventory.Features.PriceLists.DTO.DTO_PriceListItems.UpdatePriceListDto) on controller ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController (ModularERP).
2025-10-08 12:13:31.222 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.PriceLists.DTO.DTO_PriceListItems.PriceListDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-08 12:13:31.224 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController.Update (ModularERP) in 81.8047ms
2025-10-08 12:13:31.227 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController.Update (ModularERP)'
2025-10-08 12:13:31.229 +03:00 [INF] Request completed successfully with status code 200
2025-10-08 12:13:31.230 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7168/api/PriceList/{bbd4b345-614f-4f99-aeb8-aea769a5d866} - 200 null application/json; charset=utf-8 103.3618ms
2025-10-08 12:20:02.767 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/PriceList/by-customer/{F3B6A15E-4C78-4D6A-B63B-9A78C81C6C01} - null null
2025-10-08 12:20:02.771 +03:00 [INF] Request started
2025-10-08 12:20:02.773 +03:00 [INF] Processing request for tenant: 8bed874f-cf2a-4ffa-a188-4cfef779774a
2025-10-08 12:20:02.774 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController.GetByCustomer (ModularERP)'
2025-10-08 12:20:02.778 +03:00 [INF] Route matched with {action = "GetByCustomer", controller = "PriceList"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetByCustomer(System.Guid) on controller ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController (ModularERP).
2025-10-08 12:20:02.872 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[System.Collections.Generic.IEnumerable`1[[ModularERP.Modules.Inventory.Features.PriceLists.DTO.DTO_PriceListItems.PriceListListDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-08 12:20:02.875 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController.GetByCustomer (ModularERP) in 94.411ms
2025-10-08 12:20:02.877 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController.GetByCustomer (ModularERP)'
2025-10-08 12:20:02.878 +03:00 [INF] Request completed successfully with status code 200
2025-10-08 12:20:02.880 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/PriceList/by-customer/{F3B6A15E-4C78-4D6A-B63B-9A78C81C6C01} - 200 null application/json; charset=utf-8 113.2885ms
2025-10-08 14:03:16.699 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/PriceList/{bbd4b345-614f-4f99-aeb8-aea769a5d866}/activate - null 0
2025-10-08 14:03:16.704 +03:00 [INF] Request started
2025-10-08 14:03:16.706 +03:00 [INF] Processing request for tenant: 8bed874f-cf2a-4ffa-a188-4cfef779774a
2025-10-08 14:03:16.708 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController.Activate (ModularERP)'
2025-10-08 14:03:16.718 +03:00 [INF] Route matched with {action = "Activate", controller = "PriceList"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Activate(System.Guid) on controller ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController (ModularERP).
2025-10-08 14:03:16.797 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-10-08 14:03:16.818 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController.Activate (ModularERP) in 94.4215ms
2025-10-08 14:03:16.821 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController.Activate (ModularERP)'
2025-10-08 14:03:16.823 +03:00 [WRN] Business logic exception occurred: Price list is already active
ModularERP.Common.Exceptions.BusinessLogicException: Price list is already active
   at ModularERP.Modules.Inventory.Features.PriceLists.Handlers.Handlers_PriceListItems.ActivatePriceListCommandHandler.Handle(ActivatePriceListCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\PriceLists\Handlers\Handlers_PriceListItems\ActivatePriceListCommandHandler.cs:line 36
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController.Activate(Guid id) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\PriceLists\Controllers\PriceListController.cs:line 126
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_4>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 229
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-10-08 14:03:16.854 +03:00 [INF] Error response sent with status code 400
2025-10-08 14:03:16.856 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/PriceList/{bbd4b345-614f-4f99-aeb8-aea769a5d866}/activate - 400 null application/json; charset=utf-8 156.0261ms
2025-10-08 14:05:33.069 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/PriceList/{7df6c132-3fb2-4e73-a71c-ce938a9fb760}/activate - null 0
2025-10-08 14:05:33.074 +03:00 [INF] Request started
2025-10-08 14:05:33.075 +03:00 [INF] Processing request for tenant: 8bed874f-cf2a-4ffa-a188-4cfef779774a
2025-10-08 14:05:33.076 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController.Activate (ModularERP)'
2025-10-08 14:05:33.078 +03:00 [INF] Route matched with {action = "Activate", controller = "PriceList"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Activate(System.Guid) on controller ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController (ModularERP).
2025-10-08 14:05:33.092 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-08 14:05:33.096 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController.Activate (ModularERP) in 14.009ms
2025-10-08 14:05:33.098 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController.Activate (ModularERP)'
2025-10-08 14:05:33.101 +03:00 [INF] Request completed successfully with status code 200
2025-10-08 14:05:33.104 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/PriceList/{7df6c132-3fb2-4e73-a71c-ce938a9fb760}/activate - 200 null application/json; charset=utf-8 34.7206ms
2025-10-08 14:07:15.257 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/PriceList/{7df6c132-3fb2-4e73-a71c-ce938a9fb760}/deactivate - null null
2025-10-08 14:07:15.263 +03:00 [INF] Request started
2025-10-08 14:07:15.264 +03:00 [INF] Processing request for tenant: 8bed874f-cf2a-4ffa-a188-4cfef779774a
2025-10-08 14:07:15.265 +03:00 [INF] Executing endpoint '405 HTTP Method Not Supported'
2025-10-08 14:07:15.272 +03:00 [INF] Executed endpoint '405 HTTP Method Not Supported'
2025-10-08 14:07:15.273 +03:00 [INF] Request completed successfully with status code 405
2025-10-08 14:07:15.276 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/PriceList/{7df6c132-3fb2-4e73-a71c-ce938a9fb760}/deactivate - 405 0 null 19.0531ms
2025-10-08 14:07:40.967 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/PriceList/{7df6c132-3fb2-4e73-a71c-ce938a9fb760}/deactivate - null 0
2025-10-08 14:07:40.972 +03:00 [INF] Request started
2025-10-08 14:07:40.973 +03:00 [INF] Processing request for tenant: 8bed874f-cf2a-4ffa-a188-4cfef779774a
2025-10-08 14:07:40.974 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController.Deactivate (ModularERP)'
2025-10-08 14:07:40.981 +03:00 [INF] Route matched with {action = "Deactivate", controller = "PriceList"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Deactivate(System.Guid) on controller ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController (ModularERP).
2025-10-08 14:07:41.001 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-08 14:07:41.004 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController.Deactivate (ModularERP) in 19.9954ms
2025-10-08 14:07:41.006 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController.Deactivate (ModularERP)'
2025-10-08 14:07:41.009 +03:00 [INF] Request completed successfully with status code 200
2025-10-08 14:07:41.010 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/PriceList/{7df6c132-3fb2-4e73-a71c-ce938a9fb760}/deactivate - 200 null application/json; charset=utf-8 42.7491ms
2025-10-08 14:08:48.743 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/PriceList/export/{7df6c132-3fb2-4e73-a71c-ce938a9fb760} - null null
2025-10-08 14:08:48.747 +03:00 [INF] Request started
2025-10-08 14:08:48.748 +03:00 [INF] Processing request for tenant: 8bed874f-cf2a-4ffa-a188-4cfef779774a
2025-10-08 14:08:48.749 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController.Export (ModularERP)'
2025-10-08 14:08:48.755 +03:00 [INF] Route matched with {action = "Export", controller = "PriceList"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Export(System.Guid) on controller ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController (ModularERP).
2025-10-08 14:08:48.813 +03:00 [INF] Executing FileContentResult, sending file with download name 'PriceList_7df6c132-3fb2-4e73-a71c-ce938a9fb760_20251008.csv' ...
2025-10-08 14:08:48.820 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController.Export (ModularERP) in 61.0901ms
2025-10-08 14:08:48.825 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListController.Export (ModularERP)'
2025-10-08 14:08:48.828 +03:00 [INF] Request completed successfully with status code 200
2025-10-08 14:08:48.830 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/PriceList/export/{7df6c132-3fb2-4e73-a71c-ce938a9fb760} - 200 106 text/csv 86.5903ms
2025-10-08 14:28:07.165 +03:00 [INF] Starting web host...
2025-10-08 14:28:14.278 +03:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-08 14:28:14.373 +03:00 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-10-08 14:28:14.575 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-08 14:28:14.580 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-08 14:28:14.595 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-08 14:28:14.727 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-08 14:28:14.760 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-08 14:28:14.765 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-08 14:28:14.773 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-08 14:28:14.785 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-10-08 14:28:14.792 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-08 14:28:15.298 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-08 14:28:15.306 +03:00 [INF] Master database initialized successfully
2025-10-08 14:28:17.465 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-08 14:28:17.598 +03:00 [INF] Now listening on: https://localhost:7168
2025-10-08 14:28:17.600 +03:00 [INF] Now listening on: http://localhost:5004
2025-10-08 14:28:17.681 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-08 14:28:17.682 +03:00 [INF] Hosting environment: Development
2025-10-08 14:28:17.683 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-10-08 14:28:17.830 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-08 14:28:18.029 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 199.1336ms
2025-10-08 14:28:18.038 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-08 14:28:18.038 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-08 14:28:18.057 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 18.6965ms
2025-10-08 14:28:18.085 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 46.7514ms
2025-10-08 14:28:18.167 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-08 14:28:18.289 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 121.843ms
2025-10-08 14:49:40.133 +03:00 [INF] Starting web host...
2025-10-08 14:49:43.612 +03:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-08 14:49:43.687 +03:00 [INF] Executed DbCommand (60ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-10-08 14:49:43.826 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-08 14:49:43.832 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-08 14:49:43.848 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-08 14:49:43.939 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-08 14:49:43.960 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-08 14:49:43.964 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-08 14:49:43.971 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-08 14:49:43.981 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-10-08 14:49:43.987 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-08 14:49:44.249 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-08 14:49:44.256 +03:00 [INF] Master database initialized successfully
2025-10-08 14:49:46.081 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-08 14:49:46.181 +03:00 [INF] Now listening on: https://localhost:7168
2025-10-08 14:49:46.183 +03:00 [INF] Now listening on: http://localhost:5004
2025-10-08 14:49:46.289 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-08 14:49:46.291 +03:00 [INF] Hosting environment: Development
2025-10-08 14:49:46.293 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-10-08 14:49:53.973 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-08 14:49:54.118 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 145.794ms
2025-10-08 14:49:54.123 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-08 14:49:54.124 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-08 14:49:54.133 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 9.7678ms
2025-10-08 14:49:54.162 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 38.0008ms
2025-10-08 14:49:54.220 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-08 14:49:54.348 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 128.701ms
2025-10-08 14:55:43.738 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/PriceListItems - null null
2025-10-08 14:55:43.758 +03:00 [INF] Request started
2025-10-08 14:55:43.762 +03:00 [INF] Processing request for tenant: 8bed874f-cf2a-4ffa-a188-4cfef779774a
2025-10-08 14:55:43.765 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.GetAll (ModularERP)'
2025-10-08 14:55:43.780 +03:00 [INF] Route matched with {action = "GetAll", controller = "PriceListItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.Guid, Boolean, System.Nullable`1[System.DateTime]) on controller ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController (ModularERP).
2025-10-08 14:55:43.786 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-08 14:55:43.919 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-10-08 14:55:44.348 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-08 14:55:44.390 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.GetAll (ModularERP) in 604.3611ms
2025-10-08 14:55:44.393 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.GetAll (ModularERP)'
2025-10-08 14:55:44.397 +03:00 [ERR] Application exception occurred: Price list with ID 00000000-0000-0000-0000-000000000000 not found
ModularERP.Common.Exceptions.NotFoundException: Price list with ID 00000000-0000-0000-0000-000000000000 not found
   at ModularERP.Modules.Inventory.Features.PriceLists.Handlers.Handler_PriceList.GetPriceListItemsHandler.Handle(GetPriceListItemsQuery request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\PriceLists\Handlers\Handler_PriceList\GetPriceListItemsHandler.cs:line 39
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.GetAll(Guid priceListId, Boolean includeInactive, Nullable`1 asOfDate) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\PriceLists\Controllers\PriceListItemsController.cs:line 40
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_4>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 229
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-10-08 14:55:44.460 +03:00 [INF] Error response sent with status code 404
2025-10-08 14:55:44.467 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/PriceListItems - 404 null application/json; charset=utf-8 729.0478ms
2025-10-08 15:00:45.631 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/PriceListItems - application/json 312
2025-10-08 15:00:45.638 +03:00 [INF] Request started
2025-10-08 15:00:45.640 +03:00 [INF] Processing request for tenant: 8bed874f-cf2a-4ffa-a188-4cfef779774a
2025-10-08 15:00:45.642 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.Create (ModularERP)'
2025-10-08 15:00:45.646 +03:00 [INF] Route matched with {action = "Create", controller = "PriceListItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(System.Guid, ModularERP.Modules.Inventory.Features.PriceLists.DTO.DTO_PriceList.CreatePriceListItemDto) on controller ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController (ModularERP).
2025-10-08 15:00:45.700 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.Create (ModularERP) in 50.494ms
2025-10-08 15:00:45.703 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.Create (ModularERP)'
2025-10-08 15:00:45.705 +03:00 [ERR] Application exception occurred: Price list with ID 00000000-0000-0000-0000-000000000000 not found
ModularERP.Common.Exceptions.NotFoundException: Price list with ID 00000000-0000-0000-0000-000000000000 not found
   at ModularERP.Modules.Inventory.Features.PriceLists.Handlers.Handler_PriceList.CreatePriceListItemHandler.Handle(CreatePriceListItemCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\PriceLists\Handlers\Handler_PriceList\CreatePriceListItemHandler.cs:line 39
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.Create(Guid priceListId, CreatePriceListItemDto dto) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\PriceLists\Controllers\PriceListItemsController.cs:line 81
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_4>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 229
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-10-08 15:00:45.716 +03:00 [INF] Error response sent with status code 404
2025-10-08 15:00:45.717 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/PriceListItems - 404 null application/json; charset=utf-8 86.5559ms
2025-10-08 15:01:15.502 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/PriceListItems - application/json 312
2025-10-08 15:01:15.507 +03:00 [INF] Request started
2025-10-08 15:01:15.508 +03:00 [INF] Processing request for tenant: 8bed874f-cf2a-4ffa-a188-4cfef779774a
2025-10-08 15:01:15.510 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.Create (ModularERP)'
2025-10-08 15:01:15.511 +03:00 [INF] Route matched with {action = "Create", controller = "PriceListItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(System.Guid, ModularERP.Modules.Inventory.Features.PriceLists.DTO.DTO_PriceList.CreatePriceListItemDto) on controller ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController (ModularERP).
2025-10-08 15:01:15.528 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.Create (ModularERP) in 13.8567ms
2025-10-08 15:01:15.530 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.Create (ModularERP)'
2025-10-08 15:01:15.532 +03:00 [ERR] Application exception occurred: Price list with ID 00000000-0000-0000-0000-000000000000 not found
ModularERP.Common.Exceptions.NotFoundException: Price list with ID 00000000-0000-0000-0000-000000000000 not found
   at ModularERP.Modules.Inventory.Features.PriceLists.Handlers.Handler_PriceList.CreatePriceListItemHandler.Handle(CreatePriceListItemCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\PriceLists\Handlers\Handler_PriceList\CreatePriceListItemHandler.cs:line 39
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.Create(Guid priceListId, CreatePriceListItemDto dto) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\PriceLists\Controllers\PriceListItemsController.cs:line 81
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_4>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 229
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-10-08 15:01:15.542 +03:00 [INF] Error response sent with status code 404
2025-10-08 15:01:15.544 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/PriceListItems - 404 null application/json; charset=utf-8 41.8061ms
2025-10-08 15:01:42.675 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/PriceListItems?bbd4b345-614f-4f99-aeb8-aea769a5d866 - application/json 312
2025-10-08 15:01:42.680 +03:00 [INF] Request started
2025-10-08 15:01:42.681 +03:00 [INF] Processing request for tenant: 8bed874f-cf2a-4ffa-a188-4cfef779774a
2025-10-08 15:01:42.682 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.Create (ModularERP)'
2025-10-08 15:01:42.683 +03:00 [INF] Route matched with {action = "Create", controller = "PriceListItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(System.Guid, ModularERP.Modules.Inventory.Features.PriceLists.DTO.DTO_PriceList.CreatePriceListItemDto) on controller ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController (ModularERP).
2025-10-08 15:01:42.692 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.Create (ModularERP) in 5.9271ms
2025-10-08 15:01:42.695 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.Create (ModularERP)'
2025-10-08 15:01:42.697 +03:00 [ERR] Application exception occurred: Price list with ID 00000000-0000-0000-0000-000000000000 not found
ModularERP.Common.Exceptions.NotFoundException: Price list with ID 00000000-0000-0000-0000-000000000000 not found
   at ModularERP.Modules.Inventory.Features.PriceLists.Handlers.Handler_PriceList.CreatePriceListItemHandler.Handle(CreatePriceListItemCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\PriceLists\Handlers\Handler_PriceList\CreatePriceListItemHandler.cs:line 39
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.Create(Guid priceListId, CreatePriceListItemDto dto) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\PriceLists\Controllers\PriceListItemsController.cs:line 81
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_4>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 229
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-10-08 15:01:42.707 +03:00 [INF] Error response sent with status code 404
2025-10-08 15:01:42.708 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/PriceListItems?bbd4b345-614f-4f99-aeb8-aea769a5d866 - 404 null application/json; charset=utf-8 32.6667ms
2025-10-08 15:01:59.382 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/PriceListItems?priceListId=bbd4b345-614f-4f99-aeb8-aea769a5d866 - application/json 312
2025-10-08 15:01:59.385 +03:00 [INF] Request started
2025-10-08 15:01:59.386 +03:00 [INF] Processing request for tenant: 8bed874f-cf2a-4ffa-a188-4cfef779774a
2025-10-08 15:01:59.387 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.Create (ModularERP)'
2025-10-08 15:01:59.388 +03:00 [INF] Route matched with {action = "Create", controller = "PriceListItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(System.Guid, ModularERP.Modules.Inventory.Features.PriceLists.DTO.DTO_PriceList.CreatePriceListItemDto) on controller ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController (ModularERP).
2025-10-08 15:01:59.393 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.Create (ModularERP) in 2.4103ms
2025-10-08 15:01:59.396 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.Create (ModularERP)'
2025-10-08 15:01:59.397 +03:00 [ERR] Application exception occurred: Price list with ID 00000000-0000-0000-0000-000000000000 not found
ModularERP.Common.Exceptions.NotFoundException: Price list with ID 00000000-0000-0000-0000-000000000000 not found
   at ModularERP.Modules.Inventory.Features.PriceLists.Handlers.Handler_PriceList.CreatePriceListItemHandler.Handle(CreatePriceListItemCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\PriceLists\Handlers\Handler_PriceList\CreatePriceListItemHandler.cs:line 39
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.Create(Guid priceListId, CreatePriceListItemDto dto) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\PriceLists\Controllers\PriceListItemsController.cs:line 81
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_4>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 229
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-10-08 15:01:59.415 +03:00 [INF] Error response sent with status code 404
2025-10-08 15:01:59.416 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/PriceListItems?priceListId=bbd4b345-614f-4f99-aeb8-aea769a5d866 - 404 null application/json; charset=utf-8 34.166ms
2025-10-08 15:04:32.531 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/PriceListItems/bbd4b345-614f-4f99-aeb8-aea769a5d866 - application/json 312
2025-10-08 15:04:32.534 +03:00 [INF] Request started
2025-10-08 15:04:32.535 +03:00 [INF] Processing request for tenant: 8bed874f-cf2a-4ffa-a188-4cfef779774a
2025-10-08 15:04:32.537 +03:00 [INF] Executing endpoint '405 HTTP Method Not Supported'
2025-10-08 15:04:32.538 +03:00 [INF] Executed endpoint '405 HTTP Method Not Supported'
2025-10-08 15:04:32.539 +03:00 [INF] Request completed successfully with status code 405
2025-10-08 15:04:32.540 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/PriceListItems/bbd4b345-614f-4f99-aeb8-aea769a5d866 - 405 0 null 9.6512ms
2025-10-08 15:04:50.547 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/PriceListItems/7407219b-6da2-47fb-a40c-adc0ff25cd9b - application/json 312
2025-10-08 15:04:50.551 +03:00 [INF] Request started
2025-10-08 15:04:50.553 +03:00 [INF] Processing request for tenant: 8bed874f-cf2a-4ffa-a188-4cfef779774a
2025-10-08 15:04:50.554 +03:00 [INF] Executing endpoint '405 HTTP Method Not Supported'
2025-10-08 15:04:50.555 +03:00 [INF] Executed endpoint '405 HTTP Method Not Supported'
2025-10-08 15:04:50.557 +03:00 [INF] Request completed successfully with status code 405
2025-10-08 15:04:50.558 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/PriceListItems/7407219b-6da2-47fb-a40c-adc0ff25cd9b - 405 0 null 11.0775ms
2025-10-08 15:08:39.739 +03:00 [INF] Starting web host...
2025-10-08 15:08:40.791 +03:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-08 15:08:40.872 +03:00 [INF] Executed DbCommand (62ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-10-08 15:08:40.950 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-08 15:08:40.956 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-08 15:08:40.971 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-08 15:08:41.037 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-08 15:08:41.054 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-08 15:08:41.058 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-08 15:08:41.072 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-08 15:08:41.086 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-10-08 15:08:41.093 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-08 15:08:41.265 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-08 15:08:41.274 +03:00 [INF] Master database initialized successfully
2025-10-08 15:08:42.633 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-08 15:08:42.737 +03:00 [INF] Now listening on: https://localhost:7168
2025-10-08 15:08:42.739 +03:00 [INF] Now listening on: http://localhost:5004
2025-10-08 15:08:42.809 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-08 15:08:42.811 +03:00 [INF] Hosting environment: Development
2025-10-08 15:08:42.812 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-10-08 15:08:43.121 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-08 15:08:43.239 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 118.8909ms
2025-10-08 15:08:43.242 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-08 15:08:43.242 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-08 15:08:43.250 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 7.1038ms
2025-10-08 15:08:43.271 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 28.3313ms
2025-10-08 15:08:43.316 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-08 15:08:43.442 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 126.4691ms
2025-10-08 15:09:08.948 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/PriceList/{7407219b-6da2-47fb-a40c-adc0ff25cd9b}/items - application/json 312
2025-10-08 15:09:08.965 +03:00 [INF] Request started
2025-10-08 15:09:08.970 +03:00 [INF] Processing request for tenant: 8bed874f-cf2a-4ffa-a188-4cfef779774a
2025-10-08 15:09:08.973 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.Create (ModularERP)'
2025-10-08 15:09:08.988 +03:00 [INF] Route matched with {action = "Create", controller = "PriceListItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(System.Guid, ModularERP.Modules.Inventory.Features.PriceLists.DTO.DTO_PriceList.CreatePriceListItemDto) on controller ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController (ModularERP).
2025-10-08 15:09:08.993 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-08 15:09:09.092 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-10-08 15:09:09.358 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-08 15:09:09.737 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.PriceLists.DTO.DTO_PriceList.PriceListItemDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-08 15:09:09.760 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.Create (ModularERP) in 767.6143ms
2025-10-08 15:09:09.763 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.Create (ModularERP)'
2025-10-08 15:09:09.765 +03:00 [INF] Request completed successfully with status code 200
2025-10-08 15:09:09.771 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/PriceList/{7407219b-6da2-47fb-a40c-adc0ff25cd9b}/items - 200 null application/json; charset=utf-8 822.7893ms
2025-10-08 15:11:16.959 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/PriceList/{1c0c6a77-f5b3-46e9-3bd4-08de06637c8c}/items - null null
2025-10-08 15:11:16.968 +03:00 [INF] Request started
2025-10-08 15:11:16.971 +03:00 [INF] Processing request for tenant: 8bed874f-cf2a-4ffa-a188-4cfef779774a
2025-10-08 15:11:16.972 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.GetAll (ModularERP)'
2025-10-08 15:11:16.978 +03:00 [INF] Route matched with {action = "GetAll", controller = "PriceListItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.Guid, Boolean, System.Nullable`1[System.DateTime]) on controller ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController (ModularERP).
2025-10-08 15:11:17.032 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.GetAll (ModularERP) in 51.2926ms
2025-10-08 15:11:17.035 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.GetAll (ModularERP)'
2025-10-08 15:11:17.037 +03:00 [ERR] Application exception occurred: Price list with ID 1c0c6a77-f5b3-46e9-3bd4-08de06637c8c not found
ModularERP.Common.Exceptions.NotFoundException: Price list with ID 1c0c6a77-f5b3-46e9-3bd4-08de06637c8c not found
   at ModularERP.Modules.Inventory.Features.PriceLists.Handlers.Handler_PriceList.GetPriceListItemsHandler.Handle(GetPriceListItemsQuery request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\PriceLists\Handlers\Handler_PriceList\GetPriceListItemsHandler.cs:line 39
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.GetAll(Guid priceListId, Boolean includeInactive, Nullable`1 asOfDate) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\PriceLists\Controllers\PriceListItemsController.cs:line 40
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_4>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 229
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-10-08 15:11:17.073 +03:00 [INF] Error response sent with status code 404
2025-10-08 15:11:17.076 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/PriceList/{1c0c6a77-f5b3-46e9-3bd4-08de06637c8c}/items - 404 null application/json; charset=utf-8 116.3675ms
2025-10-08 15:11:40.211 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/PriceList/{1c0c6a77-f5b3-46e9-3bd4-08de06637c8c}/items - null null
2025-10-08 15:11:40.215 +03:00 [INF] Request started
2025-10-08 15:11:40.217 +03:00 [INF] Processing request for tenant: 8bed874f-cf2a-4ffa-a188-4cfef779774a
2025-10-08 15:11:40.219 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.GetAll (ModularERP)'
2025-10-08 15:11:40.220 +03:00 [INF] Route matched with {action = "GetAll", controller = "PriceListItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.Guid, Boolean, System.Nullable`1[System.DateTime]) on controller ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController (ModularERP).
2025-10-08 15:11:40.226 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.GetAll (ModularERP) in 2.7545ms
2025-10-08 15:11:40.227 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.GetAll (ModularERP)'
2025-10-08 15:11:40.228 +03:00 [ERR] Application exception occurred: Price list with ID 1c0c6a77-f5b3-46e9-3bd4-08de06637c8c not found
ModularERP.Common.Exceptions.NotFoundException: Price list with ID 1c0c6a77-f5b3-46e9-3bd4-08de06637c8c not found
   at ModularERP.Modules.Inventory.Features.PriceLists.Handlers.Handler_PriceList.GetPriceListItemsHandler.Handle(GetPriceListItemsQuery request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\PriceLists\Handlers\Handler_PriceList\GetPriceListItemsHandler.cs:line 39
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.GetAll(Guid priceListId, Boolean includeInactive, Nullable`1 asOfDate) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\PriceLists\Controllers\PriceListItemsController.cs:line 40
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_4>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 229
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-10-08 15:11:40.239 +03:00 [INF] Error response sent with status code 404
2025-10-08 15:11:40.241 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/PriceList/{1c0c6a77-f5b3-46e9-3bd4-08de06637c8c}/items - 404 null application/json; charset=utf-8 30.6768ms
2025-10-08 15:12:42.533 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/PriceList/{7407219b-6da2-47fb-a40c-adc0ff25cd9b}/items - null null
2025-10-08 15:12:42.539 +03:00 [INF] Request started
2025-10-08 15:12:42.540 +03:00 [INF] Processing request for tenant: 8bed874f-cf2a-4ffa-a188-4cfef779774a
2025-10-08 15:12:42.540 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.GetAll (ModularERP)'
2025-10-08 15:12:42.542 +03:00 [INF] Route matched with {action = "GetAll", controller = "PriceListItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.Guid, Boolean, System.Nullable`1[System.DateTime]) on controller ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController (ModularERP).
2025-10-08 15:12:42.601 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[System.Collections.Generic.List`1[[ModularERP.Modules.Inventory.Features.PriceLists.DTO.DTO_PriceList.PriceListItemListDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-08 15:12:42.608 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.GetAll (ModularERP) in 63.6667ms
2025-10-08 15:12:42.610 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.GetAll (ModularERP)'
2025-10-08 15:12:42.612 +03:00 [INF] Request completed successfully with status code 200
2025-10-08 15:12:42.613 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/PriceList/{7407219b-6da2-47fb-a40c-adc0ff25cd9b}/items - 200 null application/json; charset=utf-8 79.5198ms
2025-10-08 15:17:11.565 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/PriceList/{7407219b-6da2-47fb-a40c-adc0ff25cd9b}/items - application/json 346
2025-10-08 15:17:11.568 +03:00 [INF] Request started
2025-10-08 15:17:11.569 +03:00 [INF] Processing request for tenant: 8bed874f-cf2a-4ffa-a188-4cfef779774a
2025-10-08 15:17:11.570 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.Create (ModularERP)'
2025-10-08 15:17:11.571 +03:00 [INF] Route matched with {action = "Create", controller = "PriceListItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(System.Guid, ModularERP.Modules.Inventory.Features.PriceLists.DTO.DTO_PriceList.CreatePriceListItemDto) on controller ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController (ModularERP).
2025-10-08 15:17:11.586 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.Create (ModularERP) in 11.9288ms
2025-10-08 15:17:11.588 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.Create (ModularERP)'
2025-10-08 15:17:11.589 +03:00 [WRN] Business logic exception occurred: This product or service already exists in the price list
ModularERP.Common.Exceptions.BusinessLogicException: This product or service already exists in the price list
   at ModularERP.Modules.Inventory.Features.PriceLists.Handlers.Handler_PriceList.CreatePriceListItemHandler.Handle(CreatePriceListItemCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\PriceLists\Handlers\Handler_PriceList\CreatePriceListItemHandler.cs:line 52
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.Create(Guid priceListId, CreatePriceListItemDto dto) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\PriceLists\Controllers\PriceListItemsController.cs:line 81
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_4>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 229
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-10-08 15:17:11.599 +03:00 [INF] Error response sent with status code 400
2025-10-08 15:17:11.600 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/PriceList/{7407219b-6da2-47fb-a40c-adc0ff25cd9b}/items - 400 null application/json; charset=utf-8 35.4591ms
2025-10-08 15:17:26.498 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/PriceList/{7407219b-6da2-47fb-a40c-adc0ff25cd9b}/items - application/json 346
2025-10-08 15:17:26.521 +03:00 [INF] Request started
2025-10-08 15:17:26.522 +03:00 [INF] Processing request for tenant: 8bed874f-cf2a-4ffa-a188-4cfef779774a
2025-10-08 15:17:26.524 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.Create (ModularERP)'
2025-10-08 15:17:26.525 +03:00 [INF] Route matched with {action = "Create", controller = "PriceListItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(System.Guid, ModularERP.Modules.Inventory.Features.PriceLists.DTO.DTO_PriceList.CreatePriceListItemDto) on controller ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController (ModularERP).
2025-10-08 15:17:26.574 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.Create (ModularERP) in 46.3088ms
2025-10-08 15:17:26.576 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.Create (ModularERP)'
2025-10-08 15:17:26.578 +03:00 [ERR] Unexpected error occurred
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the CHECK constraint "CK_PriceListItem_ProductOrService". The conflict occurred in database "ModularERP_Tenant_0ff3e71b0c6347979413d900ac5cda78", table "dbo.PriceListItems".
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:f1bc3048-d82e-455e-8b6c-79c27ddda4f6
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at ModularERP.Modules.Finance.Finance.Infrastructure.Data.FinanceDbContext.SaveChangesAsync(CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Finance\Finance.Infrastructure\Data\FinanceDbContext.cs:line 1744
   at ModularERP.SharedKernel.Repository.GeneralRepository`1.SaveChanges() in E:\ModelerERP\ModularERP\ModularERP\Shared\Repository\GeneralRepository.cs:line 157
   at ModularERP.Modules.Inventory.Features.PriceLists.Handlers.Handler_PriceList.CreatePriceListItemHandler.Handle(CreatePriceListItemCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\PriceLists\Handlers\Handler_PriceList\CreatePriceListItemHandler.cs:line 63
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.Create(Guid priceListId, CreatePriceListItemDto dto) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\PriceLists\Controllers\PriceListItemsController.cs:line 81
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_4>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 229
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-10-08 15:17:26.609 +03:00 [INF] Error response sent with status code 500
2025-10-08 15:17:26.611 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/PriceList/{7407219b-6da2-47fb-a40c-adc0ff25cd9b}/items - 500 null application/json; charset=utf-8 112.8323ms
2025-10-08 15:18:23.544 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/PriceList/{7407219b-6da2-47fb-a40c-adc0ff25cd9b}/items - application/json 290
2025-10-08 15:18:23.551 +03:00 [INF] Request started
2025-10-08 15:18:23.552 +03:00 [INF] Processing request for tenant: 8bed874f-cf2a-4ffa-a188-4cfef779774a
2025-10-08 15:18:23.554 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.Create (ModularERP)'
2025-10-08 15:18:23.557 +03:00 [INF] Route matched with {action = "Create", controller = "PriceListItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(System.Guid, ModularERP.Modules.Inventory.Features.PriceLists.DTO.DTO_PriceList.CreatePriceListItemDto) on controller ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController (ModularERP).
2025-10-08 15:18:23.592 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.PriceLists.DTO.DTO_PriceList.PriceListItemDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-08 15:18:23.595 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.Create (ModularERP) in 34.2272ms
2025-10-08 15:18:23.597 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.Create (ModularERP)'
2025-10-08 15:18:23.599 +03:00 [INF] Request completed successfully with status code 200
2025-10-08 15:18:23.600 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/PriceList/{7407219b-6da2-47fb-a40c-adc0ff25cd9b}/items - 200 null application/json; charset=utf-8 55.9941ms
2025-10-08 15:18:37.859 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/PriceList/{7407219b-6da2-47fb-a40c-adc0ff25cd9b}/items - null null
2025-10-08 15:18:37.862 +03:00 [INF] Request started
2025-10-08 15:18:37.863 +03:00 [INF] Processing request for tenant: 8bed874f-cf2a-4ffa-a188-4cfef779774a
2025-10-08 15:18:37.864 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.GetAll (ModularERP)'
2025-10-08 15:18:37.867 +03:00 [INF] Route matched with {action = "GetAll", controller = "PriceListItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.Guid, Boolean, System.Nullable`1[System.DateTime]) on controller ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController (ModularERP).
2025-10-08 15:18:37.879 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[System.Collections.Generic.List`1[[ModularERP.Modules.Inventory.Features.PriceLists.DTO.DTO_PriceList.PriceListItemListDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-08 15:18:37.883 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.GetAll (ModularERP) in 11.6238ms
2025-10-08 15:18:37.885 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.GetAll (ModularERP)'
2025-10-08 15:18:37.889 +03:00 [INF] Request completed successfully with status code 200
2025-10-08 15:18:37.891 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/PriceList/{7407219b-6da2-47fb-a40c-adc0ff25cd9b}/items - 200 null application/json; charset=utf-8 31.584ms
2025-10-08 15:20:12.690 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/PriceList/{7407219b-6da2-47fb-a40c-adc0ff25cd9b}/items/{1c0c6a77-f5b3-46e9-3bd4-08de06637c8c} - null null
2025-10-08 15:20:12.693 +03:00 [INF] Request started
2025-10-08 15:20:12.694 +03:00 [INF] Processing request for tenant: 8bed874f-cf2a-4ffa-a188-4cfef779774a
2025-10-08 15:20:12.695 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.GetById (ModularERP)'
2025-10-08 15:20:12.700 +03:00 [INF] Route matched with {action = "GetById", controller = "PriceListItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetById(System.Guid, System.Guid) on controller ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController (ModularERP).
2025-10-08 15:20:12.719 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.PriceLists.DTO.DTO_PriceList.PriceListItemDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-08 15:20:12.722 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.GetById (ModularERP) in 17.9201ms
2025-10-08 15:20:12.725 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.GetById (ModularERP)'
2025-10-08 15:20:12.726 +03:00 [INF] Request completed successfully with status code 200
2025-10-08 15:20:12.728 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/PriceList/{7407219b-6da2-47fb-a40c-adc0ff25cd9b}/items/{1c0c6a77-f5b3-46e9-3bd4-08de06637c8c} - 200 null application/json; charset=utf-8 37.6814ms
2025-10-08 15:20:34.337 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/PriceList/{7407219b-6da2-47fb-a40c-adc0ff25cd9b}/items/{f94101f7-ab5a-472b-3bd6-08de06637c8c} - null null
2025-10-08 15:20:34.342 +03:00 [INF] Request started
2025-10-08 15:20:34.343 +03:00 [INF] Processing request for tenant: 8bed874f-cf2a-4ffa-a188-4cfef779774a
2025-10-08 15:20:34.344 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.GetById (ModularERP)'
2025-10-08 15:20:34.349 +03:00 [INF] Route matched with {action = "GetById", controller = "PriceListItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetById(System.Guid, System.Guid) on controller ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController (ModularERP).
2025-10-08 15:20:34.354 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.PriceLists.DTO.DTO_PriceList.PriceListItemDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-08 15:20:34.355 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.GetById (ModularERP) in 3.5994ms
2025-10-08 15:20:34.363 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.GetById (ModularERP)'
2025-10-08 15:20:34.365 +03:00 [INF] Request completed successfully with status code 200
2025-10-08 15:20:34.368 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/PriceList/{7407219b-6da2-47fb-a40c-adc0ff25cd9b}/items/{f94101f7-ab5a-472b-3bd6-08de06637c8c} - 200 null application/json; charset=utf-8 30.4566ms
2025-10-08 15:20:45.286 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/PriceList/{7407219b-6da2-47fb-a40c-adc0ff25cd9b}/items/{1c0c6a77-f5b3-46e9-3bd4-08de06637c8c} - null null
2025-10-08 15:20:45.290 +03:00 [INF] Request started
2025-10-08 15:20:45.291 +03:00 [INF] Processing request for tenant: 8bed874f-cf2a-4ffa-a188-4cfef779774a
2025-10-08 15:20:45.292 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.GetById (ModularERP)'
2025-10-08 15:20:45.294 +03:00 [INF] Route matched with {action = "GetById", controller = "PriceListItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetById(System.Guid, System.Guid) on controller ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController (ModularERP).
2025-10-08 15:20:45.300 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.PriceLists.DTO.DTO_PriceList.PriceListItemDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-08 15:20:45.302 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.GetById (ModularERP) in 3.4989ms
2025-10-08 15:20:45.304 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.GetById (ModularERP)'
2025-10-08 15:20:45.308 +03:00 [INF] Request completed successfully with status code 200
2025-10-08 15:20:45.310 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/PriceList/{7407219b-6da2-47fb-a40c-adc0ff25cd9b}/items/{1c0c6a77-f5b3-46e9-3bd4-08de06637c8c} - 200 null application/json; charset=utf-8 24.4227ms
2025-10-08 15:21:07.831 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/PriceList/{7407219b-6da2-47fb-a40c-adc0ff25cd9b}/items/{f94101f7-ab5a-472b-3bd6-08de06637c8c} - null null
2025-10-08 15:21:07.836 +03:00 [INF] Request started
2025-10-08 15:21:07.837 +03:00 [INF] Processing request for tenant: 8bed874f-cf2a-4ffa-a188-4cfef779774a
2025-10-08 15:21:07.838 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.GetById (ModularERP)'
2025-10-08 15:21:07.842 +03:00 [INF] Route matched with {action = "GetById", controller = "PriceListItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetById(System.Guid, System.Guid) on controller ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController (ModularERP).
2025-10-08 15:21:07.852 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.PriceLists.DTO.DTO_PriceList.PriceListItemDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-08 15:21:07.855 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.GetById (ModularERP) in 10.5635ms
2025-10-08 15:21:07.859 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.GetById (ModularERP)'
2025-10-08 15:21:07.861 +03:00 [INF] Request completed successfully with status code 200
2025-10-08 15:21:07.863 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/PriceList/{7407219b-6da2-47fb-a40c-adc0ff25cd9b}/items/{f94101f7-ab5a-472b-3bd6-08de06637c8c} - 200 null application/json; charset=utf-8 32.0245ms
2025-10-08 15:27:54.328 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7168/api/PriceList/{7407219b-6da2-47fb-a40c-adc0ff25cd9b}/items/{f94101f7-ab5a-472b-3bd6-08de06637c8c} - application/json 230
2025-10-08 15:27:54.334 +03:00 [INF] Request started
2025-10-08 15:27:54.335 +03:00 [INF] Processing request for tenant: 8bed874f-cf2a-4ffa-a188-4cfef779774a
2025-10-08 15:27:54.337 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.Update (ModularERP)'
2025-10-08 15:27:54.343 +03:00 [INF] Route matched with {action = "Update", controller = "PriceListItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Update(System.Guid, System.Guid, ModularERP.Modules.Inventory.Features.PriceLists.DTO.DTO_PriceList.UpdatePriceListItemDto) on controller ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController (ModularERP).
2025-10-08 15:27:54.403 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.Update (ModularERP) in 54.9625ms
2025-10-08 15:27:54.406 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.Update (ModularERP)'
2025-10-08 15:27:54.408 +03:00 [ERR] Unexpected error occurred
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the FOREIGN KEY constraint "FK_PriceListItems_TaxProfiles_TaxProfileId". The conflict occurred in database "ModularERP_Tenant_0ff3e71b0c6347979413d900ac5cda78", table "dbo.TaxProfiles", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:e139cbd2-4fe7-4ed4-ad55-2420686baa1e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at ModularERP.Modules.Finance.Finance.Infrastructure.Data.FinanceDbContext.SaveChangesAsync(CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Finance\Finance.Infrastructure\Data\FinanceDbContext.cs:line 1744
   at ModularERP.SharedKernel.Repository.GeneralRepository`1.Update(T entity) in E:\ModelerERP\ModularERP\ModularERP\Shared\Repository\GeneralRepository.cs:line 118
   at ModularERP.Modules.Inventory.Features.PriceLists.Handlers.Handler_PriceList.UpdatePriceListItemHandler.Handle(UpdatePriceListItemCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\PriceLists\Handlers\Handler_PriceList\UpdatePriceListItemHandler.cs:line 45
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.Update(Guid priceListId, Guid itemId, UpdatePriceListItemDto dto) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\PriceLists\Controllers\PriceListItemsController.cs:line 104
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_4>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 229
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-10-08 15:27:54.472 +03:00 [INF] Error response sent with status code 500
2025-10-08 15:27:54.473 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7168/api/PriceList/{7407219b-6da2-47fb-a40c-adc0ff25cd9b}/items/{f94101f7-ab5a-472b-3bd6-08de06637c8c} - 500 null application/json; charset=utf-8 145.4162ms
2025-10-08 15:28:38.543 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7168/api/PriceList/{7407219b-6da2-47fb-a40c-adc0ff25cd9b}/items/{f94101f7-ab5a-472b-3bd6-08de06637c8c} - application/json 230
2025-10-08 15:28:38.550 +03:00 [INF] Request started
2025-10-08 15:28:38.551 +03:00 [INF] Processing request for tenant: 8bed874f-cf2a-4ffa-a188-4cfef779774a
2025-10-08 15:28:38.552 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.Update (ModularERP)'
2025-10-08 15:28:38.554 +03:00 [INF] Route matched with {action = "Update", controller = "PriceListItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Update(System.Guid, System.Guid, ModularERP.Modules.Inventory.Features.PriceLists.DTO.DTO_PriceList.UpdatePriceListItemDto) on controller ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController (ModularERP).
2025-10-08 15:28:38.579 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.PriceLists.DTO.DTO_PriceList.PriceListItemDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-08 15:28:38.582 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.Update (ModularERP) in 22.9316ms
2025-10-08 15:28:38.584 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.Update (ModularERP)'
2025-10-08 15:28:38.586 +03:00 [INF] Request completed successfully with status code 200
2025-10-08 15:28:38.587 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7168/api/PriceList/{7407219b-6da2-47fb-a40c-adc0ff25cd9b}/items/{f94101f7-ab5a-472b-3bd6-08de06637c8c} - 200 null application/json; charset=utf-8 44.5956ms
2025-10-08 15:32:40.951 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/PriceList/{7407219b-6da2-47fb-a40c-adc0ff25cd9b}/items/bulk - application/json 1194
2025-10-08 15:32:40.956 +03:00 [INF] Request started
2025-10-08 15:32:40.957 +03:00 [INF] Processing request for tenant: 8bed874f-cf2a-4ffa-a188-4cfef779774a
2025-10-08 15:32:40.958 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.BulkCreate (ModularERP)'
2025-10-08 15:32:40.962 +03:00 [INF] Route matched with {action = "BulkCreate", controller = "PriceListItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] BulkCreate(System.Guid, ModularERP.Modules.Inventory.Features.PriceLists.DTO.DTO_PriceList.BulkCreatePriceListItemDto) on controller ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController (ModularERP).
2025-10-08 15:32:40.983 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.BulkCreate (ModularERP) in 18.2587ms
2025-10-08 15:32:40.986 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.BulkCreate (ModularERP)'
2025-10-08 15:32:40.988 +03:00 [WRN] Business logic exception occurred: No valid items to add. All items already exist in the price list.
ModularERP.Common.Exceptions.BusinessLogicException: No valid items to add. All items already exist in the price list.
   at ModularERP.Modules.Inventory.Features.PriceLists.Handlers.Handler_PriceList.BulkCreatePriceListItemsHandler.Handle(BulkCreatePriceListItemsCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\PriceLists\Handlers\Handler_PriceList\BulkCreatePriceListItemsHandler.cs:line 72
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.BulkCreate(Guid priceListId, BulkCreatePriceListItemDto dto) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\PriceLists\Controllers\PriceListItemsController.cs:line 145
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_4>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 229
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-10-08 15:32:41.010 +03:00 [INF] Error response sent with status code 400
2025-10-08 15:32:41.012 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/PriceList/{7407219b-6da2-47fb-a40c-adc0ff25cd9b}/items/bulk - 400 null application/json; charset=utf-8 60.5142ms
2025-10-08 15:34:13.611 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/PriceList/{7407219b-6da2-47fb-a40c-adc0ff25cd9b}/items/bulk - application/json 1194
2025-10-08 15:34:13.615 +03:00 [INF] Request started
2025-10-08 15:34:13.616 +03:00 [INF] Processing request for tenant: 8bed874f-cf2a-4ffa-a188-4cfef779774a
2025-10-08 15:34:13.617 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.BulkCreate (ModularERP)'
2025-10-08 15:34:13.619 +03:00 [INF] Route matched with {action = "BulkCreate", controller = "PriceListItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] BulkCreate(System.Guid, ModularERP.Modules.Inventory.Features.PriceLists.DTO.DTO_PriceList.BulkCreatePriceListItemDto) on controller ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController (ModularERP).
2025-10-08 15:34:13.645 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.BulkCreate (ModularERP) in 22.0456ms
2025-10-08 15:34:13.647 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.BulkCreate (ModularERP)'
2025-10-08 15:34:13.649 +03:00 [ERR] Unexpected error occurred
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the CHECK constraint "CK_PriceListItem_ProductOrService". The conflict occurred in database "ModularERP_Tenant_0ff3e71b0c6347979413d900ac5cda78", table "dbo.PriceListItems".
The statement has been terminated.
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:e139cbd2-4fe7-4ed4-ad55-2420686baa1e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at ModularERP.Modules.Finance.Finance.Infrastructure.Data.FinanceDbContext.SaveChangesAsync(CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Finance\Finance.Infrastructure\Data\FinanceDbContext.cs:line 1744
   at ModularERP.SharedKernel.Repository.GeneralRepository`1.SaveChanges() in E:\ModelerERP\ModularERP\ModularERP\Shared\Repository\GeneralRepository.cs:line 157
   at ModularERP.Modules.Inventory.Features.PriceLists.Handlers.Handler_PriceList.BulkCreatePriceListItemsHandler.Handle(BulkCreatePriceListItemsCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\PriceLists\Handlers\Handler_PriceList\BulkCreatePriceListItemsHandler.cs:line 79
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.BulkCreate(Guid priceListId, BulkCreatePriceListItemDto dto) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\PriceLists\Controllers\PriceListItemsController.cs:line 145
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_4>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 229
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-10-08 15:34:13.697 +03:00 [INF] Error response sent with status code 500
2025-10-08 15:34:13.699 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/PriceList/{7407219b-6da2-47fb-a40c-adc0ff25cd9b}/items/bulk - 500 null application/json; charset=utf-8 88.4991ms
2025-10-08 15:36:16.246 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/PriceList/{7407219b-6da2-47fb-a40c-adc0ff25cd9b}/items/bulk - application/json 735
2025-10-08 15:36:16.254 +03:00 [INF] Request started
2025-10-08 15:36:16.256 +03:00 [INF] Processing request for tenant: 8bed874f-cf2a-4ffa-a188-4cfef779774a
2025-10-08 15:36:16.258 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.BulkCreate (ModularERP)'
2025-10-08 15:36:16.260 +03:00 [INF] Route matched with {action = "BulkCreate", controller = "PriceListItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] BulkCreate(System.Guid, ModularERP.Modules.Inventory.Features.PriceLists.DTO.DTO_PriceList.BulkCreatePriceListItemDto) on controller ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController (ModularERP).
2025-10-08 15:36:16.324 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[System.Collections.Generic.List`1[[ModularERP.Modules.Inventory.Features.PriceLists.DTO.DTO_PriceList.PriceListItemDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-08 15:36:16.328 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.BulkCreate (ModularERP) in 64.7991ms
2025-10-08 15:36:16.330 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListItemsController.BulkCreate (ModularERP)'
2025-10-08 15:36:16.333 +03:00 [INF] Request completed successfully with status code 200
2025-10-08 15:36:16.337 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/PriceList/{7407219b-6da2-47fb-a40c-adc0ff25cd9b}/items/bulk - 200 null application/json; charset=utf-8 90.7752ms
2025-10-08 17:45:59.854 +03:00 [INF] Starting web host...
2025-10-08 17:46:00.977 +03:00 [INF] Executed DbCommand (37ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-08 17:46:01.110 +03:00 [INF] Executed DbCommand (111ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-10-08 17:46:01.251 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-08 17:46:01.262 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-08 17:46:01.302 +03:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-08 17:46:01.405 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-08 17:46:01.426 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-08 17:46:01.430 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-08 17:46:01.463 +03:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-08 17:46:01.475 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-10-08 17:46:01.487 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-08 17:46:01.808 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-08 17:46:01.815 +03:00 [INF] Master database initialized successfully
2025-10-08 17:46:03.523 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-08 17:46:03.752 +03:00 [INF] Now listening on: https://localhost:7168
2025-10-08 17:46:03.754 +03:00 [INF] Now listening on: http://localhost:5004
2025-10-08 17:46:03.859 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-08 17:46:03.861 +03:00 [INF] Hosting environment: Development
2025-10-08 17:46:03.863 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-10-08 17:46:04.350 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-08 17:46:04.558 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 210.5558ms
2025-10-08 17:46:04.563 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-08 17:46:04.570 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 6.9684ms
2025-10-08 17:46:04.570 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-08 17:46:04.616 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 45.7153ms
2025-10-08 17:46:04.664 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-08 17:46:04.853 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 189.5907ms
2025-10-08 18:05:31.383 +03:00 [INF] Starting web host...
2025-10-08 18:05:34.783 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-08 18:05:34.837 +03:00 [INF] Executed DbCommand (38ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-10-08 18:05:34.908 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-08 18:05:34.915 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-08 18:05:34.919 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-08 18:05:34.975 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-08 18:05:34.991 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-08 18:05:34.995 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-08 18:05:35.003 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-08 18:05:35.015 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-10-08 18:05:35.019 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-08 18:05:35.201 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-08 18:05:35.209 +03:00 [INF] Master database initialized successfully
2025-10-08 18:05:37.084 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-08 18:05:37.209 +03:00 [INF] Now listening on: https://localhost:7168
2025-10-08 18:05:37.210 +03:00 [INF] Now listening on: http://localhost:5004
2025-10-08 18:05:37.332 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-08 18:05:37.333 +03:00 [INF] Hosting environment: Development
2025-10-08 18:05:37.335 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-10-08 18:05:40.481 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-08 18:05:40.619 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 139.2909ms
2025-10-08 18:05:40.628 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-08 18:05:40.636 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 7.3936ms
2025-10-08 18:05:40.638 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-08 18:05:40.671 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 32.4021ms
2025-10-08 18:05:40.734 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-08 18:05:40.876 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 142.8733ms
2025-10-08 18:06:09.437 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-08 18:06:09.449 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 11.5627ms
2025-10-08 18:06:09.457 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-08 18:06:09.457 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-08 18:06:09.463 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 6.3338ms
2025-10-08 18:06:09.468 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 11.3359ms
2025-10-08 18:06:09.538 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-08 18:06:09.622 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 83.9959ms
2025-10-08 18:06:19.119 +03:00 [INF] Starting web host...
2025-10-08 18:06:20.025 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-08 18:06:20.064 +03:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-10-08 18:06:20.135 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-08 18:06:20.141 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-08 18:06:20.147 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-08 18:06:20.206 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-08 18:06:20.222 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-08 18:06:20.227 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-08 18:06:20.233 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-08 18:06:20.245 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-10-08 18:06:20.257 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-08 18:06:20.450 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-08 18:06:20.465 +03:00 [INF] Master database initialized successfully
2025-10-08 18:06:21.782 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-08 18:06:21.877 +03:00 [INF] Now listening on: https://localhost:7168
2025-10-08 18:06:21.879 +03:00 [INF] Now listening on: http://localhost:5004
2025-10-08 18:06:21.961 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-08 18:06:21.963 +03:00 [INF] Hosting environment: Development
2025-10-08 18:06:21.964 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-10-08 18:06:22.235 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-08 18:06:22.363 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 128.8526ms
2025-10-08 18:06:22.378 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-08 18:06:22.378 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-08 18:06:22.385 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 7.4052ms
2025-10-08 18:06:22.409 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 31.6283ms
2025-10-08 18:06:22.463 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-08 18:06:22.577 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 113.2142ms
2025-10-08 18:35:38.679 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/price-lists/{7407219b-6da2-47fb-a40c-adc0ff25cd9b}/rules - application/json 135
2025-10-08 18:35:38.695 +03:00 [INF] Request started
2025-10-08 18:35:38.699 +03:00 [INF] Processing request for tenant: 8bed874f-cf2a-4ffa-a188-4cfef779774a
2025-10-08 18:35:38.702 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListRulesController.CreateRule (ModularERP)'
2025-10-08 18:35:38.717 +03:00 [INF] Route matched with {action = "CreateRule", controller = "PriceListRules"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.PriceLists.DTO.DTO_PriceRule.PriceListRuleResponseDTO]]] CreateRule(System.Guid, ModularERP.Modules.Inventory.Features.PriceLists.DTO.DTO_PriceRule.CreatePriceListRuleDTO) on controller ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListRulesController (ModularERP).
2025-10-08 18:35:38.724 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-08 18:35:38.884 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-10-08 18:35:39.229 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-08 18:35:39.258 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListRulesController.CreateRule (ModularERP) in 535.3491ms
2025-10-08 18:35:39.261 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListRulesController.CreateRule (ModularERP)'
2025-10-08 18:35:39.263 +03:00 [ERR] Unexpected error occurred
AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
CreatePriceListRuleDTO -> PriceListRule
ModularERP.Modules.Inventory.Features.PriceLists.DTO.DTO_PriceRule.CreatePriceListRuleDTO -> ModularERP.Modules.Inventory.Features.PriceLists.Models.PriceListRule
   at lambda_method158(Closure, Object, PriceListRule, ResolutionContext)
   at ModularERP.Modules.Inventory.Features.PriceLists.Handlers.Handler_PriceRule.CreatePriceListRuleHandler.Handle(CreatePriceListRuleCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\PriceLists\Handlers\Handler_PriceRule\CreatePriceListRuleHandler.cs:line 40
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListRulesController.CreateRule(Guid priceListId, CreatePriceListRuleDTO dto) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\PriceLists\Controllers\PriceListRulesController.cs:line 33
   at lambda_method94(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_4>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 229
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-10-08 18:35:39.324 +03:00 [INF] Error response sent with status code 500
2025-10-08 18:35:39.330 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/price-lists/{7407219b-6da2-47fb-a40c-adc0ff25cd9b}/rules - 500 null application/json; charset=utf-8 650.4694ms
2025-10-08 18:36:32.740 +03:00 [INF] Starting web host...
2025-10-08 18:36:33.829 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-08 18:36:33.872 +03:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-10-08 18:36:33.951 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-08 18:36:33.959 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-08 18:36:33.965 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-08 18:36:34.030 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-08 18:36:34.051 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-08 18:36:34.055 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-08 18:36:34.063 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-08 18:36:34.075 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-10-08 18:36:34.079 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-08 18:36:34.278 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-08 18:36:34.286 +03:00 [INF] Master database initialized successfully
2025-10-08 18:36:35.641 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-08 18:36:35.741 +03:00 [INF] Now listening on: https://localhost:7168
2025-10-08 18:36:35.743 +03:00 [INF] Now listening on: http://localhost:5004
2025-10-08 18:36:35.838 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-08 18:36:35.840 +03:00 [INF] Hosting environment: Development
2025-10-08 18:36:35.841 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-10-08 18:36:36.208 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-08 18:36:36.328 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 120.9132ms
2025-10-08 18:36:36.332 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-08 18:36:36.332 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-08 18:36:36.342 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 9.2181ms
2025-10-08 18:36:36.363 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 30.7547ms
2025-10-08 18:36:36.504 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-08 18:36:36.612 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 108.0805ms
2025-10-08 18:36:38.919 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/price-lists/{7407219b-6da2-47fb-a40c-adc0ff25cd9b}/rules - application/json 135
2025-10-08 18:36:38.936 +03:00 [INF] Request started
2025-10-08 18:36:38.941 +03:00 [INF] Processing request for tenant: 8bed874f-cf2a-4ffa-a188-4cfef779774a
2025-10-08 18:36:38.943 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListRulesController.CreateRule (ModularERP)'
2025-10-08 18:36:38.959 +03:00 [INF] Route matched with {action = "CreateRule", controller = "PriceListRules"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.PriceLists.DTO.DTO_PriceRule.PriceListRuleResponseDTO]]] CreateRule(System.Guid, ModularERP.Modules.Inventory.Features.PriceLists.DTO.DTO_PriceRule.CreatePriceListRuleDTO) on controller ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListRulesController (ModularERP).
2025-10-08 18:36:38.967 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-08 18:36:39.090 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-10-08 18:36:39.368 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-08 18:36:39.549 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.PriceLists.DTO.DTO_PriceRule.PriceListRuleResponseDTO, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-08 18:36:39.571 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListRulesController.CreateRule (ModularERP) in 604.5158ms
2025-10-08 18:36:39.574 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.PriceLists.Controllers.PriceListRulesController.CreateRule (ModularERP)'
2025-10-08 18:36:39.577 +03:00 [INF] Request completed successfully with status code 200
2025-10-08 18:36:39.583 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/price-lists/{7407219b-6da2-47fb-a40c-adc0ff25cd9b}/rules - 200 null application/json; charset=utf-8 664.0443ms
