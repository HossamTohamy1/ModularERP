2025-09-20 07:52:56.058 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-09-20 07:52:56.201 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 143.7076ms
2025-09-20 07:52:58.246 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/favicon.ico - null null
2025-09-20 07:52:58.264 +03:00 [INF] Request started
2025-09-20 07:52:58.266 +03:00 [INF] Request completed successfully with status code 404
2025-09-20 07:52:58.268 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/favicon.ico - 404 0 null 21.2487ms
2025-09-20 07:52:58.273 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7168/favicon.ico, Response status code: 404
2025-09-20 10:52:42.094 +03:00 [INF] Starting web host...
2025-09-20 10:52:42.951 +03:00 [INF] Now listening on: https://localhost:7168
2025-09-20 10:52:42.959 +03:00 [INF] Now listening on: http://localhost:5004
2025-09-20 10:52:43.054 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-20 10:52:43.056 +03:00 [INF] Hosting environment: Development
2025-09-20 10:52:43.058 +03:00 [INF] Content root path: C:\Users\hossny D. monkey\source\repos\ModularERP\ModularERP
2025-09-20 10:52:48.997 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/IncomeVouchers?Code=INC-125468&Date=2025-09-18T19:22:40.318Z&CurrencyCode=EGP&FxRate=1.0&Amount=600&Description=anu&CategoryId=f8cd0c63-50d7-4a69-a344-bc53be110f77&RecurrenceId=7b6fd5d0-11ec-43b6-b9d6-eba78273f3fe - multipart/form-data; boundary=--------------------------613761460307255460234889 99906
2025-09-20 10:52:49.056 +03:00 [INF] Request started
2025-09-20 10:52:49.061 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController.CreateIncomeVoucher (ModularERP)'
2025-09-20 10:52:49.097 +03:00 [INF] Route matched with {action = "CreateIncomeVoucher", controller = "IncomeVouchers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Finance.Features.IncomesVoucher.DTO.IncomeVoucherResponseDto]]] CreateIncomeVoucher(System.String, System.DateTime, System.String, System.Decimal, System.Decimal, System.String, System.Guid, System.Nullable`1[System.Guid], System.String, System.Guid, System.String, System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]) on controller ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController (ModularERP).
2025-09-20 10:52:49.104 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-20 10:52:49.162 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-09-20 10:52:49.210 +03:00 [INF] Executed action ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController.CreateIncomeVoucher (ModularERP) in 104.4169ms
2025-09-20 10:52:49.218 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController.CreateIncomeVoucher (ModularERP)'
2025-09-20 10:52:49.224 +03:00 [INF] Request completed successfully with status code 400
2025-09-20 10:52:49.234 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/IncomeVouchers?Code=INC-125468&Date=2025-09-18T19:22:40.318Z&CurrencyCode=EGP&FxRate=1.0&Amount=600&Description=anu&CategoryId=f8cd0c63-50d7-4a69-a344-bc53be110f77&RecurrenceId=7b6fd5d0-11ec-43b6-b9d6-eba78273f3fe - 400 null application/problem+json; charset=utf-8 239.4275ms
2025-09-20 11:28:29.281 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/IncomeVouchers?Code=INC-125468&Date=2025-09-18T19:22:40.318Z&CurrencyCode=EGP&FxRate=1.0&Amount=600&Description=anu&CategoryId=f8cd0c63-50d7-4a69-a344-bc53be110f77&RecurrenceId=7b6fd5d0-11ec-43b6-b9d6-eba78273f3fe - multipart/form-data; boundary=--------------------------117823623017797922143914 99887
2025-09-20 11:28:29.293 +03:00 [INF] Request started
2025-09-20 11:28:29.296 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController.CreateIncomeVoucher (ModularERP)'
2025-09-20 11:28:29.299 +03:00 [INF] Route matched with {action = "CreateIncomeVoucher", controller = "IncomeVouchers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Finance.Features.IncomesVoucher.DTO.IncomeVoucherResponseDto]]] CreateIncomeVoucher(System.String, System.DateTime, System.String, System.Decimal, System.Decimal, System.String, System.Guid, System.Nullable`1[System.Guid], System.String, System.Guid, System.String, System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]) on controller ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController (ModularERP).
2025-09-20 11:28:29.316 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-09-20 11:28:29.323 +03:00 [INF] Executed action ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController.CreateIncomeVoucher (ModularERP) in 16.4198ms
2025-09-20 11:28:29.328 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController.CreateIncomeVoucher (ModularERP)'
2025-09-20 11:28:29.332 +03:00 [INF] Request completed successfully with status code 400
2025-09-20 11:28:29.337 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/IncomeVouchers?Code=INC-125468&Date=2025-09-18T19:22:40.318Z&CurrencyCode=EGP&FxRate=1.0&Amount=600&Description=anu&CategoryId=f8cd0c63-50d7-4a69-a344-bc53be110f77&RecurrenceId=7b6fd5d0-11ec-43b6-b9d6-eba78273f3fe - 400 null application/problem+json; charset=utf-8 55.9869ms
2025-09-20 11:31:32.050 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/IncomeVouchers?Code=INC-125468&Date=2025-09-18T19:22:40.318Z&CurrencyCode=EGP&FxRate=1.0&Amount=600&Description=anu&CategoryId=f8cd0c63-50d7-4a69-a344-bc53be110f77&RecurrenceId=7b6fd5d0-11ec-43b6-b9d6-eba78273f3fe - multipart/form-data; boundary=--------------------------462471721019544217861777 99887
2025-09-20 11:31:32.066 +03:00 [INF] Request started
2025-09-20 11:31:32.070 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController.CreateIncomeVoucher (ModularERP)'
2025-09-20 11:31:32.074 +03:00 [INF] Route matched with {action = "CreateIncomeVoucher", controller = "IncomeVouchers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Finance.Features.IncomesVoucher.DTO.IncomeVoucherResponseDto]]] CreateIncomeVoucher(System.String, System.DateTime, System.String, System.Decimal, System.Decimal, System.String, System.Guid, System.Nullable`1[System.Guid], System.String, System.Guid, System.String, System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]) on controller ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController (ModularERP).
2025-09-20 11:31:32.087 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-09-20 11:31:32.093 +03:00 [INF] Executed action ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController.CreateIncomeVoucher (ModularERP) in 10.2581ms
2025-09-20 11:31:32.098 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController.CreateIncomeVoucher (ModularERP)'
2025-09-20 11:31:32.102 +03:00 [INF] Request completed successfully with status code 400
2025-09-20 11:31:32.106 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/IncomeVouchers?Code=INC-125468&Date=2025-09-18T19:22:40.318Z&CurrencyCode=EGP&FxRate=1.0&Amount=600&Description=anu&CategoryId=f8cd0c63-50d7-4a69-a344-bc53be110f77&RecurrenceId=7b6fd5d0-11ec-43b6-b9d6-eba78273f3fe - 400 null application/problem+json; charset=utf-8 55.9451ms
2025-09-20 11:33:11.068 +03:00 [INF] Starting web host...
2025-09-20 11:33:11.774 +03:00 [INF] Now listening on: https://localhost:7168
2025-09-20 11:33:11.783 +03:00 [INF] Now listening on: http://localhost:5004
2025-09-20 11:33:11.932 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-20 11:33:11.935 +03:00 [INF] Hosting environment: Development
2025-09-20 11:33:11.936 +03:00 [INF] Content root path: C:\Users\hossny D. monkey\source\repos\ModularERP\ModularERP
2025-09-20 11:33:28.141 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/IncomeVouchers?Code=INC-125468&Date=2025-09-18T19:22:40.318Z&CurrencyCode=EGP&FxRate=1.0&Amount=600&Description=anu&CategoryId=f8cd0c63-50d7-4a69-a344-bc53be110f77&RecurrenceId=7b6fd5d0-11ec-43b6-b9d6-eba78273f3fe - multipart/form-data; boundary=--------------------------701937601011067975673189 99887
2025-09-20 11:33:28.194 +03:00 [INF] Request started
2025-09-20 11:33:28.199 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController.CreateIncomeVoucher (ModularERP)'
2025-09-20 11:33:28.228 +03:00 [INF] Route matched with {action = "CreateIncomeVoucher", controller = "IncomeVouchers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Finance.Features.IncomesVoucher.DTO.IncomeVoucherResponseDto]]] CreateIncomeVoucher(System.String, System.DateTime, System.String, System.Decimal, System.Decimal, System.String, System.Guid, System.Nullable`1[System.Guid], System.String, System.Guid, System.String, System.String, System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]) on controller ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController (ModularERP).
2025-09-20 11:33:28.236 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-20 11:33:29.960 +03:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-20 11:33:30.618 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-20 11:33:30.659 +03:00 [INF] Start creating income voucher with data: {"Code":"INC-14589","Date":"2025-09-18T19:22:40.3180000Z","Amount":500,"SourceJson":"{\"Type\":\"BankAccount\",\"Id\":\"4fe6e0a3-b441-45f6-96a4-0a1c499bbe56\"}","TaxLinesJson":"[{\"TaxId\":\"020c0bbf-8202-42d8-9692-2fc202aa5c08\",\"BaseAmount\":100,\"TaxAmount\":14.0,\"IsWithholding\":true}]","AttachmentsCount":1}
2025-09-20 11:33:30.677 +03:00 [ERR] Unhandled error occurred while creating income voucher.
System.NullReferenceException: Object reference not set to an instance of an object.
   at ModularERP.Modules.Finance.Features.IncomesVoucher.Handlers.CreateIncomeVoucherHandler.Handle(CreateIncomeVoucherCommand request, CancellationToken cancellationToken) in C:\Users\hossny D. monkey\source\repos\ModularERP\ModularERP\Modules\Finance\Features\IncomesVoucher\Handlers\CreateIncomeVoucherHandler.cs:line 61
2025-09-20 11:33:30.715 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Finance.Features.IncomesVoucher.DTO.IncomeVoucherResponseDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-20 11:33:30.750 +03:00 [INF] Executed action ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController.CreateIncomeVoucher (ModularERP) in 2512.7205ms
2025-09-20 11:33:30.759 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController.CreateIncomeVoucher (ModularERP)'
2025-09-20 11:33:30.764 +03:00 [INF] Request completed successfully with status code 400
2025-09-20 11:33:30.787 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/IncomeVouchers?Code=INC-125468&Date=2025-09-18T19:22:40.318Z&CurrencyCode=EGP&FxRate=1.0&Amount=600&Description=anu&CategoryId=f8cd0c63-50d7-4a69-a344-bc53be110f77&RecurrenceId=7b6fd5d0-11ec-43b6-b9d6-eba78273f3fe - 400 null application/json; charset=utf-8 2647.3494ms
2025-09-20 11:33:46.367 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/IncomeVouchers?Code=INC-125468&Date=2025-09-18T19:22:40.318Z&CurrencyCode=EGP&FxRate=1.0&Amount=600&Description=anu&CategoryId=f8cd0c63-50d7-4a69-a344-bc53be110f77&RecurrenceId=7b6fd5d0-11ec-43b6-b9d6-eba78273f3fe - multipart/form-data; boundary=--------------------------589828745865564090198436 99887
2025-09-20 11:33:46.377 +03:00 [INF] Request started
2025-09-20 11:33:46.379 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController.CreateIncomeVoucher (ModularERP)'
2025-09-20 11:33:46.383 +03:00 [INF] Route matched with {action = "CreateIncomeVoucher", controller = "IncomeVouchers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Finance.Features.IncomesVoucher.DTO.IncomeVoucherResponseDto]]] CreateIncomeVoucher(System.String, System.DateTime, System.String, System.Decimal, System.Decimal, System.String, System.Guid, System.Nullable`1[System.Guid], System.String, System.Guid, System.String, System.String, System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]) on controller ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController (ModularERP).
2025-09-20 11:33:46.452 +03:00 [INF] Start creating income voucher with data: {"Code":"INC-14589","Date":"2025-09-18T19:22:40.3180000Z","Amount":500,"SourceJson":"{\"Type\":\"BankAccount\",\"Id\":\"4fe6e0a3-b441-45f6-96a4-0a1c499bbe56\"}","TaxLinesJson":"[{\"TaxId\":\"020c0bbf-8202-42d8-9692-2fc202aa5c08\",\"BaseAmount\":100,\"TaxAmount\":14.0,\"IsWithholding\":true}]","AttachmentsCount":1}
2025-09-20 11:33:46.467 +03:00 [ERR] Unhandled error occurred while creating income voucher.
System.NullReferenceException: Object reference not set to an instance of an object.
   at ModularERP.Modules.Finance.Features.IncomesVoucher.Handlers.CreateIncomeVoucherHandler.Handle(CreateIncomeVoucherCommand request, CancellationToken cancellationToken) in C:\Users\hossny D. monkey\source\repos\ModularERP\ModularERP\Modules\Finance\Features\IncomesVoucher\Handlers\CreateIncomeVoucherHandler.cs:line 61
2025-09-20 11:33:46.469 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Finance.Features.IncomesVoucher.DTO.IncomeVoucherResponseDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-20 11:33:46.472 +03:00 [INF] Executed action ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController.CreateIncomeVoucher (ModularERP) in 85.1332ms
2025-09-20 11:33:46.476 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController.CreateIncomeVoucher (ModularERP)'
2025-09-20 11:33:46.478 +03:00 [INF] Request completed successfully with status code 400
2025-09-20 11:33:46.482 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/IncomeVouchers?Code=INC-125468&Date=2025-09-18T19:22:40.318Z&CurrencyCode=EGP&FxRate=1.0&Amount=600&Description=anu&CategoryId=f8cd0c63-50d7-4a69-a344-bc53be110f77&RecurrenceId=7b6fd5d0-11ec-43b6-b9d6-eba78273f3fe - 400 null application/json; charset=utf-8 114.5332ms
2025-09-20 11:44:13.663 +03:00 [INF] Starting web host...
2025-09-20 11:44:14.244 +03:00 [INF] Now listening on: https://localhost:7168
2025-09-20 11:44:14.250 +03:00 [INF] Now listening on: http://localhost:5004
2025-09-20 11:44:14.395 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-20 11:44:14.400 +03:00 [INF] Hosting environment: Development
2025-09-20 11:44:14.404 +03:00 [INF] Content root path: C:\Users\hossny D. monkey\source\repos\ModularERP\ModularERP
2025-09-20 11:44:19.042 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/IncomeVouchers?Code=INC-125468&Date=2025-09-18T19:22:40.318Z&CurrencyCode=EGP&FxRate=1.0&Amount=600&Description=anu&CategoryId=f8cd0c63-50d7-4a69-a344-bc53be110f77&RecurrenceId=7b6fd5d0-11ec-43b6-b9d6-eba78273f3fe - multipart/form-data; boundary=--------------------------275824235610326863424930 99887
2025-09-20 11:44:19.094 +03:00 [INF] Request started
2025-09-20 11:44:19.099 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController.CreateIncomeVoucher (ModularERP)'
2025-09-20 11:44:19.129 +03:00 [INF] Route matched with {action = "CreateIncomeVoucher", controller = "IncomeVouchers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Finance.Features.IncomesVoucher.DTO.IncomeVoucherResponseDto]]] CreateIncomeVoucher(System.String, System.DateTime, System.String, System.Decimal, System.Decimal, System.String, System.Guid, System.Nullable`1[System.Guid], System.String, System.Guid, System.String, System.String, System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]) on controller ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController (ModularERP).
2025-09-20 11:44:19.138 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-20 11:44:20.099 +03:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-20 11:44:20.531 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-20 11:44:20.570 +03:00 [INF] Start creating income voucher with data: {"Code":"INC-14589","Date":"2025-09-18T19:22:40.3180000Z","Amount":500,"Description":"ant","CategoryId":"d880c62f-a545-41fe-876d-f76a4a6c1077","SourceJson":"{\"Type\":\"BankAccount\",\"Id\":\"4fe6e0a3-b441-45f6-96a4-0a1c499bbe56\"}","TaxLinesJson":"[{\"TaxId\":\"020c0bbf-8202-42d8-9692-2fc202aa5c08\",\"BaseAmount\":100,\"TaxAmount\":14.0,\"IsWithholding\":true}]","CounterpartyJson":"{\"Type\":\"Vendor\",\"Id\":\"3fa85f64-5717-4562-b3fc-2c963f66afa6\"}","AttachmentsCount":1}
2025-09-20 11:44:20.626 +03:00 [ERR] Unhandled error occurred while creating income voucher.
System.NullReferenceException: NullReferenceException occurred when executing rule for x => x.Source.Type. If this property can be null you should add a null check using a When condition
 ---> System.NullReferenceException: Object reference not set to an instance of an object.
   at lambda_method38(Closure, CreateIncomeVoucherDto)
   at FluentValidation.Internal.PropertyRule`2.<>c__DisplayClass1_0.<Create>b__0(T x) in /_/src/FluentValidation/Internal/PropertyRule.cs:line 43
   at FluentValidation.Internal.PropertyRule`2.ValidateAsync(ValidationContext`1 context, CancellationToken cancellation) in /_/src/FluentValidation/Internal/PropertyRule.cs:line 115
   --- End of inner exception stack trace ---
   at FluentValidation.Internal.PropertyRule`2.ValidateAsync(ValidationContext`1 context, CancellationToken cancellation) in /_/src/FluentValidation/Internal/PropertyRule.cs:line 118
   at FluentValidation.AbstractValidator`1.ValidateInternalAsync(ValidationContext`1 context, CancellationToken cancellation) in /_/src/FluentValidation/AbstractValidator.cs:line 164
   at FluentValidation.AbstractValidator`1.ValidateAsync(ValidationContext`1 context, CancellationToken cancellation) in /_/src/FluentValidation/AbstractValidator.cs:line 137
   at ModularERP.Modules.Finance.Features.IncomesVoucher.Handlers.CreateIncomeVoucherHandler.Handle(CreateIncomeVoucherCommand request, CancellationToken cancellationToken) in C:\Users\hossny D. monkey\source\repos\ModularERP\ModularERP\Modules\Finance\Features\IncomesVoucher\Handlers\CreateIncomeVoucherHandler.cs:line 65
2025-09-20 11:44:20.675 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Finance.Features.IncomesVoucher.DTO.IncomeVoucherResponseDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-20 11:44:20.711 +03:00 [INF] Executed action ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController.CreateIncomeVoucher (ModularERP) in 1572.3389ms
2025-09-20 11:44:20.722 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController.CreateIncomeVoucher (ModularERP)'
2025-09-20 11:44:20.726 +03:00 [INF] Request completed successfully with status code 400
2025-09-20 11:44:20.751 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/IncomeVouchers?Code=INC-125468&Date=2025-09-18T19:22:40.318Z&CurrencyCode=EGP&FxRate=1.0&Amount=600&Description=anu&CategoryId=f8cd0c63-50d7-4a69-a344-bc53be110f77&RecurrenceId=7b6fd5d0-11ec-43b6-b9d6-eba78273f3fe - 400 null application/json; charset=utf-8 1710.8456ms
2025-09-20 11:48:58.337 +03:00 [INF] Starting web host...
2025-09-20 11:48:59.132 +03:00 [INF] Now listening on: https://localhost:7168
2025-09-20 11:48:59.141 +03:00 [INF] Now listening on: http://localhost:5004
2025-09-20 11:48:59.263 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-20 11:48:59.266 +03:00 [INF] Hosting environment: Development
2025-09-20 11:48:59.268 +03:00 [INF] Content root path: C:\Users\hossny D. monkey\source\repos\ModularERP\ModularERP
2025-09-20 11:49:04.908 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/IncomeVouchers?Code=INC-125468&Date=2025-09-18T19:22:40.318Z&CurrencyCode=EGP&FxRate=1.0&Amount=600&Description=anu&CategoryId=f8cd0c63-50d7-4a69-a344-bc53be110f77&RecurrenceId=7b6fd5d0-11ec-43b6-b9d6-eba78273f3fe - multipart/form-data; boundary=--------------------------156038178950920479492097 99887
2025-09-20 11:49:04.965 +03:00 [INF] Request started
2025-09-20 11:49:04.970 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController.CreateIncomeVoucher (ModularERP)'
2025-09-20 11:49:05.000 +03:00 [INF] Route matched with {action = "CreateIncomeVoucher", controller = "IncomeVouchers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Finance.Features.IncomesVoucher.DTO.IncomeVoucherResponseDto]]] CreateIncomeVoucher(System.String, System.DateTime, System.String, System.Decimal, System.Decimal, System.String, System.Guid, System.Nullable`1[System.Guid], System.String, System.Guid, System.String, System.String, System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]) on controller ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController (ModularERP).
2025-09-20 11:49:05.009 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-20 11:49:06.090 +03:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-20 11:49:06.814 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-20 11:49:06.904 +03:00 [INF] Start creating income voucher with data: {"Code":"INC-14589","Date":"2025-09-18T19:22:40.3180000Z","Amount":500,"Description":"ant","CategoryId":"d880c62f-a545-41fe-876d-f76a4a6c1077","SourceId":"4fe6e0a3-b441-45f6-96a4-0a1c499bbe56","SourceType":"BankAccount","SourceJson":"{\"Type\":\"BankAccount\",\"Id\":\"4fe6e0a3-b441-45f6-96a4-0a1c499bbe56\"}","TaxLinesJson":"[{\"TaxId\":\"020c0bbf-8202-42d8-9692-2fc202aa5c08\",\"BaseAmount\":100,\"TaxAmount\":14.0,\"IsWithholding\":true}]","CounterpartyJson":"{\"Type\":\"Vendor\",\"Id\":\"3fa85f64-5717-4562-b3fc-2c963f66afa6\"}","AttachmentsCount":1}
2025-09-20 11:49:07.082 +03:00 [INF] Validation passed successfully.
2025-09-20 11:49:09.148 +03:00 [INF] Executed DbCommand (112ms) [Parameters=[@__id_0='4fe6e0a3-b441-45f6-96a4-0a1c499bbe56'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[AccountNumber], [b].[BankName], [b].[CompanyId], [b].[CreatedAt], [b].[CreatedById], [b].[CurrencyCode], [b].[DepositAcl], [b].[Description], [b].[IsActive], [b].[IsDeleted], [b].[JournalAccountId], [b].[Name], [b].[Status], [b].[UpdatedAt], [b].[UpdatedById], [b].[WithdrawAcl]
FROM [BankAccounts] AS [b]
WHERE [b].[Id] = @__id_0
2025-09-20 11:49:09.537 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='d880c62f-a545-41fe-876d-f76a4a6c1077'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[Code], [g].[CompanyId], [g].[CreatedAt], [g].[CreatedById], [g].[IsActive], [g].[IsDeleted], [g].[IsLeaf], [g].[Name], [g].[Type], [g].[UpdatedAt], [g].[UpdatedById]
FROM [GlAccounts] AS [g]
WHERE [g].[Id] = @__id_0
2025-09-20 11:49:09.654 +03:00 [INF] Business validations passed successfully.
2025-09-20 11:49:09.743 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@__code_0='INC-14589' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Vouchers] AS [v]
        WHERE [v].[CompanyId] = 'd00cf078-c1ff-4feb-ae37-d66a827ae438' AND [v].[Code] = @__code_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-20 11:49:09.813 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='4fe6e0a3-b441-45f6-96a4-0a1c499bbe56'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[AccountNumber], [b].[BankName], [b].[CompanyId], [b].[CreatedAt], [b].[CreatedById], [b].[CurrencyCode], [b].[DepositAcl], [b].[Description], [b].[IsActive], [b].[IsDeleted], [b].[JournalAccountId], [b].[Name], [b].[Status], [b].[UpdatedAt], [b].[UpdatedById], [b].[WithdrawAcl]
FROM [BankAccounts] AS [b]
WHERE [b].[Id] = @__id_0
2025-09-20 11:49:09.848 +03:00 [INF] Adding voucher to repository: {"Code":"INC-14589","Amount":500,"Date":"2025-09-18T19:22:40.3180000Z"}
2025-09-20 11:49:10.765 +03:00 [INF] Executed DbCommand (59ms) [Parameters=[@p0='69e8a9da-71ea-42ce-d094-08ddf82290e9', @p1='500' (Precision = 18) (Scale = 2), @p2=NULL (DbType = Guid), @p3='d880c62f-a545-41fe-876d-f76a4a6c1077', @p4='INC-14589' (Nullable = false) (Size = 20), @p5='d00cf078-c1ff-4feb-ae37-d66a827ae438', @p6='3fa85f64-5717-4562-b3fc-2c963f66afa6' (Nullable = true), @p7='Vendor' (Size = 450), @p8='2025-09-20T08:49:09.8033271Z', @p9='5dbceb39-9677-46d7-bf8a-2eb914c55437', @p10=NULL (Size = 4000), @p11='EGP' (Nullable = false) (Size = 3), @p12='2025-09-18T19:22:40.3180000Z', @p13='ant' (Size = 4000), @p14='1.0' (Precision = 18) (Scale = 6), @p15='True', @p16='False', @p17='f8cd0c63-50d7-4a69-a344-bc53be110f77', @p18=NULL (DbType = DateTime2), @p19=NULL (DbType = Guid), @p20='7b6fd5d0-11ec-43b6-b9d6-eba78273f3fe' (Nullable = true), @p21=NULL (DbType = Guid), @p22=NULL (DbType = DateTime2), @p23=NULL (DbType = Guid), @p24='0', @p25='Draft' (Nullable = false) (Size = 450), @p26=NULL (DbType = Guid), @p27='Income' (Nullable = false) (Size = 450), @p28=NULL (DbType = DateTime2), @p29=NULL (Size = 4000), @p30='4fe6e0a3-b441-45f6-96a4-0a1c499bbe56', @p31='BankAccount' (Nullable = false) (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Vouchers] ([Id], [Amount], [BankAccountId], [CategoryAccountId], [Code], [CompanyId], [CounterpartyId], [CounterpartyType], [CreatedAt], [CreatedBy], [CreatedById], [CurrencyCode], [Date], [Description], [FxRate], [IsActive], [IsDeleted], [JournalAccountId], [PostedAt], [PostedBy], [RecurrenceId], [RecurringScheduleId], [ReversedAt], [ReversedBy], [Revision], [Status], [TreasuryId], [Type], [UpdatedAt], [UpdatedById], [WalletId], [WalletType])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31);
2025-09-20 11:49:10.848 +03:00 [INF] Voucher saved successfully with ID: "69e8a9da-71ea-42ce-d094-08ddf82290e9"
2025-09-20 11:49:10.853 +03:00 [INF] Processing 1 attachments
2025-09-20 11:49:11.049 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[@p0='ee4ee4dc-4933-4967-d865-08ddf822916e', @p1=NULL (Size = 64), @p2='2025-09-20T08:49:10.8788928Z', @p3=NULL (Size = 4000), @p4='/uploads/2437c47e-4522-4420-a6af-a2e4907cd8b6_Hossam-Reda-Tohamy-Full Stack NET Angular.pdf' (Nullable = false) (Size = 500), @p5='0', @p6='Hossam-Reda-Tohamy-Full Stack NET Angular.pdf' (Nullable = false) (Size = 255), @p7='True', @p8='False', @p9='' (Nullable = false) (Size = 100), @p10=NULL (DbType = DateTime2), @p11=NULL (Size = 4000), @p12='2025-09-20T08:49:10.8794310Z', @p13='5dbceb39-9677-46d7-bf8a-2eb914c55437', @p14='69e8a9da-71ea-42ce-d094-08ddf82290e9'], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Attachments] ([Id], [Checksum], [CreatedAt], [CreatedById], [FilePath], [FileSize], [Filename], [IsActive], [IsDeleted], [MimeType], [UpdatedAt], [UpdatedById], [UploadedAt], [UploadedBy], [VoucherId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-09-20 11:49:11.090 +03:00 [INF] Successfully added 1 attachments
2025-09-20 11:49:11.097 +03:00 [INF] Voucher "69e8a9da-71ea-42ce-d094-08ddf82290e9" created successfully with 1 attachments.
2025-09-20 11:49:11.170 +03:00 [INF] Executing CreatedAtActionResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Finance.Features.IncomesVoucher.DTO.IncomeVoucherResponseDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-20 11:49:11.326 +03:00 [INF] Executed action ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController.CreateIncomeVoucher (ModularERP) in 6309.3587ms
2025-09-20 11:49:11.337 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController.CreateIncomeVoucher (ModularERP)'
2025-09-20 11:49:11.346 +03:00 [INF] Request completed successfully with status code 201
2025-09-20 11:49:11.397 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/IncomeVouchers?Code=INC-125468&Date=2025-09-18T19:22:40.318Z&CurrencyCode=EGP&FxRate=1.0&Amount=600&Description=anu&CategoryId=f8cd0c63-50d7-4a69-a344-bc53be110f77&RecurrenceId=7b6fd5d0-11ec-43b6-b9d6-eba78273f3fe - 201 null application/json; charset=utf-8 6489.9212ms
2025-09-20 11:50:51.844 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-09-20 11:50:52.312 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 468.0707ms
2025-09-20 11:50:54.316 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-09-20 11:50:54.316 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-09-20 11:50:54.330 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 13.8255ms
2025-09-20 11:50:54.416 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 100.3934ms
2025-09-20 11:50:54.919 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-09-20 11:50:54.994 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 74.925ms
2025-09-20 11:51:18.668 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/api/IncomeVouchers/69e8a9da-71ea-42ce-d094-08ddf82290e9 - null null
2025-09-20 11:51:18.679 +03:00 [INF] Request started
2025-09-20 11:51:18.684 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController.GetIncomeVoucher (ModularERP)'
2025-09-20 11:51:18.701 +03:00 [INF] Route matched with {action = "GetIncomeVoucher", controller = "IncomeVouchers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Finance.Features.IncomesVoucher.DTO.IncomeVoucherResponseDto]]] GetIncomeVoucher(System.Guid) on controller ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController (ModularERP).
2025-09-20 11:51:18.864 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='69e8a9da-71ea-42ce-d094-08ddf82290e9'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [v].[Id], [v].[Amount], [v].[BankAccountId], [v].[CategoryAccountId], [v].[Code], [v].[CompanyId], [v].[CounterpartyId], [v].[CounterpartyType], [v].[CreatedAt], [v].[CreatedBy], [v].[CreatedById], [v].[CurrencyCode], [v].[Date], [v].[Description], [v].[FxRate], [v].[IsActive], [v].[IsDeleted], [v].[JournalAccountId], [v].[PostedAt], [v].[PostedBy], [v].[RecurrenceId], [v].[RecurringScheduleId], [v].[ReversedAt], [v].[ReversedBy], [v].[Revision], [v].[Status], [v].[TreasuryId], [v].[Type], [v].[UpdatedAt], [v].[UpdatedById], [v].[WalletId], [v].[WalletType]
FROM [Vouchers] AS [v]
WHERE [v].[Id] = @__id_0
2025-09-20 11:51:18.951 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__voucher_Id_0='69e8a9da-71ea-42ce-d094-08ddf82290e9'], CommandType='"Text"', CommandTimeout='30']
SELECT [v].[Id], [v].[BaseAmount], [v].[CreatedAt], [v].[CreatedById], [v].[Direction], [v].[IsActive], [v].[IsDeleted], [v].[IsWithholding], [v].[TaxAmount], [v].[TaxId], [v].[UpdatedAt], [v].[UpdatedById], [v].[VoucherId]
FROM [VoucherTaxes] AS [v]
WHERE [v].[IsDeleted] = CAST(0 AS bit) AND [v].[VoucherId] = @__voucher_Id_0
2025-09-20 11:51:19.003 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__voucher_Id_0='69e8a9da-71ea-42ce-d094-08ddf82290e9'], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Checksum], [a].[CreatedAt], [a].[CreatedById], [a].[FilePath], [a].[FileSize], [a].[Filename], [a].[IsActive], [a].[IsDeleted], [a].[MimeType], [a].[UpdatedAt], [a].[UpdatedById], [a].[UploadedAt], [a].[UploadedBy], [a].[VoucherId]
FROM [Attachments] AS [a]
WHERE [a].[IsDeleted] = CAST(0 AS bit) AND [a].[VoucherId] = @__voucher_Id_0
2025-09-20 11:51:19.040 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Finance.Features.IncomesVoucher.DTO.IncomeVoucherResponseDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-20 11:51:19.049 +03:00 [INF] Executed action ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController.GetIncomeVoucher (ModularERP) in 343.8076ms
2025-09-20 11:51:19.058 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController.GetIncomeVoucher (ModularERP)'
2025-09-20 11:51:19.065 +03:00 [INF] Request completed successfully with status code 200
2025-09-20 11:51:19.072 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/api/IncomeVouchers/69e8a9da-71ea-42ce-d094-08ddf82290e9 - 200 null application/json; charset=utf-8 403.4836ms
2025-09-20 12:00:47.013 +03:00 [INF] Starting web host...
2025-09-20 12:00:47.893 +03:00 [INF] Now listening on: https://localhost:7168
2025-09-20 12:00:47.901 +03:00 [INF] Now listening on: http://localhost:5004
2025-09-20 12:00:48.071 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-20 12:00:48.073 +03:00 [INF] Hosting environment: Development
2025-09-20 12:00:48.075 +03:00 [INF] Content root path: C:\Users\hossny D. monkey\source\repos\ModularERP\ModularERP
2025-09-20 12:01:01.011 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/IncomeVouchers?Code=INC-125468&Date=2025-09-18T19:22:40.318Z&CurrencyCode=EGP&FxRate=1.0&Amount=600&Description=anu&CategoryId=f8cd0c63-50d7-4a69-a344-bc53be110f77&RecurrenceId=7b6fd5d0-11ec-43b6-b9d6-eba78273f3fe - multipart/form-data; boundary=--------------------------694076832969342571650941 99887
2025-09-20 12:01:01.122 +03:00 [INF] Request started
2025-09-20 12:01:01.132 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController.CreateIncomeVoucher (ModularERP)'
2025-09-20 12:01:01.193 +03:00 [INF] Route matched with {action = "CreateIncomeVoucher", controller = "IncomeVouchers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Finance.Features.IncomesVoucher.DTO.IncomeVoucherResponseDto]]] CreateIncomeVoucher(System.String, System.DateTime, System.String, System.Decimal, System.Decimal, System.String, System.Guid, System.Nullable`1[System.Guid], System.String, System.Guid, System.String, System.String, System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]) on controller ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController (ModularERP).
2025-09-20 12:01:01.209 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-20 12:01:03.822 +03:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-20 12:01:04.803 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-20 12:01:04.926 +03:00 [INF] Start creating income voucher with data: {"Code":"INC-14588","Date":"2025-09-18T19:22:40.3180000Z","Amount":500,"Description":"ant","CategoryId":"d880c62f-a545-41fe-876d-f76a4a6c1077","SourceId":"4fe6e0a3-b441-45f6-96a4-0a1c499bbe56","SourceType":"BankAccount","SourceJson":"{\"Type\":\"BankAccount\",\"Id\":\"4fe6e0a3-b441-45f6-96a4-0a1c499bbe56\"}","TaxLinesJson":"[{\"TaxId\":\"020c0bbf-8202-42d8-9692-2fc202aa5c08\",\"BaseAmount\":100,\"TaxAmount\":14.0,\"IsWithholding\":true}]","CounterpartyJson":"{\"Type\":\"Vendor\",\"Id\":\"3fa85f64-5717-4562-b3fc-2c963f66afa6\"}","AttachmentsCount":1}
2025-09-20 12:01:05.185 +03:00 [INF] Validation passed successfully.
2025-09-20 12:01:07.152 +03:00 [INF] Executed DbCommand (131ms) [Parameters=[@__id_0='4fe6e0a3-b441-45f6-96a4-0a1c499bbe56'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[AccountNumber], [b].[BankName], [b].[CompanyId], [b].[CreatedAt], [b].[CreatedById], [b].[CurrencyCode], [b].[DepositAcl], [b].[Description], [b].[IsActive], [b].[IsDeleted], [b].[JournalAccountId], [b].[Name], [b].[Status], [b].[UpdatedAt], [b].[UpdatedById], [b].[WithdrawAcl]
FROM [BankAccounts] AS [b]
WHERE [b].[Id] = @__id_0
2025-09-20 12:01:07.635 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__id_0='d880c62f-a545-41fe-876d-f76a4a6c1077'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[Code], [g].[CompanyId], [g].[CreatedAt], [g].[CreatedById], [g].[IsActive], [g].[IsDeleted], [g].[IsLeaf], [g].[Name], [g].[Type], [g].[UpdatedAt], [g].[UpdatedById]
FROM [GlAccounts] AS [g]
WHERE [g].[Id] = @__id_0
2025-09-20 12:01:07.785 +03:00 [INF] Business validations passed successfully.
2025-09-20 12:01:07.903 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__code_0='INC-14588' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Vouchers] AS [v]
        WHERE [v].[CompanyId] = 'd00cf078-c1ff-4feb-ae37-d66a827ae438' AND [v].[Code] = @__code_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-20 12:01:07.985 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='4fe6e0a3-b441-45f6-96a4-0a1c499bbe56'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[AccountNumber], [b].[BankName], [b].[CompanyId], [b].[CreatedAt], [b].[CreatedById], [b].[CurrencyCode], [b].[DepositAcl], [b].[Description], [b].[IsActive], [b].[IsDeleted], [b].[JournalAccountId], [b].[Name], [b].[Status], [b].[UpdatedAt], [b].[UpdatedById], [b].[WithdrawAcl]
FROM [BankAccounts] AS [b]
WHERE [b].[Id] = @__id_0
2025-09-20 12:01:08.002 +03:00 [INF] Adding voucher to repository: {"Code":"INC-14588","Amount":500,"Date":"2025-09-18T19:22:40.3180000Z"}
2025-09-20 12:01:09.023 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[@p0='080ffa3b-9b80-4303-f2a1-08ddf8243cea', @p1='500' (Precision = 18) (Scale = 2), @p2=NULL (DbType = Guid), @p3='d880c62f-a545-41fe-876d-f76a4a6c1077', @p4='INC-14588' (Nullable = false) (Size = 20), @p5='d00cf078-c1ff-4feb-ae37-d66a827ae438', @p6='3fa85f64-5717-4562-b3fc-2c963f66afa6' (Nullable = true), @p7='Vendor' (Size = 450), @p8='2025-09-20T09:01:07.9710068Z', @p9='5dbceb39-9677-46d7-bf8a-2eb914c55437', @p10=NULL (Size = 4000), @p11='EGP' (Nullable = false) (Size = 3), @p12='2025-09-18T19:22:40.3180000Z', @p13='ant' (Size = 4000), @p14='1.0' (Precision = 18) (Scale = 6), @p15='True', @p16='False', @p17='f8cd0c63-50d7-4a69-a344-bc53be110f77', @p18=NULL (DbType = DateTime2), @p19=NULL (DbType = Guid), @p20='7b6fd5d0-11ec-43b6-b9d6-eba78273f3fe' (Nullable = true), @p21=NULL (DbType = Guid), @p22=NULL (DbType = DateTime2), @p23=NULL (DbType = Guid), @p24='0', @p25='Draft' (Nullable = false) (Size = 450), @p26=NULL (DbType = Guid), @p27='Income' (Nullable = false) (Size = 450), @p28=NULL (DbType = DateTime2), @p29=NULL (Size = 4000), @p30='4fe6e0a3-b441-45f6-96a4-0a1c499bbe56', @p31='BankAccount' (Nullable = false) (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Vouchers] ([Id], [Amount], [BankAccountId], [CategoryAccountId], [Code], [CompanyId], [CounterpartyId], [CounterpartyType], [CreatedAt], [CreatedBy], [CreatedById], [CurrencyCode], [Date], [Description], [FxRate], [IsActive], [IsDeleted], [JournalAccountId], [PostedAt], [PostedBy], [RecurrenceId], [RecurringScheduleId], [ReversedAt], [ReversedBy], [Revision], [Status], [TreasuryId], [Type], [UpdatedAt], [UpdatedById], [WalletId], [WalletType])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31);
2025-09-20 12:01:09.080 +03:00 [INF] Voucher saved successfully with ID: "080ffa3b-9b80-4303-f2a1-08ddf8243cea"
2025-09-20 12:01:09.087 +03:00 [INF] Processing 1 tax lines from JSON
2025-09-20 12:01:09.095 +03:00 [INF] Processing tax line: TaxId="020c0bbf-8202-42d8-9692-2fc202aa5c08", BaseAmount=100, TaxAmount=14.0
2025-09-20 12:01:09.248 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[@p0='efcf6a63-a4f3-4b40-79ea-08ddf8243d86', @p1='100' (Precision = 18) (Scale = 2), @p2='2025-09-20T09:01:09.1057936Z', @p3=NULL (Size = 4000), @p4='Expense' (Nullable = false) (Size = 4000), @p5='True', @p6='False', @p7='True', @p8='14.0' (Precision = 18) (Scale = 2), @p9='020c0bbf-8202-42d8-9692-2fc202aa5c08', @p10=NULL (DbType = DateTime2), @p11=NULL (Size = 4000), @p12='080ffa3b-9b80-4303-f2a1-08ddf8243cea'], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [VoucherTaxes] ([Id], [BaseAmount], [CreatedAt], [CreatedById], [Direction], [IsActive], [IsDeleted], [IsWithholding], [TaxAmount], [TaxId], [UpdatedAt], [UpdatedById], [VoucherId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-09-20 12:01:09.282 +03:00 [INF] Successfully added 1 tax lines
2025-09-20 12:01:09.289 +03:00 [INF] Processing 1 attachments
2025-09-20 12:01:09.460 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@p0='8b25983e-29f7-4b66-fb80-08ddf8243da4', @p1=NULL (Size = 64), @p2='2025-09-20T09:01:09.3071256Z', @p3=NULL (Size = 4000), @p4='/uploads/8fb2490b-9243-41d9-88b7-874eb8fbab1c_Hossam-Reda-Tohamy-Full Stack NET Angular.pdf' (Nullable = false) (Size = 500), @p5='0', @p6='Hossam-Reda-Tohamy-Full Stack NET Angular.pdf' (Nullable = false) (Size = 255), @p7='True', @p8='False', @p9='' (Nullable = false) (Size = 100), @p10=NULL (DbType = DateTime2), @p11=NULL (Size = 4000), @p12='2025-09-20T09:01:09.3079083Z', @p13='5dbceb39-9677-46d7-bf8a-2eb914c55437', @p14='080ffa3b-9b80-4303-f2a1-08ddf8243cea'], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Attachments] ([Id], [Checksum], [CreatedAt], [CreatedById], [FilePath], [FileSize], [Filename], [IsActive], [IsDeleted], [MimeType], [UpdatedAt], [UpdatedById], [UploadedAt], [UploadedBy], [VoucherId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-09-20 12:01:09.478 +03:00 [INF] Successfully added 1 attachments
2025-09-20 12:01:09.483 +03:00 [INF] Voucher "080ffa3b-9b80-4303-f2a1-08ddf8243cea" created successfully with 1 taxes and 1 attachments.
2025-09-20 12:01:09.526 +03:00 [INF] Executing CreatedAtActionResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Finance.Features.IncomesVoucher.DTO.IncomeVoucherResponseDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-20 12:01:09.633 +03:00 [INF] Executed action ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController.CreateIncomeVoucher (ModularERP) in 8420.1856ms
2025-09-20 12:01:09.639 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController.CreateIncomeVoucher (ModularERP)'
2025-09-20 12:01:09.644 +03:00 [INF] Request completed successfully with status code 201
2025-09-20 12:01:09.678 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/IncomeVouchers?Code=INC-125468&Date=2025-09-18T19:22:40.318Z&CurrencyCode=EGP&FxRate=1.0&Amount=600&Description=anu&CategoryId=f8cd0c63-50d7-4a69-a344-bc53be110f77&RecurrenceId=7b6fd5d0-11ec-43b6-b9d6-eba78273f3fe - 201 null application/json; charset=utf-8 8669.6057ms
2025-09-20 12:04:15.898 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/api/IncomeVouchers/080ffa3b-9b80-4303-f2a1-08ddf8243cea - null null
2025-09-20 12:04:15.912 +03:00 [INF] Request started
2025-09-20 12:04:15.914 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController.GetIncomeVoucher (ModularERP)'
2025-09-20 12:04:15.926 +03:00 [INF] Route matched with {action = "GetIncomeVoucher", controller = "IncomeVouchers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Finance.Features.IncomesVoucher.DTO.IncomeVoucherResponseDto]]] GetIncomeVoucher(System.Guid) on controller ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController (ModularERP).
2025-09-20 12:04:16.163 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__id_0='080ffa3b-9b80-4303-f2a1-08ddf8243cea'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [v].[Id], [v].[Amount], [v].[BankAccountId], [v].[CategoryAccountId], [v].[Code], [v].[CompanyId], [v].[CounterpartyId], [v].[CounterpartyType], [v].[CreatedAt], [v].[CreatedBy], [v].[CreatedById], [v].[CurrencyCode], [v].[Date], [v].[Description], [v].[FxRate], [v].[IsActive], [v].[IsDeleted], [v].[JournalAccountId], [v].[PostedAt], [v].[PostedBy], [v].[RecurrenceId], [v].[RecurringScheduleId], [v].[ReversedAt], [v].[ReversedBy], [v].[Revision], [v].[Status], [v].[TreasuryId], [v].[Type], [v].[UpdatedAt], [v].[UpdatedById], [v].[WalletId], [v].[WalletType]
FROM [Vouchers] AS [v]
WHERE [v].[Id] = @__id_0
2025-09-20 12:04:16.248 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__voucher_Id_0='080ffa3b-9b80-4303-f2a1-08ddf8243cea'], CommandType='"Text"', CommandTimeout='30']
SELECT [v].[Id], [v].[BaseAmount], [v].[CreatedAt], [v].[CreatedById], [v].[Direction], [v].[IsActive], [v].[IsDeleted], [v].[IsWithholding], [v].[TaxAmount], [v].[TaxId], [v].[UpdatedAt], [v].[UpdatedById], [v].[VoucherId]
FROM [VoucherTaxes] AS [v]
WHERE [v].[IsDeleted] = CAST(0 AS bit) AND [v].[VoucherId] = @__voucher_Id_0
2025-09-20 12:04:16.305 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__voucher_Id_0='080ffa3b-9b80-4303-f2a1-08ddf8243cea'], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Checksum], [a].[CreatedAt], [a].[CreatedById], [a].[FilePath], [a].[FileSize], [a].[Filename], [a].[IsActive], [a].[IsDeleted], [a].[MimeType], [a].[UpdatedAt], [a].[UpdatedById], [a].[UploadedAt], [a].[UploadedBy], [a].[VoucherId]
FROM [Attachments] AS [a]
WHERE [a].[IsDeleted] = CAST(0 AS bit) AND [a].[VoucherId] = @__voucher_Id_0
2025-09-20 12:04:16.347 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Finance.Features.IncomesVoucher.DTO.IncomeVoucherResponseDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-20 12:04:16.359 +03:00 [INF] Executed action ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController.GetIncomeVoucher (ModularERP) in 422.7657ms
2025-09-20 12:04:16.370 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController.GetIncomeVoucher (ModularERP)'
2025-09-20 12:04:16.378 +03:00 [INF] Request completed successfully with status code 200
2025-09-20 12:04:16.386 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/api/IncomeVouchers/080ffa3b-9b80-4303-f2a1-08ddf8243cea - 200 null application/json; charset=utf-8 488.0184ms
2025-09-20 12:13:18.089 +03:00 [INF] Starting web host...
2025-09-20 12:13:18.739 +03:00 [INF] Now listening on: https://localhost:7168
2025-09-20 12:13:18.743 +03:00 [INF] Now listening on: http://localhost:5004
2025-09-20 12:13:18.824 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-20 12:13:18.827 +03:00 [INF] Hosting environment: Development
2025-09-20 12:13:18.828 +03:00 [INF] Content root path: C:\Users\hossny D. monkey\source\repos\ModularERP\ModularERP
2025-09-20 12:13:32.736 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/IncomeVouchers?Code=INC-125468&Date=2025-09-18T19:22:40.318Z&CurrencyCode=EGP&FxRate=1.0&Amount=600&Description=anu&CategoryId=f8cd0c63-50d7-4a69-a344-bc53be110f77&RecurrenceId=7b6fd5d0-11ec-43b6-b9d6-eba78273f3fe - multipart/form-data; boundary=--------------------------606798942407966475585358 99887
2025-09-20 12:13:32.788 +03:00 [INF] Request started
2025-09-20 12:13:32.793 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController.CreateIncomeVoucher (ModularERP)'
2025-09-20 12:13:32.819 +03:00 [INF] Route matched with {action = "CreateIncomeVoucher", controller = "IncomeVouchers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Finance.Features.IncomesVoucher.DTO.IncomeVoucherResponseDto]]] CreateIncomeVoucher(System.String, System.DateTime, System.String, System.Decimal, System.Decimal, System.String, System.Guid, System.Nullable`1[System.Guid], System.String, System.Guid, System.String, System.String, System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]) on controller ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController (ModularERP).
2025-09-20 12:13:32.827 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-20 12:13:34.072 +03:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-20 12:13:34.413 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-20 12:13:34.452 +03:00 [INF] Start creating income voucher with data: {"Code":"INC-14587","Date":"2025-09-18T19:22:40.3180000Z","Amount":500,"Description":"ant","CategoryId":"d880c62f-a545-41fe-876d-f76a4a6c1077","SourceId":"4fe6e0a3-b441-45f6-96a4-0a1c499bbe56","SourceType":"BankAccount","SourceJson":"{\"Type\":\"BankAccount\",\"Id\":\"4fe6e0a3-b441-45f6-96a4-0a1c499bbe56\"}","TaxLinesJson":"[{\"TaxId\":\"020c0bbf-8202-42d8-9692-2fc202aa5c08\",\"BaseAmount\":100,\"TaxAmount\":14.0,\"IsWithholding\":true}]","CounterpartyJson":"{\"Type\":\"Vendor\",\"Id\":\"3fa85f64-5717-4562-b3fc-2c963f66afa6\"}","AttachmentsCount":1}
2025-09-20 12:13:34.519 +03:00 [INF] Validation passed successfully.
2025-09-20 12:13:35.186 +03:00 [INF] Executed DbCommand (49ms) [Parameters=[@__id_0='4fe6e0a3-b441-45f6-96a4-0a1c499bbe56'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[AccountNumber], [b].[BankName], [b].[CompanyId], [b].[CreatedAt], [b].[CreatedById], [b].[CurrencyCode], [b].[DepositAcl], [b].[Description], [b].[IsActive], [b].[IsDeleted], [b].[JournalAccountId], [b].[Name], [b].[Status], [b].[UpdatedAt], [b].[UpdatedById], [b].[WithdrawAcl]
FROM [BankAccounts] AS [b]
WHERE [b].[Id] = @__id_0
2025-09-20 12:13:35.361 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='d880c62f-a545-41fe-876d-f76a4a6c1077'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[Code], [g].[CompanyId], [g].[CreatedAt], [g].[CreatedById], [g].[IsActive], [g].[IsDeleted], [g].[IsLeaf], [g].[Name], [g].[Type], [g].[UpdatedAt], [g].[UpdatedById]
FROM [GlAccounts] AS [g]
WHERE [g].[Id] = @__id_0
2025-09-20 12:13:35.403 +03:00 [INF] Business validations passed successfully.
2025-09-20 12:13:35.445 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__code_0='INC-14587' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Vouchers] AS [v]
        WHERE [v].[CompanyId] = 'd00cf078-c1ff-4feb-ae37-d66a827ae438' AND [v].[Code] = @__code_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-20 12:13:35.492 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='4fe6e0a3-b441-45f6-96a4-0a1c499bbe56'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[AccountNumber], [b].[BankName], [b].[CompanyId], [b].[CreatedAt], [b].[CreatedById], [b].[CurrencyCode], [b].[DepositAcl], [b].[Description], [b].[IsActive], [b].[IsDeleted], [b].[JournalAccountId], [b].[Name], [b].[Status], [b].[UpdatedAt], [b].[UpdatedById], [b].[WithdrawAcl]
FROM [BankAccounts] AS [b]
WHERE [b].[Id] = @__id_0
2025-09-20 12:13:35.505 +03:00 [INF] Adding voucher to repository: {"Code":"INC-14587","Amount":500,"Date":"2025-09-18T19:22:40.3180000Z"}
2025-09-20 12:13:35.848 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@p0='2e37064c-fb1f-434d-7dd6-08ddf825fa6d', @p1='500' (Precision = 18) (Scale = 2), @p2=NULL (DbType = Guid), @p3='d880c62f-a545-41fe-876d-f76a4a6c1077', @p4='INC-14587' (Nullable = false) (Size = 20), @p5='d00cf078-c1ff-4feb-ae37-d66a827ae438', @p6='3fa85f64-5717-4562-b3fc-2c963f66afa6' (Nullable = true), @p7='Vendor' (Size = 450), @p8='2025-09-20T09:13:35.4850682Z', @p9='5dbceb39-9677-46d7-bf8a-2eb914c55437', @p10=NULL (Size = 4000), @p11='EGP' (Nullable = false) (Size = 3), @p12='2025-09-18T19:22:40.3180000Z', @p13='ant' (Size = 4000), @p14='1.0' (Precision = 18) (Scale = 6), @p15='True', @p16='False', @p17='f8cd0c63-50d7-4a69-a344-bc53be110f77', @p18=NULL (DbType = DateTime2), @p19=NULL (DbType = Guid), @p20='7b6fd5d0-11ec-43b6-b9d6-eba78273f3fe' (Nullable = true), @p21=NULL (DbType = Guid), @p22=NULL (DbType = DateTime2), @p23=NULL (DbType = Guid), @p24='0', @p25='Draft' (Nullable = false) (Size = 450), @p26=NULL (DbType = Guid), @p27='Income' (Nullable = false) (Size = 450), @p28=NULL (DbType = DateTime2), @p29=NULL (Size = 4000), @p30='4fe6e0a3-b441-45f6-96a4-0a1c499bbe56', @p31='BankAccount' (Nullable = false) (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Vouchers] ([Id], [Amount], [BankAccountId], [CategoryAccountId], [Code], [CompanyId], [CounterpartyId], [CounterpartyType], [CreatedAt], [CreatedBy], [CreatedById], [CurrencyCode], [Date], [Description], [FxRate], [IsActive], [IsDeleted], [JournalAccountId], [PostedAt], [PostedBy], [RecurrenceId], [RecurringScheduleId], [ReversedAt], [ReversedBy], [Revision], [Status], [TreasuryId], [Type], [UpdatedAt], [UpdatedById], [WalletId], [WalletType])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31);
2025-09-20 12:13:35.870 +03:00 [INF] Voucher saved successfully with ID: "2e37064c-fb1f-434d-7dd6-08ddf825fa6d"
2025-09-20 12:13:35.874 +03:00 [INF] Processing 1 tax lines from JSON
2025-09-20 12:13:35.876 +03:00 [INF] Processing tax line: TaxId="020c0bbf-8202-42d8-9692-2fc202aa5c08", BaseAmount=100, TaxAmount=14.0
2025-09-20 12:13:35.937 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='9430e382-f2f0-4f08-b46d-08ddf825faa1', @p1='100' (Precision = 18) (Scale = 2), @p2='2025-09-20T09:13:35.8793799Z', @p3=NULL (Size = 4000), @p4='Expense' (Nullable = false) (Size = 4000), @p5='True', @p6='False', @p7='True', @p8='14.0' (Precision = 18) (Scale = 2), @p9='020c0bbf-8202-42d8-9692-2fc202aa5c08', @p10=NULL (DbType = DateTime2), @p11=NULL (Size = 4000), @p12='2e37064c-fb1f-434d-7dd6-08ddf825fa6d'], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [VoucherTaxes] ([Id], [BaseAmount], [CreatedAt], [CreatedById], [Direction], [IsActive], [IsDeleted], [IsWithholding], [TaxAmount], [TaxId], [UpdatedAt], [UpdatedById], [VoucherId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-09-20 12:13:35.947 +03:00 [INF] Successfully added 1 tax lines
2025-09-20 12:13:35.950 +03:00 [INF] Processing 1 attachments
2025-09-20 12:13:36.004 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='7adc6c7a-d065-445f-58af-08ddf825faad', @p1=NULL (Size = 64), @p2='2025-09-20T09:13:35.9576261Z', @p3=NULL (Size = 4000), @p4='/uploads/35cf3e0d-82f8-42b4-b918-632473ed371d_Hossam-Reda-Tohamy-Full Stack NET Angular.pdf' (Nullable = false) (Size = 500), @p5='0', @p6='Hossam-Reda-Tohamy-Full Stack NET Angular.pdf' (Nullable = false) (Size = 255), @p7='True', @p8='False', @p9='' (Nullable = false) (Size = 100), @p10=NULL (DbType = DateTime2), @p11=NULL (Size = 4000), @p12='2025-09-20T09:13:35.9579162Z', @p13='5dbceb39-9677-46d7-bf8a-2eb914c55437', @p14='2e37064c-fb1f-434d-7dd6-08ddf825fa6d'], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Attachments] ([Id], [Checksum], [CreatedAt], [CreatedById], [FilePath], [FileSize], [Filename], [IsActive], [IsDeleted], [MimeType], [UpdatedAt], [UpdatedById], [UploadedAt], [UploadedBy], [VoucherId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-09-20 12:13:36.012 +03:00 [INF] Successfully added 1 attachments
2025-09-20 12:13:36.014 +03:00 [INF] Voucher "2e37064c-fb1f-434d-7dd6-08ddf825fa6d" created successfully with 1 taxes and 1 attachments.
2025-09-20 12:13:36.020 +03:00 [INF] Final response values: CounterpartyJson='{"Type":"Vendor","Id":"3fa85f64-5717-4562-b3fc-2c963f66afa6"}', TaxLinesJson='[{"TaxId":"020c0bbf-8202-42d8-9692-2fc202aa5c08","BaseAmount":100,"TaxAmount":14.0,"IsWithholding":true}]', SourceJson='{"Type":"BankAccount","Id":"4fe6e0a3-b441-45f6-96a4-0a1c499bbe56"}'
2025-09-20 12:13:36.036 +03:00 [INF] Executing CreatedAtActionResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Finance.Features.IncomesVoucher.DTO.IncomeVoucherResponseDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-20 12:13:36.089 +03:00 [INF] Executed action ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController.CreateIncomeVoucher (ModularERP) in 3260.8571ms
2025-09-20 12:13:36.093 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController.CreateIncomeVoucher (ModularERP)'
2025-09-20 12:13:36.095 +03:00 [INF] Request completed successfully with status code 201
2025-09-20 12:13:36.113 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/IncomeVouchers?Code=INC-125468&Date=2025-09-18T19:22:40.318Z&CurrencyCode=EGP&FxRate=1.0&Amount=600&Description=anu&CategoryId=f8cd0c63-50d7-4a69-a344-bc53be110f77&RecurrenceId=7b6fd5d0-11ec-43b6-b9d6-eba78273f3fe - 201 null application/json; charset=utf-8 3377.5284ms
2025-09-20 12:21:03.357 +03:00 [INF] Starting web host...
2025-09-20 12:21:04.003 +03:00 [INF] Now listening on: https://localhost:7168
2025-09-20 12:21:04.008 +03:00 [INF] Now listening on: http://localhost:5004
2025-09-20 12:21:04.127 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-20 12:21:04.129 +03:00 [INF] Hosting environment: Development
2025-09-20 12:21:04.131 +03:00 [INF] Content root path: C:\Users\hossny D. monkey\source\repos\ModularERP\ModularERP
2025-09-20 12:21:18.489 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/IncomeVouchers?Code=INC-125468&Date=2025-09-18T19:22:40.318Z&CurrencyCode=EGP&FxRate=1.0&Amount=600&Description=anu&CategoryId=f8cd0c63-50d7-4a69-a344-bc53be110f77&RecurrenceId=7b6fd5d0-11ec-43b6-b9d6-eba78273f3fe - multipart/form-data; boundary=--------------------------435219070734685704956657 99887
2025-09-20 12:21:18.540 +03:00 [INF] Request started
2025-09-20 12:21:18.546 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController.CreateIncomeVoucher (ModularERP)'
2025-09-20 12:21:18.578 +03:00 [INF] Route matched with {action = "CreateIncomeVoucher", controller = "IncomeVouchers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Finance.Features.IncomesVoucher.DTO.IncomeVoucherResponseDto]]] CreateIncomeVoucher(System.String, System.DateTime, System.String, System.Decimal, System.Decimal, System.String, System.Guid, System.Nullable`1[System.Guid], System.String, System.Guid, System.String, System.String, System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]) on controller ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController (ModularERP).
2025-09-20 12:21:18.588 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-20 12:21:19.560 +03:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-20 12:21:19.933 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-20 12:21:19.970 +03:00 [INF] Start creating income voucher with data: {"Code":"INC-14577","Date":"2025-09-18T19:22:40.3180000Z","Amount":500,"Description":"ant","CategoryId":"d880c62f-a545-41fe-876d-f76a4a6c1077","SourceId":"4fe6e0a3-b441-45f6-96a4-0a1c499bbe56","SourceType":"BankAccount","SourceJson":"{\"Type\":\"BankAccount\",\"Id\":\"4fe6e0a3-b441-45f6-96a4-0a1c499bbe56\"}","TaxLinesJson":"[{\"TaxId\":\"020c0bbf-8202-42d8-9692-2fc202aa5c08\",\"BaseAmount\":100,\"TaxAmount\":14.0,\"IsWithholding\":true}]","CounterpartyJson":"{\"Type\":\"Vendor\",\"Id\":\"3fa85f64-5717-4562-b3fc-2c963f66afa6\"}","AttachmentsCount":1}
2025-09-20 12:21:20.020 +03:00 [INF] Validation passed successfully.
2025-09-20 12:21:20.851 +03:00 [INF] Executed DbCommand (63ms) [Parameters=[@__id_0='4fe6e0a3-b441-45f6-96a4-0a1c499bbe56'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[AccountNumber], [b].[BankName], [b].[CompanyId], [b].[CreatedAt], [b].[CreatedById], [b].[CurrencyCode], [b].[DepositAcl], [b].[Description], [b].[IsActive], [b].[IsDeleted], [b].[JournalAccountId], [b].[Name], [b].[Status], [b].[UpdatedAt], [b].[UpdatedById], [b].[WithdrawAcl]
FROM [BankAccounts] AS [b]
WHERE [b].[Id] = @__id_0
2025-09-20 12:21:21.163 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__id_0='d880c62f-a545-41fe-876d-f76a4a6c1077'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[Code], [g].[CompanyId], [g].[CreatedAt], [g].[CreatedById], [g].[IsActive], [g].[IsDeleted], [g].[IsLeaf], [g].[Name], [g].[Type], [g].[UpdatedAt], [g].[UpdatedById]
FROM [GlAccounts] AS [g]
WHERE [g].[Id] = @__id_0
2025-09-20 12:21:21.251 +03:00 [INF] Business validations passed successfully.
2025-09-20 12:21:21.322 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__code_0='INC-14577' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Vouchers] AS [v]
        WHERE [v].[CompanyId] = 'd00cf078-c1ff-4feb-ae37-d66a827ae438' AND [v].[Code] = @__code_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-20 12:21:21.364 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='4fe6e0a3-b441-45f6-96a4-0a1c499bbe56'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[AccountNumber], [b].[BankName], [b].[CompanyId], [b].[CreatedAt], [b].[CreatedById], [b].[CurrencyCode], [b].[DepositAcl], [b].[Description], [b].[IsActive], [b].[IsDeleted], [b].[JournalAccountId], [b].[Name], [b].[Status], [b].[UpdatedAt], [b].[UpdatedById], [b].[WithdrawAcl]
FROM [BankAccounts] AS [b]
WHERE [b].[Id] = @__id_0
2025-09-20 12:21:21.384 +03:00 [INF] Adding voucher to repository: {"Code":"INC-14577","Amount":500,"Date":"2025-09-18T19:22:40.3180000Z"}
2025-09-20 12:21:21.907 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[@p0='b4d51978-0d5d-4aed-acd6-08ddf8271023', @p1='500' (Precision = 18) (Scale = 2), @p2=NULL (DbType = Guid), @p3='d880c62f-a545-41fe-876d-f76a4a6c1077', @p4='INC-14577' (Nullable = false) (Size = 20), @p5='d00cf078-c1ff-4feb-ae37-d66a827ae438', @p6=NULL (DbType = Guid), @p7=NULL (Size = 450), @p8='2025-09-20T09:21:21.3545026Z', @p9='5dbceb39-9677-46d7-bf8a-2eb914c55437', @p10=NULL (Size = 4000), @p11='EGP' (Nullable = false) (Size = 3), @p12='2025-09-18T19:22:40.3180000Z', @p13='ant' (Size = 4000), @p14='1.0' (Precision = 18) (Scale = 6), @p15='True', @p16='False', @p17='f8cd0c63-50d7-4a69-a344-bc53be110f77', @p18=NULL (DbType = DateTime2), @p19=NULL (DbType = Guid), @p20='7b6fd5d0-11ec-43b6-b9d6-eba78273f3fe' (Nullable = true), @p21=NULL (DbType = Guid), @p22=NULL (DbType = DateTime2), @p23=NULL (DbType = Guid), @p24='0', @p25='Draft' (Nullable = false) (Size = 450), @p26=NULL (DbType = Guid), @p27='Income' (Nullable = false) (Size = 450), @p28=NULL (DbType = DateTime2), @p29=NULL (Size = 4000), @p30='4fe6e0a3-b441-45f6-96a4-0a1c499bbe56', @p31='BankAccount' (Nullable = false) (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Vouchers] ([Id], [Amount], [BankAccountId], [CategoryAccountId], [Code], [CompanyId], [CounterpartyId], [CounterpartyType], [CreatedAt], [CreatedBy], [CreatedById], [CurrencyCode], [Date], [Description], [FxRate], [IsActive], [IsDeleted], [JournalAccountId], [PostedAt], [PostedBy], [RecurrenceId], [RecurringScheduleId], [ReversedAt], [ReversedBy], [Revision], [Status], [TreasuryId], [Type], [UpdatedAt], [UpdatedById], [WalletId], [WalletType])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31);
2025-09-20 12:21:21.951 +03:00 [INF] Voucher saved successfully with ID: "b4d51978-0d5d-4aed-acd6-08ddf8271023"
2025-09-20 12:21:21.978 +03:00 [INF] Processing 1 tax lines from JSON
2025-09-20 12:21:21.984 +03:00 [INF] Processing tax line: TaxId="020c0bbf-8202-42d8-9692-2fc202aa5c08", BaseAmount=100, TaxAmount=14.0
2025-09-20 12:21:22.096 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@p0='6b2c6c00-3da1-4bd0-de58-08ddf8271075', @p1='100' (Precision = 18) (Scale = 2), @p2='2025-09-20T09:21:21.9928464Z', @p3=NULL (Size = 4000), @p4='Expense' (Nullable = false) (Size = 4000), @p5='True', @p6='False', @p7='True', @p8='14.0' (Precision = 18) (Scale = 2), @p9='020c0bbf-8202-42d8-9692-2fc202aa5c08', @p10=NULL (DbType = DateTime2), @p11=NULL (Size = 4000), @p12='b4d51978-0d5d-4aed-acd6-08ddf8271023'], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [VoucherTaxes] ([Id], [BaseAmount], [CreatedAt], [CreatedById], [Direction], [IsActive], [IsDeleted], [IsWithholding], [TaxAmount], [TaxId], [UpdatedAt], [UpdatedById], [VoucherId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-09-20 12:21:22.115 +03:00 [INF] Successfully added 1 tax lines
2025-09-20 12:21:22.121 +03:00 [INF] Processing 1 attachments
2025-09-20 12:21:22.221 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='5d37f0d4-c4e9-4756-d814-08ddf827108a', @p1=NULL (Size = 64), @p2='2025-09-20T09:21:22.1348011Z', @p3=NULL (Size = 4000), @p4='/uploads/77b76736-1184-4254-8d46-02d5494f8e36_Hossam-Reda-Tohamy-Full Stack NET Angular.pdf' (Nullable = false) (Size = 500), @p5='0', @p6='Hossam-Reda-Tohamy-Full Stack NET Angular.pdf' (Nullable = false) (Size = 255), @p7='True', @p8='False', @p9='' (Nullable = false) (Size = 100), @p10=NULL (DbType = DateTime2), @p11=NULL (Size = 4000), @p12='2025-09-20T09:21:22.1352359Z', @p13='5dbceb39-9677-46d7-bf8a-2eb914c55437', @p14='b4d51978-0d5d-4aed-acd6-08ddf8271023'], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Attachments] ([Id], [Checksum], [CreatedAt], [CreatedById], [FilePath], [FileSize], [Filename], [IsActive], [IsDeleted], [MimeType], [UpdatedAt], [UpdatedById], [UploadedAt], [UploadedBy], [VoucherId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-09-20 12:21:22.241 +03:00 [INF] Successfully added 1 attachments
2025-09-20 12:21:22.245 +03:00 [INF] Voucher "b4d51978-0d5d-4aed-acd6-08ddf8271023" created successfully with 1 taxes and 1 attachments.
2025-09-20 12:21:22.260 +03:00 [INF] Final response values: CounterpartyJson='{"Type":"Vendor","Id":"3fa85f64-5717-4562-b3fc-2c963f66afa6"}', TaxLinesJson='[{"TaxId":"020c0bbf-8202-42d8-9692-2fc202aa5c08","BaseAmount":100,"TaxAmount":14.0,"IsWithholding":true}]', SourceJson='{"Type":"BankAccount","Id":"4fe6e0a3-b441-45f6-96a4-0a1c499bbe56"}'
2025-09-20 12:21:22.286 +03:00 [INF] Executing CreatedAtActionResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Finance.Features.IncomesVoucher.DTO.IncomeVoucherResponseDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-20 12:21:22.380 +03:00 [INF] Executed action ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController.CreateIncomeVoucher (ModularERP) in 3788.1428ms
2025-09-20 12:21:22.389 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController.CreateIncomeVoucher (ModularERP)'
2025-09-20 12:21:22.397 +03:00 [INF] Request completed successfully with status code 201
2025-09-20 12:21:22.429 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/IncomeVouchers?Code=INC-125468&Date=2025-09-18T19:22:40.318Z&CurrencyCode=EGP&FxRate=1.0&Amount=600&Description=anu&CategoryId=f8cd0c63-50d7-4a69-a344-bc53be110f77&RecurrenceId=7b6fd5d0-11ec-43b6-b9d6-eba78273f3fe - 201 null application/json; charset=utf-8 3941.6847ms
2025-09-20 12:29:44.415 +03:00 [INF] Starting web host...
2025-09-20 12:29:45.218 +03:00 [INF] Now listening on: https://localhost:7168
2025-09-20 12:29:45.224 +03:00 [INF] Now listening on: http://localhost:5004
2025-09-20 12:29:45.321 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-20 12:29:45.324 +03:00 [INF] Hosting environment: Development
2025-09-20 12:29:45.325 +03:00 [INF] Content root path: C:\Users\hossny D. monkey\source\repos\ModularERP\ModularERP
2025-09-20 12:29:58.328 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/IncomeVouchers?Code=INC-125468&Date=2025-09-18T19:22:40.318Z&CurrencyCode=EGP&FxRate=1.0&Amount=600&Description=anu&CategoryId=f8cd0c63-50d7-4a69-a344-bc53be110f77&RecurrenceId=7b6fd5d0-11ec-43b6-b9d6-eba78273f3fe - multipart/form-data; boundary=--------------------------716488908273599246616144 99887
2025-09-20 12:29:58.435 +03:00 [INF] Request started
2025-09-20 12:29:58.443 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController.CreateIncomeVoucher (ModularERP)'
2025-09-20 12:29:58.505 +03:00 [INF] Route matched with {action = "CreateIncomeVoucher", controller = "IncomeVouchers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Finance.Features.IncomesVoucher.DTO.IncomeVoucherResponseDto]]] CreateIncomeVoucher(System.String, System.DateTime, System.String, System.Decimal, System.Decimal, System.String, System.Guid, System.Nullable`1[System.Guid], System.String, System.Guid, System.String, System.String, System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]) on controller ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController (ModularERP).
2025-09-20 12:29:58.521 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-20 12:30:00.690 +03:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-20 12:30:01.597 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-20 12:30:01.680 +03:00 [INF] Start creating income voucher with data: {"Code":"INC-14545","Date":"2025-09-18T19:22:40.3180000Z","Amount":500,"Description":"ant","CategoryId":"d880c62f-a545-41fe-876d-f76a4a6c1077","SourceId":"4fe6e0a3-b441-45f6-96a4-0a1c499bbe56","SourceType":"BankAccount","SourceJson":"{\"Type\":\"BankAccount\",\"Id\":\"4fe6e0a3-b441-45f6-96a4-0a1c499bbe56\"}","TaxLinesJson":"[{\"TaxId\":\"020c0bbf-8202-42d8-9692-2fc202aa5c08\",\"BaseAmount\":100,\"TaxAmount\":14.0,\"IsWithholding\":true}]","CounterpartyJson":"{\"Type\":\"Vendor\",\"Id\":\"3fa85f64-5717-4562-b3fc-2c963f66afa6\"}","AttachmentsCount":1}
2025-09-20 12:30:01.798 +03:00 [INF] Validation passed successfully.
2025-09-20 12:30:03.089 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@__id_0='4fe6e0a3-b441-45f6-96a4-0a1c499bbe56'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[AccountNumber], [b].[BankName], [b].[CompanyId], [b].[CreatedAt], [b].[CreatedById], [b].[CurrencyCode], [b].[DepositAcl], [b].[Description], [b].[IsActive], [b].[IsDeleted], [b].[JournalAccountId], [b].[Name], [b].[Status], [b].[UpdatedAt], [b].[UpdatedById], [b].[WithdrawAcl]
FROM [BankAccounts] AS [b]
WHERE [b].[Id] = @__id_0
2025-09-20 12:30:03.404 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__id_0='d880c62f-a545-41fe-876d-f76a4a6c1077'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[Code], [g].[CompanyId], [g].[CreatedAt], [g].[CreatedById], [g].[IsActive], [g].[IsDeleted], [g].[IsLeaf], [g].[Name], [g].[Type], [g].[UpdatedAt], [g].[UpdatedById]
FROM [GlAccounts] AS [g]
WHERE [g].[Id] = @__id_0
2025-09-20 12:30:03.498 +03:00 [INF] Business validations passed successfully.
2025-09-20 12:30:03.558 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__code_0='INC-14545' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Vouchers] AS [v]
        WHERE [v].[CompanyId] = 'd00cf078-c1ff-4feb-ae37-d66a827ae438' AND [v].[Code] = @__code_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-20 12:30:03.598 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='4fe6e0a3-b441-45f6-96a4-0a1c499bbe56'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[AccountNumber], [b].[BankName], [b].[CompanyId], [b].[CreatedAt], [b].[CreatedById], [b].[CurrencyCode], [b].[DepositAcl], [b].[Description], [b].[IsActive], [b].[IsDeleted], [b].[JournalAccountId], [b].[Name], [b].[Status], [b].[UpdatedAt], [b].[UpdatedById], [b].[WithdrawAcl]
FROM [BankAccounts] AS [b]
WHERE [b].[Id] = @__id_0
2025-09-20 12:30:03.615 +03:00 [INF] Adding voucher to repository: {"Code":"INC-14545","Amount":500,"Date":"2025-09-18T19:22:40.3180000Z"}
2025-09-20 12:30:04.261 +03:00 [INF] Executed DbCommand (27ms) [Parameters=[@p0='b9f8cd19-a487-4986-762d-08ddf8284769', @p1='500' (Precision = 18) (Scale = 2), @p2=NULL (DbType = Guid), @p3='d880c62f-a545-41fe-876d-f76a4a6c1077', @p4='INC-14545' (Nullable = false) (Size = 20), @p5='d00cf078-c1ff-4feb-ae37-d66a827ae438', @p6=NULL (DbType = Guid), @p7=NULL (Size = 450), @p8='2025-09-20T09:30:03.5912164Z', @p9='5dbceb39-9677-46d7-bf8a-2eb914c55437', @p10=NULL (Size = 4000), @p11='EGP' (Nullable = false) (Size = 3), @p12='2025-09-18T19:22:40.3180000Z', @p13='ant' (Size = 4000), @p14='1.0' (Precision = 18) (Scale = 6), @p15='True', @p16='False', @p17='f8cd0c63-50d7-4a69-a344-bc53be110f77', @p18=NULL (DbType = DateTime2), @p19=NULL (DbType = Guid), @p20='7b6fd5d0-11ec-43b6-b9d6-eba78273f3fe' (Nullable = true), @p21=NULL (DbType = Guid), @p22=NULL (DbType = DateTime2), @p23=NULL (DbType = Guid), @p24='0', @p25='Draft' (Nullable = false) (Size = 450), @p26=NULL (DbType = Guid), @p27='Income' (Nullable = false) (Size = 450), @p28=NULL (DbType = DateTime2), @p29=NULL (Size = 4000), @p30='4fe6e0a3-b441-45f6-96a4-0a1c499bbe56', @p31='BankAccount' (Nullable = false) (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Vouchers] ([Id], [Amount], [BankAccountId], [CategoryAccountId], [Code], [CompanyId], [CounterpartyId], [CounterpartyType], [CreatedAt], [CreatedBy], [CreatedById], [CurrencyCode], [Date], [Description], [FxRate], [IsActive], [IsDeleted], [JournalAccountId], [PostedAt], [PostedBy], [RecurrenceId], [RecurringScheduleId], [ReversedAt], [ReversedBy], [Revision], [Status], [TreasuryId], [Type], [UpdatedAt], [UpdatedById], [WalletId], [WalletType])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31);
2025-09-20 12:30:04.305 +03:00 [INF] Voucher saved successfully with ID: "b9f8cd19-a487-4986-762d-08ddf8284769"
2025-09-20 12:30:04.330 +03:00 [INF] Processing 1 tax lines from JSON
2025-09-20 12:30:04.335 +03:00 [INF] Processing tax line: TaxId="020c0bbf-8202-42d8-9692-2fc202aa5c08", BaseAmount=100, TaxAmount=14.0
2025-09-20 12:30:04.441 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='e606d61f-b896-414b-f797-08ddf82847cd', @p1='100' (Precision = 18) (Scale = 2), @p2='2025-09-20T09:30:04.3411174Z', @p3=NULL (Size = 4000), @p4='Expense' (Nullable = false) (Size = 4000), @p5='True', @p6='False', @p7='True', @p8='14.0' (Precision = 18) (Scale = 2), @p9='020c0bbf-8202-42d8-9692-2fc202aa5c08', @p10=NULL (DbType = DateTime2), @p11=NULL (Size = 4000), @p12='b9f8cd19-a487-4986-762d-08ddf8284769'], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [VoucherTaxes] ([Id], [BaseAmount], [CreatedAt], [CreatedById], [Direction], [IsActive], [IsDeleted], [IsWithholding], [TaxAmount], [TaxId], [UpdatedAt], [UpdatedById], [VoucherId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-09-20 12:30:04.460 +03:00 [INF] Successfully added 1 tax lines
2025-09-20 12:30:04.464 +03:00 [INF] Processing 1 attachments
2025-09-20 12:30:04.610 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='289d786c-5019-45bd-deb7-08ddf82847e2', @p1=NULL (Size = 64), @p2='2025-09-20T09:30:04.4805768Z', @p3=NULL (Size = 4000), @p4='/uploads/db7e1b2d-815d-4c17-96fb-3651a9159c75_Hossam-Reda-Tohamy-Full Stack NET Angular.pdf' (Nullable = false) (Size = 500), @p5='0', @p6='Hossam-Reda-Tohamy-Full Stack NET Angular.pdf' (Nullable = false) (Size = 255), @p7='True', @p8='False', @p9='' (Nullable = false) (Size = 100), @p10=NULL (DbType = DateTime2), @p11=NULL (Size = 4000), @p12='2025-09-20T09:30:04.4811663Z', @p13='5dbceb39-9677-46d7-bf8a-2eb914c55437', @p14='b9f8cd19-a487-4986-762d-08ddf8284769'], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Attachments] ([Id], [Checksum], [CreatedAt], [CreatedById], [FilePath], [FileSize], [Filename], [IsActive], [IsDeleted], [MimeType], [UpdatedAt], [UpdatedById], [UploadedAt], [UploadedBy], [VoucherId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-09-20 12:30:04.620 +03:00 [INF] Successfully added 1 attachments
2025-09-20 12:30:04.622 +03:00 [INF] Voucher "b9f8cd19-a487-4986-762d-08ddf8284769" created successfully with 1 taxes and 1 attachments.
2025-09-20 12:30:04.641 +03:00 [INF] Executing CreatedAtActionResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Finance.Features.IncomesVoucher.DTO.IncomeVoucherResponseDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-20 12:30:04.699 +03:00 [INF] Executed action ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController.CreateIncomeVoucher (ModularERP) in 6181.8061ms
2025-09-20 12:30:04.704 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController.CreateIncomeVoucher (ModularERP)'
2025-09-20 12:30:04.707 +03:00 [INF] Request completed successfully with status code 201
2025-09-20 12:30:04.728 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/IncomeVouchers?Code=INC-125468&Date=2025-09-18T19:22:40.318Z&CurrencyCode=EGP&FxRate=1.0&Amount=600&Description=anu&CategoryId=f8cd0c63-50d7-4a69-a344-bc53be110f77&RecurrenceId=7b6fd5d0-11ec-43b6-b9d6-eba78273f3fe - 201 null application/json; charset=utf-8 6401.324ms
2025-09-20 12:36:21.201 +03:00 [INF] Starting web host...
2025-09-20 12:36:21.941 +03:00 [INF] Now listening on: https://localhost:7168
2025-09-20 12:36:21.951 +03:00 [INF] Now listening on: http://localhost:5004
2025-09-20 12:36:22.076 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-20 12:36:22.079 +03:00 [INF] Hosting environment: Development
2025-09-20 12:36:22.080 +03:00 [INF] Content root path: C:\Users\hossny D. monkey\source\repos\ModularERP\ModularERP
2025-09-20 12:36:30.744 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/IncomeVouchers?Code=INC-125468&Date=2025-09-18T19:22:40.318Z&CurrencyCode=EGP&FxRate=1.0&Amount=600&Description=anu&CategoryId=f8cd0c63-50d7-4a69-a344-bc53be110f77&RecurrenceId=7b6fd5d0-11ec-43b6-b9d6-eba78273f3fe - multipart/form-data; boundary=--------------------------641561301754565777145800 99887
2025-09-20 12:36:30.866 +03:00 [INF] Request started
2025-09-20 12:36:30.874 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController.CreateIncomeVoucher (ModularERP)'
2025-09-20 12:36:30.943 +03:00 [INF] Route matched with {action = "CreateIncomeVoucher", controller = "IncomeVouchers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Finance.Features.IncomesVoucher.DTO.IncomeVoucherResponseDto]]] CreateIncomeVoucher(System.String, System.DateTime, System.String, System.Decimal, System.Decimal, System.String, System.Guid, System.Nullable`1[System.Guid], System.String, System.Guid, System.String, System.String, System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]) on controller ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController (ModularERP).
2025-09-20 12:36:30.958 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-20 12:36:33.759 +03:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-20 12:36:34.706 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-20 12:36:34.780 +03:00 [INF] Start creating income voucher with data: {"Code":"INC-14555","Date":"2025-09-18T19:22:40.3180000Z","Amount":500,"Description":"ant","CategoryId":"d880c62f-a545-41fe-876d-f76a4a6c1077","SourceId":"4fe6e0a3-b441-45f6-96a4-0a1c499bbe56","SourceType":"BankAccount","SourceJson":"{\"Type\":\"BankAccount\",\"Id\":\"4fe6e0a3-b441-45f6-96a4-0a1c499bbe56\"}","TaxLinesJson":"[{\"TaxId\":\"020c0bbf-8202-42d8-9692-2fc202aa5c08\",\"BaseAmount\":100,\"TaxAmount\":14.0,\"IsWithholding\":true}]","CounterpartyJson":"{\"Type\":\"Vendor\",\"Id\":\"3fa85f64-5717-4562-b3fc-2c963f66afa6\"}","AttachmentsCount":1}
2025-09-20 12:36:34.891 +03:00 [INF] Validation passed successfully.
2025-09-20 12:36:36.767 +03:00 [INF] Executed DbCommand (102ms) [Parameters=[@__id_0='4fe6e0a3-b441-45f6-96a4-0a1c499bbe56'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[AccountNumber], [b].[BankName], [b].[CompanyId], [b].[CreatedAt], [b].[CreatedById], [b].[CurrencyCode], [b].[DepositAcl], [b].[Description], [b].[IsActive], [b].[IsDeleted], [b].[JournalAccountId], [b].[Name], [b].[Status], [b].[UpdatedAt], [b].[UpdatedById], [b].[WithdrawAcl]
FROM [BankAccounts] AS [b]
WHERE [b].[Id] = @__id_0
2025-09-20 12:36:37.213 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='d880c62f-a545-41fe-876d-f76a4a6c1077'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[Code], [g].[CompanyId], [g].[CreatedAt], [g].[CreatedById], [g].[IsActive], [g].[IsDeleted], [g].[IsLeaf], [g].[Name], [g].[Type], [g].[UpdatedAt], [g].[UpdatedById]
FROM [GlAccounts] AS [g]
WHERE [g].[Id] = @__id_0
2025-09-20 12:36:37.348 +03:00 [INF] Business validations passed successfully.
2025-09-20 12:36:37.431 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__code_0='INC-14555' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Vouchers] AS [v]
        WHERE [v].[CompanyId] = 'd00cf078-c1ff-4feb-ae37-d66a827ae438' AND [v].[Code] = @__code_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-20 12:36:37.525 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='4fe6e0a3-b441-45f6-96a4-0a1c499bbe56'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[AccountNumber], [b].[BankName], [b].[CompanyId], [b].[CreatedAt], [b].[CreatedById], [b].[CurrencyCode], [b].[DepositAcl], [b].[Description], [b].[IsActive], [b].[IsDeleted], [b].[JournalAccountId], [b].[Name], [b].[Status], [b].[UpdatedAt], [b].[UpdatedById], [b].[WithdrawAcl]
FROM [BankAccounts] AS [b]
WHERE [b].[Id] = @__id_0
2025-09-20 12:36:37.561 +03:00 [INF] Adding voucher to repository: {"Code":"INC-14555","Amount":500,"Date":"2025-09-18T19:22:40.3180000Z"}
2025-09-20 12:36:38.461 +03:00 [INF] Executed DbCommand (31ms) [Parameters=[@p0='7f4e0b81-be31-437e-9941-08ddf829323c', @p1='500' (Precision = 18) (Scale = 2), @p2=NULL (DbType = Guid), @p3='d880c62f-a545-41fe-876d-f76a4a6c1077', @p4='INC-14555' (Nullable = false) (Size = 20), @p5='d00cf078-c1ff-4feb-ae37-d66a827ae438', @p6='3fa85f64-5717-4562-b3fc-2c963f66afa6' (Nullable = true), @p7='Vendor' (Size = 450), @p8='2025-09-20T09:36:37.5151570Z', @p9='5dbceb39-9677-46d7-bf8a-2eb914c55437', @p10=NULL (Size = 4000), @p11='EGP' (Nullable = false) (Size = 3), @p12='2025-09-18T19:22:40.3180000Z', @p13='ant' (Size = 4000), @p14='1.0' (Precision = 18) (Scale = 6), @p15='True', @p16='False', @p17='f8cd0c63-50d7-4a69-a344-bc53be110f77', @p18=NULL (DbType = DateTime2), @p19=NULL (DbType = Guid), @p20='7b6fd5d0-11ec-43b6-b9d6-eba78273f3fe' (Nullable = true), @p21=NULL (DbType = Guid), @p22=NULL (DbType = DateTime2), @p23=NULL (DbType = Guid), @p24='0', @p25='Draft' (Nullable = false) (Size = 450), @p26=NULL (DbType = Guid), @p27='Income' (Nullable = false) (Size = 450), @p28=NULL (DbType = DateTime2), @p29=NULL (Size = 4000), @p30='4fe6e0a3-b441-45f6-96a4-0a1c499bbe56', @p31='BankAccount' (Nullable = false) (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Vouchers] ([Id], [Amount], [BankAccountId], [CategoryAccountId], [Code], [CompanyId], [CounterpartyId], [CounterpartyType], [CreatedAt], [CreatedBy], [CreatedById], [CurrencyCode], [Date], [Description], [FxRate], [IsActive], [IsDeleted], [JournalAccountId], [PostedAt], [PostedBy], [RecurrenceId], [RecurringScheduleId], [ReversedAt], [ReversedBy], [Revision], [Status], [TreasuryId], [Type], [UpdatedAt], [UpdatedById], [WalletId], [WalletType])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31);
2025-09-20 12:36:38.548 +03:00 [INF] Voucher saved successfully with ID: "7f4e0b81-be31-437e-9941-08ddf829323c"
2025-09-20 12:36:38.575 +03:00 [INF] Processing 1 tax lines from JSON
2025-09-20 12:36:38.581 +03:00 [INF] Processing tax line: TaxId="020c0bbf-8202-42d8-9692-2fc202aa5c08", BaseAmount=100, TaxAmount=14.0
2025-09-20 12:36:38.723 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[@p0='ea7f7d55-552e-45a0-6c7f-08ddf82932cc', @p1='100' (Precision = 18) (Scale = 2), @p2='2025-09-20T09:36:38.5897983Z', @p3=NULL (Size = 4000), @p4='Expense' (Nullable = false) (Size = 4000), @p5='True', @p6='False', @p7='True', @p8='14.0' (Precision = 18) (Scale = 2), @p9='020c0bbf-8202-42d8-9692-2fc202aa5c08', @p10=NULL (DbType = DateTime2), @p11=NULL (Size = 4000), @p12='7f4e0b81-be31-437e-9941-08ddf829323c'], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [VoucherTaxes] ([Id], [BaseAmount], [CreatedAt], [CreatedById], [Direction], [IsActive], [IsDeleted], [IsWithholding], [TaxAmount], [TaxId], [UpdatedAt], [UpdatedById], [VoucherId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-09-20 12:36:38.777 +03:00 [INF] Successfully added 1 tax lines
2025-09-20 12:36:38.784 +03:00 [INF] Processing 1 attachments
2025-09-20 12:36:38.968 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@p0='d3880a3b-3292-4d4d-9422-08ddf82932ec', @p1=NULL (Size = 64), @p2='2025-09-20T09:36:38.8042161Z', @p3=NULL (Size = 4000), @p4='/uploads/5d869d90-1022-4ad1-bddb-3a1fbb122d52_Hossam-Reda-Tohamy-Full Stack NET Angular.pdf' (Nullable = false) (Size = 500), @p5='0', @p6='Hossam-Reda-Tohamy-Full Stack NET Angular.pdf' (Nullable = false) (Size = 255), @p7='True', @p8='False', @p9='' (Nullable = false) (Size = 100), @p10=NULL (DbType = DateTime2), @p11=NULL (Size = 4000), @p12='2025-09-20T09:36:38.8050964Z', @p13='5dbceb39-9677-46d7-bf8a-2eb914c55437', @p14='7f4e0b81-be31-437e-9941-08ddf829323c'], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Attachments] ([Id], [Checksum], [CreatedAt], [CreatedById], [FilePath], [FileSize], [Filename], [IsActive], [IsDeleted], [MimeType], [UpdatedAt], [UpdatedById], [UploadedAt], [UploadedBy], [VoucherId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-09-20 12:36:39.018 +03:00 [INF] Successfully added 1 attachments
2025-09-20 12:36:39.028 +03:00 [INF] Voucher "7f4e0b81-be31-437e-9941-08ddf829323c" created successfully with 1 taxes and 1 attachments.
2025-09-20 12:36:39.086 +03:00 [INF] Executing CreatedAtActionResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Finance.Features.IncomesVoucher.DTO.IncomeVoucherResponseDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-20 12:36:39.258 +03:00 [INF] Executed action ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController.CreateIncomeVoucher (ModularERP) in 8296.3311ms
2025-09-20 12:36:39.269 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController.CreateIncomeVoucher (ModularERP)'
2025-09-20 12:36:39.288 +03:00 [INF] Request completed successfully with status code 201
2025-09-20 12:36:39.338 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/IncomeVouchers?Code=INC-125468&Date=2025-09-18T19:22:40.318Z&CurrencyCode=EGP&FxRate=1.0&Amount=600&Description=anu&CategoryId=f8cd0c63-50d7-4a69-a344-bc53be110f77&RecurrenceId=7b6fd5d0-11ec-43b6-b9d6-eba78273f3fe - 201 null application/json; charset=utf-8 8598.0777ms
2025-09-20 14:40:43.101 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/api/IncomeVouchers/7f4e0b81-be31-437e-9941-08ddf829323c - null null
2025-09-20 14:40:43.110 +03:00 [INF] Request started
2025-09-20 14:40:43.112 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController.GetIncomeVoucher (ModularERP)'
2025-09-20 14:40:43.121 +03:00 [INF] Route matched with {action = "GetIncomeVoucher", controller = "IncomeVouchers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Finance.Features.IncomesVoucher.DTO.IncomeVoucherResponseDto]]] GetIncomeVoucher(System.Guid) on controller ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController (ModularERP).
2025-09-20 14:40:43.191 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='7f4e0b81-be31-437e-9941-08ddf829323c'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [v].[Id], [v].[Amount], [v].[BankAccountId], [v].[CategoryAccountId], [v].[Code], [v].[CompanyId], [v].[CounterpartyId], [v].[CounterpartyType], [v].[CreatedAt], [v].[CreatedBy], [v].[CreatedById], [v].[CurrencyCode], [v].[Date], [v].[Description], [v].[FxRate], [v].[IsActive], [v].[IsDeleted], [v].[JournalAccountId], [v].[PostedAt], [v].[PostedBy], [v].[RecurrenceId], [v].[RecurringScheduleId], [v].[ReversedAt], [v].[ReversedBy], [v].[Revision], [v].[Status], [v].[TreasuryId], [v].[Type], [v].[UpdatedAt], [v].[UpdatedById], [v].[WalletId], [v].[WalletType]
FROM [Vouchers] AS [v]
WHERE [v].[Id] = @__id_0
2025-09-20 14:40:43.218 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__voucher_Id_0='7f4e0b81-be31-437e-9941-08ddf829323c'], CommandType='"Text"', CommandTimeout='30']
SELECT [v].[Id], [v].[BaseAmount], [v].[CreatedAt], [v].[CreatedById], [v].[Direction], [v].[IsActive], [v].[IsDeleted], [v].[IsWithholding], [v].[TaxAmount], [v].[TaxId], [v].[UpdatedAt], [v].[UpdatedById], [v].[VoucherId]
FROM [VoucherTaxes] AS [v]
WHERE [v].[IsDeleted] = CAST(0 AS bit) AND [v].[VoucherId] = @__voucher_Id_0
2025-09-20 14:40:43.234 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__voucher_Id_0='7f4e0b81-be31-437e-9941-08ddf829323c'], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Checksum], [a].[CreatedAt], [a].[CreatedById], [a].[FilePath], [a].[FileSize], [a].[Filename], [a].[IsActive], [a].[IsDeleted], [a].[MimeType], [a].[UpdatedAt], [a].[UpdatedById], [a].[UploadedAt], [a].[UploadedBy], [a].[VoucherId]
FROM [Attachments] AS [a]
WHERE [a].[IsDeleted] = CAST(0 AS bit) AND [a].[VoucherId] = @__voucher_Id_0
2025-09-20 14:40:43.256 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Finance.Features.IncomesVoucher.DTO.IncomeVoucherResponseDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-20 14:40:43.260 +03:00 [INF] Executed action ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController.GetIncomeVoucher (ModularERP) in 133.6811ms
2025-09-20 14:40:43.263 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController.GetIncomeVoucher (ModularERP)'
2025-09-20 14:40:43.265 +03:00 [INF] Request completed successfully with status code 200
2025-09-20 14:40:43.269 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/api/IncomeVouchers/7f4e0b81-be31-437e-9941-08ddf829323c - 200 null application/json; charset=utf-8 167.2409ms
2025-09-20 14:41:21.056 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-09-20 14:41:21.451 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 394.6601ms
2025-09-20 14:41:23.552 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-09-20 14:41:23.552 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-09-20 14:41:23.566 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 13.9334ms
2025-09-20 14:41:23.619 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 65.9333ms
2025-09-20 14:41:24.083 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-09-20 14:41:24.134 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 50.3042ms
2025-09-20 14:41:30.807 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/api/IncomeVouchers/7f4e0b81-be31-437e-9941-08ddf829323c - null null
2025-09-20 14:41:30.815 +03:00 [INF] Request started
2025-09-20 14:41:30.819 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController.GetIncomeVoucher (ModularERP)'
2025-09-20 14:41:30.822 +03:00 [INF] Route matched with {action = "GetIncomeVoucher", controller = "IncomeVouchers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Finance.Features.IncomesVoucher.DTO.IncomeVoucherResponseDto]]] GetIncomeVoucher(System.Guid) on controller ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController (ModularERP).
2025-09-20 14:41:30.854 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__id_0='7f4e0b81-be31-437e-9941-08ddf829323c'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [v].[Id], [v].[Amount], [v].[BankAccountId], [v].[CategoryAccountId], [v].[Code], [v].[CompanyId], [v].[CounterpartyId], [v].[CounterpartyType], [v].[CreatedAt], [v].[CreatedBy], [v].[CreatedById], [v].[CurrencyCode], [v].[Date], [v].[Description], [v].[FxRate], [v].[IsActive], [v].[IsDeleted], [v].[JournalAccountId], [v].[PostedAt], [v].[PostedBy], [v].[RecurrenceId], [v].[RecurringScheduleId], [v].[ReversedAt], [v].[ReversedBy], [v].[Revision], [v].[Status], [v].[TreasuryId], [v].[Type], [v].[UpdatedAt], [v].[UpdatedById], [v].[WalletId], [v].[WalletType]
FROM [Vouchers] AS [v]
WHERE [v].[Id] = @__id_0
2025-09-20 14:41:30.891 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__voucher_Id_0='7f4e0b81-be31-437e-9941-08ddf829323c'], CommandType='"Text"', CommandTimeout='30']
SELECT [v].[Id], [v].[BaseAmount], [v].[CreatedAt], [v].[CreatedById], [v].[Direction], [v].[IsActive], [v].[IsDeleted], [v].[IsWithholding], [v].[TaxAmount], [v].[TaxId], [v].[UpdatedAt], [v].[UpdatedById], [v].[VoucherId]
FROM [VoucherTaxes] AS [v]
WHERE [v].[IsDeleted] = CAST(0 AS bit) AND [v].[VoucherId] = @__voucher_Id_0
2025-09-20 14:41:30.915 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__voucher_Id_0='7f4e0b81-be31-437e-9941-08ddf829323c'], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Checksum], [a].[CreatedAt], [a].[CreatedById], [a].[FilePath], [a].[FileSize], [a].[Filename], [a].[IsActive], [a].[IsDeleted], [a].[MimeType], [a].[UpdatedAt], [a].[UpdatedById], [a].[UploadedAt], [a].[UploadedBy], [a].[VoucherId]
FROM [Attachments] AS [a]
WHERE [a].[IsDeleted] = CAST(0 AS bit) AND [a].[VoucherId] = @__voucher_Id_0
2025-09-20 14:41:30.932 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Finance.Features.IncomesVoucher.DTO.IncomeVoucherResponseDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-20 14:41:30.942 +03:00 [INF] Executed action ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController.GetIncomeVoucher (ModularERP) in 112.5678ms
2025-09-20 14:41:30.950 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController.GetIncomeVoucher (ModularERP)'
2025-09-20 14:41:30.959 +03:00 [INF] Request completed successfully with status code 200
2025-09-20 14:41:30.962 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/api/IncomeVouchers/7f4e0b81-be31-437e-9941-08ddf829323c - 200 null application/json; charset=utf-8 155.4709ms
2025-09-20 15:45:48.152 +03:00 [INF] Starting web host...
2025-09-20 15:45:49.169 +03:00 [INF] Now listening on: https://localhost:7168
2025-09-20 15:45:49.175 +03:00 [INF] Now listening on: http://localhost:5004
2025-09-20 15:45:49.263 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-20 15:45:49.265 +03:00 [INF] Hosting environment: Development
2025-09-20 15:45:49.266 +03:00 [INF] Content root path: C:\Users\hossny D. monkey\source\repos\ModularERP\ModularERP
2025-09-20 15:45:59.662 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-09-20 15:46:00.060 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 400.7507ms
2025-09-20 15:46:00.115 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-09-20 15:46:00.136 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 21.0176ms
2025-09-20 15:46:01.807 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-09-20 15:46:01.866 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 58.25ms
2025-09-20 15:46:02.192 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-09-20 15:46:02.331 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 139.1645ms
2025-09-20 15:46:14.220 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/api/IncomeVouchers/7f4e0b81-be31-437e-9941-08ddf829323c - null null
2025-09-20 15:46:14.281 +03:00 [INF] Request started
2025-09-20 15:46:14.291 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController.GetIncomeVoucher (ModularERP)'
2025-09-20 15:46:14.341 +03:00 [INF] Route matched with {action = "GetIncomeVoucher", controller = "IncomeVouchers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Finance.Features.IncomesVoucher.DTO.IncomeVoucherResponseDto]]] GetIncomeVoucher(System.Guid) on controller ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController (ModularERP).
2025-09-20 15:46:14.354 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-20 15:46:17.000 +03:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-20 15:46:17.835 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-20 15:46:17.844 +03:00 [INF] Fetching income voucher with ID: "7f4e0b81-be31-437e-9941-08ddf829323c"
2025-09-20 15:46:19.456 +03:00 [INF] Executed DbCommand (128ms) [Parameters=[@__id_0='7f4e0b81-be31-437e-9941-08ddf829323c'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [v].[Id], [v].[Amount], [v].[BankAccountId], [v].[CategoryAccountId], [v].[Code], [v].[CompanyId], [v].[CounterpartyId], [v].[CounterpartyType], [v].[CreatedAt], [v].[CreatedBy], [v].[CreatedById], [v].[CurrencyCode], [v].[Date], [v].[Description], [v].[FxRate], [v].[IsActive], [v].[IsDeleted], [v].[JournalAccountId], [v].[PostedAt], [v].[PostedBy], [v].[RecurrenceId], [v].[RecurringScheduleId], [v].[ReversedAt], [v].[ReversedBy], [v].[Revision], [v].[Status], [v].[TreasuryId], [v].[Type], [v].[UpdatedAt], [v].[UpdatedById], [v].[WalletId], [v].[WalletType]
FROM [Vouchers] AS [v]
WHERE [v].[Id] = @__id_0
2025-09-20 15:46:19.863 +03:00 [INF] Found income voucher: INC-14555
2025-09-20 15:46:19.930 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[@__voucher_Id_0='7f4e0b81-be31-437e-9941-08ddf829323c'], CommandType='"Text"', CommandTimeout='30']
SELECT [v].[Id], [v].[BaseAmount], [v].[CreatedAt], [v].[CreatedById], [v].[Direction], [v].[IsActive], [v].[IsDeleted], [v].[IsWithholding], [v].[TaxAmount], [v].[TaxId], [v].[UpdatedAt], [v].[UpdatedById], [v].[VoucherId]
FROM [VoucherTaxes] AS [v]
WHERE [v].[IsDeleted] = CAST(0 AS bit) AND [v].[VoucherId] = @__voucher_Id_0
2025-09-20 15:46:19.965 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'ModularERP.Modules.Finance.Finance.Infrastructure.Data.FinanceDbContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-09-20 15:46:20.065 +03:00 [ERR] Unhandled error occurred while fetching income voucher "7f4e0b81-be31-437e-9941-08ddf829323c"
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at ModularERP.Modules.Finance.Features.IncomesVoucher.Handlers.GetIncomeVoucherByIdHandler.Handle(GetIncomeVoucherByIdQuery request, CancellationToken cancellationToken) in C:\Users\hossny D. monkey\source\repos\ModularERP\ModularERP\Modules\Finance\Features\IncomesVoucher\Handlers\GetIncomeVoucherByIdHandler.cs:line 75
2025-09-20 15:46:20.133 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Finance.Features.IncomesVoucher.DTO.IncomeVoucherResponseDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-20 15:46:20.206 +03:00 [INF] Executed action ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController.GetIncomeVoucher (ModularERP) in 5848.7416ms
2025-09-20 15:46:20.217 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController.GetIncomeVoucher (ModularERP)'
2025-09-20 15:46:20.227 +03:00 [INF] Request completed successfully with status code 400
2025-09-20 15:46:20.252 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/api/IncomeVouchers/7f4e0b81-be31-437e-9941-08ddf829323c - 400 null application/json; charset=utf-8 6031.4547ms
2025-09-20 15:49:00.494 +03:00 [INF] Starting web host...
2025-09-20 15:49:01.093 +03:00 [INF] Now listening on: https://localhost:7168
2025-09-20 15:49:01.098 +03:00 [INF] Now listening on: http://localhost:5004
2025-09-20 15:49:01.195 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-20 15:49:01.198 +03:00 [INF] Hosting environment: Development
2025-09-20 15:49:01.201 +03:00 [INF] Content root path: C:\Users\hossny D. monkey\source\repos\ModularERP\ModularERP
2025-09-20 15:49:26.655 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-09-20 15:49:26.959 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 308.0603ms
2025-09-20 15:49:27.019 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-09-20 15:49:27.037 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 18.3092ms
2025-09-20 15:49:27.837 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-09-20 15:49:27.883 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 45.6073ms
2025-09-20 15:49:28.014 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-09-20 15:49:28.127 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 112.3547ms
2025-09-20 15:49:38.896 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/api/IncomeVouchers/7f4e0b81-be31-437e-9941-08ddf829323c - null null
2025-09-20 15:49:38.950 +03:00 [INF] Request started
2025-09-20 15:49:38.955 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController.GetIncomeVoucher (ModularERP)'
2025-09-20 15:49:38.989 +03:00 [INF] Route matched with {action = "GetIncomeVoucher", controller = "IncomeVouchers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Finance.Features.IncomesVoucher.DTO.IncomeVoucherResponseDto]]] GetIncomeVoucher(System.Guid) on controller ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController (ModularERP).
2025-09-20 15:49:39.001 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-20 15:49:40.757 +03:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-20 15:49:41.395 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-20 15:49:41.405 +03:00 [INF] Fetching income voucher with ID: "7f4e0b81-be31-437e-9941-08ddf829323c"
2025-09-20 15:49:42.667 +03:00 [INF] Executed DbCommand (100ms) [Parameters=[@__id_0='7f4e0b81-be31-437e-9941-08ddf829323c'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [v].[Id], [v].[Amount], [v].[BankAccountId], [v].[CategoryAccountId], [v].[Code], [v].[CompanyId], [v].[CounterpartyId], [v].[CounterpartyType], [v].[CreatedAt], [v].[CreatedBy], [v].[CreatedById], [v].[CurrencyCode], [v].[Date], [v].[Description], [v].[FxRate], [v].[IsActive], [v].[IsDeleted], [v].[JournalAccountId], [v].[PostedAt], [v].[PostedBy], [v].[RecurrenceId], [v].[RecurringScheduleId], [v].[ReversedAt], [v].[ReversedBy], [v].[Revision], [v].[Status], [v].[TreasuryId], [v].[Type], [v].[UpdatedAt], [v].[UpdatedById], [v].[WalletId], [v].[WalletType]
FROM [Vouchers] AS [v]
WHERE [v].[Id] = @__id_0
2025-09-20 15:49:43.028 +03:00 [INF] Found income voucher: INC-14555
2025-09-20 15:49:43.088 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[@__voucher_Id_0='7f4e0b81-be31-437e-9941-08ddf829323c'], CommandType='"Text"', CommandTimeout='30']
SELECT [v].[Id], [v].[BaseAmount], [v].[CreatedAt], [v].[CreatedById], [v].[Direction], [v].[IsActive], [v].[IsDeleted], [v].[IsWithholding], [v].[TaxAmount], [v].[TaxId], [v].[UpdatedAt], [v].[UpdatedById], [v].[VoucherId]
FROM [VoucherTaxes] AS [v]
WHERE [v].[IsDeleted] = CAST(0 AS bit) AND [v].[VoucherId] = @__voucher_Id_0
2025-09-20 15:49:43.210 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@__voucher_Id_0='7f4e0b81-be31-437e-9941-08ddf829323c'], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Checksum], [a].[CreatedAt], [a].[CreatedById], [a].[FilePath], [a].[FileSize], [a].[Filename], [a].[IsActive], [a].[IsDeleted], [a].[MimeType], [a].[UpdatedAt], [a].[UpdatedById], [a].[UploadedAt], [a].[UploadedBy], [a].[VoucherId]
FROM [Attachments] AS [a]
WHERE [a].[IsDeleted] = CAST(0 AS bit) AND [a].[VoucherId] = @__voucher_Id_0
2025-09-20 15:49:43.289 +03:00 [INF] Retrieved 1 tax lines and 1 attachments for voucher "7f4e0b81-be31-437e-9941-08ddf829323c"
2025-09-20 15:49:43.320 +03:00 [ERR] Unhandled error occurred while fetching income voucher "7f4e0b81-be31-437e-9941-08ddf829323c"
AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
Voucher -> IncomeVoucherResponseDto
ModularERP.Modules.Finance.Features.Vouchers.Models.Voucher -> ModularERP.Modules.Finance.Features.IncomesVoucher.DTO.IncomeVoucherResponseDto

Type Map configuration:
Voucher -> IncomeVoucherResponseDto
ModularERP.Modules.Finance.Features.Vouchers.Models.Voucher -> ModularERP.Modules.Finance.Features.IncomesVoucher.DTO.IncomeVoucherResponseDto

Destination Member:
Source

 ---> AutoMapper.AutoMapperMappingException: Cannot create an instance of type ModularERP.Modules.Finance.Features.IncomesVoucher.Mapping.SourceResolver
   at lambda_method420(Closure, Object, IncomeVoucherResponseDto, ResolutionContext)
   --- End of inner exception stack trace ---
   at lambda_method420(Closure, Object, IncomeVoucherResponseDto, ResolutionContext)
   at ModularERP.Modules.Finance.Features.IncomesVoucher.Handlers.GetIncomeVoucherByIdHandler.Handle(GetIncomeVoucherByIdQuery request, CancellationToken cancellationToken) in C:\Users\hossny D. monkey\source\repos\ModularERP\ModularERP\Modules\Finance\Features\IncomesVoucher\Handlers\GetIncomeVoucherByIdHandler.cs:line 78
2025-09-20 15:49:43.439 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Finance.Features.IncomesVoucher.DTO.IncomeVoucherResponseDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-20 15:49:43.516 +03:00 [INF] Executed action ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController.GetIncomeVoucher (ModularERP) in 4512.4074ms
2025-09-20 15:49:43.522 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController.GetIncomeVoucher (ModularERP)'
2025-09-20 15:49:43.529 +03:00 [INF] Request completed successfully with status code 400
2025-09-20 15:49:43.548 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/api/IncomeVouchers/7f4e0b81-be31-437e-9941-08ddf829323c - 400 null application/json; charset=utf-8 4651.8248ms
2025-09-20 15:51:17.514 +03:00 [INF] Starting web host...
2025-09-20 15:51:18.134 +03:00 [INF] Now listening on: https://localhost:7168
2025-09-20 15:51:18.139 +03:00 [INF] Now listening on: http://localhost:5004
2025-09-20 15:51:18.274 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-20 15:51:18.276 +03:00 [INF] Hosting environment: Development
2025-09-20 15:51:18.277 +03:00 [INF] Content root path: C:\Users\hossny D. monkey\source\repos\ModularERP\ModularERP
2025-09-20 15:51:31.343 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-09-20 15:51:31.707 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 366.6218ms
2025-09-20 15:51:31.748 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-09-20 15:51:31.760 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 11.6311ms
2025-09-20 15:51:32.743 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-09-20 15:51:32.785 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 42.0784ms
2025-09-20 15:51:32.899 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-09-20 15:51:33.009 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 110.2792ms
2025-09-20 15:51:45.288 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/api/IncomeVouchers/7f4e0b81-be31-437e-9941-08ddf829323c - null null
2025-09-20 15:51:45.315 +03:00 [INF] Request started
2025-09-20 15:51:45.321 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController.GetIncomeVoucher (ModularERP)'
2025-09-20 15:51:45.385 +03:00 [INF] Route matched with {action = "GetIncomeVoucher", controller = "IncomeVouchers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Finance.Features.IncomesVoucher.DTO.IncomeVoucherResponseDto]]] GetIncomeVoucher(System.Guid) on controller ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController (ModularERP).
2025-09-20 15:51:45.400 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-20 15:51:47.509 +03:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-20 15:51:48.234 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-20 15:51:48.243 +03:00 [INF] Fetching income voucher with ID: "7f4e0b81-be31-437e-9941-08ddf829323c"
2025-09-20 15:51:49.586 +03:00 [INF] Executed DbCommand (123ms) [Parameters=[@__id_0='7f4e0b81-be31-437e-9941-08ddf829323c'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [v].[Id], [v].[Amount], [v].[BankAccountId], [v].[CategoryAccountId], [v].[Code], [v].[CompanyId], [v].[CounterpartyId], [v].[CounterpartyType], [v].[CreatedAt], [v].[CreatedBy], [v].[CreatedById], [v].[CurrencyCode], [v].[Date], [v].[Description], [v].[FxRate], [v].[IsActive], [v].[IsDeleted], [v].[JournalAccountId], [v].[PostedAt], [v].[PostedBy], [v].[RecurrenceId], [v].[RecurringScheduleId], [v].[ReversedAt], [v].[ReversedBy], [v].[Revision], [v].[Status], [v].[TreasuryId], [v].[Type], [v].[UpdatedAt], [v].[UpdatedById], [v].[WalletId], [v].[WalletType]
FROM [Vouchers] AS [v]
WHERE [v].[Id] = @__id_0
2025-09-20 15:51:50.001 +03:00 [INF] Found income voucher: INC-14555
2025-09-20 15:51:50.078 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[@__voucher_Id_0='7f4e0b81-be31-437e-9941-08ddf829323c'], CommandType='"Text"', CommandTimeout='30']
SELECT [v].[Id], [v].[BaseAmount], [v].[CreatedAt], [v].[CreatedById], [v].[Direction], [v].[IsActive], [v].[IsDeleted], [v].[IsWithholding], [v].[TaxAmount], [v].[TaxId], [v].[UpdatedAt], [v].[UpdatedById], [v].[VoucherId]
FROM [VoucherTaxes] AS [v]
WHERE [v].[IsDeleted] = CAST(0 AS bit) AND [v].[VoucherId] = @__voucher_Id_0
2025-09-20 15:51:50.229 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[@__voucher_Id_0='7f4e0b81-be31-437e-9941-08ddf829323c'], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Checksum], [a].[CreatedAt], [a].[CreatedById], [a].[FilePath], [a].[FileSize], [a].[Filename], [a].[IsActive], [a].[IsDeleted], [a].[MimeType], [a].[UpdatedAt], [a].[UpdatedById], [a].[UploadedAt], [a].[UploadedBy], [a].[VoucherId]
FROM [Attachments] AS [a]
WHERE [a].[IsDeleted] = CAST(0 AS bit) AND [a].[VoucherId] = @__voucher_Id_0
2025-09-20 15:51:50.305 +03:00 [INF] Retrieved 1 tax lines and 1 attachments for voucher "7f4e0b81-be31-437e-9941-08ddf829323c"
2025-09-20 15:51:50.354 +03:00 [INF] Successfully retrieved income voucher INC-14555 with all related data
2025-09-20 15:51:50.376 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Finance.Features.IncomesVoucher.DTO.IncomeVoucherResponseDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-20 15:51:50.462 +03:00 [INF] Executed action ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController.GetIncomeVoucher (ModularERP) in 5060.7305ms
2025-09-20 15:51:50.470 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Finance.Features.IncomesVoucher.Controllers.IncomeVouchersController.GetIncomeVoucher (ModularERP)'
2025-09-20 15:51:50.478 +03:00 [INF] Request completed successfully with status code 200
2025-09-20 15:51:50.498 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/api/IncomeVouchers/7f4e0b81-be31-437e-9941-08ddf829323c - 200 null application/json; charset=utf-8 5209.9196ms
2025-09-20 16:01:05.660 +03:00 [INF] Starting web host...
2025-09-20 16:01:06.213 +03:00 [INF] Now listening on: https://localhost:7168
2025-09-20 16:01:06.218 +03:00 [INF] Now listening on: http://localhost:5004
2025-09-20 16:01:06.350 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-20 16:01:06.353 +03:00 [INF] Hosting environment: Development
2025-09-20 16:01:06.354 +03:00 [INF] Content root path: C:\Users\hossny D. monkey\source\repos\ModularERP\ModularERP
2025-09-20 16:01:27.332 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-09-20 16:01:27.672 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 343.4528ms
2025-09-20 16:01:27.702 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-09-20 16:01:27.712 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 10.0101ms
2025-09-20 16:01:29.177 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-09-20 16:01:29.218 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 40.8447ms
2025-09-20 16:01:29.453 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-09-20 16:01:29.583 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 129.5325ms
2025-09-20 16:01:44.554 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/api/ExpenseVouchers/3b3c4b2a-8d29-4671-dff5-08ddf6073ae6 - null null
2025-09-20 16:01:44.618 +03:00 [INF] Request started
2025-09-20 16:01:44.624 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Finance.Features.ExpensesVoucher.Controllers.ExpenseVouchersController.GetExpenseVoucher (ModularERP)'
2025-09-20 16:01:44.654 +03:00 [INF] Route matched with {action = "GetExpenseVoucher", controller = "ExpenseVouchers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetExpenseVoucher(System.Guid) on controller ModularERP.Modules.Finance.Features.ExpensesVoucher.Controllers.ExpenseVouchersController (ModularERP).
2025-09-20 16:01:44.663 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-20 16:01:46.517 +03:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-20 16:01:47.275 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-20 16:01:47.287 +03:00 [INF] Fetching expense voucher with ID: "3b3c4b2a-8d29-4671-dff5-08ddf6073ae6"
2025-09-20 16:01:48.667 +03:00 [INF] Executed DbCommand (92ms) [Parameters=[@__id_0='3b3c4b2a-8d29-4671-dff5-08ddf6073ae6'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [v].[Id], [v].[Amount], [v].[BankAccountId], [v].[CategoryAccountId], [v].[Code], [v].[CompanyId], [v].[CounterpartyId], [v].[CounterpartyType], [v].[CreatedAt], [v].[CreatedBy], [v].[CreatedById], [v].[CurrencyCode], [v].[Date], [v].[Description], [v].[FxRate], [v].[IsActive], [v].[IsDeleted], [v].[JournalAccountId], [v].[PostedAt], [v].[PostedBy], [v].[RecurrenceId], [v].[RecurringScheduleId], [v].[ReversedAt], [v].[ReversedBy], [v].[Revision], [v].[Status], [v].[TreasuryId], [v].[Type], [v].[UpdatedAt], [v].[UpdatedById], [v].[WalletId], [v].[WalletType]
FROM [Vouchers] AS [v]
WHERE [v].[Id] = @__id_0
2025-09-20 16:01:49.060 +03:00 [INF] Found expense voucher: EXP-011
2025-09-20 16:01:49.131 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__voucher_Id_0='3b3c4b2a-8d29-4671-dff5-08ddf6073ae6'], CommandType='"Text"', CommandTimeout='30']
SELECT [v].[Id], [v].[BaseAmount], [v].[CreatedAt], [v].[CreatedById], [v].[Direction], [v].[IsActive], [v].[IsDeleted], [v].[IsWithholding], [v].[TaxAmount], [v].[TaxId], [v].[UpdatedAt], [v].[UpdatedById], [v].[VoucherId]
FROM [VoucherTaxes] AS [v]
WHERE [v].[IsDeleted] = CAST(0 AS bit) AND [v].[VoucherId] = @__voucher_Id_0
2025-09-20 16:01:49.183 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@__voucher_Id_0='3b3c4b2a-8d29-4671-dff5-08ddf6073ae6'], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Checksum], [a].[CreatedAt], [a].[CreatedById], [a].[FilePath], [a].[FileSize], [a].[Filename], [a].[IsActive], [a].[IsDeleted], [a].[MimeType], [a].[UpdatedAt], [a].[UpdatedById], [a].[UploadedAt], [a].[UploadedBy], [a].[VoucherId]
FROM [Attachments] AS [a]
WHERE [a].[IsDeleted] = CAST(0 AS bit) AND [a].[VoucherId] = @__voucher_Id_0
2025-09-20 16:01:49.202 +03:00 [INF] Retrieved 0 tax lines and 0 attachments for voucher "3b3c4b2a-8d29-4671-dff5-08ddf6073ae6"
2025-09-20 16:01:49.253 +03:00 [INF] Successfully retrieved expense voucher EXP-011 with all related data
2025-09-20 16:01:49.275 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Finance.Features.ExpensesVoucher.DTO.ExpenseVoucherResponseDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-20 16:01:49.355 +03:00 [INF] Executed action ModularERP.Modules.Finance.Features.ExpensesVoucher.Controllers.ExpenseVouchersController.GetExpenseVoucher (ModularERP) in 4688.588ms
2025-09-20 16:01:49.362 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Finance.Features.ExpensesVoucher.Controllers.ExpenseVouchersController.GetExpenseVoucher (ModularERP)'
2025-09-20 16:01:49.369 +03:00 [INF] Request completed successfully with status code 200
2025-09-20 16:01:49.387 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/api/ExpenseVouchers/3b3c4b2a-8d29-4671-dff5-08ddf6073ae6 - 200 null application/json; charset=utf-8 4833.1431ms
2025-09-20 16:04:39.559 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/ExpenseVouchers?Code=INC-125468&Date=2025-09-18T19:22:40.318Z&CurrencyCode=EGP&FxRate=1.0&Amount=600&Description=anu&CategoryId=f8cd0c63-50d7-4a69-a344-bc53be110f77&RecurrenceId=7b6fd5d0-11ec-43b6-b9d6-eba78273f3fe - multipart/form-data; boundary=--------------------------382847616627709456920551 99887
2025-09-20 16:04:39.569 +03:00 [INF] Request started
2025-09-20 16:04:39.572 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Finance.Features.ExpensesVoucher.Controllers.ExpenseVouchersController.CreateExpenseVoucher (ModularERP)'
2025-09-20 16:04:39.593 +03:00 [INF] Route matched with {action = "CreateExpenseVoucher", controller = "ExpenseVouchers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Finance.Features.ExpensesVoucher.DTO.ExpenseVoucherResponseDto]]] CreateExpenseVoucher(ModularERP.Modules.Finance.Features.ExpensesVoucher.DTO.CreateExpenseVoucherDto) on controller ModularERP.Modules.Finance.Features.ExpensesVoucher.Controllers.ExpenseVouchersController (ModularERP).
2025-09-20 16:04:39.662 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-09-20 16:04:39.704 +03:00 [INF] Executed action ModularERP.Modules.Finance.Features.ExpensesVoucher.Controllers.ExpenseVouchersController.CreateExpenseVoucher (ModularERP) in 106.3829ms
2025-09-20 16:04:39.711 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Finance.Features.ExpensesVoucher.Controllers.ExpenseVouchersController.CreateExpenseVoucher (ModularERP)'
2025-09-20 16:04:39.718 +03:00 [INF] Request completed successfully with status code 400
2025-09-20 16:04:39.727 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/ExpenseVouchers?Code=INC-125468&Date=2025-09-18T19:22:40.318Z&CurrencyCode=EGP&FxRate=1.0&Amount=600&Description=anu&CategoryId=f8cd0c63-50d7-4a69-a344-bc53be110f77&RecurrenceId=7b6fd5d0-11ec-43b6-b9d6-eba78273f3fe - 400 null application/problem+json; charset=utf-8 168.0584ms
2025-09-20 16:13:16.455 +03:00 [INF] Starting web host...
2025-09-20 16:13:16.985 +03:00 [INF] Now listening on: https://localhost:7168
2025-09-20 16:13:16.992 +03:00 [INF] Now listening on: http://localhost:5004
2025-09-20 16:13:17.179 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-20 16:13:17.183 +03:00 [INF] Hosting environment: Development
2025-09-20 16:13:17.192 +03:00 [INF] Content root path: C:\Users\hossny D. monkey\source\repos\ModularERP\ModularERP
2025-09-20 16:13:33.536 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/ExpenseVouchers?Code=INC-125468&Date=2025-09-18T19:22:40.318Z&CurrencyCode=EGP&FxRate=1.0&Amount=600&Description=anu&CategoryId=f8cd0c63-50d7-4a69-a344-bc53be110f77&RecurrenceId=7b6fd5d0-11ec-43b6-b9d6-eba78273f3fe - multipart/form-data; boundary=--------------------------461033727283147812276477 99887
2025-09-20 16:13:33.643 +03:00 [INF] Request started
2025-09-20 16:13:33.652 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Finance.Features.ExpensesVoucher.Controllers.ExpenseVouchersController.CreateExpenseVoucher (ModularERP)'
2025-09-20 16:13:33.707 +03:00 [INF] Route matched with {action = "CreateExpenseVoucher", controller = "ExpenseVouchers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Finance.Features.ExpensesVoucher.DTO.ExpenseVoucherResponseDto]]] CreateExpenseVoucher(ModularERP.Modules.Finance.Features.ExpensesVoucher.DTO.CreateExpenseVoucherDto) on controller ModularERP.Modules.Finance.Features.ExpensesVoucher.Controllers.ExpenseVouchersController (ModularERP).
2025-09-20 16:13:33.722 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-20 16:13:33.869 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-09-20 16:13:33.955 +03:00 [INF] Executed action ModularERP.Modules.Finance.Features.ExpensesVoucher.Controllers.ExpenseVouchersController.CreateExpenseVoucher (ModularERP) in 231.1096ms
2025-09-20 16:13:33.969 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Finance.Features.ExpensesVoucher.Controllers.ExpenseVouchersController.CreateExpenseVoucher (ModularERP)'
2025-09-20 16:13:33.975 +03:00 [INF] Request completed successfully with status code 400
2025-09-20 16:13:34.001 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/ExpenseVouchers?Code=INC-125468&Date=2025-09-18T19:22:40.318Z&CurrencyCode=EGP&FxRate=1.0&Amount=600&Description=anu&CategoryId=f8cd0c63-50d7-4a69-a344-bc53be110f77&RecurrenceId=7b6fd5d0-11ec-43b6-b9d6-eba78273f3fe - 400 null application/problem+json; charset=utf-8 467.9242ms
2025-09-20 16:15:47.037 +03:00 [INF] Starting web host...
2025-09-20 16:15:48.038 +03:00 [INF] Now listening on: https://localhost:7168
2025-09-20 16:15:48.044 +03:00 [INF] Now listening on: http://localhost:5004
2025-09-20 16:15:48.207 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-20 16:15:48.209 +03:00 [INF] Hosting environment: Development
2025-09-20 16:15:48.211 +03:00 [INF] Content root path: C:\Users\hossny D. monkey\source\repos\ModularERP\ModularERP
2025-09-20 16:15:52.391 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/ExpenseVouchers?Code=INC-125468&Date=2025-09-18T19:22:40.318Z&CurrencyCode=EGP&FxRate=1.0&Amount=600&Description=anu&CategoryId=f8cd0c63-50d7-4a69-a344-bc53be110f77&RecurrenceId=7b6fd5d0-11ec-43b6-b9d6-eba78273f3fe - multipart/form-data; boundary=--------------------------630064417591812384706360 99887
2025-09-20 16:15:52.444 +03:00 [INF] Request started
2025-09-20 16:15:52.449 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Finance.Features.ExpensesVoucher.Controllers.ExpenseVouchersController.CreateExpenseVoucher (ModularERP)'
2025-09-20 16:15:52.476 +03:00 [INF] Route matched with {action = "CreateExpenseVoucher", controller = "ExpenseVouchers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Finance.Features.ExpensesVoucher.DTO.ExpenseVoucherResponseDto]]] CreateExpenseVoucher(System.String, System.DateTime, System.String, System.Decimal, System.Decimal, System.String, System.Guid, System.Nullable`1[System.Guid], System.String, System.Guid, System.String, System.Nullable`1[System.Guid], System.String, System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]) on controller ModularERP.Modules.Finance.Features.ExpensesVoucher.Controllers.ExpenseVouchersController (ModularERP).
2025-09-20 16:15:52.485 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-20 16:15:53.404 +03:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-20 16:15:53.751 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-20 16:15:53.795 +03:00 [INF] Start creating expense voucher with data: {"Code":"INC-125468","Date":"2025-09-18T19:22:40.3180000Z","Amount":600,"Description":"anu","CategoryId":"f8cd0c63-50d7-4a69-a344-bc53be110f77","Source":{"Type":"","Id":"00000000-0000-0000-0000-000000000000","$type":"WalletDto"},"Counterparty":null,"TaxLinesCount":1,"AttachmentsCount":1}
2025-09-20 16:15:53.864 +03:00 [WRN] Validation failed: {"Source.Type":["Source type must be Treasury or BankAccount"],"Source.Id":["Source wallet ID is required"]}
2025-09-20 16:15:53.880 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Finance.Features.ExpensesVoucher.DTO.ExpenseVoucherResponseDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-20 16:15:53.918 +03:00 [INF] Executed action ModularERP.Modules.Finance.Features.ExpensesVoucher.Controllers.ExpenseVouchersController.CreateExpenseVoucher (ModularERP) in 1432.5772ms
2025-09-20 16:15:53.928 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Finance.Features.ExpensesVoucher.Controllers.ExpenseVouchersController.CreateExpenseVoucher (ModularERP)'
2025-09-20 16:15:53.934 +03:00 [INF] Request completed successfully with status code 400
2025-09-20 16:15:53.950 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/ExpenseVouchers?Code=INC-125468&Date=2025-09-18T19:22:40.318Z&CurrencyCode=EGP&FxRate=1.0&Amount=600&Description=anu&CategoryId=f8cd0c63-50d7-4a69-a344-bc53be110f77&RecurrenceId=7b6fd5d0-11ec-43b6-b9d6-eba78273f3fe - 400 null application/json; charset=utf-8 1561.72ms
2025-09-20 16:21:58.677 +03:00 [INF] Starting web host...
2025-09-20 16:21:59.231 +03:00 [INF] Now listening on: https://localhost:7168
2025-09-20 16:21:59.237 +03:00 [INF] Now listening on: http://localhost:5004
2025-09-20 16:21:59.319 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-20 16:21:59.321 +03:00 [INF] Hosting environment: Development
2025-09-20 16:21:59.322 +03:00 [INF] Content root path: C:\Users\hossny D. monkey\source\repos\ModularERP\ModularERP
2025-09-20 16:21:59.497 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-09-20 16:21:59.654 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 156.7567ms
2025-09-20 16:22:01.403 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-09-20 16:22:01.403 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-09-20 16:22:01.418 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 15.2632ms
2025-09-20 16:22:01.446 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 43.432ms
2025-09-20 16:22:02.001 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-09-20 16:22:02.071 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 69.211ms
2025-09-20 16:22:23.692 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/ExpenseVouchers?Code=INC-125468&Date=2025-09-18T19:22:40.318Z&CurrencyCode=EGP&FxRate=1.0&Amount=600&Description=anu&CategoryId=f8cd0c63-50d7-4a69-a344-bc53be110f77&RecurrenceId=7b6fd5d0-11ec-43b6-b9d6-eba78273f3fe - multipart/form-data; boundary=--------------------------808723878712375574718489 99887
2025-09-20 16:22:23.719 +03:00 [INF] Request started
2025-09-20 16:22:23.722 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Finance.Features.ExpensesVoucher.Controllers.ExpenseVouchersController.CreateExpenseVoucher (ModularERP)'
2025-09-20 16:22:23.755 +03:00 [INF] Route matched with {action = "CreateExpenseVoucher", controller = "ExpenseVouchers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Finance.Features.ExpensesVoucher.DTO.ExpenseVoucherResponseDto]]] CreateExpenseVoucher(System.String, System.DateTime, System.String, System.Decimal, System.Decimal, System.String, System.Guid, System.Nullable`1[System.Guid], System.String, System.Guid, System.String, System.Nullable`1[System.Guid], System.String, System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]) on controller ModularERP.Modules.Finance.Features.ExpensesVoucher.Controllers.ExpenseVouchersController (ModularERP).
2025-09-20 16:22:23.763 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-20 16:22:23.810 +03:00 [INF] Received parameters: sourceType=, sourceId="00000000-0000-0000-0000-000000000000"
2025-09-20 16:22:23.813 +03:00 [INF] Built DTO: Source.Type=, Source.Id="00000000-0000-0000-0000-000000000000"
2025-09-20 16:22:25.094 +03:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-20 16:22:25.681 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-20 16:22:25.745 +03:00 [INF] Start creating expense voucher with data: {"Code":"INC-125468","Date":"2025-09-18T19:22:40.3180000Z","Amount":600,"Description":"anu","CategoryId":"f8cd0c63-50d7-4a69-a344-bc53be110f77","Source":{"Type":"","Id":"00000000-0000-0000-0000-000000000000","$type":"WalletDto"},"Counterparty":null,"TaxLinesCount":1,"AttachmentsCount":1}
2025-09-20 16:22:25.837 +03:00 [WRN] Validation failed: {"Source.Type":["Source type is required","Source type must be Treasury or BankAccount"],"Source.Id":["Source wallet ID is required"]}
2025-09-20 16:22:25.856 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Finance.Features.ExpensesVoucher.DTO.ExpenseVoucherResponseDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-20 16:22:25.896 +03:00 [INF] Executed action ModularERP.Modules.Finance.Features.ExpensesVoucher.Controllers.ExpenseVouchersController.CreateExpenseVoucher (ModularERP) in 2132.984ms
2025-09-20 16:22:25.900 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Finance.Features.ExpensesVoucher.Controllers.ExpenseVouchersController.CreateExpenseVoucher (ModularERP)'
2025-09-20 16:22:25.906 +03:00 [INF] Request completed successfully with status code 400
2025-09-20 16:22:25.922 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/ExpenseVouchers?Code=INC-125468&Date=2025-09-18T19:22:40.318Z&CurrencyCode=EGP&FxRate=1.0&Amount=600&Description=anu&CategoryId=f8cd0c63-50d7-4a69-a344-bc53be110f77&RecurrenceId=7b6fd5d0-11ec-43b6-b9d6-eba78273f3fe - 400 null application/json; charset=utf-8 2229.8262ms
2025-09-20 16:30:29.984 +03:00 [INF] Starting web host...
2025-09-20 16:30:30.622 +03:00 [INF] Now listening on: https://localhost:7168
2025-09-20 16:30:30.625 +03:00 [INF] Now listening on: http://localhost:5004
2025-09-20 16:30:30.727 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-20 16:30:30.728 +03:00 [INF] Hosting environment: Development
2025-09-20 16:30:30.730 +03:00 [INF] Content root path: C:\Users\hossny D. monkey\source\repos\ModularERP\ModularERP
2025-09-20 16:30:56.828 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/ExpenseVouchers?Code=INC-125468&Date=2025-09-18T19:22:40.318Z&CurrencyCode=EGP&FxRate=1.0&Amount=600&Description=anu&CategoryId=f8cd0c63-50d7-4a69-a344-bc53be110f77&RecurrenceId=7b6fd5d0-11ec-43b6-b9d6-eba78273f3fe - multipart/form-data; boundary=--------------------------635185174845084714834599 99887
2025-09-20 16:30:56.973 +03:00 [INF] Request started
2025-09-20 16:30:56.984 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Finance.Features.ExpensesVoucher.Controllers.ExpenseVouchersController.CreateExpenseVoucher (ModularERP)'
2025-09-20 16:30:57.074 +03:00 [INF] Route matched with {action = "CreateExpenseVoucher", controller = "ExpenseVouchers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Finance.Features.ExpensesVoucher.DTO.ExpenseVoucherResponseDto]]] CreateExpenseVoucher(System.String, System.DateTime, System.String, System.Decimal, System.Decimal, System.String, System.Guid, System.Nullable`1[System.Guid], System.String, System.Guid, System.String, System.String, System.Collections.Generic.List`1[Microsoft.AspNetCore.Http.IFormFile]) on controller ModularERP.Modules.Finance.Features.ExpensesVoucher.Controllers.ExpenseVouchersController (ModularERP).
2025-09-20 16:30:57.093 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-20 16:30:59.787 +03:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-20 16:31:00.722 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-20 16:31:00.889 +03:00 [INF] Start creating expense voucher with data: {"Code":"EXP-14555","Date":"2025-09-18T19:22:40.3180000Z","Amount":500,"Description":"ant","CategoryId":"f8cd0c63-50d7-4a69-a344-bc53be110f77","Source":{"Type":"BankAccount","Id":"4fe6e0a3-b441-45f6-96a4-0a1c499bbe56","$type":"WalletDto"},"Counterparty":{"Type":"Vendor","Id":"3fa85f64-5717-4562-b3fc-2c963f66afa6","$type":"CounterpartyDto"},"TaxLinesCount":1,"AttachmentsCount":1}
2025-09-20 16:31:01.116 +03:00 [INF] Validation passed successfully.
2025-09-20 16:31:02.844 +03:00 [INF] Executed DbCommand (108ms) [Parameters=[@__id_0='4fe6e0a3-b441-45f6-96a4-0a1c499bbe56'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[AccountNumber], [b].[BankName], [b].[CompanyId], [b].[CreatedAt], [b].[CreatedById], [b].[CurrencyCode], [b].[DepositAcl], [b].[Description], [b].[IsActive], [b].[IsDeleted], [b].[JournalAccountId], [b].[Name], [b].[Status], [b].[UpdatedAt], [b].[UpdatedById], [b].[WithdrawAcl]
FROM [BankAccounts] AS [b]
WHERE [b].[Id] = @__id_0
2025-09-20 16:31:03.256 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[@__id_0='f8cd0c63-50d7-4a69-a344-bc53be110f77'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [g].[Id], [g].[Code], [g].[CompanyId], [g].[CreatedAt], [g].[CreatedById], [g].[IsActive], [g].[IsDeleted], [g].[IsLeaf], [g].[Name], [g].[Type], [g].[UpdatedAt], [g].[UpdatedById]
FROM [GlAccounts] AS [g]
WHERE [g].[Id] = @__id_0
2025-09-20 16:31:03.388 +03:00 [INF] Business validations passed successfully.
2025-09-20 16:31:03.488 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__code_0='EXP-14555' (Size = 20)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Vouchers] AS [v]
        WHERE [v].[CompanyId] = 'd00cf078-c1ff-4feb-ae37-d66a827ae438' AND [v].[Code] = @__code_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-20 16:31:03.569 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='4fe6e0a3-b441-45f6-96a4-0a1c499bbe56'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[AccountNumber], [b].[BankName], [b].[CompanyId], [b].[CreatedAt], [b].[CreatedById], [b].[CurrencyCode], [b].[DepositAcl], [b].[Description], [b].[IsActive], [b].[IsDeleted], [b].[JournalAccountId], [b].[Name], [b].[Status], [b].[UpdatedAt], [b].[UpdatedById], [b].[WithdrawAcl]
FROM [BankAccounts] AS [b]
WHERE [b].[Id] = @__id_0
2025-09-20 16:31:03.583 +03:00 [INF] Adding voucher to repository: {"Code":"EXP-14555","Amount":500,"Date":"2025-09-18T19:22:40.3180000Z"}
2025-09-20 16:31:04.455 +03:00 [INF] Executed DbCommand (35ms) [Parameters=[@p0='e5a7b930-7869-4778-9e45-08ddf849f239', @p1='500' (Precision = 18) (Scale = 2), @p2=NULL (DbType = Guid), @p3='f8cd0c63-50d7-4a69-a344-bc53be110f77', @p4='EXP-14555' (Nullable = false) (Size = 20), @p5='d00cf078-c1ff-4feb-ae37-d66a827ae438', @p6='3fa85f64-5717-4562-b3fc-2c963f66afa6' (Nullable = true), @p7='Vendor' (Size = 450), @p8='2025-09-20T13:31:03.5563344Z', @p9='5dbceb39-9677-46d7-bf8a-2eb914c55437', @p10=NULL (Size = 4000), @p11='EGP' (Nullable = false) (Size = 3), @p12='2025-09-18T19:22:40.3180000Z', @p13='ant' (Size = 4000), @p14='1.0' (Precision = 18) (Scale = 6), @p15='True', @p16='False', @p17='f8cd0c63-50d7-4a69-a344-bc53be110f77', @p18=NULL (DbType = DateTime2), @p19=NULL (DbType = Guid), @p20='7b6fd5d0-11ec-43b6-b9d6-eba78273f3fe' (Nullable = true), @p21=NULL (DbType = Guid), @p22=NULL (DbType = DateTime2), @p23=NULL (DbType = Guid), @p24='0', @p25='Draft' (Nullable = false) (Size = 450), @p26=NULL (DbType = Guid), @p27='Expense' (Nullable = false) (Size = 450), @p28=NULL (DbType = DateTime2), @p29=NULL (Size = 4000), @p30='4fe6e0a3-b441-45f6-96a4-0a1c499bbe56', @p31='BankAccount' (Nullable = false) (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Vouchers] ([Id], [Amount], [BankAccountId], [CategoryAccountId], [Code], [CompanyId], [CounterpartyId], [CounterpartyType], [CreatedAt], [CreatedBy], [CreatedById], [CurrencyCode], [Date], [Description], [FxRate], [IsActive], [IsDeleted], [JournalAccountId], [PostedAt], [PostedBy], [RecurrenceId], [RecurringScheduleId], [ReversedAt], [ReversedBy], [Revision], [Status], [TreasuryId], [Type], [UpdatedAt], [UpdatedById], [WalletId], [WalletType])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31);
2025-09-20 16:31:04.512 +03:00 [INF] Voucher saved successfully with ID: "e5a7b930-7869-4778-9e45-08ddf849f239"
2025-09-20 16:31:04.520 +03:00 [INF] Processing 1 tax lines
2025-09-20 16:31:04.525 +03:00 [INF] Processing tax line: TaxId="020c0bbf-8202-42d8-9692-2fc202aa5c08", BaseAmount=100, TaxAmount=14.0
2025-09-20 16:31:04.644 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@p0='c3f3701a-4ea9-4748-4bdd-08ddf849f2c0', @p1='100' (Precision = 18) (Scale = 2), @p2='2025-09-20T13:31:04.5310116Z', @p3=NULL (Size = 4000), @p4='Expense' (Nullable = false) (Size = 4000), @p5='True', @p6='False', @p7='True', @p8='14.0' (Precision = 18) (Scale = 2), @p9='020c0bbf-8202-42d8-9692-2fc202aa5c08', @p10=NULL (DbType = DateTime2), @p11=NULL (Size = 4000), @p12='e5a7b930-7869-4778-9e45-08ddf849f239'], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [VoucherTaxes] ([Id], [BaseAmount], [CreatedAt], [CreatedById], [Direction], [IsActive], [IsDeleted], [IsWithholding], [TaxAmount], [TaxId], [UpdatedAt], [UpdatedById], [VoucherId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-09-20 16:31:04.660 +03:00 [INF] Successfully added 1 tax lines
2025-09-20 16:31:04.664 +03:00 [INF] Processing 1 attachments
2025-09-20 16:31:04.813 +03:00 [INF] Executed DbCommand (26ms) [Parameters=[@p0='d41bd055-7dde-4a5c-e36b-08ddf849f2d5', @p1=NULL (Size = 64), @p2='2025-09-20T13:31:04.6790565Z', @p3=NULL (Size = 4000), @p4='/uploads/625e6c04-063a-4afe-8722-38a39c57a67a_Hossam-Reda-Tohamy-Full Stack NET Angular.pdf' (Nullable = false) (Size = 500), @p5='0', @p6='Hossam-Reda-Tohamy-Full Stack NET Angular.pdf' (Nullable = false) (Size = 255), @p7='True', @p8='False', @p9='' (Nullable = false) (Size = 100), @p10=NULL (DbType = DateTime2), @p11=NULL (Size = 4000), @p12='2025-09-20T13:31:04.6795889Z', @p13='5dbceb39-9677-46d7-bf8a-2eb914c55437', @p14='e5a7b930-7869-4778-9e45-08ddf849f239'], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Attachments] ([Id], [Checksum], [CreatedAt], [CreatedById], [FilePath], [FileSize], [Filename], [IsActive], [IsDeleted], [MimeType], [UpdatedAt], [UpdatedById], [UploadedAt], [UploadedBy], [VoucherId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-09-20 16:31:04.835 +03:00 [INF] Successfully added 1 attachments
2025-09-20 16:31:04.838 +03:00 [INF] Voucher "e5a7b930-7869-4778-9e45-08ddf849f239" created successfully with 1 taxes and 1 attachments.
2025-09-20 16:31:04.873 +03:00 [INF] Executing CreatedAtActionResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Finance.Features.ExpensesVoucher.DTO.ExpenseVoucherResponseDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-20 16:31:04.966 +03:00 [INF] Executed action ModularERP.Modules.Finance.Features.ExpensesVoucher.Controllers.ExpenseVouchersController.CreateExpenseVoucher (ModularERP) in 7876.7515ms
2025-09-20 16:31:04.979 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Finance.Features.ExpensesVoucher.Controllers.ExpenseVouchersController.CreateExpenseVoucher (ModularERP)'
2025-09-20 16:31:04.983 +03:00 [INF] Request completed successfully with status code 201
2025-09-20 16:31:05.019 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/ExpenseVouchers?Code=INC-125468&Date=2025-09-18T19:22:40.318Z&CurrencyCode=EGP&FxRate=1.0&Amount=600&Description=anu&CategoryId=f8cd0c63-50d7-4a69-a344-bc53be110f77&RecurrenceId=7b6fd5d0-11ec-43b6-b9d6-eba78273f3fe - 201 null application/json; charset=utf-8 8194.9544ms
2025-09-20 16:31:38.648 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-09-20 16:31:39.020 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 370.7282ms
2025-09-20 16:31:39.082 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-09-20 16:31:39.099 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 17.237ms
2025-09-20 16:31:41.380 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-09-20 16:31:41.437 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 57.1323ms
2025-09-20 16:31:41.684 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-09-20 16:31:41.764 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 80.5554ms
2025-09-20 16:31:52.265 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/api/ExpenseVouchers/e5a7b930-7869-4778-9e45-08ddf849f239 - null null
2025-09-20 16:31:52.273 +03:00 [INF] Request started
2025-09-20 16:31:52.276 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Finance.Features.ExpensesVoucher.Controllers.ExpenseVouchersController.GetExpenseVoucher (ModularERP)'
2025-09-20 16:31:52.288 +03:00 [INF] Route matched with {action = "GetExpenseVoucher", controller = "ExpenseVouchers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetExpenseVoucher(System.Guid) on controller ModularERP.Modules.Finance.Features.ExpensesVoucher.Controllers.ExpenseVouchersController (ModularERP).
2025-09-20 16:31:52.425 +03:00 [INF] Fetching expense voucher with ID: "e5a7b930-7869-4778-9e45-08ddf849f239"
2025-09-20 16:31:52.471 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__id_0='e5a7b930-7869-4778-9e45-08ddf849f239'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [v].[Id], [v].[Amount], [v].[BankAccountId], [v].[CategoryAccountId], [v].[Code], [v].[CompanyId], [v].[CounterpartyId], [v].[CounterpartyType], [v].[CreatedAt], [v].[CreatedBy], [v].[CreatedById], [v].[CurrencyCode], [v].[Date], [v].[Description], [v].[FxRate], [v].[IsActive], [v].[IsDeleted], [v].[JournalAccountId], [v].[PostedAt], [v].[PostedBy], [v].[RecurrenceId], [v].[RecurringScheduleId], [v].[ReversedAt], [v].[ReversedBy], [v].[Revision], [v].[Status], [v].[TreasuryId], [v].[Type], [v].[UpdatedAt], [v].[UpdatedById], [v].[WalletId], [v].[WalletType]
FROM [Vouchers] AS [v]
WHERE [v].[Id] = @__id_0
2025-09-20 16:31:52.510 +03:00 [INF] Found expense voucher: EXP-14555
2025-09-20 16:31:52.565 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__voucher_Id_0='e5a7b930-7869-4778-9e45-08ddf849f239'], CommandType='"Text"', CommandTimeout='30']
SELECT [v].[Id], [v].[BaseAmount], [v].[CreatedAt], [v].[CreatedById], [v].[Direction], [v].[IsActive], [v].[IsDeleted], [v].[IsWithholding], [v].[TaxAmount], [v].[TaxId], [v].[UpdatedAt], [v].[UpdatedById], [v].[VoucherId]
FROM [VoucherTaxes] AS [v]
WHERE [v].[IsDeleted] = CAST(0 AS bit) AND [v].[VoucherId] = @__voucher_Id_0
2025-09-20 16:31:52.626 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__voucher_Id_0='e5a7b930-7869-4778-9e45-08ddf849f239'], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Checksum], [a].[CreatedAt], [a].[CreatedById], [a].[FilePath], [a].[FileSize], [a].[Filename], [a].[IsActive], [a].[IsDeleted], [a].[MimeType], [a].[UpdatedAt], [a].[UpdatedById], [a].[UploadedAt], [a].[UploadedBy], [a].[VoucherId]
FROM [Attachments] AS [a]
WHERE [a].[IsDeleted] = CAST(0 AS bit) AND [a].[VoucherId] = @__voucher_Id_0
2025-09-20 16:31:52.649 +03:00 [INF] Retrieved 1 tax lines and 1 attachments for voucher "e5a7b930-7869-4778-9e45-08ddf849f239"
2025-09-20 16:31:52.685 +03:00 [INF] Successfully retrieved expense voucher EXP-14555 with all related data
2025-09-20 16:31:52.697 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Finance.Features.ExpensesVoucher.DTO.ExpenseVoucherResponseDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-20 16:31:52.709 +03:00 [INF] Executed action ModularERP.Modules.Finance.Features.ExpensesVoucher.Controllers.ExpenseVouchersController.GetExpenseVoucher (ModularERP) in 410.4432ms
2025-09-20 16:31:52.718 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Finance.Features.ExpensesVoucher.Controllers.ExpenseVouchersController.GetExpenseVoucher (ModularERP)'
2025-09-20 16:31:52.727 +03:00 [INF] Request completed successfully with status code 200
2025-09-20 16:31:52.735 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/api/ExpenseVouchers/e5a7b930-7869-4778-9e45-08ddf849f239 - 200 null application/json; charset=utf-8 470.4674ms
2025-09-20 16:49:26.762 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-09-20 16:49:26.792 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 30.1654ms
2025-09-20 16:49:30.073 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-09-20 16:49:30.094 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-09-20 16:49:30.097 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 23.5298ms
2025-09-20 16:49:30.132 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 38.1086ms
2025-09-20 16:49:30.964 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-09-20 16:49:31.063 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 98.9841ms
