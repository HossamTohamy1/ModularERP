2025-11-17 13:40:33.430 +02:00 [INF] Starting web host...
2025-11-17 13:40:41.221 +02:00 [INF] Executed DbCommand (34ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-17 13:40:41.312 +02:00 [INF] Executed DbCommand (66ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-11-17 13:40:41.439 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-17 13:40:41.445 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-11-17 13:40:41.457 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-11-17 13:40:41.556 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-11-17 13:40:41.571 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-17 13:40:41.575 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-17 13:40:41.583 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-17 13:40:41.594 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-11-17 13:40:41.601 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-11-17 13:40:41.869 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-17 13:40:41.884 +02:00 [INF] Master database initialized successfully
2025-11-17 13:40:44.611 +02:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-17 13:40:44.796 +02:00 [INF] Now listening on: https://localhost:7168
2025-11-17 13:40:44.798 +02:00 [INF] Now listening on: http://localhost:5004
2025-11-17 13:40:44.937 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-17 13:40:44.939 +02:00 [INF] Hosting environment: Development
2025-11-17 13:40:44.940 +02:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-11-17 13:40:45.253 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-11-17 13:40:45.467 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 215.4351ms
2025-11-17 13:40:45.473 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-11-17 13:40:45.475 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-11-17 13:40:45.485 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 12.1626ms
2025-11-17 13:40:45.534 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 59.3054ms
2025-11-17 13:40:45.679 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-11-17 13:40:46.031 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 351.6658ms
2025-11-17 14:07:58.256 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/GoodsReceipts - application/json 514
2025-11-17 14:07:58.282 +02:00 [INF] Request started
2025-11-17 14:07:58.285 +02:00 [INF] === Incoming Request ===
2025-11-17 14:07:58.286 +02:00 [INF] Path: /api/GoodsReceipts
2025-11-17 14:07:58.287 +02:00 [INF] Method: POST
2025-11-17 14:07:58.288 +02:00 [INF] === Headers ===
2025-11-17 14:07:58.291 +02:00 [INF] Accept: ["*/*"]
2025-11-17 14:07:58.294 +02:00 [INF] Connection: ["keep-alive"]
2025-11-17 14:07:58.296 +02:00 [INF] Host: ["localhost:7168"]
2025-11-17 14:07:58.297 +02:00 [INF] User-Agent: ["PostmanRuntime/7.49.1"]
2025-11-17 14:07:58.299 +02:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-11-17 14:07:58.300 +02:00 [INF] Content-Type: ["application/json"]
2025-11-17 14:07:58.301 +02:00 [INF] Content-Length: ["514"]
2025-11-17 14:07:58.303 +02:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-11-17 14:07:58.305 +02:00 [INF] Postman-Token: ["89357aeb-bb18-4667-bbed-a850157bbb32"]
2025-11-17 14:07:58.309 +02:00 [INF] üîç TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-11-17 14:07:58.310 +02:00 [INF] ‚úÖ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-11-17 14:07:58.313 +02:00 [INF] Executing endpoint 'ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GoodsReceiptsController.CreateGRN (ModularERP)'
2025-11-17 14:07:58.340 +02:00 [INF] Route matched with {action = "CreateGRN", controller = "GoodsReceipts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateGRN(ModularERP.Modules.Purchases.Goods_Receipt.DTO.DTO_GRN.CreateGRNDto, System.Threading.CancellationToken) on controller ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GoodsReceiptsController (ModularERP).
2025-11-17 14:07:58.348 +02:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-11-17 14:07:58.389 +02:00 [INF] API: Creating new GRN for PO: "23d49ad7-c8f3-4545-9bb3-6957cdf43515"
2025-11-17 14:07:58.518 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-11-17 14:07:59.237 +02:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-11-17 14:07:59.249 +02:00 [INF] Creating new GRN for PO: "23d49ad7-c8f3-4545-9bb3-6957cdf43515"
2025-11-17 14:07:59.282 +02:00 [INF] PO found: PO-202510-0005 | DocumentStatus: Approved | ReceptionStatus: Not Received | PaymentStatus: PartiallyPaid
2025-11-17 14:07:59.434 +02:00 [INF] Validating line item | POLineItemId: "172d5908-2ebf-4fa0-5816-08de25364791" | Item: ' Product' (SKU-104) | Ordered: 5.000 | Previously Received: 0.000 | Pending: 5.000 | Attempting to Receive: 1
2025-11-17 14:07:59.438 +02:00 [INF] ‚úÖ Validation passed for line item | POLineItemId: "172d5908-2ebf-4fa0-5816-08de25364791" | Item: ' Product' | Receiving: 1
2025-11-17 14:07:59.455 +02:00 [INF] Generated GRN Number: GRN-2025-00001
2025-11-17 14:07:59.686 +02:00 [INF] GRN entity created with Id: "4551af5e-07dc-4e2e-845e-08de25d1f362"
2025-11-17 14:07:59.776 +02:00 [INF] Updated PO Line Item | POLineItemId: "172d5908-2ebf-4fa0-5816-08de25364791" | Previous Received: 0.000 | New Received: 1.000 | Increment: 1
2025-11-17 14:07:59.787 +02:00 [INF] Updating PO Reception Status | PO: PO-202510-0005 | Previous: Not Received | New: Partially Received
2025-11-17 14:07:59.892 +02:00 [INF] ‚úÖ GRN created successfully | GRN Number: GRN-2025-00001 | PO: PO-202510-0005
2025-11-17 14:07:59.977 +02:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Purchases.Goods_Receipt.DTO.DTO_GRN.GRNResponseDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-17 14:08:00.014 +02:00 [INF] Executed action ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GoodsReceiptsController.CreateGRN (ModularERP) in 1662.533ms
2025-11-17 14:08:00.017 +02:00 [INF] Executed endpoint 'ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GoodsReceiptsController.CreateGRN (ModularERP)'
2025-11-17 14:08:00.019 +02:00 [INF] Request completed successfully with status code 200
2025-11-17 14:08:00.024 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/GoodsReceipts - 200 null application/json; charset=utf-8 1767.8095ms
2025-11-17 14:29:40.204 +02:00 [INF] Starting web host...
2025-11-17 14:29:43.938 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-17 14:29:43.992 +02:00 [INF] Executed DbCommand (39ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-11-17 14:29:44.092 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-17 14:29:44.099 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-11-17 14:29:44.104 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-11-17 14:29:44.159 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-11-17 14:29:44.174 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-17 14:29:44.177 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-17 14:29:44.184 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-17 14:29:44.195 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-11-17 14:29:44.199 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-11-17 14:29:44.357 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-17 14:29:44.364 +02:00 [INF] Master database initialized successfully
2025-11-17 14:29:46.587 +02:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-17 14:29:46.734 +02:00 [INF] Now listening on: https://localhost:7168
2025-11-17 14:29:46.736 +02:00 [INF] Now listening on: http://localhost:5004
2025-11-17 14:29:46.820 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-17 14:29:46.822 +02:00 [INF] Hosting environment: Development
2025-11-17 14:29:46.823 +02:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-11-17 14:29:47.047 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-11-17 14:29:47.204 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 159.0068ms
2025-11-17 14:29:47.337 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-11-17 14:29:47.337 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-11-17 14:29:47.346 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 8.6203ms
2025-11-17 14:29:47.360 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 22.8736ms
2025-11-17 14:29:47.406 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-11-17 14:29:47.642 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 236.1723ms
2025-11-17 14:30:00.094 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/Products - application/json 925
2025-11-17 14:30:00.115 +02:00 [INF] Request started
2025-11-17 14:30:00.122 +02:00 [INF] === Incoming Request ===
2025-11-17 14:30:00.124 +02:00 [INF] Path: /api/Products
2025-11-17 14:30:00.126 +02:00 [INF] Method: POST
2025-11-17 14:30:00.127 +02:00 [INF] === Headers ===
2025-11-17 14:30:00.130 +02:00 [INF] Accept: ["*/*"]
2025-11-17 14:30:00.133 +02:00 [INF] Connection: ["keep-alive"]
2025-11-17 14:30:00.134 +02:00 [INF] Host: ["localhost:7168"]
2025-11-17 14:30:00.136 +02:00 [INF] User-Agent: ["PostmanRuntime/7.49.1"]
2025-11-17 14:30:00.137 +02:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-11-17 14:30:00.139 +02:00 [INF] Content-Type: ["application/json"]
2025-11-17 14:30:00.140 +02:00 [INF] Content-Length: ["925"]
2025-11-17 14:30:00.142 +02:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-11-17 14:30:00.145 +02:00 [INF] Postman-Token: ["4d54709d-3655-4f5d-901b-0453023f531f"]
2025-11-17 14:30:00.150 +02:00 [INF] üîç TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-11-17 14:30:00.151 +02:00 [INF] ‚úÖ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-11-17 14:30:00.153 +02:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Products.Controllers.ProductsController.CreateProduct (ModularERP)'
2025-11-17 14:30:00.179 +02:00 [INF] Route matched with {action = "CreateProduct", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateProduct(ModularERP.Modules.Inventory.Features.Products.DTO.CreateProductDto) on controller ModularERP.Modules.Inventory.Features.Products.Controllers.ProductsController (ModularERP).
2025-11-17 14:30:00.187 +02:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-11-17 14:30:00.236 +02:00 [INF] Creating new product with SKU SKU-106 for company "90137c92-382d-404c-bade-e5fefb1e8dbf"
2025-11-17 14:30:00.293 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-11-17 14:30:00.971 +02:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-11-17 14:30:01.685 +02:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.Products.DTO.ProductDetailsDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-17 14:30:01.710 +02:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Products.Controllers.ProductsController.CreateProduct (ModularERP) in 1524.2905ms
2025-11-17 14:30:01.713 +02:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Products.Controllers.ProductsController.CreateProduct (ModularERP)'
2025-11-17 14:30:01.715 +02:00 [INF] Request completed successfully with status code 200
2025-11-17 14:30:01.720 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/Products - 200 null application/json; charset=utf-8 1625.6423ms
2025-11-17 14:40:10.728 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/purchase-orders/{23d49ad7-c8f3-4545-9bb3-6957cdf43515}/items - application/json 306
2025-11-17 14:40:10.740 +02:00 [INF] Request started
2025-11-17 14:40:10.742 +02:00 [INF] === Incoming Request ===
2025-11-17 14:40:10.743 +02:00 [INF] Path: /api/purchase-orders/%7B23d49ad7-c8f3-4545-9bb3-6957cdf43515%7D/items
2025-11-17 14:40:10.744 +02:00 [INF] Method: POST
2025-11-17 14:40:10.745 +02:00 [INF] === Headers ===
2025-11-17 14:40:10.746 +02:00 [INF] Accept: ["*/*"]
2025-11-17 14:40:10.748 +02:00 [INF] Connection: ["keep-alive"]
2025-11-17 14:40:10.749 +02:00 [INF] Host: ["localhost:7168"]
2025-11-17 14:40:10.751 +02:00 [INF] User-Agent: ["PostmanRuntime/7.49.1"]
2025-11-17 14:40:10.752 +02:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-11-17 14:40:10.754 +02:00 [INF] Content-Type: ["application/json"]
2025-11-17 14:40:10.755 +02:00 [INF] Content-Length: ["306"]
2025-11-17 14:40:10.756 +02:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-11-17 14:40:10.757 +02:00 [INF] Postman-Token: ["2b33364c-de51-48ec-9f52-99ebae58ed71"]
2025-11-17 14:40:10.761 +02:00 [INF] üîç TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-11-17 14:40:10.763 +02:00 [INF] ‚úÖ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-11-17 14:40:10.764 +02:00 [INF] Executing endpoint 'ModularERP.Modules.Purchases.Purchase_Order_Management.Controllers.POLineItemController.CreateLineItem (ModularERP)'
2025-11-17 14:40:10.769 +02:00 [INF] Route matched with {action = "CreateLineItem", controller = "POLineItem"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateLineItem(System.Guid, ModularERP.Modules.Purchases.Purchase_Order_Management.DTO.DTO_POItme.CreatePOLineItemDto) on controller ModularERP.Modules.Purchases.Purchase_Order_Management.Controllers.POLineItemController (ModularERP).
2025-11-17 14:40:10.778 +02:00 [INF] POST request received to create line item for PO "23d49ad7-c8f3-4545-9bb3-6957cdf43515"
2025-11-17 14:40:10.785 +02:00 [INF] Creating line item for Purchase Order "23d49ad7-c8f3-4545-9bb3-6957cdf43515"
2025-11-17 14:40:10.862 +02:00 [ERR] Error creating line item for Purchase Order "23d49ad7-c8f3-4545-9bb3-6957cdf43515"
ModularERP.Common.Exceptions.BusinessLogicException: Cannot add items to Purchase Order in Approved status
   at ModularERP.Modules.Purchases.Purchase_Order_Management.Handlers.Handlers_POItme.CreatePOLineItemHandler.Handle(CreatePOLineItemCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Purchases\Purchase_Order_Management\Handlers\Handlers_POItme\CreatePOLineItemHandler.cs:line 59
2025-11-17 14:40:10.941 +02:00 [INF] Executed action ModularERP.Modules.Purchases.Purchase_Order_Management.Controllers.POLineItemController.CreateLineItem (ModularERP) in 168.9136ms
2025-11-17 14:40:10.943 +02:00 [INF] Executed endpoint 'ModularERP.Modules.Purchases.Purchase_Order_Management.Controllers.POLineItemController.CreateLineItem (ModularERP)'
2025-11-17 14:40:10.946 +02:00 [WRN] Business logic exception occurred: Cannot add items to Purchase Order in Approved status
ModularERP.Common.Exceptions.BusinessLogicException: Cannot add items to Purchase Order in Approved status
   at ModularERP.Modules.Purchases.Purchase_Order_Management.Handlers.Handlers_POItme.CreatePOLineItemHandler.Handle(CreatePOLineItemCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Purchases\Purchase_Order_Management\Handlers\Handlers_POItme\CreatePOLineItemHandler.cs:line 59
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Modules.Purchases.Purchase_Order_Management.Controllers.POLineItemController.CreateLineItem(Guid purchaseOrderId, CreatePOLineItemDto lineItem) in E:\ModelerERP\ModularERP\ModularERP\Modules\Purchases\Purchase_Order_Management\Controllers\POLineItemController.cs:line 104
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_7>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 354
--- End of stack trace from previous location ---
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 307
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-11-17 14:40:10.973 +02:00 [INF] Error response sent with status code 400
2025-11-17 14:40:10.976 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/purchase-orders/{23d49ad7-c8f3-4545-9bb3-6957cdf43515}/items - 400 null application/json; charset=utf-8 247.6507ms
2025-11-17 14:40:41.157 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/purchase-orders/{23d49ad7-c8f3-4545-9bb3-6957cdf43515}/items - application/json 306
2025-11-17 14:40:41.162 +02:00 [INF] Request started
2025-11-17 14:40:41.163 +02:00 [INF] === Incoming Request ===
2025-11-17 14:40:41.164 +02:00 [INF] Path: /api/purchase-orders/%7B23d49ad7-c8f3-4545-9bb3-6957cdf43515%7D/items
2025-11-17 14:40:41.165 +02:00 [INF] Method: POST
2025-11-17 14:40:41.166 +02:00 [INF] === Headers ===
2025-11-17 14:40:41.167 +02:00 [INF] Accept: ["*/*"]
2025-11-17 14:40:41.169 +02:00 [INF] Connection: ["keep-alive"]
2025-11-17 14:40:41.170 +02:00 [INF] Host: ["localhost:7168"]
2025-11-17 14:40:41.172 +02:00 [INF] User-Agent: ["PostmanRuntime/7.49.1"]
2025-11-17 14:40:41.173 +02:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-11-17 14:40:41.174 +02:00 [INF] Content-Type: ["application/json"]
2025-11-17 14:40:41.175 +02:00 [INF] Content-Length: ["306"]
2025-11-17 14:40:41.177 +02:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-11-17 14:40:41.178 +02:00 [INF] Postman-Token: ["61aacab7-100b-401b-ae7c-8850e0b2744b"]
2025-11-17 14:40:41.179 +02:00 [INF] üîç TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-11-17 14:40:41.180 +02:00 [INF] ‚úÖ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-11-17 14:40:41.181 +02:00 [INF] Executing endpoint 'ModularERP.Modules.Purchases.Purchase_Order_Management.Controllers.POLineItemController.CreateLineItem (ModularERP)'
2025-11-17 14:40:41.183 +02:00 [INF] Route matched with {action = "CreateLineItem", controller = "POLineItem"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateLineItem(System.Guid, ModularERP.Modules.Purchases.Purchase_Order_Management.DTO.DTO_POItme.CreatePOLineItemDto) on controller ModularERP.Modules.Purchases.Purchase_Order_Management.Controllers.POLineItemController (ModularERP).
2025-11-17 14:40:41.186 +02:00 [INF] POST request received to create line item for PO "23d49ad7-c8f3-4545-9bb3-6957cdf43515"
2025-11-17 14:40:41.189 +02:00 [INF] Creating line item for Purchase Order "23d49ad7-c8f3-4545-9bb3-6957cdf43515"
2025-11-17 14:40:41.411 +02:00 [INF] Line item "b9d99ef5-ecd2-452b-4f82-08de25d684bd" created successfully for PO "23d49ad7-c8f3-4545-9bb3-6957cdf43515". Subtotal: 75000, Discount: 7500.0, Tax: 10125.0000, Total: 77625.0000
2025-11-17 14:40:41.449 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Purchases.Purchase_Order_Management.DTO.DTO_POItme.POLineItemResponseDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-17 14:40:41.471 +02:00 [INF] Executed action ModularERP.Modules.Purchases.Purchase_Order_Management.Controllers.POLineItemController.CreateLineItem (ModularERP) in 286.4426ms
2025-11-17 14:40:41.473 +02:00 [INF] Executed endpoint 'ModularERP.Modules.Purchases.Purchase_Order_Management.Controllers.POLineItemController.CreateLineItem (ModularERP)'
2025-11-17 14:40:41.475 +02:00 [INF] Request completed successfully with status code 201
2025-11-17 14:40:41.476 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/purchase-orders/{23d49ad7-c8f3-4545-9bb3-6957cdf43515}/items - 201 null application/json; charset=utf-8 319.9441ms
2025-11-17 14:43:14.106 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/GoodsReceipts - application/json 514
2025-11-17 14:43:14.110 +02:00 [INF] Request started
2025-11-17 14:43:14.111 +02:00 [INF] === Incoming Request ===
2025-11-17 14:43:14.112 +02:00 [INF] Path: /api/GoodsReceipts
2025-11-17 14:43:14.113 +02:00 [INF] Method: POST
2025-11-17 14:43:14.113 +02:00 [INF] === Headers ===
2025-11-17 14:43:14.114 +02:00 [INF] Accept: ["*/*"]
2025-11-17 14:43:14.117 +02:00 [INF] Connection: ["keep-alive"]
2025-11-17 14:43:14.118 +02:00 [INF] Host: ["localhost:7168"]
2025-11-17 14:43:14.119 +02:00 [INF] User-Agent: ["PostmanRuntime/7.49.1"]
2025-11-17 14:43:14.121 +02:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-11-17 14:43:14.122 +02:00 [INF] Content-Type: ["application/json"]
2025-11-17 14:43:14.123 +02:00 [INF] Content-Length: ["514"]
2025-11-17 14:43:14.124 +02:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-11-17 14:43:14.126 +02:00 [INF] Postman-Token: ["2bedc18a-eaad-40a6-ac09-00fabe335d66"]
2025-11-17 14:43:14.127 +02:00 [INF] üîç TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-11-17 14:43:14.128 +02:00 [INF] ‚úÖ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-11-17 14:43:14.129 +02:00 [INF] Executing endpoint 'ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GoodsReceiptsController.CreateGRN (ModularERP)'
2025-11-17 14:43:14.134 +02:00 [INF] Route matched with {action = "CreateGRN", controller = "GoodsReceipts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateGRN(ModularERP.Modules.Purchases.Goods_Receipt.DTO.DTO_GRN.CreateGRNDto, System.Threading.CancellationToken) on controller ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GoodsReceiptsController (ModularERP).
2025-11-17 14:43:14.144 +02:00 [INF] API: Creating new GRN for PO: "23d49ad7-c8f3-4545-9bb3-6957cdf43515"
2025-11-17 14:43:14.153 +02:00 [INF] Creating new GRN for PO: "23d49ad7-c8f3-4545-9bb3-6957cdf43515"
2025-11-17 14:43:14.161 +02:00 [INF] PO found: PO-202510-0005 | DocumentStatus: Draft | ReceptionStatus: Partially Received | PaymentStatus: PartiallyPaid
2025-11-17 14:43:14.163 +02:00 [ERR] ‚ùå Error creating GRN for PO: "23d49ad7-c8f3-4545-9bb3-6957cdf43515"
ModularERP.Common.Exceptions.BusinessLogicException: Cannot create GRN for a Purchase Order in Draft status. Please approve the PO first.
   at ModularERP.Modules.Purchases.Goods_Receipt.Handlers.Handlers_GRN.CreateGRNHandler.Handle(CreateGRNCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Purchases\Goods_Receipt\Handlers\Handlers_GRN\CreateGRNHandler.cs:line 74
2025-11-17 14:43:14.166 +02:00 [INF] Executed action ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GoodsReceiptsController.CreateGRN (ModularERP) in 28.4453ms
2025-11-17 14:43:14.167 +02:00 [INF] Executed endpoint 'ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GoodsReceiptsController.CreateGRN (ModularERP)'
2025-11-17 14:43:14.169 +02:00 [WRN] Business logic exception occurred: Cannot create GRN for a Purchase Order in Draft status. Please approve the PO first.
ModularERP.Common.Exceptions.BusinessLogicException: Cannot create GRN for a Purchase Order in Draft status. Please approve the PO first.
   at ModularERP.Modules.Purchases.Goods_Receipt.Handlers.Handlers_GRN.CreateGRNHandler.Handle(CreateGRNCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Purchases\Goods_Receipt\Handlers\Handlers_GRN\CreateGRNHandler.cs:line 74
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GoodsReceiptsController.CreateGRN(CreateGRNDto request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Purchases\Goods_Receipt\Controllers\GoodsReceiptsController.cs:line 35
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_7>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 354
--- End of stack trace from previous location ---
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 307
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-11-17 14:43:14.178 +02:00 [INF] Error response sent with status code 400
2025-11-17 14:43:14.179 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/GoodsReceipts - 400 null application/json; charset=utf-8 72.9585ms
2025-11-17 14:44:00.705 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/PurchaseOrder/{23d49ad7-c8f3-4545-9bb3-6957cdf43515}/submit - application/json 61
2025-11-17 14:44:00.709 +02:00 [INF] Request started
2025-11-17 14:44:00.709 +02:00 [INF] === Incoming Request ===
2025-11-17 14:44:00.710 +02:00 [INF] Path: /api/PurchaseOrder/%7B23d49ad7-c8f3-4545-9bb3-6957cdf43515%7D/submit
2025-11-17 14:44:00.711 +02:00 [INF] Method: POST
2025-11-17 14:44:00.712 +02:00 [INF] === Headers ===
2025-11-17 14:44:00.712 +02:00 [INF] Accept: ["*/*"]
2025-11-17 14:44:00.714 +02:00 [INF] Connection: ["keep-alive"]
2025-11-17 14:44:00.715 +02:00 [INF] Host: ["localhost:7168"]
2025-11-17 14:44:00.717 +02:00 [INF] User-Agent: ["PostmanRuntime/7.49.1"]
2025-11-17 14:44:00.718 +02:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-11-17 14:44:00.720 +02:00 [INF] Content-Type: ["application/json"]
2025-11-17 14:44:00.722 +02:00 [INF] Content-Length: ["61"]
2025-11-17 14:44:00.723 +02:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-11-17 14:44:00.724 +02:00 [INF] Postman-Token: ["f06ca861-0091-48b2-bddc-d5024808e0d7"]
2025-11-17 14:44:00.725 +02:00 [INF] üîç TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-11-17 14:44:00.726 +02:00 [INF] ‚úÖ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-11-17 14:44:00.727 +02:00 [INF] Executing endpoint 'ModularERP.Modules.Purchases.Purchase_Order_Management.Controllers.PurchaseOrderController.SubmitPurchaseOrder (ModularERP)'
2025-11-17 14:44:00.731 +02:00 [INF] Route matched with {action = "SubmitPurchaseOrder", controller = "PurchaseOrder"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SubmitPurchaseOrder(System.Guid, SubmitPurchaseOrderRequest) on controller ModularERP.Modules.Purchases.Purchase_Order_Management.Controllers.PurchaseOrderController (ModularERP).
2025-11-17 14:44:00.780 +02:00 [INF] Submitting purchase order with ID: "23d49ad7-c8f3-4545-9bb3-6957cdf43515"
2025-11-17 14:44:00.820 +02:00 [INF] Purchase order PO-202510-0005 submitted successfully
2025-11-17 14:44:00.823 +02:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-17 14:44:00.826 +02:00 [INF] Executed action ModularERP.Modules.Purchases.Purchase_Order_Management.Controllers.PurchaseOrderController.SubmitPurchaseOrder (ModularERP) in 92.5946ms
2025-11-17 14:44:00.827 +02:00 [INF] Executed endpoint 'ModularERP.Modules.Purchases.Purchase_Order_Management.Controllers.PurchaseOrderController.SubmitPurchaseOrder (ModularERP)'
2025-11-17 14:44:00.829 +02:00 [INF] Request completed successfully with status code 200
2025-11-17 14:44:00.830 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/PurchaseOrder/{23d49ad7-c8f3-4545-9bb3-6957cdf43515}/submit - 200 null application/json; charset=utf-8 124.6223ms
2025-11-17 14:44:04.255 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/PurchaseOrder/{23d49ad7-c8f3-4545-9bb3-6957cdf43515}/approve - application/json 90
2025-11-17 14:44:04.259 +02:00 [INF] Request started
2025-11-17 14:44:04.260 +02:00 [INF] === Incoming Request ===
2025-11-17 14:44:04.261 +02:00 [INF] Path: /api/PurchaseOrder/%7B23d49ad7-c8f3-4545-9bb3-6957cdf43515%7D/approve
2025-11-17 14:44:04.262 +02:00 [INF] Method: POST
2025-11-17 14:44:04.263 +02:00 [INF] === Headers ===
2025-11-17 14:44:04.264 +02:00 [INF] Accept: ["*/*"]
2025-11-17 14:44:04.266 +02:00 [INF] Connection: ["keep-alive"]
2025-11-17 14:44:04.267 +02:00 [INF] Host: ["localhost:7168"]
2025-11-17 14:44:04.269 +02:00 [INF] User-Agent: ["PostmanRuntime/7.49.1"]
2025-11-17 14:44:04.271 +02:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-11-17 14:44:04.272 +02:00 [INF] Content-Type: ["application/json"]
2025-11-17 14:44:04.274 +02:00 [INF] Content-Length: ["90"]
2025-11-17 14:44:04.275 +02:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-11-17 14:44:04.276 +02:00 [INF] Postman-Token: ["27653d16-e155-4738-8880-84eb80a5ffb9"]
2025-11-17 14:44:04.278 +02:00 [INF] üîç TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-11-17 14:44:04.278 +02:00 [INF] ‚úÖ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-11-17 14:44:04.279 +02:00 [INF] Executing endpoint 'ModularERP.Modules.Purchases.Purchase_Order_Management.Controllers.PurchaseOrderController.ApprovePurchaseOrder (ModularERP)'
2025-11-17 14:44:04.283 +02:00 [INF] Route matched with {action = "ApprovePurchaseOrder", controller = "PurchaseOrder"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ApprovePurchaseOrder(System.Guid, ApprovePurchaseOrderRequest) on controller ModularERP.Modules.Purchases.Purchase_Order_Management.Controllers.PurchaseOrderController (ModularERP).
2025-11-17 14:44:04.299 +02:00 [INF] Approving purchase order with ID: "23d49ad7-c8f3-4545-9bb3-6957cdf43515"
2025-11-17 14:44:04.305 +02:00 [INF] Purchase order PO-202510-0005 approved successfully
2025-11-17 14:44:04.307 +02:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-17 14:44:04.309 +02:00 [INF] Executed action ModularERP.Modules.Purchases.Purchase_Order_Management.Controllers.PurchaseOrderController.ApprovePurchaseOrder (ModularERP) in 22.2812ms
2025-11-17 14:44:04.310 +02:00 [INF] Executed endpoint 'ModularERP.Modules.Purchases.Purchase_Order_Management.Controllers.PurchaseOrderController.ApprovePurchaseOrder (ModularERP)'
2025-11-17 14:44:04.311 +02:00 [INF] Request completed successfully with status code 200
2025-11-17 14:44:04.312 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/PurchaseOrder/{23d49ad7-c8f3-4545-9bb3-6957cdf43515}/approve - 200 null application/json; charset=utf-8 57.6237ms
2025-11-17 14:44:09.590 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/GoodsReceipts - application/json 514
2025-11-17 14:44:09.593 +02:00 [INF] Request started
2025-11-17 14:44:09.593 +02:00 [INF] === Incoming Request ===
2025-11-17 14:44:09.594 +02:00 [INF] Path: /api/GoodsReceipts
2025-11-17 14:44:09.595 +02:00 [INF] Method: POST
2025-11-17 14:44:09.596 +02:00 [INF] === Headers ===
2025-11-17 14:44:09.597 +02:00 [INF] Accept: ["*/*"]
2025-11-17 14:44:09.599 +02:00 [INF] Connection: ["keep-alive"]
2025-11-17 14:44:09.600 +02:00 [INF] Host: ["localhost:7168"]
2025-11-17 14:44:09.601 +02:00 [INF] User-Agent: ["PostmanRuntime/7.49.1"]
2025-11-17 14:44:09.604 +02:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-11-17 14:44:09.605 +02:00 [INF] Content-Type: ["application/json"]
2025-11-17 14:44:09.606 +02:00 [INF] Content-Length: ["514"]
2025-11-17 14:44:09.607 +02:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-11-17 14:44:09.609 +02:00 [INF] Postman-Token: ["24cc5ca8-529e-4b78-9369-2f2123351b87"]
2025-11-17 14:44:09.611 +02:00 [INF] üîç TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-11-17 14:44:09.612 +02:00 [INF] ‚úÖ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-11-17 14:44:09.613 +02:00 [INF] Executing endpoint 'ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GoodsReceiptsController.CreateGRN (ModularERP)'
2025-11-17 14:44:09.614 +02:00 [INF] Route matched with {action = "CreateGRN", controller = "GoodsReceipts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateGRN(ModularERP.Modules.Purchases.Goods_Receipt.DTO.DTO_GRN.CreateGRNDto, System.Threading.CancellationToken) on controller ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GoodsReceiptsController (ModularERP).
2025-11-17 14:44:09.617 +02:00 [INF] API: Creating new GRN for PO: "23d49ad7-c8f3-4545-9bb3-6957cdf43515"
2025-11-17 14:44:09.620 +02:00 [INF] Creating new GRN for PO: "23d49ad7-c8f3-4545-9bb3-6957cdf43515"
2025-11-17 14:44:09.622 +02:00 [INF] PO found: PO-202510-0005 | DocumentStatus: Approved | ReceptionStatus: Partially Received | PaymentStatus: PartiallyPaid
2025-11-17 14:44:09.680 +02:00 [INF] Validating line item | POLineItemId: "b9d99ef5-ecd2-452b-4f82-08de25d684bd" | Item: ' Product' (SKU-106) | Ordered: 5.000 | Previously Received: 0.000 | Pending: 5.000 | Attempting to Receive: 1
2025-11-17 14:44:09.683 +02:00 [INF] ‚úÖ Validation passed for line item | POLineItemId: "b9d99ef5-ecd2-452b-4f82-08de25d684bd" | Item: ' Product' | Receiving: 1
2025-11-17 14:44:09.697 +02:00 [INF] Generated GRN Number: GRN-2025-00002
2025-11-17 14:44:09.766 +02:00 [INF] GRN entity created with Id: "cf2a2e8c-3614-415c-3c0b-08de25d700ef"
2025-11-17 14:44:09.779 +02:00 [INF] Updated PO Line Item | POLineItemId: "b9d99ef5-ecd2-452b-4f82-08de25d684bd" | Previous Received: 0.000 | New Received: 1.000 | Increment: 1
2025-11-17 14:44:09.792 +02:00 [INF] Updating PO Reception Status | PO: PO-202510-0005 | Previous: Partially Received | New: Partially Received
2025-11-17 14:44:09.796 +02:00 [INF] ‚úÖ GRN created successfully | GRN Number: GRN-2025-00002 | PO: PO-202510-0005
2025-11-17 14:44:09.844 +02:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Purchases.Goods_Receipt.DTO.DTO_GRN.GRNResponseDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-17 14:44:09.852 +02:00 [INF] Executed action ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GoodsReceiptsController.CreateGRN (ModularERP) in 235.533ms
2025-11-17 14:44:09.856 +02:00 [INF] Executed endpoint 'ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GoodsReceiptsController.CreateGRN (ModularERP)'
2025-11-17 14:44:09.857 +02:00 [INF] Request completed successfully with status code 200
2025-11-17 14:44:09.858 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/GoodsReceipts - 200 null application/json; charset=utf-8 268.4095ms
2025-11-17 14:53:59.055 +02:00 [INF] Starting web host...
2025-11-17 14:54:00.570 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-17 14:54:00.609 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-11-17 14:54:00.686 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-17 14:54:00.693 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-11-17 14:54:00.698 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-11-17 14:54:00.753 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-11-17 14:54:00.768 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-17 14:54:00.772 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-17 14:54:00.777 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-17 14:54:00.788 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-11-17 14:54:00.793 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-11-17 14:54:00.949 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-17 14:54:00.955 +02:00 [INF] Master database initialized successfully
2025-11-17 14:54:03.001 +02:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-17 14:54:03.112 +02:00 [INF] Now listening on: https://localhost:7168
2025-11-17 14:54:03.114 +02:00 [INF] Now listening on: http://localhost:5004
2025-11-17 14:54:03.198 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-17 14:54:03.200 +02:00 [INF] Hosting environment: Development
2025-11-17 14:54:03.201 +02:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-11-17 14:59:56.516 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/GoodsReceipts - application/json 514
2025-11-17 14:59:56.576 +02:00 [INF] Request started
2025-11-17 14:59:56.579 +02:00 [INF] === Incoming Request ===
2025-11-17 14:59:56.581 +02:00 [INF] Path: /api/GoodsReceipts
2025-11-17 14:59:56.581 +02:00 [INF] Method: POST
2025-11-17 14:59:56.583 +02:00 [INF] === Headers ===
2025-11-17 14:59:56.585 +02:00 [INF] Accept: ["*/*"]
2025-11-17 14:59:56.588 +02:00 [INF] Connection: ["keep-alive"]
2025-11-17 14:59:56.590 +02:00 [INF] Host: ["localhost:7168"]
2025-11-17 14:59:56.591 +02:00 [INF] User-Agent: ["PostmanRuntime/7.49.1"]
2025-11-17 14:59:56.592 +02:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-11-17 14:59:56.594 +02:00 [INF] Content-Type: ["application/json"]
2025-11-17 14:59:56.595 +02:00 [INF] Content-Length: ["514"]
2025-11-17 14:59:56.597 +02:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-11-17 14:59:56.598 +02:00 [INF] Postman-Token: ["051adaec-5d58-474a-8c6d-06365024a8e9"]
2025-11-17 14:59:56.608 +02:00 [INF] üîç TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-11-17 14:59:56.610 +02:00 [INF] ‚úÖ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-11-17 14:59:56.612 +02:00 [INF] Executing endpoint 'ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GoodsReceiptsController.CreateGRN (ModularERP)'
2025-11-17 14:59:56.631 +02:00 [INF] Route matched with {action = "CreateGRN", controller = "GoodsReceipts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateGRN(ModularERP.Modules.Purchases.Goods_Receipt.DTO.DTO_GRN.CreateGRNDto, System.Threading.CancellationToken) on controller ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GoodsReceiptsController (ModularERP).
2025-11-17 14:59:56.638 +02:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-11-17 14:59:56.671 +02:00 [INF] API: Creating new GRN for PO: "23d49ad7-c8f3-4545-9bb3-6957cdf43515"
2025-11-17 14:59:56.732 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-11-17 14:59:57.501 +02:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-11-17 14:59:57.523 +02:00 [INF] Creating new GRN for PO: "23d49ad7-c8f3-4545-9bb3-6957cdf43515"
2025-11-17 14:59:57.557 +02:00 [INF] PO found: PO-202510-0005 | DocumentStatus: Approved | ReceptionStatus: Partially Received
2025-11-17 14:59:57.650 +02:00 [INF] Validating | POLineItemId: "b9d99ef5-ecd2-452b-4f82-08de25d684bd" | Item: ' Product' | Ordered: 5.000 | Received: 1.000 | Pending: 4.000 | Attempting: 1
2025-11-17 14:59:57.667 +02:00 [INF] Generated GRN Number: GRN-2025-00003
2025-11-17 14:59:57.855 +02:00 [INF] ‚úÖ GRN entity created with Id: "7e24b170-0fd2-4461-c5dd-08de25d935fb"
2025-11-17 14:59:57.937 +02:00 [INF] ‚úÖ Updated PO Line Item | POLineItemId: "b9d99ef5-ecd2-452b-4f82-08de25d684bd" | Previous: 1.000 | New: 2.000 | Increment: 1
2025-11-17 14:59:57.940 +02:00 [INF] üîÑ Starting Warehouse Stock update...
2025-11-17 14:59:58.011 +02:00 [INF] ‚úÖ Stock Updated | ProductId: "518cf879-5570-46d8-9850-bec158f5eea6" | Product: ' Product' | Warehouse: "e5d0bbaa-9099-43e1-bb16-f9744078a9ea" | Previous Qty: 50.000 | Added: 1 | New Qty: 51.000
2025-11-17 14:59:58.014 +02:00 [INF] ‚úÖ Warehouse Stock update completed successfully
2025-11-17 14:59:58.023 +02:00 [INF] üìä PO Status Update | PO: PO-202510-0005 | Previous: Partially Received | New: Partially Received
2025-11-17 14:59:58.122 +02:00 [INF] ‚úÖ‚úÖ‚úÖ GRN created successfully | GRN: GRN-2025-00003 | PO: PO-202510-0005
2025-11-17 14:59:58.195 +02:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Purchases.Goods_Receipt.DTO.DTO_GRN.GRNResponseDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-17 14:59:58.226 +02:00 [INF] Executed action ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GoodsReceiptsController.CreateGRN (ModularERP) in 1588.1163ms
2025-11-17 14:59:58.229 +02:00 [INF] Executed endpoint 'ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GoodsReceiptsController.CreateGRN (ModularERP)'
2025-11-17 14:59:58.231 +02:00 [INF] Request completed successfully with status code 200
2025-11-17 14:59:58.239 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/GoodsReceipts - 200 null application/json; charset=utf-8 1724.4875ms
2025-11-17 15:29:57.457 +02:00 [INF] Starting web host...
2025-11-17 15:30:00.852 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-17 15:30:00.901 +02:00 [INF] Executed DbCommand (34ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-11-17 15:30:00.968 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-17 15:30:00.973 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-11-17 15:30:00.978 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-11-17 15:30:01.032 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-11-17 15:30:01.048 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-17 15:30:01.053 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-17 15:30:01.059 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-17 15:30:01.069 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-11-17 15:30:01.074 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-11-17 15:30:01.227 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-17 15:30:01.233 +02:00 [INF] Master database initialized successfully
2025-11-17 15:30:03.307 +02:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-17 15:30:03.565 +02:00 [INF] Now listening on: https://localhost:7168
2025-11-17 15:30:03.567 +02:00 [INF] Now listening on: http://localhost:5004
2025-11-17 15:30:03.702 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-17 15:30:03.704 +02:00 [INF] Hosting environment: Development
2025-11-17 15:30:03.705 +02:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-11-17 15:30:21.879 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/goods-receipts/{5add8f05-71b7-4d97-1abe-08de25368d83}/items - application/json 215
2025-11-17 15:30:21.929 +02:00 [INF] Request started
2025-11-17 15:30:21.932 +02:00 [INF] === Incoming Request ===
2025-11-17 15:30:21.933 +02:00 [INF] Path: /api/goods-receipts/%7B5add8f05-71b7-4d97-1abe-08de25368d83%7D/items
2025-11-17 15:30:21.935 +02:00 [INF] Method: POST
2025-11-17 15:30:21.937 +02:00 [INF] === Headers ===
2025-11-17 15:30:21.941 +02:00 [INF] Accept: ["*/*"]
2025-11-17 15:30:21.944 +02:00 [INF] Connection: ["keep-alive"]
2025-11-17 15:30:21.946 +02:00 [INF] Host: ["localhost:7168"]
2025-11-17 15:30:21.947 +02:00 [INF] User-Agent: ["PostmanRuntime/7.49.1"]
2025-11-17 15:30:21.949 +02:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-11-17 15:30:21.952 +02:00 [INF] Content-Type: ["application/json"]
2025-11-17 15:30:21.954 +02:00 [INF] Content-Length: ["215"]
2025-11-17 15:30:21.956 +02:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-11-17 15:30:21.957 +02:00 [INF] Postman-Token: ["65a3291d-4163-4d41-9446-e1996fb654b2"]
2025-11-17 15:30:21.963 +02:00 [INF] üîç TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-11-17 15:30:21.964 +02:00 [INF] ‚úÖ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-11-17 15:30:21.966 +02:00 [INF] Executing endpoint 'ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNItemsController.AddGRNItem (ModularERP)'
2025-11-17 15:30:21.981 +02:00 [INF] Route matched with {action = "AddGRNItem", controller = "GRNItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddGRNItem(System.Guid, ModularERP.Modules.Purchases.Goods_Receipt.Commends.Commends_GRNItem.AddGRNItemCommand) on controller ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNItemsController (ModularERP).
2025-11-17 15:30:21.990 +02:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-11-17 15:30:22.048 +02:00 [INF] Adding item to GRN "5add8f05-71b7-4d97-1abe-08de25368d83"
2025-11-17 15:30:22.142 +02:00 [INF] Executed action ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNItemsController.AddGRNItem (ModularERP) in 151.2354ms
2025-11-17 15:30:22.146 +02:00 [INF] Executed endpoint 'ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNItemsController.AddGRNItem (ModularERP)'
2025-11-17 15:30:22.165 +02:00 [ERR] Unexpected error occurred
System.ArgumentNullException: Value cannot be null. (Parameter 'input')
   at System.ArgumentNullException.Throw(String paramName)
   at System.Guid.Parse(String input)
   at ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNItemsController.AddGRNItem(Guid id, AddGRNItemCommand command) in E:\ModelerERP\ModularERP\ModularERP\Modules\Purchases\Goods_Receipt\Controllers\GRNItemsController.cs:line 32
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_7>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 354
--- End of stack trace from previous location ---
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 307
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-11-17 15:30:22.221 +02:00 [INF] Error response sent with status code 500
2025-11-17 15:30:22.225 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/goods-receipts/{5add8f05-71b7-4d97-1abe-08de25368d83}/items - 500 null application/json; charset=utf-8 347.0424ms
2025-11-17 15:34:14.690 +02:00 [INF] Starting web host...
2025-11-17 15:34:15.979 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-17 15:34:16.021 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-11-17 15:34:16.092 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-17 15:34:16.099 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-11-17 15:34:16.103 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-11-17 15:34:16.161 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-11-17 15:34:16.177 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-17 15:34:16.182 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-17 15:34:16.187 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-17 15:34:16.198 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-11-17 15:34:16.203 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-11-17 15:34:16.364 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-17 15:34:16.371 +02:00 [INF] Master database initialized successfully
2025-11-17 15:34:18.343 +02:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-17 15:34:18.455 +02:00 [INF] Now listening on: https://localhost:7168
2025-11-17 15:34:18.457 +02:00 [INF] Now listening on: http://localhost:5004
2025-11-17 15:34:18.585 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-17 15:34:18.586 +02:00 [INF] Hosting environment: Development
2025-11-17 15:34:18.588 +02:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-11-17 15:34:21.726 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/goods-receipts/{5add8f05-71b7-4d97-1abe-08de25368d83}/items - application/json 215
2025-11-17 15:34:21.775 +02:00 [INF] Request started
2025-11-17 15:34:21.778 +02:00 [INF] === Incoming Request ===
2025-11-17 15:34:21.779 +02:00 [INF] Path: /api/goods-receipts/%7B5add8f05-71b7-4d97-1abe-08de25368d83%7D/items
2025-11-17 15:34:21.780 +02:00 [INF] Method: POST
2025-11-17 15:34:21.781 +02:00 [INF] === Headers ===
2025-11-17 15:34:21.783 +02:00 [INF] Accept: ["*/*"]
2025-11-17 15:34:21.787 +02:00 [INF] Connection: ["keep-alive"]
2025-11-17 15:34:21.789 +02:00 [INF] Host: ["localhost:7168"]
2025-11-17 15:34:21.790 +02:00 [INF] User-Agent: ["PostmanRuntime/7.49.1"]
2025-11-17 15:34:21.792 +02:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-11-17 15:34:21.798 +02:00 [INF] Content-Type: ["application/json"]
2025-11-17 15:34:21.800 +02:00 [INF] Content-Length: ["215"]
2025-11-17 15:34:21.802 +02:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-11-17 15:34:21.804 +02:00 [INF] Postman-Token: ["6defb29a-d854-4695-80e8-6783a54bdc94"]
2025-11-17 15:34:21.812 +02:00 [INF] üîç TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-11-17 15:34:21.814 +02:00 [INF] ‚úÖ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-11-17 15:34:21.816 +02:00 [INF] Executing endpoint 'ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNItemsController.AddGRNItem (ModularERP)'
2025-11-17 15:34:21.831 +02:00 [INF] Route matched with {action = "AddGRNItem", controller = "GRNItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddGRNItem(System.Guid, ModularERP.Modules.Purchases.Goods_Receipt.Commends.Commends_GRNItem.AddGRNItemCommand) on controller ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNItemsController (ModularERP).
2025-11-17 15:34:21.837 +02:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-11-17 15:34:21.861 +02:00 [INF] Adding item to GRN "5add8f05-71b7-4d97-1abe-08de25368d83"
2025-11-17 15:34:21.865 +02:00 [INF] Executed action ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNItemsController.AddGRNItem (ModularERP) in 28.2082ms
2025-11-17 15:34:21.867 +02:00 [INF] Executed endpoint 'ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNItemsController.AddGRNItem (ModularERP)'
2025-11-17 15:34:21.869 +02:00 [ERR] Unexpected error occurred
System.ArgumentNullException: Value cannot be null. (Parameter 'input')
   at System.ArgumentNullException.Throw(String paramName)
   at System.Guid.Parse(String input)
   at ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNItemsController.AddGRNItem(Guid id, AddGRNItemCommand command) in E:\ModelerERP\ModularERP\ModularERP\Modules\Purchases\Goods_Receipt\Controllers\GRNItemsController.cs:line 32
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_7>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 354
--- End of stack trace from previous location ---
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 307
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-11-17 15:34:21.913 +02:00 [INF] Error response sent with status code 500
2025-11-17 15:34:21.917 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/goods-receipts/{5add8f05-71b7-4d97-1abe-08de25368d83}/items - 500 null application/json; charset=utf-8 192.6748ms
2025-11-17 15:34:48.888 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/goods-receipts/5add8f05-71b7-4d97-1abe-08de25368d83/items - application/json 215
2025-11-17 15:34:48.902 +02:00 [INF] Request started
2025-11-17 15:34:48.903 +02:00 [INF] === Incoming Request ===
2025-11-17 15:34:48.906 +02:00 [INF] Path: /api/goods-receipts/5add8f05-71b7-4d97-1abe-08de25368d83/items
2025-11-17 15:34:48.908 +02:00 [INF] Method: POST
2025-11-17 15:34:48.909 +02:00 [INF] === Headers ===
2025-11-17 15:34:48.910 +02:00 [INF] Accept: ["*/*"]
2025-11-17 15:34:48.911 +02:00 [INF] Connection: ["keep-alive"]
2025-11-17 15:34:48.913 +02:00 [INF] Host: ["localhost:7168"]
2025-11-17 15:34:48.915 +02:00 [INF] User-Agent: ["PostmanRuntime/7.49.1"]
2025-11-17 15:34:48.918 +02:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-11-17 15:34:48.920 +02:00 [INF] Content-Type: ["application/json"]
2025-11-17 15:34:48.922 +02:00 [INF] Content-Length: ["215"]
2025-11-17 15:34:48.923 +02:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-11-17 15:34:48.924 +02:00 [INF] Postman-Token: ["fe9b3b75-2d42-4549-89e3-6201c1b69c57"]
2025-11-17 15:34:48.930 +02:00 [INF] üîç TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-11-17 15:34:48.931 +02:00 [INF] ‚úÖ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-11-17 15:34:48.933 +02:00 [INF] Executing endpoint 'ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNItemsController.AddGRNItem (ModularERP)'
2025-11-17 15:34:48.935 +02:00 [INF] Route matched with {action = "AddGRNItem", controller = "GRNItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddGRNItem(System.Guid, ModularERP.Modules.Purchases.Goods_Receipt.Commends.Commends_GRNItem.AddGRNItemCommand) on controller ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNItemsController (ModularERP).
2025-11-17 15:34:48.940 +02:00 [INF] Adding item to GRN "5add8f05-71b7-4d97-1abe-08de25368d83"
2025-11-17 15:34:48.941 +02:00 [INF] Executed action ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNItemsController.AddGRNItem (ModularERP) in 2.2827ms
2025-11-17 15:34:48.943 +02:00 [INF] Executed endpoint 'ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNItemsController.AddGRNItem (ModularERP)'
2025-11-17 15:34:48.944 +02:00 [ERR] Unexpected error occurred
System.ArgumentNullException: Value cannot be null. (Parameter 'input')
   at System.ArgumentNullException.Throw(String paramName)
   at System.Guid.Parse(String input)
   at ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNItemsController.AddGRNItem(Guid id, AddGRNItemCommand command) in E:\ModelerERP\ModularERP\ModularERP\Modules\Purchases\Goods_Receipt\Controllers\GRNItemsController.cs:line 32
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_7>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 354
--- End of stack trace from previous location ---
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 307
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-11-17 15:34:48.963 +02:00 [INF] Error response sent with status code 500
2025-11-17 15:34:48.965 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/goods-receipts/5add8f05-71b7-4d97-1abe-08de25368d83/items - 500 null application/json; charset=utf-8 76.742ms
2025-11-17 15:36:04.574 +02:00 [INF] Starting web host...
2025-11-17 15:36:05.966 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-17 15:36:06.009 +02:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-11-17 15:36:06.080 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-17 15:36:06.086 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-11-17 15:36:06.091 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-11-17 15:36:06.151 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-11-17 15:36:06.166 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-17 15:36:06.171 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-17 15:36:06.177 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-17 15:36:06.188 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-11-17 15:36:06.193 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-11-17 15:36:06.355 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-17 15:36:06.362 +02:00 [INF] Master database initialized successfully
2025-11-17 15:36:08.266 +02:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-17 15:36:08.376 +02:00 [INF] Now listening on: https://localhost:7168
2025-11-17 15:36:08.377 +02:00 [INF] Now listening on: http://localhost:5004
2025-11-17 15:36:08.501 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-17 15:36:08.503 +02:00 [INF] Hosting environment: Development
2025-11-17 15:36:08.504 +02:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-11-17 15:36:45.533 +02:00 [INF] Starting web host...
2025-11-17 15:36:46.866 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-17 15:36:46.906 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-11-17 15:36:46.985 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-17 15:36:46.991 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-11-17 15:36:46.997 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-11-17 15:36:47.051 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-11-17 15:36:47.068 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-17 15:36:47.072 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-17 15:36:47.079 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-17 15:36:47.090 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-11-17 15:36:47.095 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-11-17 15:36:47.265 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-17 15:36:47.272 +02:00 [INF] Master database initialized successfully
2025-11-17 15:36:49.347 +02:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-17 15:36:49.449 +02:00 [INF] Now listening on: https://localhost:7168
2025-11-17 15:36:49.451 +02:00 [INF] Now listening on: http://localhost:5004
2025-11-17 15:36:49.574 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-17 15:36:49.576 +02:00 [INF] Hosting environment: Development
2025-11-17 15:36:49.578 +02:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-11-17 15:37:02.479 +02:00 [INF] Starting web host...
2025-11-17 15:37:03.779 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-17 15:37:03.820 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-11-17 15:37:03.889 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-17 15:37:03.894 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-11-17 15:37:03.899 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-11-17 15:37:03.952 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-11-17 15:37:03.967 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-17 15:37:03.972 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-17 15:37:03.978 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-17 15:37:03.987 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-11-17 15:37:03.992 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-11-17 15:37:04.149 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-17 15:37:04.157 +02:00 [INF] Master database initialized successfully
2025-11-17 15:37:06.216 +02:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-17 15:37:06.318 +02:00 [INF] Now listening on: https://localhost:7168
2025-11-17 15:37:06.321 +02:00 [INF] Now listening on: http://localhost:5004
2025-11-17 15:37:06.452 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-17 15:37:06.454 +02:00 [INF] Hosting environment: Development
2025-11-17 15:37:06.455 +02:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-11-17 15:37:15.004 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/goods-receipts/5add8f05-71b7-4d97-1abe-08de25368d83/items - application/json 215
2025-11-17 15:37:15.063 +02:00 [INF] Request started
2025-11-17 15:37:15.066 +02:00 [INF] === Incoming Request ===
2025-11-17 15:37:15.068 +02:00 [INF] Path: /api/goods-receipts/5add8f05-71b7-4d97-1abe-08de25368d83/items
2025-11-17 15:37:15.069 +02:00 [INF] Method: POST
2025-11-17 15:37:15.070 +02:00 [INF] === Headers ===
2025-11-17 15:37:15.072 +02:00 [INF] Accept: ["*/*"]
2025-11-17 15:37:15.075 +02:00 [INF] Connection: ["keep-alive"]
2025-11-17 15:37:15.077 +02:00 [INF] Host: ["localhost:7168"]
2025-11-17 15:37:15.078 +02:00 [INF] User-Agent: ["PostmanRuntime/7.49.1"]
2025-11-17 15:37:15.079 +02:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-11-17 15:37:15.083 +02:00 [INF] Content-Type: ["application/json"]
2025-11-17 15:37:15.084 +02:00 [INF] Content-Length: ["215"]
2025-11-17 15:37:15.086 +02:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-11-17 15:37:15.087 +02:00 [INF] Postman-Token: ["82270490-5886-4ece-bf11-862976ae5d80"]
2025-11-17 15:37:15.092 +02:00 [INF] üîç TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-11-17 15:37:15.093 +02:00 [INF] ‚úÖ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-11-17 15:37:15.095 +02:00 [INF] Executing endpoint 'ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNItemsController.AddGRNItem (ModularERP)'
2025-11-17 15:37:15.115 +02:00 [INF] Route matched with {action = "AddGRNItem", controller = "GRNItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddGRNItem(System.Guid, ModularERP.Modules.Purchases.Goods_Receipt.Commends.Commends_GRNItem.AddGRNItemCommand) on controller ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNItemsController (ModularERP).
2025-11-17 15:37:15.122 +02:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-11-17 15:37:15.151 +02:00 [INF] Adding item to GRN "5add8f05-71b7-4d97-1abe-08de25368d83"
2025-11-17 15:37:15.156 +02:00 [INF] Executed action ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNItemsController.AddGRNItem (ModularERP) in 33.9313ms
2025-11-17 15:37:15.158 +02:00 [INF] Executed endpoint 'ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNItemsController.AddGRNItem (ModularERP)'
2025-11-17 15:37:15.160 +02:00 [ERR] Unexpected error occurred
System.ArgumentNullException: Value cannot be null. (Parameter 'input')
   at System.ArgumentNullException.Throw(String paramName)
   at System.Guid.Parse(String input)
   at ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNItemsController.AddGRNItem(Guid id, AddGRNItemCommand command) in E:\ModelerERP\ModularERP\ModularERP\Modules\Purchases\Goods_Receipt\Controllers\GRNItemsController.cs:line 32
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_7>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 354
--- End of stack trace from previous location ---
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 307
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-11-17 15:37:15.226 +02:00 [INF] Error response sent with status code 500
2025-11-17 15:37:15.230 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/goods-receipts/5add8f05-71b7-4d97-1abe-08de25368d83/items - 500 null application/json; charset=utf-8 226.6565ms
2025-11-17 15:39:59.149 +02:00 [INF] Starting web host...
2025-11-17 15:40:00.481 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-17 15:40:00.523 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-11-17 15:40:00.591 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-17 15:40:00.596 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-11-17 15:40:00.602 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-11-17 15:40:00.655 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-11-17 15:40:00.671 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-17 15:40:00.675 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-17 15:40:00.682 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-17 15:40:00.695 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-11-17 15:40:00.701 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-11-17 15:40:00.868 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-17 15:40:00.874 +02:00 [INF] Master database initialized successfully
2025-11-17 15:40:03.103 +02:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-17 15:40:03.213 +02:00 [INF] Now listening on: https://localhost:7168
2025-11-17 15:40:03.215 +02:00 [INF] Now listening on: http://localhost:5004
2025-11-17 15:40:03.351 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-17 15:40:03.353 +02:00 [INF] Hosting environment: Development
2025-11-17 15:40:03.354 +02:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-11-17 15:40:09.043 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/goods-receipts/5add8f05-71b7-4d97-1abe-08de25368d83/items - application/json 215
2025-11-17 15:40:09.098 +02:00 [INF] Request started
2025-11-17 15:40:09.100 +02:00 [INF] === Incoming Request ===
2025-11-17 15:40:09.103 +02:00 [INF] Path: /api/goods-receipts/5add8f05-71b7-4d97-1abe-08de25368d83/items
2025-11-17 15:40:09.104 +02:00 [INF] Method: POST
2025-11-17 15:40:09.105 +02:00 [INF] === Headers ===
2025-11-17 15:40:09.110 +02:00 [INF] Accept: ["*/*"]
2025-11-17 15:40:09.114 +02:00 [INF] Connection: ["keep-alive"]
2025-11-17 15:40:09.121 +02:00 [INF] Host: ["localhost:7168"]
2025-11-17 15:40:09.123 +02:00 [INF] User-Agent: ["PostmanRuntime/7.49.1"]
2025-11-17 15:40:09.124 +02:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-11-17 15:40:09.126 +02:00 [INF] Content-Type: ["application/json"]
2025-11-17 15:40:09.130 +02:00 [INF] Content-Length: ["215"]
2025-11-17 15:40:09.132 +02:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-11-17 15:40:09.133 +02:00 [INF] Postman-Token: ["81fbd569-68ea-4773-bea7-4c4c7a2d6f88"]
2025-11-17 15:40:09.138 +02:00 [INF] üîç TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-11-17 15:40:09.140 +02:00 [INF] ‚úÖ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-11-17 15:40:09.143 +02:00 [INF] Executing endpoint 'ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNItemsController.AddGRNItem (ModularERP)'
2025-11-17 15:40:09.166 +02:00 [INF] Route matched with {action = "AddGRNItem", controller = "GRNItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddGRNItem(System.Guid, ModularERP.Modules.Purchases.Goods_Receipt.Commends.Commends_GRNItem.AddGRNItemCommand) on controller ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNItemsController (ModularERP).
2025-11-17 15:40:09.172 +02:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-11-17 15:40:09.200 +02:00 [INF] Adding item to GRN "5add8f05-71b7-4d97-1abe-08de25368d83"
2025-11-17 15:40:09.298 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-11-17 15:40:10.089 +02:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-11-17 15:40:10.104 +02:00 [INF] üîµ Starting AddGRNItem | GRNId: "5add8f05-71b7-4d97-1abe-08de25368d83" | POLineItemId: "b9d99ef5-ecd2-452b-4f82-08de25d684bd" | Qty: 1
2025-11-17 15:40:10.147 +02:00 [INF] Executed action ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNItemsController.AddGRNItem (ModularERP) in 975.2812ms
2025-11-17 15:40:10.149 +02:00 [INF] Executed endpoint 'ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNItemsController.AddGRNItem (ModularERP)'
2025-11-17 15:40:10.153 +02:00 [ERR] Application exception occurred: GRN with ID 5add8f05-71b7-4d97-1abe-08de25368d83 not found
ModularERP.Common.Exceptions.NotFoundException: GRN with ID 5add8f05-71b7-4d97-1abe-08de25368d83 not found
   at ModularERP.Modules.Purchases.Goods_Receipt.Handlers.Handlers_GRNItem.AddGRNItemHandler.Handle(AddGRNItemCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Purchases\Goods_Receipt\Handlers\Handlers_GRNItem\AddGRNItemHandler.cs:line 72
   at ModularERP.Modules.Purchases.Goods_Receipt.Handlers.Handlers_GRNItem.AddGRNItemHandler.Handle(AddGRNItemCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Purchases\Goods_Receipt\Handlers\Handlers_GRNItem\AddGRNItemHandler.cs:line 273
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNItemsController.AddGRNItem(Guid id, AddGRNItemCommand command) in E:\ModelerERP\ModularERP\ModularERP\Modules\Purchases\Goods_Receipt\Controllers\GRNItemsController.cs:line 37
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_7>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 354
--- End of stack trace from previous location ---
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 307
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-11-17 15:40:10.201 +02:00 [INF] Error response sent with status code 404
2025-11-17 15:40:10.208 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/goods-receipts/5add8f05-71b7-4d97-1abe-08de25368d83/items - 404 null application/json; charset=utf-8 1167.2541ms
2025-11-17 15:43:37.490 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/goods-receipts/7e24b170-0fd2-4461-c5dd-08de25d935fb/items - application/json 215
2025-11-17 15:43:37.505 +02:00 [INF] Request started
2025-11-17 15:43:37.507 +02:00 [INF] === Incoming Request ===
2025-11-17 15:43:37.508 +02:00 [INF] Path: /api/goods-receipts/7e24b170-0fd2-4461-c5dd-08de25d935fb/items
2025-11-17 15:43:37.510 +02:00 [INF] Method: POST
2025-11-17 15:43:37.511 +02:00 [INF] === Headers ===
2025-11-17 15:43:37.513 +02:00 [INF] Accept: ["*/*"]
2025-11-17 15:43:37.514 +02:00 [INF] Connection: ["keep-alive"]
2025-11-17 15:43:37.516 +02:00 [INF] Host: ["localhost:7168"]
2025-11-17 15:43:37.517 +02:00 [INF] User-Agent: ["PostmanRuntime/7.49.1"]
2025-11-17 15:43:37.520 +02:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-11-17 15:43:37.521 +02:00 [INF] Content-Type: ["application/json"]
2025-11-17 15:43:37.523 +02:00 [INF] Content-Length: ["215"]
2025-11-17 15:43:37.525 +02:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-11-17 15:43:37.527 +02:00 [INF] Postman-Token: ["49a09fef-044f-4b02-a570-7cee0b6d98ef"]
2025-11-17 15:43:37.531 +02:00 [INF] üîç TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-11-17 15:43:37.532 +02:00 [INF] ‚úÖ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-11-17 15:43:37.533 +02:00 [INF] Executing endpoint 'ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNItemsController.AddGRNItem (ModularERP)'
2025-11-17 15:43:37.535 +02:00 [INF] Route matched with {action = "AddGRNItem", controller = "GRNItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddGRNItem(System.Guid, ModularERP.Modules.Purchases.Goods_Receipt.Commends.Commends_GRNItem.AddGRNItemCommand) on controller ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNItemsController (ModularERP).
2025-11-17 15:43:37.541 +02:00 [INF] Adding item to GRN "7e24b170-0fd2-4461-c5dd-08de25d935fb"
2025-11-17 15:43:37.551 +02:00 [INF] üîµ Starting AddGRNItem | GRNId: "7e24b170-0fd2-4461-c5dd-08de25d935fb" | POLineItemId: "b9d99ef5-ecd2-452b-4f82-08de25d684bd" | Qty: 1
2025-11-17 15:43:37.561 +02:00 [INF] ‚úÖ GRN found | Number: GRN-2025-00003 | Warehouse: "e5d0bbaa-9099-43e1-bb16-f9744078a9ea"
2025-11-17 15:43:37.702 +02:00 [INF] ‚úÖ POLineItem found | Item: ' Product' | Ordered: 5.000 | Received: 2.000 | Remaining: 3.000
2025-11-17 15:43:37.830 +02:00 [INF] ‚úÖ GRN Line Item created | Id: "6d7d5c6e-2c58-4d33-9adc-6c99f4381bfc"
2025-11-17 15:43:37.908 +02:00 [INF] ‚úÖ POLineItem updated | Id: "b9d99ef5-ecd2-452b-4f82-08de25d684bd" | Received: 2.000 ‚Üí 3.000 | Remaining: 3.000 ‚Üí 2.000
2025-11-17 15:43:37.915 +02:00 [INF] üîÑ Updating stock | Warehouse: "e5d0bbaa-9099-43e1-bb16-f9744078a9ea" | Product: "518cf879-5570-46d8-9850-bec158f5eea6" | Qty: 1
2025-11-17 15:43:37.982 +02:00 [INF] ‚úÖ Stock updated | Product: ' Product' | Qty: 51.000 ‚Üí 52.000 | Available: 51.000 ‚Üí 52.000
2025-11-17 15:43:37.985 +02:00 [INF] ‚úÖ‚úÖ‚úÖ GRN Item added successfully | LineItemId: "6d7d5c6e-2c58-4d33-9adc-6c99f4381bfc"
2025-11-17 15:43:38.012 +02:00 [INF] Executing CreatedAtActionResult, writing value of type '<>f__AnonymousType145`3[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Purchases.Goods_Receipt.DTO.DTO_GRN.GRNLineItemResponseDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-17 15:43:38.039 +02:00 [INF] Executed action ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNItemsController.AddGRNItem (ModularERP) in 498.8295ms
2025-11-17 15:43:38.042 +02:00 [INF] Executed endpoint 'ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNItemsController.AddGRNItem (ModularERP)'
2025-11-17 15:43:38.045 +02:00 [INF] Request completed successfully with status code 201
2025-11-17 15:43:38.046 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/goods-receipts/7e24b170-0fd2-4461-c5dd-08de25d935fb/items - 201 null application/json; charset=utf-8 555.5144ms
2025-11-17 15:44:59.480 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-11-17 15:44:59.610 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 130.1257ms
2025-11-17 15:44:59.618 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-11-17 15:44:59.618 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-11-17 15:44:59.629 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 10.9688ms
2025-11-17 15:44:59.659 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 41.5528ms
2025-11-17 15:44:59.851 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-11-17 15:45:00.071 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 220.4091ms
2025-11-17 15:46:21.913 +02:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7168/api/goods-receipts/{7e24b170-0fd2-4461-c5dd-08de25d935fb}/items/{6d7d5c6e-2c58-4d33-9adc-6c99f4381bfc} - application/json 269
2025-11-17 15:46:21.917 +02:00 [INF] Request started
2025-11-17 15:46:21.918 +02:00 [INF] === Incoming Request ===
2025-11-17 15:46:21.920 +02:00 [INF] Path: /api/goods-receipts/%7B7e24b170-0fd2-4461-c5dd-08de25d935fb%7D/items/%7B6d7d5c6e-2c58-4d33-9adc-6c99f4381bfc%7D
2025-11-17 15:46:21.923 +02:00 [INF] Method: PUT
2025-11-17 15:46:21.925 +02:00 [INF] === Headers ===
2025-11-17 15:46:21.926 +02:00 [INF] Accept: ["*/*"]
2025-11-17 15:46:21.927 +02:00 [INF] Connection: ["keep-alive"]
2025-11-17 15:46:21.929 +02:00 [INF] Host: ["localhost:7168"]
2025-11-17 15:46:21.930 +02:00 [INF] User-Agent: ["PostmanRuntime/7.49.1"]
2025-11-17 15:46:21.932 +02:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-11-17 15:46:21.935 +02:00 [INF] Content-Type: ["application/json"]
2025-11-17 15:46:21.938 +02:00 [INF] Content-Length: ["269"]
2025-11-17 15:46:21.940 +02:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-11-17 15:46:21.942 +02:00 [INF] Postman-Token: ["bc67a235-8ac2-4290-b7da-a43954c3f6eb"]
2025-11-17 15:46:21.945 +02:00 [INF] üîç TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-11-17 15:46:21.947 +02:00 [INF] ‚úÖ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-11-17 15:46:21.948 +02:00 [INF] Executing endpoint 'ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNItemsController.UpdateGRNItem (ModularERP)'
2025-11-17 15:46:21.954 +02:00 [INF] Route matched with {action = "UpdateGRNItem", controller = "GRNItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateGRNItem(System.Guid, System.Guid, ModularERP.Modules.Purchases.Goods_Receipt.Commends.Commends_GRNItem.UpdateGRNItemCommand) on controller ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNItemsController (ModularERP).
2025-11-17 15:46:21.962 +02:00 [INF] Updating item "6d7d5c6e-2c58-4d33-9adc-6c99f4381bfc" in GRN "7e24b170-0fd2-4461-c5dd-08de25d935fb"
2025-11-17 15:46:21.984 +02:00 [INF] üîµ Starting UpdateGRNItem | ItemId: "6d7d5c6e-2c58-4d33-9adc-6c99f4381bfc" | GRNId: "7e24b170-0fd2-4461-c5dd-08de25d935fb"
2025-11-17 15:46:21.994 +02:00 [INF] ‚úÖ Existing line item found | OldQty: 1.000 | NewQty: 1
2025-11-17 15:46:21.996 +02:00 [INF] üìä Quantity Delta: 0.000 (Old: 1.000 ‚Üí New: 1)
2025-11-17 15:46:22.036 +02:00 [INF] ‚úÖ GRN Line Item updated | Id: "6d7d5c6e-2c58-4d33-9adc-6c99f4381bfc"
2025-11-17 15:46:22.043 +02:00 [INF] ‚úÖ NEW POLineItem updated | Id: "b9d99ef5-ecd2-452b-4f82-08de25d684bd" | Received: 3.000 ‚Üí 3.000 | Remaining: 2.000
2025-11-17 15:46:22.048 +02:00 [INF] üîÑ Adjusting stock | Warehouse: "e5d0bbaa-9099-43e1-bb16-f9744078a9ea" | Product: "518cf879-5570-46d8-9850-bec158f5eea6" | Adjustment: 0.000 (ADD)
2025-11-17 15:46:22.057 +02:00 [INF] ‚úÖ Stock adjusted | Product: ' Product' | Qty: 52.000 ‚Üí 52.000 | Available: 52.000 ‚Üí 52.000
2025-11-17 15:46:22.059 +02:00 [INF] ‚úÖ‚úÖ‚úÖ GRN Item updated successfully | ItemId: "6d7d5c6e-2c58-4d33-9adc-6c99f4381bfc"
2025-11-17 15:46:22.071 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType145`3[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Purchases.Goods_Receipt.DTO.DTO_GRN.GRNLineItemResponseDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-17 15:46:22.075 +02:00 [INF] Executed action ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNItemsController.UpdateGRNItem (ModularERP) in 116.8271ms
2025-11-17 15:46:22.077 +02:00 [INF] Executed endpoint 'ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNItemsController.UpdateGRNItem (ModularERP)'
2025-11-17 15:46:22.079 +02:00 [INF] Request completed successfully with status code 200
2025-11-17 15:46:22.080 +02:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7168/api/goods-receipts/{7e24b170-0fd2-4461-c5dd-08de25d935fb}/items/{6d7d5c6e-2c58-4d33-9adc-6c99f4381bfc} - 200 null application/json; charset=utf-8 166.9623ms
2025-11-17 15:46:33.109 +02:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7168/api/goods-receipts/{7e24b170-0fd2-4461-c5dd-08de25d935fb}/items/{6d7d5c6e-2c58-4d33-9adc-6c99f4381bfc} - application/json 269
2025-11-17 15:46:33.113 +02:00 [INF] Request started
2025-11-17 15:46:33.114 +02:00 [INF] === Incoming Request ===
2025-11-17 15:46:33.115 +02:00 [INF] Path: /api/goods-receipts/%7B7e24b170-0fd2-4461-c5dd-08de25d935fb%7D/items/%7B6d7d5c6e-2c58-4d33-9adc-6c99f4381bfc%7D
2025-11-17 15:46:33.116 +02:00 [INF] Method: PUT
2025-11-17 15:46:33.118 +02:00 [INF] === Headers ===
2025-11-17 15:46:33.120 +02:00 [INF] Accept: ["*/*"]
2025-11-17 15:46:33.123 +02:00 [INF] Connection: ["keep-alive"]
2025-11-17 15:46:33.124 +02:00 [INF] Host: ["localhost:7168"]
2025-11-17 15:46:33.125 +02:00 [INF] User-Agent: ["PostmanRuntime/7.49.1"]
2025-11-17 15:46:33.127 +02:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-11-17 15:46:33.128 +02:00 [INF] Content-Type: ["application/json"]
2025-11-17 15:46:33.133 +02:00 [INF] Content-Length: ["269"]
2025-11-17 15:46:33.134 +02:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-11-17 15:46:33.136 +02:00 [INF] Postman-Token: ["d4856ee0-5c83-4cb4-b8c0-36baf7e98758"]
2025-11-17 15:46:33.139 +02:00 [INF] üîç TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-11-17 15:46:33.140 +02:00 [INF] ‚úÖ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-11-17 15:46:33.141 +02:00 [INF] Executing endpoint 'ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNItemsController.UpdateGRNItem (ModularERP)'
2025-11-17 15:46:33.143 +02:00 [INF] Route matched with {action = "UpdateGRNItem", controller = "GRNItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateGRNItem(System.Guid, System.Guid, ModularERP.Modules.Purchases.Goods_Receipt.Commends.Commends_GRNItem.UpdateGRNItemCommand) on controller ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNItemsController (ModularERP).
2025-11-17 15:46:33.147 +02:00 [INF] Updating item "6d7d5c6e-2c58-4d33-9adc-6c99f4381bfc" in GRN "7e24b170-0fd2-4461-c5dd-08de25d935fb"
2025-11-17 15:46:33.157 +02:00 [WRN] Validation failed for UpdateGRNItemCommand. Errors: [{"PropertyName":"ReceivedQuantity","ErrorMessage":"Received quantity must be greater than zero"}]
2025-11-17 15:46:33.165 +02:00 [INF] Executed action ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNItemsController.UpdateGRNItem (ModularERP) in 18.915ms
2025-11-17 15:46:33.167 +02:00 [INF] Executed endpoint 'ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNItemsController.UpdateGRNItem (ModularERP)'
2025-11-17 15:46:33.171 +02:00 [WRN] Validation exception occurred: Validation failed. Validation errors: {"ReceivedQuantity":["Received quantity must be greater than zero"]}
ModularERP.Common.Exceptions.ValidationException: Validation failed
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 44
   at ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNItemsController.UpdateGRNItem(Guid id, Guid itemId, UpdateGRNItemCommand command) in E:\ModelerERP\ModularERP\ModularERP\Modules\Purchases\Goods_Receipt\Controllers\GRNItemsController.cs:line 67
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_7>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 354
--- End of stack trace from previous location ---
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 307
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-11-17 15:46:33.197 +02:00 [INF] Error response sent with status code 400
2025-11-17 15:46:33.201 +02:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7168/api/goods-receipts/{7e24b170-0fd2-4461-c5dd-08de25d935fb}/items/{6d7d5c6e-2c58-4d33-9adc-6c99f4381bfc} - 400 null application/json; charset=utf-8 91.492ms
2025-11-17 15:46:45.342 +02:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7168/api/goods-receipts/{7e24b170-0fd2-4461-c5dd-08de25d935fb}/items/{6d7d5c6e-2c58-4d33-9adc-6c99f4381bfc} - application/json 269
2025-11-17 15:46:45.346 +02:00 [INF] Request started
2025-11-17 15:46:45.347 +02:00 [INF] === Incoming Request ===
2025-11-17 15:46:45.348 +02:00 [INF] Path: /api/goods-receipts/%7B7e24b170-0fd2-4461-c5dd-08de25d935fb%7D/items/%7B6d7d5c6e-2c58-4d33-9adc-6c99f4381bfc%7D
2025-11-17 15:46:45.349 +02:00 [INF] Method: PUT
2025-11-17 15:46:45.350 +02:00 [INF] === Headers ===
2025-11-17 15:46:45.352 +02:00 [INF] Accept: ["*/*"]
2025-11-17 15:46:45.354 +02:00 [INF] Connection: ["keep-alive"]
2025-11-17 15:46:45.355 +02:00 [INF] Host: ["localhost:7168"]
2025-11-17 15:46:45.357 +02:00 [INF] User-Agent: ["PostmanRuntime/7.49.1"]
2025-11-17 15:46:45.358 +02:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-11-17 15:46:45.359 +02:00 [INF] Content-Type: ["application/json"]
2025-11-17 15:46:45.362 +02:00 [INF] Content-Length: ["269"]
2025-11-17 15:46:45.364 +02:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-11-17 15:46:45.365 +02:00 [INF] Postman-Token: ["919ebfae-79aa-403f-a882-5c1892829caf"]
2025-11-17 15:46:45.367 +02:00 [INF] üîç TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-11-17 15:46:45.367 +02:00 [INF] ‚úÖ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-11-17 15:46:45.369 +02:00 [INF] Executing endpoint 'ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNItemsController.UpdateGRNItem (ModularERP)'
2025-11-17 15:46:45.370 +02:00 [INF] Route matched with {action = "UpdateGRNItem", controller = "GRNItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateGRNItem(System.Guid, System.Guid, ModularERP.Modules.Purchases.Goods_Receipt.Commends.Commends_GRNItem.UpdateGRNItemCommand) on controller ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNItemsController (ModularERP).
2025-11-17 15:46:45.374 +02:00 [INF] Updating item "6d7d5c6e-2c58-4d33-9adc-6c99f4381bfc" in GRN "7e24b170-0fd2-4461-c5dd-08de25d935fb"
2025-11-17 15:46:45.379 +02:00 [INF] üîµ Starting UpdateGRNItem | ItemId: "6d7d5c6e-2c58-4d33-9adc-6c99f4381bfc" | GRNId: "7e24b170-0fd2-4461-c5dd-08de25d935fb"
2025-11-17 15:46:45.383 +02:00 [INF] ‚úÖ Existing line item found | OldQty: 1.000 | NewQty: 1
2025-11-17 15:46:45.385 +02:00 [INF] üìä Quantity Delta: 0.000 (Old: 1.000 ‚Üí New: 1)
2025-11-17 15:46:45.407 +02:00 [INF] ‚úÖ GRN Line Item updated | Id: "6d7d5c6e-2c58-4d33-9adc-6c99f4381bfc"
2025-11-17 15:46:45.415 +02:00 [INF] ‚úÖ NEW POLineItem updated | Id: "b9d99ef5-ecd2-452b-4f82-08de25d684bd" | Received: 3.000 ‚Üí 3.000 | Remaining: 2.000
2025-11-17 15:46:45.418 +02:00 [INF] üîÑ Adjusting stock | Warehouse: "e5d0bbaa-9099-43e1-bb16-f9744078a9ea" | Product: "518cf879-5570-46d8-9850-bec158f5eea6" | Adjustment: 0.000 (ADD)
2025-11-17 15:46:45.425 +02:00 [INF] ‚úÖ Stock adjusted | Product: ' Product' | Qty: 52.000 ‚Üí 52.000 | Available: 52.000 ‚Üí 52.000
2025-11-17 15:46:45.429 +02:00 [INF] ‚úÖ‚úÖ‚úÖ GRN Item updated successfully | ItemId: "6d7d5c6e-2c58-4d33-9adc-6c99f4381bfc"
2025-11-17 15:46:45.435 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType145`3[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Purchases.Goods_Receipt.DTO.DTO_GRN.GRNLineItemResponseDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-17 15:46:45.438 +02:00 [INF] Executed action ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNItemsController.UpdateGRNItem (ModularERP) in 64.4307ms
2025-11-17 15:46:45.440 +02:00 [INF] Executed endpoint 'ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNItemsController.UpdateGRNItem (ModularERP)'
2025-11-17 15:46:45.442 +02:00 [INF] Request completed successfully with status code 200
2025-11-17 15:46:45.443 +02:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7168/api/goods-receipts/{7e24b170-0fd2-4461-c5dd-08de25d935fb}/items/{6d7d5c6e-2c58-4d33-9adc-6c99f4381bfc} - 200 null application/json; charset=utf-8 101.5584ms
2025-11-17 15:47:13.610 +02:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7168/api/goods-receipts/{7e24b170-0fd2-4461-c5dd-08de25d935fb}/items/{6d7d5c6e-2c58-4d33-9adc-6c99f4381bfc} - application/json 269
2025-11-17 15:47:13.613 +02:00 [INF] Request started
2025-11-17 15:47:13.614 +02:00 [INF] === Incoming Request ===
2025-11-17 15:47:13.615 +02:00 [INF] Path: /api/goods-receipts/%7B7e24b170-0fd2-4461-c5dd-08de25d935fb%7D/items/%7B6d7d5c6e-2c58-4d33-9adc-6c99f4381bfc%7D
2025-11-17 15:47:13.616 +02:00 [INF] Method: PUT
2025-11-17 15:47:13.619 +02:00 [INF] === Headers ===
2025-11-17 15:47:13.621 +02:00 [INF] Accept: ["*/*"]
2025-11-17 15:47:13.623 +02:00 [INF] Connection: ["keep-alive"]
2025-11-17 15:47:13.625 +02:00 [INF] Host: ["localhost:7168"]
2025-11-17 15:47:13.627 +02:00 [INF] User-Agent: ["PostmanRuntime/7.49.1"]
2025-11-17 15:47:13.629 +02:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-11-17 15:47:13.631 +02:00 [INF] Content-Type: ["application/json"]
2025-11-17 15:47:13.632 +02:00 [INF] Content-Length: ["269"]
2025-11-17 15:47:13.634 +02:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-11-17 15:47:13.636 +02:00 [INF] Postman-Token: ["8fc04800-a04d-425b-ad79-2896365f5a7e"]
2025-11-17 15:47:13.637 +02:00 [INF] üîç TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-11-17 15:47:13.638 +02:00 [INF] ‚úÖ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-11-17 15:47:13.639 +02:00 [INF] Executing endpoint 'ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNItemsController.UpdateGRNItem (ModularERP)'
2025-11-17 15:47:13.643 +02:00 [INF] Route matched with {action = "UpdateGRNItem", controller = "GRNItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateGRNItem(System.Guid, System.Guid, ModularERP.Modules.Purchases.Goods_Receipt.Commends.Commends_GRNItem.UpdateGRNItemCommand) on controller ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNItemsController (ModularERP).
2025-11-17 15:47:13.646 +02:00 [INF] Updating item "6d7d5c6e-2c58-4d33-9adc-6c99f4381bfc" in GRN "7e24b170-0fd2-4461-c5dd-08de25d935fb"
2025-11-17 15:47:13.653 +02:00 [INF] üîµ Starting UpdateGRNItem | ItemId: "6d7d5c6e-2c58-4d33-9adc-6c99f4381bfc" | GRNId: "7e24b170-0fd2-4461-c5dd-08de25d935fb"
2025-11-17 15:47:13.658 +02:00 [INF] ‚úÖ Existing line item found | OldQty: 1.000 | NewQty: 2
2025-11-17 15:47:13.660 +02:00 [INF] üìä Quantity Delta: 1.000 (Old: 1.000 ‚Üí New: 2)
2025-11-17 15:47:13.683 +02:00 [INF] ‚úÖ GRN Line Item updated | Id: "6d7d5c6e-2c58-4d33-9adc-6c99f4381bfc"
2025-11-17 15:47:13.690 +02:00 [INF] ‚úÖ NEW POLineItem updated | Id: "b9d99ef5-ecd2-452b-4f82-08de25d684bd" | Received: 3.000 ‚Üí 4.000 | Remaining: 1.000
2025-11-17 15:47:13.694 +02:00 [INF] üîÑ Adjusting stock | Warehouse: "e5d0bbaa-9099-43e1-bb16-f9744078a9ea" | Product: "518cf879-5570-46d8-9850-bec158f5eea6" | Adjustment: 1.000 (ADD)
2025-11-17 15:47:13.703 +02:00 [INF] ‚úÖ Stock adjusted | Product: ' Product' | Qty: 52.000 ‚Üí 53.000 | Available: 52.000 ‚Üí 53.000
2025-11-17 15:47:13.706 +02:00 [INF] ‚úÖ‚úÖ‚úÖ GRN Item updated successfully | ItemId: "6d7d5c6e-2c58-4d33-9adc-6c99f4381bfc"
2025-11-17 15:47:13.712 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType145`3[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Purchases.Goods_Receipt.DTO.DTO_GRN.GRNLineItemResponseDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-17 15:47:13.715 +02:00 [INF] Executed action ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNItemsController.UpdateGRNItem (ModularERP) in 69.2117ms
2025-11-17 15:47:13.716 +02:00 [INF] Executed endpoint 'ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNItemsController.UpdateGRNItem (ModularERP)'
2025-11-17 15:47:13.718 +02:00 [INF] Request completed successfully with status code 200
2025-11-17 15:47:13.720 +02:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7168/api/goods-receipts/{7e24b170-0fd2-4461-c5dd-08de25d935fb}/items/{6d7d5c6e-2c58-4d33-9adc-6c99f4381bfc} - 200 null application/json; charset=utf-8 109.5561ms
2025-11-17 16:47:02.744 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/purchase-orders/{23d49ad7-c8f3-4545-9bb3-6957cdf43515}/receive - application/json 482
2025-11-17 16:47:02.749 +02:00 [INF] Request started
2025-11-17 16:47:02.750 +02:00 [INF] === Incoming Request ===
2025-11-17 16:47:02.751 +02:00 [INF] Path: /api/purchase-orders/%7B23d49ad7-c8f3-4545-9bb3-6957cdf43515%7D/receive
2025-11-17 16:47:02.756 +02:00 [INF] Method: POST
2025-11-17 16:47:02.758 +02:00 [INF] === Headers ===
2025-11-17 16:47:02.759 +02:00 [INF] Accept: ["*/*"]
2025-11-17 16:47:02.760 +02:00 [INF] Connection: ["keep-alive"]
2025-11-17 16:47:02.762 +02:00 [INF] Host: ["localhost:7168"]
2025-11-17 16:47:02.765 +02:00 [INF] User-Agent: ["PostmanRuntime/7.49.1"]
2025-11-17 16:47:02.770 +02:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-11-17 16:47:02.771 +02:00 [INF] Content-Type: ["application/json"]
2025-11-17 16:47:02.773 +02:00 [INF] Content-Length: ["482"]
2025-11-17 16:47:02.775 +02:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-11-17 16:47:02.776 +02:00 [INF] Postman-Token: ["8f01337b-9ee0-42b1-ad16-e99d83643fbf"]
2025-11-17 16:47:02.778 +02:00 [INF] üîç TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-11-17 16:47:02.779 +02:00 [INF] ‚úÖ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-11-17 16:47:02.780 +02:00 [INF] Executing endpoint 'ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNByPOController.ReceiveFromPO (ModularERP)'
2025-11-17 16:47:02.788 +02:00 [INF] Route matched with {action = "ReceiveFromPO", controller = "GRNByPO"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ReceiveFromPO(System.Guid, ModularERP.Modules.Purchases.Goods_Receipt.Commends.Commends_GRNPO.ReceiveFromPOCommand, System.Guid) on controller ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNByPOController (ModularERP).
2025-11-17 16:47:02.808 +02:00 [INF] Creating GRN for PO "23d49ad7-c8f3-4545-9bb3-6957cdf43515"
2025-11-17 16:47:02.811 +02:00 [INF] Executed action ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNByPOController.ReceiveFromPO (ModularERP) in 19.7186ms
2025-11-17 16:47:02.813 +02:00 [INF] Executed endpoint 'ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNByPOController.ReceiveFromPO (ModularERP)'
2025-11-17 16:47:02.815 +02:00 [ERR] Unexpected error occurred
System.ArgumentNullException: Value cannot be null. (Parameter 'input')
   at System.ArgumentNullException.Throw(String paramName)
   at System.Guid.Parse(String input)
   at ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNByPOController.ReceiveFromPO(Guid poId, ReceiveFromPOCommand command, Guid companyId) in E:\ModelerERP\ModularERP\ModularERP\Modules\Purchases\Goods_Receipt\Controllers\GRNByPOController.cs:line 60
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_7>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 354
--- End of stack trace from previous location ---
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 307
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-11-17 16:47:02.834 +02:00 [INF] Error response sent with status code 500
2025-11-17 16:47:02.835 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/purchase-orders/{23d49ad7-c8f3-4545-9bb3-6957cdf43515}/receive - 500 null application/json; charset=utf-8 90.9652ms
2025-11-17 16:47:23.253 +02:00 [INF] Starting web host...
2025-11-17 16:47:24.641 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-17 16:47:24.722 +02:00 [INF] Executed DbCommand (65ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-11-17 16:47:24.794 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-17 16:47:24.800 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-11-17 16:47:24.809 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-11-17 16:47:24.875 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-11-17 16:47:24.892 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-17 16:47:24.897 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-17 16:47:24.905 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-17 16:47:24.917 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-11-17 16:47:24.924 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-11-17 16:47:25.102 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-17 16:47:25.108 +02:00 [INF] Master database initialized successfully
2025-11-17 16:47:27.179 +02:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-17 16:47:27.290 +02:00 [INF] Now listening on: https://localhost:7168
2025-11-17 16:47:27.292 +02:00 [INF] Now listening on: http://localhost:5004
2025-11-17 16:47:27.428 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-17 16:47:27.429 +02:00 [INF] Hosting environment: Development
2025-11-17 16:47:27.430 +02:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-11-17 16:47:27.966 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-11-17 16:47:28.124 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 161.0684ms
2025-11-17 16:47:28.125 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-11-17 16:47:28.126 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-11-17 16:47:28.143 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 16.5351ms
2025-11-17 16:47:28.160 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 34.4965ms
2025-11-17 16:47:28.305 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-11-17 16:47:28.641 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 336.1743ms
2025-11-17 16:47:33.940 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/purchase-orders/{23d49ad7-c8f3-4545-9bb3-6957cdf43515}/receive - application/json 482
2025-11-17 16:47:33.956 +02:00 [INF] Request started
2025-11-17 16:47:33.958 +02:00 [INF] === Incoming Request ===
2025-11-17 16:47:33.960 +02:00 [INF] Path: /api/purchase-orders/%7B23d49ad7-c8f3-4545-9bb3-6957cdf43515%7D/receive
2025-11-17 16:47:33.962 +02:00 [INF] Method: POST
2025-11-17 16:47:33.962 +02:00 [INF] === Headers ===
2025-11-17 16:47:33.965 +02:00 [INF] Accept: ["*/*"]
2025-11-17 16:47:33.969 +02:00 [INF] Connection: ["keep-alive"]
2025-11-17 16:47:33.970 +02:00 [INF] Host: ["localhost:7168"]
2025-11-17 16:47:33.972 +02:00 [INF] User-Agent: ["PostmanRuntime/7.49.1"]
2025-11-17 16:47:33.974 +02:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-11-17 16:47:33.975 +02:00 [INF] Content-Type: ["application/json"]
2025-11-17 16:47:33.977 +02:00 [INF] Content-Length: ["482"]
2025-11-17 16:47:33.979 +02:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-11-17 16:47:33.980 +02:00 [INF] Postman-Token: ["b80605d3-1c6e-482c-bf01-ed1dfdab20aa"]
2025-11-17 16:47:33.986 +02:00 [INF] üîç TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-11-17 16:47:33.987 +02:00 [INF] ‚úÖ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-11-17 16:47:33.989 +02:00 [INF] Executing endpoint 'ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNByPOController.ReceiveFromPO (ModularERP)'
2025-11-17 16:47:34.005 +02:00 [INF] Route matched with {action = "ReceiveFromPO", controller = "GRNByPO"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ReceiveFromPO(System.Guid, ModularERP.Modules.Purchases.Goods_Receipt.Commends.Commends_GRNPO.ReceiveFromPOCommand, System.Guid) on controller ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNByPOController (ModularERP).
2025-11-17 16:47:34.010 +02:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-11-17 16:47:34.038 +02:00 [INF] Creating GRN for PO "23d49ad7-c8f3-4545-9bb3-6957cdf43515"
2025-11-17 16:47:34.043 +02:00 [INF] Executed action ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNByPOController.ReceiveFromPO (ModularERP) in 33.0831ms
2025-11-17 16:47:34.046 +02:00 [INF] Executed endpoint 'ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNByPOController.ReceiveFromPO (ModularERP)'
2025-11-17 16:47:34.047 +02:00 [ERR] Unexpected error occurred
System.ArgumentNullException: Value cannot be null. (Parameter 'input')
   at System.ArgumentNullException.Throw(String paramName)
   at System.Guid.Parse(String input)
   at ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNByPOController.ReceiveFromPO(Guid poId, ReceiveFromPOCommand command, Guid companyId) in E:\ModelerERP\ModularERP\ModularERP\Modules\Purchases\Goods_Receipt\Controllers\GRNByPOController.cs:line 60
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_7>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 354
--- End of stack trace from previous location ---
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 307
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-11-17 16:47:34.073 +02:00 [INF] Error response sent with status code 500
2025-11-17 16:47:34.076 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/purchase-orders/{23d49ad7-c8f3-4545-9bb3-6957cdf43515}/receive - 500 null application/json; charset=utf-8 136.3711ms
2025-11-17 16:49:49.270 +02:00 [INF] Starting web host...
2025-11-17 16:49:50.747 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-17 16:49:50.794 +02:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-11-17 16:49:50.864 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-17 16:49:50.870 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-11-17 16:49:50.885 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-11-17 16:49:50.941 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-11-17 16:49:50.957 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-17 16:49:50.962 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-17 16:49:50.975 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-17 16:49:50.986 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-11-17 16:49:50.993 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-11-17 16:49:51.158 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-17 16:49:51.166 +02:00 [INF] Master database initialized successfully
2025-11-17 16:49:53.159 +02:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-17 16:49:53.263 +02:00 [INF] Now listening on: https://localhost:7168
2025-11-17 16:49:53.265 +02:00 [INF] Now listening on: http://localhost:5004
2025-11-17 16:49:53.387 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-17 16:49:53.389 +02:00 [INF] Hosting environment: Development
2025-11-17 16:49:53.390 +02:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-11-17 16:49:53.617 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-11-17 16:49:53.787 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 170.8515ms
2025-11-17 16:49:53.795 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-11-17 16:49:53.796 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-11-17 16:49:53.804 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 8.5229ms
2025-11-17 16:49:53.831 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 35.5703ms
2025-11-17 16:49:53.882 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-11-17 16:49:54.165 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 282.8448ms
2025-11-17 16:49:56.853 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/purchase-orders/{23d49ad7-c8f3-4545-9bb3-6957cdf43515}/receive - application/json 482
2025-11-17 16:49:56.885 +02:00 [INF] Request started
2025-11-17 16:49:56.888 +02:00 [INF] === Incoming Request ===
2025-11-17 16:49:56.890 +02:00 [INF] Path: /api/purchase-orders/%7B23d49ad7-c8f3-4545-9bb3-6957cdf43515%7D/receive
2025-11-17 16:49:56.891 +02:00 [INF] Method: POST
2025-11-17 16:49:56.894 +02:00 [INF] === Headers ===
2025-11-17 16:49:56.897 +02:00 [INF] Accept: ["*/*"]
2025-11-17 16:49:56.901 +02:00 [INF] Connection: ["keep-alive"]
2025-11-17 16:49:56.902 +02:00 [INF] Host: ["localhost:7168"]
2025-11-17 16:49:56.904 +02:00 [INF] User-Agent: ["PostmanRuntime/7.49.1"]
2025-11-17 16:49:56.905 +02:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-11-17 16:49:56.906 +02:00 [INF] Content-Type: ["application/json"]
2025-11-17 16:49:56.913 +02:00 [INF] Content-Length: ["482"]
2025-11-17 16:49:56.916 +02:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-11-17 16:49:56.917 +02:00 [INF] Postman-Token: ["1db00e6a-9cfa-4380-896b-3cd71c02914b"]
2025-11-17 16:49:56.923 +02:00 [INF] üîç TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-11-17 16:49:56.925 +02:00 [INF] ‚úÖ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-11-17 16:49:56.928 +02:00 [INF] Executing endpoint 'ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNByPOController.ReceiveFromPO (ModularERP)'
2025-11-17 16:49:56.954 +02:00 [INF] Route matched with {action = "ReceiveFromPO", controller = "GRNByPO"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ReceiveFromPO(System.Guid, ModularERP.Modules.Purchases.Goods_Receipt.Commends.Commends_GRNPO.ReceiveFromPOCommand, System.Guid) on controller ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNByPOController (ModularERP).
2025-11-17 16:49:56.961 +02:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-11-17 16:49:57.011 +02:00 [INF] Creating GRN for PO "23d49ad7-c8f3-4545-9bb3-6957cdf43515"
2025-11-17 16:49:57.017 +02:00 [INF] Executed action ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNByPOController.ReceiveFromPO (ModularERP) in 57.6097ms
2025-11-17 16:49:57.020 +02:00 [INF] Executed endpoint 'ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNByPOController.ReceiveFromPO (ModularERP)'
2025-11-17 16:49:57.022 +02:00 [ERR] Unexpected error occurred
System.ArgumentNullException: Value cannot be null. (Parameter 'input')
   at System.ArgumentNullException.Throw(String paramName)
   at System.Guid.Parse(String input)
   at ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNByPOController.ReceiveFromPO(Guid poId, ReceiveFromPOCommand command, Guid companyId) in E:\ModelerERP\ModularERP\ModularERP\Modules\Purchases\Goods_Receipt\Controllers\GRNByPOController.cs:line 60
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_7>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 354
--- End of stack trace from previous location ---
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 307
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-11-17 16:49:57.084 +02:00 [INF] Error response sent with status code 500
2025-11-17 16:49:57.088 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/purchase-orders/{23d49ad7-c8f3-4545-9bb3-6957cdf43515}/receive - 500 null application/json; charset=utf-8 235.1106ms
2025-11-17 16:51:07.987 +02:00 [INF] Starting web host...
2025-11-17 16:51:09.330 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-17 16:51:09.427 +02:00 [INF] Executed DbCommand (72ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-11-17 16:51:09.508 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-17 16:51:09.515 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-11-17 16:51:09.532 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-11-17 16:51:09.590 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-11-17 16:51:09.610 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-17 16:51:09.615 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-17 16:51:09.622 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-17 16:51:09.634 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-11-17 16:51:09.642 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-11-17 16:51:09.823 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-17 16:51:09.833 +02:00 [INF] Master database initialized successfully
2025-11-17 16:51:11.767 +02:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-17 16:51:11.873 +02:00 [INF] Now listening on: https://localhost:7168
2025-11-17 16:51:11.875 +02:00 [INF] Now listening on: http://localhost:5004
2025-11-17 16:51:12.017 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-17 16:51:12.019 +02:00 [INF] Hosting environment: Development
2025-11-17 16:51:12.021 +02:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-11-17 16:51:12.116 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-11-17 16:51:12.252 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 137.273ms
2025-11-17 16:51:12.285 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-11-17 16:51:12.285 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-11-17 16:51:12.295 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 8.8258ms
2025-11-17 16:51:12.309 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 23.9838ms
2025-11-17 16:51:12.363 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-11-17 16:51:12.635 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 272.0831ms
2025-11-17 16:51:53.819 +02:00 [INF] Starting web host...
2025-11-17 16:51:55.182 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-17 16:51:55.214 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-11-17 16:51:55.290 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-17 16:51:55.296 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-11-17 16:51:55.299 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-11-17 16:51:55.354 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-11-17 16:51:55.371 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-17 16:51:55.376 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-17 16:51:55.382 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-17 16:51:55.394 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-11-17 16:51:55.398 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-11-17 16:51:55.558 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-17 16:51:55.565 +02:00 [INF] Master database initialized successfully
2025-11-17 16:51:57.944 +02:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-17 16:51:58.070 +02:00 [INF] Now listening on: https://localhost:7168
2025-11-17 16:51:58.072 +02:00 [INF] Now listening on: http://localhost:5004
2025-11-17 16:51:58.210 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-11-17 16:51:58.221 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-17 16:51:58.223 +02:00 [INF] Hosting environment: Development
2025-11-17 16:51:58.225 +02:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-11-17 16:51:58.338 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 128.7782ms
2025-11-17 16:51:58.347 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-11-17 16:51:58.347 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-11-17 16:51:58.359 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 11.1981ms
2025-11-17 16:51:58.384 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 36.6997ms
2025-11-17 16:51:58.504 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-11-17 16:51:58.802 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 298.5596ms
2025-11-17 16:52:03.473 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/purchase-orders/{23d49ad7-c8f3-4545-9bb3-6957cdf43515}/receive - application/json 482
2025-11-17 16:52:03.497 +02:00 [INF] Request started
2025-11-17 16:52:03.499 +02:00 [INF] === Incoming Request ===
2025-11-17 16:52:03.502 +02:00 [INF] Path: /api/purchase-orders/%7B23d49ad7-c8f3-4545-9bb3-6957cdf43515%7D/receive
2025-11-17 16:52:03.503 +02:00 [INF] Method: POST
2025-11-17 16:52:03.505 +02:00 [INF] === Headers ===
2025-11-17 16:52:03.508 +02:00 [INF] Accept: ["*/*"]
2025-11-17 16:52:03.511 +02:00 [INF] Connection: ["keep-alive"]
2025-11-17 16:52:03.512 +02:00 [INF] Host: ["localhost:7168"]
2025-11-17 16:52:03.514 +02:00 [INF] User-Agent: ["PostmanRuntime/7.49.1"]
2025-11-17 16:52:03.517 +02:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-11-17 16:52:03.522 +02:00 [INF] Content-Type: ["application/json"]
2025-11-17 16:52:03.523 +02:00 [INF] Content-Length: ["482"]
2025-11-17 16:52:03.526 +02:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-11-17 16:52:03.527 +02:00 [INF] Postman-Token: ["1c226db5-adf8-41e8-8d92-2722222368de"]
2025-11-17 16:52:03.532 +02:00 [INF] üîç TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-11-17 16:52:03.535 +02:00 [INF] ‚úÖ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-11-17 16:52:03.537 +02:00 [INF] Executing endpoint 'ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNByPOController.ReceiveFromPO (ModularERP)'
2025-11-17 16:52:03.559 +02:00 [INF] Route matched with {action = "ReceiveFromPO", controller = "GRNByPO"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ReceiveFromPO(System.Guid, ModularERP.Modules.Purchases.Goods_Receipt.Commends.Commends_GRNPO.ReceiveFromPOCommand, System.Guid) on controller ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNByPOController (ModularERP).
2025-11-17 16:52:03.565 +02:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-11-17 16:52:03.607 +02:00 [INF] Creating GRN for PO "23d49ad7-c8f3-4545-9bb3-6957cdf43515"
2025-11-17 16:52:03.612 +02:00 [INF] Executed action ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNByPOController.ReceiveFromPO (ModularERP) in 46.317ms
2025-11-17 16:52:03.614 +02:00 [INF] Executed endpoint 'ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNByPOController.ReceiveFromPO (ModularERP)'
2025-11-17 16:52:03.618 +02:00 [ERR] Unexpected error occurred
System.ArgumentNullException: Value cannot be null. (Parameter 'input')
   at System.ArgumentNullException.Throw(String paramName)
   at System.Guid.Parse(String input)
   at ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNByPOController.ReceiveFromPO(Guid poId, ReceiveFromPOCommand command, Guid companyId) in E:\ModelerERP\ModularERP\ModularERP\Modules\Purchases\Goods_Receipt\Controllers\GRNByPOController.cs:line 60
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_7>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 354
--- End of stack trace from previous location ---
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 307
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-11-17 16:52:03.696 +02:00 [INF] Error response sent with status code 500
2025-11-17 16:52:03.700 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/purchase-orders/{23d49ad7-c8f3-4545-9bb3-6957cdf43515}/receive - 500 null application/json; charset=utf-8 226.7629ms
2025-11-17 16:53:23.362 +02:00 [INF] Starting web host...
2025-11-17 16:53:24.651 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-17 16:53:24.751 +02:00 [INF] Executed DbCommand (85ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-11-17 16:53:24.838 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-17 16:53:24.843 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-11-17 16:53:24.860 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-11-17 16:53:24.915 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-11-17 16:53:24.930 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-17 16:53:24.935 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-17 16:53:24.943 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-17 16:53:24.954 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-11-17 16:53:24.960 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-11-17 16:53:25.126 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-17 16:53:25.134 +02:00 [INF] Master database initialized successfully
2025-11-17 16:53:27.052 +02:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-17 16:53:27.154 +02:00 [INF] Now listening on: https://localhost:7168
2025-11-17 16:53:27.157 +02:00 [INF] Now listening on: http://localhost:5004
2025-11-17 16:53:27.286 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-17 16:53:27.287 +02:00 [INF] Hosting environment: Development
2025-11-17 16:53:27.289 +02:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-11-17 16:53:27.289 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-11-17 16:53:27.424 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 136.8478ms
2025-11-17 16:53:27.428 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-11-17 16:53:27.428 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-11-17 16:53:27.448 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 19.8ms
2025-11-17 16:53:27.463 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 35.1288ms
2025-11-17 16:53:27.504 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-11-17 16:53:27.797 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 292.9374ms
2025-11-17 16:53:33.002 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/purchase-orders/{23d49ad7-c8f3-4545-9bb3-6957cdf43515}/receive - application/json 482
2025-11-17 16:53:33.023 +02:00 [INF] Request started
2025-11-17 16:53:33.026 +02:00 [INF] === Incoming Request ===
2025-11-17 16:53:33.028 +02:00 [INF] Path: /api/purchase-orders/%7B23d49ad7-c8f3-4545-9bb3-6957cdf43515%7D/receive
2025-11-17 16:53:33.029 +02:00 [INF] Method: POST
2025-11-17 16:53:33.030 +02:00 [INF] === Headers ===
2025-11-17 16:53:33.032 +02:00 [INF] Accept: ["*/*"]
2025-11-17 16:53:33.035 +02:00 [INF] Connection: ["keep-alive"]
2025-11-17 16:53:33.036 +02:00 [INF] Host: ["localhost:7168"]
2025-11-17 16:53:33.038 +02:00 [INF] User-Agent: ["PostmanRuntime/7.49.1"]
2025-11-17 16:53:33.040 +02:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-11-17 16:53:33.041 +02:00 [INF] Content-Type: ["application/json"]
2025-11-17 16:53:33.043 +02:00 [INF] Content-Length: ["482"]
2025-11-17 16:53:33.045 +02:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-11-17 16:53:33.047 +02:00 [INF] Postman-Token: ["352de515-e6fd-4c48-88f7-0c4cef22e8a2"]
2025-11-17 16:53:33.052 +02:00 [INF] üîç TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-11-17 16:53:33.054 +02:00 [INF] ‚úÖ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-11-17 16:53:33.057 +02:00 [INF] Executing endpoint 'ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNByPOController.ReceiveFromPO (ModularERP)'
2025-11-17 16:53:33.078 +02:00 [INF] Route matched with {action = "ReceiveFromPO", controller = "GRNByPO"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ReceiveFromPO(System.Guid, ModularERP.Modules.Purchases.Goods_Receipt.Commends.Commends_GRNPO.ReceiveFromPOCommand, System.Guid) on controller ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNByPOController (ModularERP).
2025-11-17 16:53:33.086 +02:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-11-17 16:53:33.174 +02:00 [INF] Creating GRN for PO "23d49ad7-c8f3-4545-9bb3-6957cdf43515"
2025-11-17 16:53:33.254 +02:00 [WRN] Validation failed for ReceiveFromPOCommand. Errors: [{"PropertyName":"CompanyId","ErrorMessage":"Company ID is required"}]
2025-11-17 16:53:33.265 +02:00 [INF] Executed action ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNByPOController.ReceiveFromPO (ModularERP) in 180.6905ms
2025-11-17 16:53:33.267 +02:00 [INF] Executed endpoint 'ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNByPOController.ReceiveFromPO (ModularERP)'
2025-11-17 16:53:33.270 +02:00 [WRN] Validation exception occurred: Validation failed. Validation errors: {"CompanyId":["Company ID is required"]}
ModularERP.Common.Exceptions.ValidationException: Validation failed
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 44
   at ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNByPOController.ReceiveFromPO(Guid poId, ReceiveFromPOCommand command, Guid companyId) in E:\ModelerERP\ModularERP\ModularERP\Modules\Purchases\Goods_Receipt\Controllers\GRNByPOController.cs:line 66
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_7>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 354
--- End of stack trace from previous location ---
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 307
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-11-17 16:53:33.319 +02:00 [INF] Error response sent with status code 400
2025-11-17 16:53:33.323 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/purchase-orders/{23d49ad7-c8f3-4545-9bb3-6957cdf43515}/receive - 400 null application/json; charset=utf-8 320.362ms
2025-11-17 16:54:06.140 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/purchase-orders/{23d49ad7-c8f3-4545-9bb3-6957cdf43515}/receive?CompanyId=90137c92-382d-404c-bade-e5fefb1e8dbf - application/json 482
2025-11-17 16:54:06.153 +02:00 [INF] Request started
2025-11-17 16:54:06.155 +02:00 [INF] === Incoming Request ===
2025-11-17 16:54:06.156 +02:00 [INF] Path: /api/purchase-orders/%7B23d49ad7-c8f3-4545-9bb3-6957cdf43515%7D/receive
2025-11-17 16:54:06.158 +02:00 [INF] Method: POST
2025-11-17 16:54:06.159 +02:00 [INF] === Headers ===
2025-11-17 16:54:06.160 +02:00 [INF] Accept: ["*/*"]
2025-11-17 16:54:06.162 +02:00 [INF] Connection: ["keep-alive"]
2025-11-17 16:54:06.164 +02:00 [INF] Host: ["localhost:7168"]
2025-11-17 16:54:06.166 +02:00 [INF] User-Agent: ["PostmanRuntime/7.49.1"]
2025-11-17 16:54:06.167 +02:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-11-17 16:54:06.168 +02:00 [INF] Content-Type: ["application/json"]
2025-11-17 16:54:06.170 +02:00 [INF] Content-Length: ["482"]
2025-11-17 16:54:06.171 +02:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-11-17 16:54:06.172 +02:00 [INF] Postman-Token: ["7c381dfe-54bf-471e-a080-89af8b0bfa74"]
2025-11-17 16:54:06.176 +02:00 [INF] üîç TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-11-17 16:54:06.177 +02:00 [INF] ‚úÖ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-11-17 16:54:06.179 +02:00 [INF] Executing endpoint 'ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNByPOController.ReceiveFromPO (ModularERP)'
2025-11-17 16:54:06.180 +02:00 [INF] Route matched with {action = "ReceiveFromPO", controller = "GRNByPO"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ReceiveFromPO(System.Guid, ModularERP.Modules.Purchases.Goods_Receipt.Commends.Commends_GRNPO.ReceiveFromPOCommand, System.Guid) on controller ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNByPOController (ModularERP).
2025-11-17 16:54:06.188 +02:00 [INF] Creating GRN for PO "23d49ad7-c8f3-4545-9bb3-6957cdf43515"
2025-11-17 16:54:06.190 +02:00 [WRN] Validation failed for ReceiveFromPOCommand. Errors: [{"PropertyName":"CompanyId","ErrorMessage":"Company ID is required"}]
2025-11-17 16:54:06.194 +02:00 [INF] Executed action ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNByPOController.ReceiveFromPO (ModularERP) in 9.8479ms
2025-11-17 16:54:06.195 +02:00 [INF] Executed endpoint 'ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNByPOController.ReceiveFromPO (ModularERP)'
2025-11-17 16:54:06.197 +02:00 [WRN] Validation exception occurred: Validation failed. Validation errors: {"CompanyId":["Company ID is required"]}
ModularERP.Common.Exceptions.ValidationException: Validation failed
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 44
   at ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNByPOController.ReceiveFromPO(Guid poId, ReceiveFromPOCommand command, Guid companyId) in E:\ModelerERP\ModularERP\ModularERP\Modules\Purchases\Goods_Receipt\Controllers\GRNByPOController.cs:line 66
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_7>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 354
--- End of stack trace from previous location ---
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 307
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-11-17 16:54:06.208 +02:00 [INF] Error response sent with status code 400
2025-11-17 16:54:06.209 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/purchase-orders/{23d49ad7-c8f3-4545-9bb3-6957cdf43515}/receive?CompanyId=90137c92-382d-404c-bade-e5fefb1e8dbf - 400 null application/json; charset=utf-8 69.2555ms
2025-11-17 16:55:19.566 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/purchase-orders/{23d49ad7-c8f3-4545-9bb3-6957cdf43515}/receive - application/json 482
2025-11-17 16:55:19.570 +02:00 [INF] Request started
2025-11-17 16:55:19.571 +02:00 [INF] === Incoming Request ===
2025-11-17 16:55:19.573 +02:00 [INF] Path: /api/purchase-orders/%7B23d49ad7-c8f3-4545-9bb3-6957cdf43515%7D/receive
2025-11-17 16:55:19.574 +02:00 [INF] Method: POST
2025-11-17 16:55:19.575 +02:00 [INF] === Headers ===
2025-11-17 16:55:19.576 +02:00 [INF] Accept: ["*/*"]
2025-11-17 16:55:19.577 +02:00 [INF] Connection: ["keep-alive"]
2025-11-17 16:55:19.578 +02:00 [INF] Host: ["localhost:7168"]
2025-11-17 16:55:19.579 +02:00 [INF] User-Agent: ["PostmanRuntime/7.49.1"]
2025-11-17 16:55:19.581 +02:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-11-17 16:55:19.582 +02:00 [INF] Content-Type: ["application/json"]
2025-11-17 16:55:19.583 +02:00 [INF] Content-Length: ["482"]
2025-11-17 16:55:19.585 +02:00 [INF] X-Company-ID: ["90137c92-382d-404c-bade-e5fefb1e8dbf"]
2025-11-17 16:55:19.586 +02:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-11-17 16:55:19.587 +02:00 [INF] Postman-Token: ["5e12203f-8a9e-4041-963d-c2979db21c2e"]
2025-11-17 16:55:19.589 +02:00 [INF] üîç TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-11-17 16:55:19.590 +02:00 [INF] ‚úÖ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-11-17 16:55:19.591 +02:00 [INF] Executing endpoint 'ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNByPOController.ReceiveFromPO (ModularERP)'
2025-11-17 16:55:19.593 +02:00 [INF] Route matched with {action = "ReceiveFromPO", controller = "GRNByPO"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ReceiveFromPO(System.Guid, ModularERP.Modules.Purchases.Goods_Receipt.Commends.Commends_GRNPO.ReceiveFromPOCommand, System.Guid) on controller ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNByPOController (ModularERP).
2025-11-17 16:55:19.596 +02:00 [INF] Creating GRN for PO "23d49ad7-c8f3-4545-9bb3-6957cdf43515"
2025-11-17 16:55:19.666 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-11-17 16:55:20.266 +02:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-11-17 16:55:20.272 +02:00 [INF] Creating GRN for PO "23d49ad7-c8f3-4545-9bb3-6957cdf43515"
2025-11-17 16:55:20.732 +02:00 [ERR] Error creating GRN for PO "23d49ad7-c8f3-4545-9bb3-6957cdf43515"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_GoodsReceiptNotes_AspNetUsers_CreatedById". The conflict occurred in database "ModularERP_Tenant_ac68e928aa8044b69ff2ed99d02196e4", table "dbo.AspNetUsers", column 'Id'.
The INSERT statement conflicted with the FOREIGN KEY constraint "FK_GRNLineItems_GoodsReceiptNotes_GRNId". The conflict occurred in database "ModularERP_Tenant_ac68e928aa8044b69ff2ed99d02196e4", table "dbo.GoodsReceiptNotes", column 'Id'.
The statement has been terminated.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:36e0c21f-364c-4960-8cd1-fbdd9c7bd32a
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at ModularERP.Modules.Finance.Finance.Infrastructure.Data.FinanceDbContext.SaveChangesAsync(CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Finance\Finance.Infrastructure\Data\FinanceDbContext.cs:line 2530
   at ModularERP.SharedKernel.Repository.GeneralRepository`1.SaveChanges() in E:\ModelerERP\ModularERP\ModularERP\Shared\Repository\GeneralRepository.cs:line 157
   at ModularERP.Modules.Purchases.Goods_Receipt.Handlers.Handlers_GRNPO.ReceiveFromPOHandler.Handle(ReceiveFromPOCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Purchases\Goods_Receipt\Handlers\Handlers_GRNPO\ReceiveFromPOHandler.cs:line 93
2025-11-17 16:55:20.761 +02:00 [INF] Executed action ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNByPOController.ReceiveFromPO (ModularERP) in 1165.7672ms
2025-11-17 16:55:20.762 +02:00 [INF] Executed endpoint 'ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNByPOController.ReceiveFromPO (ModularERP)'
2025-11-17 16:55:20.764 +02:00 [WRN] Business logic exception occurred: Error creating GRN: An error occurred while saving the entity changes. See the inner exception for details.
ModularERP.Common.Exceptions.BusinessLogicException: Error creating GRN: An error occurred while saving the entity changes. See the inner exception for details.
   at ModularERP.Modules.Purchases.Goods_Receipt.Handlers.Handlers_GRNPO.ReceiveFromPOHandler.Handle(ReceiveFromPOCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Purchases\Goods_Receipt\Handlers\Handlers_GRNPO\ReceiveFromPOHandler.cs:line 109
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNByPOController.ReceiveFromPO(Guid poId, ReceiveFromPOCommand command, Guid companyId) in E:\ModelerERP\ModularERP\ModularERP\Modules\Purchases\Goods_Receipt\Controllers\GRNByPOController.cs:line 66
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_7>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 354
--- End of stack trace from previous location ---
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 307
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-11-17 16:55:20.778 +02:00 [INF] Error response sent with status code 400
2025-11-17 16:55:20.783 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/purchase-orders/{23d49ad7-c8f3-4545-9bb3-6957cdf43515}/receive - 400 null application/json; charset=utf-8 1217.2114ms
2025-11-17 16:55:52.333 +02:00 [INF] Starting web host...
2025-11-17 16:55:53.645 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-17 16:55:53.735 +02:00 [INF] Executed DbCommand (75ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-11-17 16:55:53.802 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-17 16:55:53.808 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-11-17 16:55:53.826 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-11-17 16:55:53.880 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-11-17 16:55:53.896 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-17 16:55:53.901 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-17 16:55:53.908 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-17 16:55:53.920 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-11-17 16:55:53.927 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-11-17 16:55:54.094 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-17 16:55:54.101 +02:00 [INF] Master database initialized successfully
2025-11-17 16:55:56.125 +02:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-17 16:55:56.232 +02:00 [INF] Now listening on: https://localhost:7168
2025-11-17 16:55:56.235 +02:00 [INF] Now listening on: http://localhost:5004
2025-11-17 16:55:56.364 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-17 16:55:56.366 +02:00 [INF] Hosting environment: Development
2025-11-17 16:55:56.368 +02:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-11-17 16:55:56.406 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-11-17 16:55:56.552 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 146.2618ms
2025-11-17 16:55:56.598 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-11-17 16:55:56.598 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-11-17 16:55:56.603 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 5.3546ms
2025-11-17 16:55:56.627 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 29.8322ms
2025-11-17 16:55:56.659 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-11-17 16:55:56.930 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 270.2782ms
2025-11-17 16:56:21.947 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/purchase-orders/{23d49ad7-c8f3-4545-9bb3-6957cdf43515}/receive - application/json 482
2025-11-17 16:56:21.967 +02:00 [INF] Request started
2025-11-17 16:56:21.970 +02:00 [INF] === Incoming Request ===
2025-11-17 16:56:21.973 +02:00 [INF] Path: /api/purchase-orders/%7B23d49ad7-c8f3-4545-9bb3-6957cdf43515%7D/receive
2025-11-17 16:56:21.974 +02:00 [INF] Method: POST
2025-11-17 16:56:21.975 +02:00 [INF] === Headers ===
2025-11-17 16:56:21.977 +02:00 [INF] Accept: ["*/*"]
2025-11-17 16:56:21.980 +02:00 [INF] Connection: ["keep-alive"]
2025-11-17 16:56:21.981 +02:00 [INF] Host: ["localhost:7168"]
2025-11-17 16:56:21.983 +02:00 [INF] User-Agent: ["PostmanRuntime/7.49.1"]
2025-11-17 16:56:21.987 +02:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-11-17 16:56:21.988 +02:00 [INF] Content-Type: ["application/json"]
2025-11-17 16:56:21.990 +02:00 [INF] Content-Length: ["482"]
2025-11-17 16:56:21.992 +02:00 [INF] X-Company-ID: ["90137c92-382d-404c-bade-e5fefb1e8dbf"]
2025-11-17 16:56:21.993 +02:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-11-17 16:56:21.994 +02:00 [INF] Postman-Token: ["237d7489-5cc0-49aa-b5fc-e1f22ba9d5bc"]
2025-11-17 16:56:22.000 +02:00 [INF] üîç TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-11-17 16:56:22.002 +02:00 [INF] ‚úÖ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-11-17 16:56:22.004 +02:00 [INF] Executing endpoint 'ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNByPOController.ReceiveFromPO (ModularERP)'
2025-11-17 16:56:22.021 +02:00 [INF] Route matched with {action = "ReceiveFromPO", controller = "GRNByPO"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ReceiveFromPO(System.Guid, ModularERP.Modules.Purchases.Goods_Receipt.Commends.Commends_GRNPO.ReceiveFromPOCommand, System.Guid) on controller ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNByPOController (ModularERP).
2025-11-17 16:56:22.028 +02:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-11-17 16:56:22.057 +02:00 [INF] Creating GRN for PO "23d49ad7-c8f3-4545-9bb3-6957cdf43515"
2025-11-17 16:56:22.159 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-11-17 16:56:22.756 +02:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-11-17 16:56:22.761 +02:00 [INF] Creating GRN for PO "23d49ad7-c8f3-4545-9bb3-6957cdf43515"
2025-11-17 16:56:23.159 +02:00 [ERR] Error creating GRN for PO "23d49ad7-c8f3-4545-9bb3-6957cdf43515"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_GoodsReceiptNotes_AspNetUsers_CreatedById". The conflict occurred in database "ModularERP_Tenant_ac68e928aa8044b69ff2ed99d02196e4", table "dbo.AspNetUsers", column 'Id'.
The INSERT statement conflicted with the FOREIGN KEY constraint "FK_GRNLineItems_GoodsReceiptNotes_GRNId". The conflict occurred in database "ModularERP_Tenant_ac68e928aa8044b69ff2ed99d02196e4", table "dbo.GoodsReceiptNotes", column 'Id'.
The statement has been terminated.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:a7a3a692-7d4e-4762-ab4d-8179514e1366
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at ModularERP.Modules.Finance.Finance.Infrastructure.Data.FinanceDbContext.SaveChangesAsync(CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Finance\Finance.Infrastructure\Data\FinanceDbContext.cs:line 2530
   at ModularERP.SharedKernel.Repository.GeneralRepository`1.SaveChanges() in E:\ModelerERP\ModularERP\ModularERP\Shared\Repository\GeneralRepository.cs:line 157
   at ModularERP.Modules.Purchases.Goods_Receipt.Handlers.Handlers_GRNPO.ReceiveFromPOHandler.Handle(ReceiveFromPOCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Purchases\Goods_Receipt\Handlers\Handlers_GRNPO\ReceiveFromPOHandler.cs:line 93
2025-11-17 16:56:23.201 +02:00 [INF] Executed action ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNByPOController.ReceiveFromPO (ModularERP) in 1172.5639ms
2025-11-17 16:56:23.204 +02:00 [INF] Executed endpoint 'ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNByPOController.ReceiveFromPO (ModularERP)'
2025-11-17 16:56:23.207 +02:00 [WRN] Business logic exception occurred: Error creating GRN: An error occurred while saving the entity changes. See the inner exception for details.
ModularERP.Common.Exceptions.BusinessLogicException: Error creating GRN: An error occurred while saving the entity changes. See the inner exception for details.
   at ModularERP.Modules.Purchases.Goods_Receipt.Handlers.Handlers_GRNPO.ReceiveFromPOHandler.Handle(ReceiveFromPOCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Purchases\Goods_Receipt\Handlers\Handlers_GRNPO\ReceiveFromPOHandler.cs:line 109
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNByPOController.ReceiveFromPO(Guid poId, ReceiveFromPOCommand command, Guid companyId) in E:\ModelerERP\ModularERP\ModularERP\Modules\Purchases\Goods_Receipt\Controllers\GRNByPOController.cs:line 66
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_7>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 354
--- End of stack trace from previous location ---
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 307
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-11-17 16:56:23.237 +02:00 [INF] Error response sent with status code 400
2025-11-17 16:56:23.242 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/purchase-orders/{23d49ad7-c8f3-4545-9bb3-6957cdf43515}/receive - 400 null application/json; charset=utf-8 1295.5077ms
2025-11-17 16:58:14.984 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/purchase-orders/{23d49ad7-c8f3-4545-9bb3-6957cdf43515}/receive - application/json 482
2025-11-17 16:58:14.999 +02:00 [INF] Request started
2025-11-17 16:58:15.001 +02:00 [INF] === Incoming Request ===
2025-11-17 16:58:15.002 +02:00 [INF] Path: /api/purchase-orders/%7B23d49ad7-c8f3-4545-9bb3-6957cdf43515%7D/receive
2025-11-17 16:58:15.003 +02:00 [INF] Method: POST
2025-11-17 16:58:15.004 +02:00 [INF] === Headers ===
2025-11-17 16:58:15.005 +02:00 [INF] Accept: ["*/*"]
2025-11-17 16:58:15.007 +02:00 [INF] Connection: ["keep-alive"]
2025-11-17 16:58:15.008 +02:00 [INF] Host: ["localhost:7168"]
2025-11-17 16:58:15.009 +02:00 [INF] User-Agent: ["PostmanRuntime/7.49.1"]
2025-11-17 16:58:15.010 +02:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-11-17 16:58:15.013 +02:00 [INF] Content-Type: ["application/json"]
2025-11-17 16:58:15.014 +02:00 [INF] Content-Length: ["482"]
2025-11-17 16:58:15.016 +02:00 [INF] X-Company-ID: ["90137c92-382d-404c-bade-e5fefb1e8dbf"]
2025-11-17 16:58:15.018 +02:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-11-17 16:58:15.019 +02:00 [INF] Postman-Token: ["244b56a2-fb39-4d7c-b727-0de835148170"]
2025-11-17 16:58:15.023 +02:00 [INF] üîç TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-11-17 16:58:15.024 +02:00 [INF] ‚úÖ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-11-17 16:58:15.024 +02:00 [INF] Executing endpoint 'ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNByPOController.ReceiveFromPO (ModularERP)'
2025-11-17 16:58:15.026 +02:00 [INF] Route matched with {action = "ReceiveFromPO", controller = "GRNByPO"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ReceiveFromPO(System.Guid, ModularERP.Modules.Purchases.Goods_Receipt.Commends.Commends_GRNPO.ReceiveFromPOCommand, System.Guid) on controller ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNByPOController (ModularERP).
2025-11-17 16:58:15.030 +02:00 [INF] Creating GRN for PO "23d49ad7-c8f3-4545-9bb3-6957cdf43515"
2025-11-17 16:58:15.034 +02:00 [INF] Creating GRN for PO "23d49ad7-c8f3-4545-9bb3-6957cdf43515"
2025-11-17 16:58:15.081 +02:00 [ERR] Error creating GRN for PO "23d49ad7-c8f3-4545-9bb3-6957cdf43515"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_GoodsReceiptNotes_AspNetUsers_CreatedById". The conflict occurred in database "ModularERP_Tenant_ac68e928aa8044b69ff2ed99d02196e4", table "dbo.AspNetUsers", column 'Id'.
The INSERT statement conflicted with the FOREIGN KEY constraint "FK_GRNLineItems_GoodsReceiptNotes_GRNId". The conflict occurred in database "ModularERP_Tenant_ac68e928aa8044b69ff2ed99d02196e4", table "dbo.GoodsReceiptNotes", column 'Id'.
The statement has been terminated.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:a7a3a692-7d4e-4762-ab4d-8179514e1366
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at ModularERP.Modules.Finance.Finance.Infrastructure.Data.FinanceDbContext.SaveChangesAsync(CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Finance\Finance.Infrastructure\Data\FinanceDbContext.cs:line 2530
   at ModularERP.SharedKernel.Repository.GeneralRepository`1.SaveChanges() in E:\ModelerERP\ModularERP\ModularERP\Shared\Repository\GeneralRepository.cs:line 157
   at ModularERP.Modules.Purchases.Goods_Receipt.Handlers.Handlers_GRNPO.ReceiveFromPOHandler.Handle(ReceiveFromPOCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Purchases\Goods_Receipt\Handlers\Handlers_GRNPO\ReceiveFromPOHandler.cs:line 93
2025-11-17 16:58:15.100 +02:00 [INF] Executed action ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNByPOController.ReceiveFromPO (ModularERP) in 71.8559ms
2025-11-17 16:58:15.102 +02:00 [INF] Executed endpoint 'ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNByPOController.ReceiveFromPO (ModularERP)'
2025-11-17 16:58:15.103 +02:00 [WRN] Business logic exception occurred: Error creating GRN: An error occurred while saving the entity changes. See the inner exception for details.
ModularERP.Common.Exceptions.BusinessLogicException: Error creating GRN: An error occurred while saving the entity changes. See the inner exception for details.
   at ModularERP.Modules.Purchases.Goods_Receipt.Handlers.Handlers_GRNPO.ReceiveFromPOHandler.Handle(ReceiveFromPOCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Purchases\Goods_Receipt\Handlers\Handlers_GRNPO\ReceiveFromPOHandler.cs:line 109
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNByPOController.ReceiveFromPO(Guid poId, ReceiveFromPOCommand command, Guid companyId) in E:\ModelerERP\ModularERP\ModularERP\Modules\Purchases\Goods_Receipt\Controllers\GRNByPOController.cs:line 66
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_7>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 354
--- End of stack trace from previous location ---
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 307
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-11-17 16:58:15.114 +02:00 [INF] Error response sent with status code 400
2025-11-17 16:58:15.116 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/purchase-orders/{23d49ad7-c8f3-4545-9bb3-6957cdf43515}/receive - 400 null application/json; charset=utf-8 132.2273ms
2025-11-17 16:58:28.495 +02:00 [INF] Starting web host...
2025-11-17 16:58:29.805 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-17 16:58:29.892 +02:00 [INF] Executed DbCommand (72ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-11-17 16:58:29.961 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-17 16:58:29.967 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-11-17 16:58:29.984 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-11-17 16:58:30.050 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-11-17 16:58:30.067 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-17 16:58:30.072 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-17 16:58:30.079 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-17 16:58:30.091 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-11-17 16:58:30.097 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-11-17 16:58:30.264 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-17 16:58:30.271 +02:00 [INF] Master database initialized successfully
2025-11-17 16:58:32.235 +02:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-17 16:58:32.340 +02:00 [INF] Now listening on: https://localhost:7168
2025-11-17 16:58:32.342 +02:00 [INF] Now listening on: http://localhost:5004
2025-11-17 16:58:32.464 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-17 16:58:32.466 +02:00 [INF] Hosting environment: Development
2025-11-17 16:58:32.467 +02:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-11-17 16:58:32.632 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-11-17 16:58:32.788 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 157.1724ms
2025-11-17 16:58:32.791 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-11-17 16:58:32.791 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-11-17 16:58:32.808 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 15.7356ms
2025-11-17 16:58:32.827 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 36.1599ms
2025-11-17 16:58:32.869 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-11-17 16:58:33.157 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 287.8856ms
2025-11-17 16:58:35.820 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/purchase-orders/{23d49ad7-c8f3-4545-9bb3-6957cdf43515}/receive - application/json 482
2025-11-17 16:58:35.837 +02:00 [INF] Request started
2025-11-17 16:58:35.839 +02:00 [INF] === Incoming Request ===
2025-11-17 16:58:35.842 +02:00 [INF] Path: /api/purchase-orders/%7B23d49ad7-c8f3-4545-9bb3-6957cdf43515%7D/receive
2025-11-17 16:58:35.843 +02:00 [INF] Method: POST
2025-11-17 16:58:35.844 +02:00 [INF] === Headers ===
2025-11-17 16:58:35.847 +02:00 [INF] Accept: ["*/*"]
2025-11-17 16:58:35.850 +02:00 [INF] Connection: ["keep-alive"]
2025-11-17 16:58:35.851 +02:00 [INF] Host: ["localhost:7168"]
2025-11-17 16:58:35.853 +02:00 [INF] User-Agent: ["PostmanRuntime/7.49.1"]
2025-11-17 16:58:35.855 +02:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-11-17 16:58:35.858 +02:00 [INF] Content-Type: ["application/json"]
2025-11-17 16:58:35.859 +02:00 [INF] Content-Length: ["482"]
2025-11-17 16:58:35.861 +02:00 [INF] X-Company-ID: ["90137c92-382d-404c-bade-e5fefb1e8dbf"]
2025-11-17 16:58:35.863 +02:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-11-17 16:58:35.864 +02:00 [INF] Postman-Token: ["0bb9fc81-4754-4c00-b92d-a08a1b032b62"]
2025-11-17 16:58:35.870 +02:00 [INF] üîç TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-11-17 16:58:35.872 +02:00 [INF] ‚úÖ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-11-17 16:58:35.875 +02:00 [INF] Executing endpoint 'ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNByPOController.ReceiveFromPO (ModularERP)'
2025-11-17 16:58:35.894 +02:00 [INF] Route matched with {action = "ReceiveFromPO", controller = "GRNByPO"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ReceiveFromPO(System.Guid, ModularERP.Modules.Purchases.Goods_Receipt.Commends.Commends_GRNPO.ReceiveFromPOCommand, System.Guid) on controller ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNByPOController (ModularERP).
2025-11-17 16:58:35.900 +02:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-11-17 16:58:35.933 +02:00 [INF] Creating GRN for PO "23d49ad7-c8f3-4545-9bb3-6957cdf43515"
2025-11-17 16:58:36.044 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-11-17 16:58:36.605 +02:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-11-17 16:58:36.610 +02:00 [INF] Creating GRN for PO "23d49ad7-c8f3-4545-9bb3-6957cdf43515"
2025-11-17 16:58:36.964 +02:00 [ERR] Error creating GRN for PO "23d49ad7-c8f3-4545-9bb3-6957cdf43515"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_GoodsReceiptNotes_AspNetUsers_CreatedById". The conflict occurred in database "ModularERP_Tenant_ac68e928aa8044b69ff2ed99d02196e4", table "dbo.AspNetUsers", column 'Id'.
The INSERT statement conflicted with the FOREIGN KEY constraint "FK_GRNLineItems_GoodsReceiptNotes_GRNId". The conflict occurred in database "ModularERP_Tenant_ac68e928aa8044b69ff2ed99d02196e4", table "dbo.GoodsReceiptNotes", column 'Id'.
The statement has been terminated.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:a3b1fe2f-964e-4460-aac5-6c4347306a07
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at ModularERP.Modules.Finance.Finance.Infrastructure.Data.FinanceDbContext.SaveChangesAsync(CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Finance\Finance.Infrastructure\Data\FinanceDbContext.cs:line 2530
   at ModularERP.SharedKernel.Repository.GeneralRepository`1.SaveChanges() in E:\ModelerERP\ModularERP\ModularERP\Shared\Repository\GeneralRepository.cs:line 157
   at ModularERP.Modules.Purchases.Goods_Receipt.Handlers.Handlers_GRNPO.ReceiveFromPOHandler.Handle(ReceiveFromPOCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Purchases\Goods_Receipt\Handlers\Handlers_GRNPO\ReceiveFromPOHandler.cs:line 93
2025-11-17 16:58:37.013 +02:00 [INF] Executed action ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNByPOController.ReceiveFromPO (ModularERP) in 1113.0402ms
2025-11-17 16:58:37.016 +02:00 [INF] Executed endpoint 'ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNByPOController.ReceiveFromPO (ModularERP)'
2025-11-17 16:58:37.019 +02:00 [WRN] Business logic exception occurred: Error creating GRN: An error occurred while saving the entity changes. See the inner exception for details.
ModularERP.Common.Exceptions.BusinessLogicException: Error creating GRN: An error occurred while saving the entity changes. See the inner exception for details.
   at ModularERP.Modules.Purchases.Goods_Receipt.Handlers.Handlers_GRNPO.ReceiveFromPOHandler.Handle(ReceiveFromPOCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Purchases\Goods_Receipt\Handlers\Handlers_GRNPO\ReceiveFromPOHandler.cs:line 109
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNByPOController.ReceiveFromPO(Guid poId, ReceiveFromPOCommand command, Guid companyId) in E:\ModelerERP\ModularERP\ModularERP\Modules\Purchases\Goods_Receipt\Controllers\GRNByPOController.cs:line 66
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_7>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 354
--- End of stack trace from previous location ---
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 307
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-11-17 16:58:37.051 +02:00 [INF] Error response sent with status code 400
2025-11-17 16:58:37.057 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/purchase-orders/{23d49ad7-c8f3-4545-9bb3-6957cdf43515}/receive - 400 null application/json; charset=utf-8 1236.7915ms
2025-11-17 17:04:54.711 +02:00 [INF] Starting web host...
2025-11-17 17:04:56.220 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-17 17:04:56.323 +02:00 [INF] Executed DbCommand (85ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-11-17 17:04:56.402 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-17 17:04:56.408 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-11-17 17:04:56.425 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-11-17 17:04:56.501 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-11-17 17:04:56.519 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-17 17:04:56.524 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-17 17:04:56.534 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-17 17:04:56.549 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-11-17 17:04:56.556 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-11-17 17:04:56.745 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-17 17:04:56.753 +02:00 [INF] Master database initialized successfully
2025-11-17 17:04:58.718 +02:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-17 17:04:58.824 +02:00 [INF] Now listening on: https://localhost:7168
2025-11-17 17:04:58.826 +02:00 [INF] Now listening on: http://localhost:5004
2025-11-17 17:04:58.953 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-17 17:04:58.955 +02:00 [INF] Hosting environment: Development
2025-11-17 17:04:58.957 +02:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-11-17 17:04:59.143 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-11-17 17:04:59.305 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 163.137ms
2025-11-17 17:04:59.337 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-11-17 17:04:59.337 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-11-17 17:04:59.343 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 5.7798ms
2025-11-17 17:04:59.364 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 26.673ms
2025-11-17 17:04:59.391 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-11-17 17:04:59.629 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 238.6733ms
2025-11-17 17:05:05.362 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/purchase-orders/{23d49ad7-c8f3-4545-9bb3-6957cdf43515}/receive - application/json 482
2025-11-17 17:05:05.379 +02:00 [INF] Request started
2025-11-17 17:05:05.383 +02:00 [INF] === Incoming Request ===
2025-11-17 17:05:05.385 +02:00 [INF] Path: /api/purchase-orders/%7B23d49ad7-c8f3-4545-9bb3-6957cdf43515%7D/receive
2025-11-17 17:05:05.385 +02:00 [INF] Method: POST
2025-11-17 17:05:05.386 +02:00 [INF] === Headers ===
2025-11-17 17:05:05.389 +02:00 [INF] Accept: ["*/*"]
2025-11-17 17:05:05.393 +02:00 [INF] Connection: ["keep-alive"]
2025-11-17 17:05:05.397 +02:00 [INF] Host: ["localhost:7168"]
2025-11-17 17:05:05.398 +02:00 [INF] User-Agent: ["PostmanRuntime/7.49.1"]
2025-11-17 17:05:05.401 +02:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-11-17 17:05:05.402 +02:00 [INF] Content-Type: ["application/json"]
2025-11-17 17:05:05.403 +02:00 [INF] Content-Length: ["482"]
2025-11-17 17:05:05.406 +02:00 [INF] X-Company-ID: ["90137c92-382d-404c-bade-e5fefb1e8dbf"]
2025-11-17 17:05:05.407 +02:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-11-17 17:05:05.410 +02:00 [INF] Postman-Token: ["1c782056-c9f8-4db2-a7be-77e7d0471693"]
2025-11-17 17:05:05.417 +02:00 [INF] üîç TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-11-17 17:05:05.420 +02:00 [INF] ‚úÖ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-11-17 17:05:05.422 +02:00 [INF] Executing endpoint 'ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNByPOController.ReceiveFromPO (ModularERP)'
2025-11-17 17:05:05.438 +02:00 [INF] Route matched with {action = "ReceiveFromPO", controller = "GRNByPO"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ReceiveFromPO(System.Guid, ModularERP.Modules.Purchases.Goods_Receipt.Commends.Commends_GRNPO.ReceiveFromPOCommand, System.Guid) on controller ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNByPOController (ModularERP).
2025-11-17 17:05:05.445 +02:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-11-17 17:05:05.479 +02:00 [INF] Creating GRN for PO "23d49ad7-c8f3-4545-9bb3-6957cdf43515"
2025-11-17 17:05:05.590 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-11-17 17:05:06.287 +02:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-11-17 17:05:06.291 +02:00 [INF] Creating GRN for PO "23d49ad7-c8f3-4545-9bb3-6957cdf43515"
2025-11-17 17:05:06.696 +02:00 [INF] GRN GRN-20251117-0004 created successfully for PO "23d49ad7-c8f3-4545-9bb3-6957cdf43515"
2025-11-17 17:05:06.829 +02:00 [INF] Executing CreatedAtRouteResult, writing value of type '<>f__AnonymousType145`3[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[ModularERP.Modules.Purchases.Goods_Receipt.DTO.DTO_GRN.GRNResponseDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-17 17:05:06.847 +02:00 [INF] Executed action ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNByPOController.ReceiveFromPO (ModularERP) in 1402.6745ms
2025-11-17 17:05:06.849 +02:00 [INF] Executed endpoint 'ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNByPOController.ReceiveFromPO (ModularERP)'
2025-11-17 17:05:06.852 +02:00 [ERR] Unexpected error occurred
System.InvalidOperationException: No route matches the supplied values.
   at Microsoft.AspNetCore.Mvc.CreatedAtRouteResult.OnFormatting(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor.ExecuteAsyncCore(ActionContext context, ObjectResult result, Type objectType, Object value)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor.ExecuteAsync(ActionContext context, ObjectResult result)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_7>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 354
--- End of stack trace from previous location ---
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 307
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-11-17 17:05:06.893 +02:00 [INF] Error response sent with status code 500
2025-11-17 17:05:06.899 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/purchase-orders/{23d49ad7-c8f3-4545-9bb3-6957cdf43515}/receive - 500 null application/json; charset=utf-8 1536.8699ms
2025-11-17 17:07:47.689 +02:00 [INF] Starting web host...
2025-11-17 17:07:48.959 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-17 17:07:49.044 +02:00 [INF] Executed DbCommand (69ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-11-17 17:07:49.115 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-17 17:07:49.120 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-11-17 17:07:49.139 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-11-17 17:07:49.196 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-11-17 17:07:49.211 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-17 17:07:49.216 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-17 17:07:49.222 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-17 17:07:49.233 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-11-17 17:07:49.239 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-11-17 17:07:49.401 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-17 17:07:49.409 +02:00 [INF] Master database initialized successfully
2025-11-17 17:07:51.350 +02:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-17 17:07:51.454 +02:00 [INF] Now listening on: https://localhost:7168
2025-11-17 17:07:51.456 +02:00 [INF] Now listening on: http://localhost:5004
2025-11-17 17:07:51.588 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-17 17:07:51.590 +02:00 [INF] Hosting environment: Development
2025-11-17 17:07:51.591 +02:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-11-17 17:07:51.603 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-11-17 17:07:51.733 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 131.1971ms
2025-11-17 17:07:51.736 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-11-17 17:07:51.736 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-11-17 17:07:51.753 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 17.5451ms
2025-11-17 17:07:51.769 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 33.4285ms
2025-11-17 17:07:51.799 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-11-17 17:07:52.072 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 272.9198ms
2025-11-17 17:07:56.308 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/purchase-orders/{23d49ad7-c8f3-4545-9bb3-6957cdf43515}/receive - application/json 482
2025-11-17 17:07:56.329 +02:00 [INF] Request started
2025-11-17 17:07:56.332 +02:00 [INF] === Incoming Request ===
2025-11-17 17:07:56.334 +02:00 [INF] Path: /api/purchase-orders/%7B23d49ad7-c8f3-4545-9bb3-6957cdf43515%7D/receive
2025-11-17 17:07:56.335 +02:00 [INF] Method: POST
2025-11-17 17:07:56.336 +02:00 [INF] === Headers ===
2025-11-17 17:07:56.339 +02:00 [INF] Accept: ["*/*"]
2025-11-17 17:07:56.342 +02:00 [INF] Connection: ["keep-alive"]
2025-11-17 17:07:56.344 +02:00 [INF] Host: ["localhost:7168"]
2025-11-17 17:07:56.345 +02:00 [INF] User-Agent: ["PostmanRuntime/7.49.1"]
2025-11-17 17:07:56.346 +02:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-11-17 17:07:56.348 +02:00 [INF] Content-Type: ["application/json"]
2025-11-17 17:07:56.349 +02:00 [INF] Content-Length: ["482"]
2025-11-17 17:07:56.351 +02:00 [INF] X-Company-ID: ["90137c92-382d-404c-bade-e5fefb1e8dbf"]
2025-11-17 17:07:56.352 +02:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-11-17 17:07:56.353 +02:00 [INF] Postman-Token: ["14401a54-765a-4ec0-92bb-6a0d7ce36b44"]
2025-11-17 17:07:56.359 +02:00 [INF] üîç TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-11-17 17:07:56.360 +02:00 [INF] ‚úÖ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-11-17 17:07:56.362 +02:00 [INF] Executing endpoint 'ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNByPOController.ReceiveFromPO (ModularERP)'
2025-11-17 17:07:56.386 +02:00 [INF] Route matched with {action = "ReceiveFromPO", controller = "GRNByPO"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ReceiveFromPO(System.Guid, ModularERP.Modules.Purchases.Goods_Receipt.Commends.Commends_GRNPO.ReceiveFromPOCommand, System.Guid) on controller ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNByPOController (ModularERP).
2025-11-17 17:07:56.393 +02:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-11-17 17:07:56.516 +02:00 [INF] Creating GRN for PO "23d49ad7-c8f3-4545-9bb3-6957cdf43515"
2025-11-17 17:07:56.668 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-11-17 17:07:57.516 +02:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-11-17 17:07:57.527 +02:00 [INF] Creating GRN for PO "23d49ad7-c8f3-4545-9bb3-6957cdf43515"
2025-11-17 17:07:58.008 +02:00 [INF] GRN GRN-20251117-0005 created successfully for PO "23d49ad7-c8f3-4545-9bb3-6957cdf43515"
2025-11-17 17:07:58.155 +02:00 [INF] Executing CreatedAtRouteResult, writing value of type '<>f__AnonymousType145`3[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[ModularERP.Modules.Purchases.Goods_Receipt.DTO.DTO_GRN.GRNResponseDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-17 17:07:58.178 +02:00 [INF] Executed action ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNByPOController.ReceiveFromPO (ModularERP) in 1784.9613ms
2025-11-17 17:07:58.181 +02:00 [INF] Executed endpoint 'ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNByPOController.ReceiveFromPO (ModularERP)'
2025-11-17 17:07:58.183 +02:00 [ERR] Unexpected error occurred
System.InvalidOperationException: No route matches the supplied values.
   at Microsoft.AspNetCore.Mvc.CreatedAtRouteResult.OnFormatting(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor.ExecuteAsyncCore(ActionContext context, ObjectResult result, Type objectType, Object value)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor.ExecuteAsync(ActionContext context, ObjectResult result)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeNextResultFilterAsync[TFilter,TFilterAsync]()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_7>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 354
--- End of stack trace from previous location ---
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 307
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-11-17 17:07:58.250 +02:00 [INF] Error response sent with status code 500
2025-11-17 17:07:58.258 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/purchase-orders/{23d49ad7-c8f3-4545-9bb3-6957cdf43515}/receive - 500 null application/json; charset=utf-8 1950.2025ms
2025-11-17 17:09:11.965 +02:00 [INF] Starting web host...
2025-11-17 17:09:13.445 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-17 17:09:13.521 +02:00 [INF] Executed DbCommand (61ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-11-17 17:09:13.592 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-17 17:09:13.598 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-11-17 17:09:13.616 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-11-17 17:09:13.676 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-11-17 17:09:13.693 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-17 17:09:13.697 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-17 17:09:13.704 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-17 17:09:13.716 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-11-17 17:09:13.722 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-11-17 17:09:13.880 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-17 17:09:13.887 +02:00 [INF] Master database initialized successfully
2025-11-17 17:09:15.970 +02:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-17 17:09:16.078 +02:00 [INF] Now listening on: https://localhost:7168
2025-11-17 17:09:16.081 +02:00 [INF] Now listening on: http://localhost:5004
2025-11-17 17:09:16.215 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-17 17:09:16.217 +02:00 [INF] Hosting environment: Development
2025-11-17 17:09:16.218 +02:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-11-17 17:09:16.375 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-11-17 17:09:16.534 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 158.4498ms
2025-11-17 17:09:16.536 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-11-17 17:09:16.536 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-11-17 17:09:16.552 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 15.7878ms
2025-11-17 17:09:16.568 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 32.0387ms
2025-11-17 17:09:16.611 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-11-17 17:09:16.871 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 260.0923ms
2025-11-17 17:09:18.892 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/purchase-orders/{23d49ad7-c8f3-4545-9bb3-6957cdf43515}/receive - application/json 482
2025-11-17 17:09:18.908 +02:00 [INF] Request started
2025-11-17 17:09:18.912 +02:00 [INF] === Incoming Request ===
2025-11-17 17:09:18.914 +02:00 [INF] Path: /api/purchase-orders/%7B23d49ad7-c8f3-4545-9bb3-6957cdf43515%7D/receive
2025-11-17 17:09:18.914 +02:00 [INF] Method: POST
2025-11-17 17:09:18.915 +02:00 [INF] === Headers ===
2025-11-17 17:09:18.918 +02:00 [INF] Accept: ["*/*"]
2025-11-17 17:09:18.921 +02:00 [INF] Connection: ["keep-alive"]
2025-11-17 17:09:18.922 +02:00 [INF] Host: ["localhost:7168"]
2025-11-17 17:09:18.924 +02:00 [INF] User-Agent: ["PostmanRuntime/7.49.1"]
2025-11-17 17:09:18.925 +02:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-11-17 17:09:18.927 +02:00 [INF] Content-Type: ["application/json"]
2025-11-17 17:09:18.931 +02:00 [INF] Content-Length: ["482"]
2025-11-17 17:09:18.933 +02:00 [INF] X-Company-ID: ["90137c92-382d-404c-bade-e5fefb1e8dbf"]
2025-11-17 17:09:18.934 +02:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-11-17 17:09:18.935 +02:00 [INF] Postman-Token: ["aeff2cf2-205a-402d-a26b-ac5cb79677db"]
2025-11-17 17:09:18.939 +02:00 [INF] üîç TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-11-17 17:09:18.941 +02:00 [INF] ‚úÖ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-11-17 17:09:18.947 +02:00 [INF] Executing endpoint 'ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNByPOController.ReceiveFromPO (ModularERP)'
2025-11-17 17:09:18.963 +02:00 [INF] Route matched with {action = "ReceiveFromPO", controller = "GRNByPO"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ReceiveFromPO(System.Guid, ModularERP.Modules.Purchases.Goods_Receipt.Commends.Commends_GRNPO.ReceiveFromPOCommand, System.Guid) on controller ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNByPOController (ModularERP).
2025-11-17 17:09:18.970 +02:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-11-17 17:09:19.000 +02:00 [INF] Creating GRN for PO "23d49ad7-c8f3-4545-9bb3-6957cdf43515"
2025-11-17 17:09:19.097 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-11-17 17:09:19.796 +02:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-11-17 17:09:19.801 +02:00 [INF] Creating GRN for PO "23d49ad7-c8f3-4545-9bb3-6957cdf43515"
2025-11-17 17:09:20.261 +02:00 [INF] GRN GRN-20251117-0006 created successfully for PO "23d49ad7-c8f3-4545-9bb3-6957cdf43515"
2025-11-17 17:09:20.400 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType145`3[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[ModularERP.Modules.Purchases.Goods_Receipt.DTO.DTO_GRN.GRNResponseDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-17 17:09:20.424 +02:00 [INF] Executed action ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNByPOController.ReceiveFromPO (ModularERP) in 1453.6906ms
2025-11-17 17:09:20.428 +02:00 [INF] Executed endpoint 'ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNByPOController.ReceiveFromPO (ModularERP)'
2025-11-17 17:09:20.431 +02:00 [INF] Request completed successfully with status code 200
2025-11-17 17:09:20.437 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/purchase-orders/{23d49ad7-c8f3-4545-9bb3-6957cdf43515}/receive - 200 null application/json; charset=utf-8 1545.0519ms
2025-11-17 17:28:12.891 +02:00 [INF] Starting web host...
2025-11-17 17:28:14.455 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-17 17:28:14.518 +02:00 [INF] Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-11-17 17:28:14.596 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-17 17:28:14.603 +02:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-11-17 17:28:14.617 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-11-17 17:28:14.681 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-11-17 17:28:14.702 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-17 17:28:14.706 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-17 17:28:14.717 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-17 17:28:14.730 +02:00 [INF] No migrations were applied. The database is already up to date.
2025-11-17 17:28:14.737 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-11-17 17:28:14.908 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-17 17:28:14.916 +02:00 [INF] Master database initialized successfully
2025-11-17 17:28:16.977 +02:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-17 17:28:17.142 +02:00 [INF] Now listening on: https://localhost:7168
2025-11-17 17:28:17.144 +02:00 [INF] Now listening on: http://localhost:5004
2025-11-17 17:28:17.245 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-17 17:28:17.247 +02:00 [INF] Hosting environment: Development
2025-11-17 17:28:17.248 +02:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-11-17 17:28:17.648 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-11-17 17:28:17.787 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 141.2786ms
2025-11-17 17:28:17.917 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-11-17 17:28:17.917 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-11-17 17:28:17.921 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 4.7291ms
2025-11-17 17:28:17.941 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 23.8997ms
2025-11-17 17:28:17.996 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-11-17 17:28:18.304 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 307.1608ms
2025-11-17 17:28:39.040 +02:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/purchase-orders/{23d49ad7-c8f3-4545-9bb3-6957cdf43515}/receive - application/json 482
2025-11-17 17:28:39.061 +02:00 [INF] Request started
2025-11-17 17:28:39.064 +02:00 [INF] === Incoming Request ===
2025-11-17 17:28:39.066 +02:00 [INF] Path: /api/purchase-orders/%7B23d49ad7-c8f3-4545-9bb3-6957cdf43515%7D/receive
2025-11-17 17:28:39.066 +02:00 [INF] Method: POST
2025-11-17 17:28:39.068 +02:00 [INF] === Headers ===
2025-11-17 17:28:39.070 +02:00 [INF] Accept: ["*/*"]
2025-11-17 17:28:39.073 +02:00 [INF] Connection: ["keep-alive"]
2025-11-17 17:28:39.075 +02:00 [INF] Host: ["localhost:7168"]
2025-11-17 17:28:39.078 +02:00 [INF] User-Agent: ["PostmanRuntime/7.49.1"]
2025-11-17 17:28:39.079 +02:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-11-17 17:28:39.080 +02:00 [INF] Content-Type: ["application/json"]
2025-11-17 17:28:39.082 +02:00 [INF] Content-Length: ["482"]
2025-11-17 17:28:39.083 +02:00 [INF] X-Company-ID: ["90137c92-382d-404c-bade-e5fefb1e8dbf"]
2025-11-17 17:28:39.085 +02:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-11-17 17:28:39.086 +02:00 [INF] Postman-Token: ["86ee9d1c-57a5-4874-b131-6ed62dbd4914"]
2025-11-17 17:28:39.091 +02:00 [INF] üîç TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-11-17 17:28:39.093 +02:00 [INF] ‚úÖ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-11-17 17:28:39.095 +02:00 [INF] Executing endpoint 'ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNByPOController.ReceiveFromPO (ModularERP)'
2025-11-17 17:28:39.110 +02:00 [INF] Route matched with {action = "ReceiveFromPO", controller = "GRNByPO"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ReceiveFromPO(System.Guid, ModularERP.Modules.Purchases.Goods_Receipt.Commends.Commends_GRNPO.ReceiveFromPOCommand, System.Guid) on controller ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNByPOController (ModularERP).
2025-11-17 17:28:39.116 +02:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-11-17 17:28:39.155 +02:00 [INF] Creating GRN for PO "23d49ad7-c8f3-4545-9bb3-6957cdf43515"
2025-11-17 17:28:39.272 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-11-17 17:28:39.968 +02:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-11-17 17:28:39.995 +02:00 [INF] üîµ Creating GRN for PO "23d49ad7-c8f3-4545-9bb3-6957cdf43515"
2025-11-17 17:28:40.029 +02:00 [INF] ‚úÖ PO found: PO-202510-0005 | DocumentStatus: Approved | ReceptionStatus: Partially Received
2025-11-17 17:28:40.173 +02:00 [INF] üìä Validating | POLineItemId: "b9d99ef5-ecd2-452b-4f82-08de25d684bd" | Item: ' Product' | Ordered: 5.000 | Received: 4.000 | Pending: 1.000 | Attempting: 1
2025-11-17 17:28:40.199 +02:00 [INF] ‚úÖ Generated GRN Number: GRN-2025-00004
2025-11-17 17:28:40.382 +02:00 [INF] ‚úÖ GRN entity created with Id: "79a77a5a-1f3a-444c-ab10-e8eebf848f99"
2025-11-17 17:28:40.471 +02:00 [INF] ‚úÖ Updated PO Line Item | POLineItemId: "b9d99ef5-ecd2-452b-4f82-08de25d684bd" | Previous: 4.000 ‚Üí New: 5.000 | Increment: +1
2025-11-17 17:28:40.476 +02:00 [INF] üîÑ Starting Warehouse Stock update...
2025-11-17 17:28:40.564 +02:00 [INF] ‚úÖ Stock Updated | ProductId: "518cf879-5570-46d8-9850-bec158f5eea6" | Product: ' Product' | Warehouse: "e5d0bbaa-9099-43e1-bb16-f9744078a9ea" | Qty: 53.000 ‚Üí 54.000 (+1) | Available: 53.000 ‚Üí 54.000
2025-11-17 17:28:40.568 +02:00 [INF] ‚úÖ Warehouse Stock update completed successfully
2025-11-17 17:28:40.577 +02:00 [INF] üìä PO Status Update | PO: PO-202510-0005 | Previous: 'Partially Received' ‚Üí New: 'Partially Received'
2025-11-17 17:28:40.720 +02:00 [INF] ‚úÖ‚úÖ‚úÖ GRN created successfully | GRN: GRN-2025-00004 | PO: PO-202510-0005
2025-11-17 17:28:40.829 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType145`3[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[ModularERP.Modules.Purchases.Goods_Receipt.DTO.DTO_GRN.GRNResponseDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-17 17:28:40.852 +02:00 [INF] Executed action ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNByPOController.ReceiveFromPO (ModularERP) in 1735.6155ms
2025-11-17 17:28:40.854 +02:00 [INF] Executed endpoint 'ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNByPOController.ReceiveFromPO (ModularERP)'
2025-11-17 17:28:40.856 +02:00 [INF] Request completed successfully with status code 200
2025-11-17 17:28:40.862 +02:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/purchase-orders/{23d49ad7-c8f3-4545-9bb3-6957cdf43515}/receive - 200 null application/json; charset=utf-8 1822.2079ms
2025-11-17 17:40:39.571 +02:00 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/purchase-orders/{23d49ad7-c8f3-4545-9bb3-6957cdf43515}/receipts - null null
2025-11-17 17:40:39.586 +02:00 [INF] Request started
2025-11-17 17:40:39.588 +02:00 [INF] === Incoming Request ===
2025-11-17 17:40:39.590 +02:00 [INF] Path: /api/purchase-orders/%7B23d49ad7-c8f3-4545-9bb3-6957cdf43515%7D/receipts
2025-11-17 17:40:39.591 +02:00 [INF] Method: GET
2025-11-17 17:40:39.592 +02:00 [INF] === Headers ===
2025-11-17 17:40:39.593 +02:00 [INF] Accept: ["*/*"]
2025-11-17 17:40:39.594 +02:00 [INF] Connection: ["keep-alive"]
2025-11-17 17:40:39.595 +02:00 [INF] Host: ["localhost:7168"]
2025-11-17 17:40:39.597 +02:00 [INF] User-Agent: ["PostmanRuntime/7.49.1"]
2025-11-17 17:40:39.599 +02:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-11-17 17:40:39.600 +02:00 [INF] X-Company-ID: ["90137c92-382d-404c-bade-e5fefb1e8dbf"]
2025-11-17 17:40:39.601 +02:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-11-17 17:40:39.603 +02:00 [INF] Postman-Token: ["600b5a2d-d34c-46bd-9e22-1c524b4a6602"]
2025-11-17 17:40:39.607 +02:00 [INF] üîç TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-11-17 17:40:39.608 +02:00 [INF] ‚úÖ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-11-17 17:40:39.609 +02:00 [INF] Executing endpoint 'ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNByPOController.GetGRNsByPO (ModularERP)'
2025-11-17 17:40:39.614 +02:00 [INF] Route matched with {action = "GetGRNsByPO", controller = "GRNByPO"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetGRNsByPO(System.Guid, System.Guid) on controller ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNByPOController (ModularERP).
2025-11-17 17:40:39.618 +02:00 [INF] Getting GRNs for PO "23d49ad7-c8f3-4545-9bb3-6957cdf43515"
2025-11-17 17:40:39.625 +02:00 [INF] Getting GRNs for PO "23d49ad7-c8f3-4545-9bb3-6957cdf43515"
2025-11-17 17:40:39.670 +02:00 [INF] Found 7 GRNs for PO "23d49ad7-c8f3-4545-9bb3-6957cdf43515"
2025-11-17 17:40:39.673 +02:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType145`3[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[ModularERP.Modules.Purchases.Goods_Receipt.DTO.DTO_GRN.GRNListItemDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-17 17:40:39.677 +02:00 [INF] Executed action ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNByPOController.GetGRNsByPO (ModularERP) in 59.8997ms
2025-11-17 17:40:39.678 +02:00 [INF] Executed endpoint 'ModularERP.Modules.Purchases.Goods_Receipt.Controllers.GRNByPOController.GetGRNsByPO (ModularERP)'
2025-11-17 17:40:39.680 +02:00 [INF] Request completed successfully with status code 200
2025-11-17 17:40:39.682 +02:00 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/purchase-orders/{23d49ad7-c8f3-4545-9bb3-6957cdf43515}/receipts - 200 null application/json; charset=utf-8 110.8873ms
