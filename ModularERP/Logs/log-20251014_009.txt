2025-10-14 20:48:41.849 +03:00 [INF] Starting web host...
2025-10-14 20:48:42.389 +03:00 [FTL] Host terminated unexpectedly
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at ModularERP.Program.Main(String[] args) in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 219
2025-10-14 20:51:12.613 +03:00 [INF] Starting web host...
2025-10-14 20:51:12.958 +03:00 [FTL] Host terminated unexpectedly
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at ModularERP.Program.Main(String[] args) in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 219
2025-10-14 20:51:40.226 +03:00 [INF] Starting web host...
2025-10-14 20:51:40.654 +03:00 [FTL] Host terminated unexpectedly
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at ModularERP.Program.Main(String[] args) in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 219
2025-10-14 20:52:24.705 +03:00 [INF] Starting web host...
2025-10-14 20:52:25.065 +03:00 [FTL] Host terminated unexpectedly
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at ModularERP.Program.Main(String[] args) in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 219
2025-10-14 20:57:52.415 +03:00 [INF] Starting web host...
2025-10-14 20:57:53.484 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 20:57:53.553 +03:00 [INF] Executed DbCommand (51ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-10-14 20:57:53.629 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 20:57:53.635 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-14 20:57:53.644 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-14 20:57:53.714 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-14 20:57:53.731 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 20:57:53.736 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-14 20:57:53.744 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-14 20:57:53.756 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-10-14 20:57:53.762 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-14 20:57:53.940 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-14 20:57:53.947 +03:00 [INF] Master database initialized successfully
2025-10-14 20:57:55.740 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-14 20:57:55.908 +03:00 [INF] Now listening on: https://localhost:7168
2025-10-14 20:57:55.911 +03:00 [INF] Now listening on: http://localhost:5004
2025-10-14 20:57:55.993 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-14 20:57:55.994 +03:00 [INF] Hosting environment: Development
2025-10-14 20:57:55.996 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-10-14 20:57:56.490 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-14 20:57:56.667 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 178.6735ms
2025-10-14 20:57:56.671 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-14 20:57:56.671 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-14 20:57:56.687 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 16.372ms
2025-10-14 20:57:56.714 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 43.179ms
2025-10-14 20:57:56.871 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-14 20:57:57.081 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 209.8104ms
2025-10-14 20:58:30.927 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/requisitions/{5f3a01e1-635d-40db-2d90-08de0b170b68}/items - application/json 149
2025-10-14 20:58:30.948 +03:00 [INF] Request started
2025-10-14 20:58:30.951 +03:00 [INF] === Incoming Request ===
2025-10-14 20:58:30.952 +03:00 [INF] Path: /api/requisitions/%7B5f3a01e1-635d-40db-2d90-08de0b170b68%7D/items
2025-10-14 20:58:30.953 +03:00 [INF] Method: POST
2025-10-14 20:58:30.954 +03:00 [INF] === Headers ===
2025-10-14 20:58:30.957 +03:00 [INF] Accept: ["*/*"]
2025-10-14 20:58:30.960 +03:00 [INF] Connection: ["keep-alive"]
2025-10-14 20:58:30.962 +03:00 [INF] Host: ["localhost:7168"]
2025-10-14 20:58:30.964 +03:00 [INF] User-Agent: ["PostmanRuntime/7.48.0"]
2025-10-14 20:58:30.965 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-14 20:58:30.967 +03:00 [INF] Content-Type: ["application/json"]
2025-10-14 20:58:30.969 +03:00 [INF] Content-Length: ["149"]
2025-10-14 20:58:30.971 +03:00 [INF] X-Tenant-ID: ["7e4a49eb-2e0e-4be8-8d60-c13d7db0f018"]
2025-10-14 20:58:30.972 +03:00 [INF] Postman-Token: ["3bcd380c-4888-49b0-b6aa-f4152eac77c3"]
2025-10-14 20:58:30.977 +03:00 [INF] üîç TenantService returned: '7e4a49eb-2e0e-4be8-8d60-c13d7db0f018'
2025-10-14 20:58:30.978 +03:00 [INF] ‚úÖ Processing request for tenant: 7e4a49eb-2e0e-4be8-8d60-c13d7db0f018
2025-10-14 20:58:30.980 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController.CreateRequisitionItem (ModularERP)'
2025-10-14 20:58:31.001 +03:00 [INF] Route matched with {action = "CreateRequisitionItem", controller = "RequisitionItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateRequisitionItem(System.Guid, ModularERP.Modules.Inventory.Features.Requisitions.DTO.DTO_Requisition.CreateRequisitionItemDto) on controller ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController (ModularERP).
2025-10-14 20:58:31.006 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-14 20:58:31.042 +03:00 [INF] POST request received to create item for requisition "5f3a01e1-635d-40db-2d90-08de0b170b68"
2025-10-14 20:58:31.110 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-10-14 20:58:31.509 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-14 20:58:31.519 +03:00 [INF] Creating requisition item for requisition "5f3a01e1-635d-40db-2d90-08de0b170b68"
2025-10-14 20:58:31.865 +03:00 [INF] Requisition item "4e1ac868-0cd8-4f62-cf94-08de0b4b498a" created successfully for requisition "5f3a01e1-635d-40db-2d90-08de0b170b68"
2025-10-14 20:58:31.936 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.Requisitions.DTO.DTO_Requisition.RequisitionItemDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-14 20:58:31.955 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController.CreateRequisitionItem (ModularERP) in 949.0027ms
2025-10-14 20:58:31.957 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController.CreateRequisitionItem (ModularERP)'
2025-10-14 20:58:31.959 +03:00 [INF] Request completed successfully with status code 200
2025-10-14 20:58:31.963 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/requisitions/{5f3a01e1-635d-40db-2d90-08de0b170b68}/items - 200 null application/json; charset=utf-8 1036.2523ms
2025-10-14 21:12:51.147 +03:00 [INF] Starting web host...
2025-10-14 21:12:54.876 +03:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 21:12:54.945 +03:00 [INF] Executed DbCommand (53ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-10-14 21:12:55.044 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 21:12:55.056 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-14 21:12:55.073 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-14 21:12:55.155 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-14 21:12:55.171 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 21:12:55.177 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-14 21:12:55.190 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-14 21:12:55.203 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-10-14 21:12:55.212 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-14 21:12:55.558 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-14 21:12:55.569 +03:00 [INF] Master database initialized successfully
2025-10-14 21:12:57.655 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-14 21:12:57.801 +03:00 [INF] Now listening on: https://localhost:7168
2025-10-14 21:12:57.803 +03:00 [INF] Now listening on: http://localhost:5004
2025-10-14 21:12:57.894 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-14 21:12:57.896 +03:00 [INF] Hosting environment: Development
2025-10-14 21:12:57.897 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-10-14 21:12:58.098 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-14 21:12:58.286 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 188.9195ms
2025-10-14 21:12:58.300 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-14 21:12:58.310 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-14 21:12:58.318 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 18.8828ms
2025-10-14 21:12:58.350 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 40.2153ms
2025-10-14 21:12:58.414 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-14 21:12:58.636 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 222.4283ms
2025-10-14 21:16:52.706 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/WarehouseStock - application/json 260
2025-10-14 21:16:52.727 +03:00 [INF] Request started
2025-10-14 21:16:52.730 +03:00 [INF] === Incoming Request ===
2025-10-14 21:16:52.733 +03:00 [INF] Path: /api/WarehouseStock
2025-10-14 21:16:52.735 +03:00 [INF] Method: POST
2025-10-14 21:16:52.736 +03:00 [INF] === Headers ===
2025-10-14 21:16:52.738 +03:00 [INF] Accept: ["*/*"]
2025-10-14 21:16:52.741 +03:00 [INF] Connection: ["keep-alive"]
2025-10-14 21:16:52.742 +03:00 [INF] Host: ["localhost:7168"]
2025-10-14 21:16:52.744 +03:00 [INF] User-Agent: ["PostmanRuntime/7.48.0"]
2025-10-14 21:16:52.745 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-14 21:16:52.747 +03:00 [INF] Content-Type: ["application/json"]
2025-10-14 21:16:52.749 +03:00 [INF] Content-Length: ["260"]
2025-10-14 21:16:52.751 +03:00 [INF] X-Tenant-ID: ["7e4a49eb-2e0e-4be8-8d60-c13d7db0f018"]
2025-10-14 21:16:52.753 +03:00 [INF] Postman-Token: ["433a9a08-e98d-4626-980e-76ee2e2d59ff"]
2025-10-14 21:16:52.758 +03:00 [INF] üîç TenantService returned: '7e4a49eb-2e0e-4be8-8d60-c13d7db0f018'
2025-10-14 21:16:52.759 +03:00 [INF] ‚úÖ Processing request for tenant: 7e4a49eb-2e0e-4be8-8d60-c13d7db0f018
2025-10-14 21:16:52.761 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehouseStockController.Create (ModularERP)'
2025-10-14 21:16:52.780 +03:00 [INF] Route matched with {action = "Create", controller = "WarehouseStock"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(ModularERP.Modules.Inventory.Features.Warehouses.DTO.DTO_WarehouseStock.CreateWarehouseStockDto) on controller ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehouseStockController (ModularERP).
2025-10-14 21:16:52.786 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-14 21:16:52.917 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-10-14 21:16:53.345 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-14 21:16:53.356 +03:00 [INF] Creating warehouse stock for Warehouse: "ac97ee32-5d33-41e8-9a22-30e3162eaed3", Product: "b3835495-fed3-4cb4-ba6c-1dd684fab29d"
2025-10-14 21:16:53.395 +03:00 [ERR] Error creating warehouse stock
AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
CreateWarehouseStockDto -> WarehouseStock
ModularERP.Modules.Inventory.Features.Warehouses.DTO.DTO_WarehouseStock.CreateWarehouseStockDto -> ModularERP.Modules.Inventory.Features.Warehouses.Models.WarehouseStock
   at lambda_method154(Closure, Object, WarehouseStock, ResolutionContext)
   at ModularERP.Modules.Inventory.Features.Warehouses.Handlers.Handlers_WarehouseStock.CreateWarehouseStockHandler.Handle(CreateWarehouseStockCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Warehouses\Handlers\Handlers_WarehouseStock\CreateWarehouseStockHandler.cs:line 62
2025-10-14 21:16:53.438 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehouseStockController.Create (ModularERP) in 651.8127ms
2025-10-14 21:16:53.441 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehouseStockController.Create (ModularERP)'
2025-10-14 21:16:53.443 +03:00 [ERR] Unexpected error occurred
AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
CreateWarehouseStockDto -> WarehouseStock
ModularERP.Modules.Inventory.Features.Warehouses.DTO.DTO_WarehouseStock.CreateWarehouseStockDto -> ModularERP.Modules.Inventory.Features.Warehouses.Models.WarehouseStock
   at lambda_method154(Closure, Object, WarehouseStock, ResolutionContext)
   at ModularERP.Modules.Inventory.Features.Warehouses.Handlers.Handlers_WarehouseStock.CreateWarehouseStockHandler.Handle(CreateWarehouseStockCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Warehouses\Handlers\Handlers_WarehouseStock\CreateWarehouseStockHandler.cs:line 62
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehouseStockController.Create(CreateWarehouseStockDto dto) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Warehouses\Controllers\WarehouseStockController.cs:line 23
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 317
--- End of stack trace from previous location ---
   at ModularERP.Program.<>c.<<Main>b__0_5>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 270
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-10-14 21:16:53.469 +03:00 [INF] Error response sent with status code 500
2025-10-14 21:16:53.476 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/WarehouseStock - 500 null application/json; charset=utf-8 769.5704ms
2025-10-14 21:18:53.379 +03:00 [INF] Starting web host...
2025-10-14 21:18:54.432 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 21:18:54.491 +03:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-10-14 21:18:54.568 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 21:18:54.574 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-14 21:18:54.584 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-14 21:18:54.638 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-14 21:18:54.653 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 21:18:54.658 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-14 21:18:54.665 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-14 21:18:54.676 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-10-14 21:18:54.684 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-14 21:18:54.844 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-14 21:18:54.851 +03:00 [INF] Master database initialized successfully
2025-10-14 21:18:56.310 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-14 21:18:56.409 +03:00 [INF] Now listening on: https://localhost:7168
2025-10-14 21:18:56.411 +03:00 [INF] Now listening on: http://localhost:5004
2025-10-14 21:18:56.483 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-14 21:18:56.485 +03:00 [INF] Hosting environment: Development
2025-10-14 21:18:56.486 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-10-14 21:18:56.805 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-14 21:18:56.928 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 123.6338ms
2025-10-14 21:18:56.938 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-14 21:18:56.938 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-14 21:18:56.948 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 9.733ms
2025-10-14 21:18:56.963 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 25.4372ms
2025-10-14 21:18:57.129 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-14 21:18:57.297 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 168.0295ms
2025-10-14 21:19:05.434 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/WarehouseStock - application/json 260
2025-10-14 21:19:05.460 +03:00 [INF] Request started
2025-10-14 21:19:05.463 +03:00 [INF] === Incoming Request ===
2025-10-14 21:19:05.465 +03:00 [INF] Path: /api/WarehouseStock
2025-10-14 21:19:05.466 +03:00 [INF] Method: POST
2025-10-14 21:19:05.468 +03:00 [INF] === Headers ===
2025-10-14 21:19:05.472 +03:00 [INF] Accept: ["*/*"]
2025-10-14 21:19:05.476 +03:00 [INF] Connection: ["keep-alive"]
2025-10-14 21:19:05.479 +03:00 [INF] Host: ["localhost:7168"]
2025-10-14 21:19:05.481 +03:00 [INF] User-Agent: ["PostmanRuntime/7.48.0"]
2025-10-14 21:19:05.483 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-14 21:19:05.484 +03:00 [INF] Content-Type: ["application/json"]
2025-10-14 21:19:05.486 +03:00 [INF] Content-Length: ["260"]
2025-10-14 21:19:05.489 +03:00 [INF] X-Tenant-ID: ["7e4a49eb-2e0e-4be8-8d60-c13d7db0f018"]
2025-10-14 21:19:05.492 +03:00 [INF] Postman-Token: ["b688658e-e6b8-441b-9a6f-f982e946fc07"]
2025-10-14 21:19:05.498 +03:00 [INF] üîç TenantService returned: '7e4a49eb-2e0e-4be8-8d60-c13d7db0f018'
2025-10-14 21:19:05.500 +03:00 [INF] ‚úÖ Processing request for tenant: 7e4a49eb-2e0e-4be8-8d60-c13d7db0f018
2025-10-14 21:19:05.502 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehouseStockController.Create (ModularERP)'
2025-10-14 21:19:05.522 +03:00 [INF] Route matched with {action = "Create", controller = "WarehouseStock"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(ModularERP.Modules.Inventory.Features.Warehouses.DTO.DTO_WarehouseStock.CreateWarehouseStockDto) on controller ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehouseStockController (ModularERP).
2025-10-14 21:19:05.529 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-14 21:19:05.639 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-10-14 21:19:06.120 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-14 21:19:06.131 +03:00 [INF] Creating warehouse stock for Warehouse: "ac97ee32-5d33-41e8-9a22-30e3162eaed3", Product: "b3835495-fed3-4cb4-ba6c-1dd684fab29d"
2025-10-14 21:19:06.371 +03:00 [INF] Warehouse stock created successfully with Id: "2a22717c-451d-4c66-a112-03413de9692e"
2025-10-14 21:19:06.480 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.Warehouses.DTO.DTO_WarehouseStock.WarehouseStockResponseDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-14 21:19:06.505 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehouseStockController.Create (ModularERP) in 976.0054ms
2025-10-14 21:19:06.508 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehouseStockController.Create (ModularERP)'
2025-10-14 21:19:06.512 +03:00 [INF] Request completed successfully with status code 200
2025-10-14 21:19:06.519 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/WarehouseStock - 200 null application/json; charset=utf-8 1085.335ms
2025-10-14 21:21:20.128 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/requisitions/{5f3a01e1-635d-40db-2d90-08de0b170b68}/items - application/json 149
2025-10-14 21:21:20.136 +03:00 [INF] Request started
2025-10-14 21:21:20.137 +03:00 [INF] === Incoming Request ===
2025-10-14 21:21:20.140 +03:00 [INF] Path: /api/requisitions/%7B5f3a01e1-635d-40db-2d90-08de0b170b68%7D/items
2025-10-14 21:21:20.142 +03:00 [INF] Method: POST
2025-10-14 21:21:20.143 +03:00 [INF] === Headers ===
2025-10-14 21:21:20.145 +03:00 [INF] Accept: ["*/*"]
2025-10-14 21:21:20.147 +03:00 [INF] Connection: ["keep-alive"]
2025-10-14 21:21:20.152 +03:00 [INF] Host: ["localhost:7168"]
2025-10-14 21:21:20.154 +03:00 [INF] User-Agent: ["PostmanRuntime/7.48.0"]
2025-10-14 21:21:20.157 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-14 21:21:20.161 +03:00 [INF] Content-Type: ["application/json"]
2025-10-14 21:21:20.164 +03:00 [INF] Content-Length: ["149"]
2025-10-14 21:21:20.167 +03:00 [INF] X-Tenant-ID: ["7e4a49eb-2e0e-4be8-8d60-c13d7db0f018"]
2025-10-14 21:21:20.171 +03:00 [INF] Postman-Token: ["0ac2e0e2-8a4e-4f50-bc0f-4abf47486046"]
2025-10-14 21:21:20.177 +03:00 [INF] üîç TenantService returned: '7e4a49eb-2e0e-4be8-8d60-c13d7db0f018'
2025-10-14 21:21:20.178 +03:00 [INF] ‚úÖ Processing request for tenant: 7e4a49eb-2e0e-4be8-8d60-c13d7db0f018
2025-10-14 21:21:20.182 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController.CreateRequisitionItem (ModularERP)'
2025-10-14 21:21:20.191 +03:00 [INF] Route matched with {action = "CreateRequisitionItem", controller = "RequisitionItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateRequisitionItem(System.Guid, ModularERP.Modules.Inventory.Features.Requisitions.DTO.DTO_Requisition.CreateRequisitionItemDto) on controller ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController (ModularERP).
2025-10-14 21:21:20.211 +03:00 [INF] POST request received to create item for requisition "5f3a01e1-635d-40db-2d90-08de0b170b68"
2025-10-14 21:21:20.225 +03:00 [INF] Creating requisition item for requisition "5f3a01e1-635d-40db-2d90-08de0b170b68"
2025-10-14 21:21:20.404 +03:00 [INF] Requisition item "2faa2112-a703-48d9-189e-08de0b4e794c" created successfully for requisition "5f3a01e1-635d-40db-2d90-08de0b170b68"
2025-10-14 21:21:20.489 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.Requisitions.DTO.DTO_Requisition.RequisitionItemDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-14 21:21:20.496 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController.CreateRequisitionItem (ModularERP) in 297.5261ms
2025-10-14 21:21:20.499 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController.CreateRequisitionItem (ModularERP)'
2025-10-14 21:21:20.501 +03:00 [INF] Request completed successfully with status code 200
2025-10-14 21:21:20.502 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/requisitions/{5f3a01e1-635d-40db-2d90-08de0b170b68}/items - 200 null application/json; charset=utf-8 374.2206ms
2025-10-14 21:30:34.008 +03:00 [INF] Starting web host...
2025-10-14 21:30:37.829 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 21:30:37.868 +03:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-10-14 21:30:37.937 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 21:30:37.943 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-14 21:30:37.955 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-14 21:30:38.010 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-14 21:30:38.027 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 21:30:38.032 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-14 21:30:38.039 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-14 21:30:38.050 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-10-14 21:30:38.055 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-14 21:30:38.220 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-14 21:30:38.228 +03:00 [INF] Master database initialized successfully
2025-10-14 21:30:40.007 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-14 21:30:40.262 +03:00 [INF] Now listening on: https://localhost:7168
2025-10-14 21:30:40.264 +03:00 [INF] Now listening on: http://localhost:5004
2025-10-14 21:30:40.352 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-14 21:30:40.354 +03:00 [INF] Hosting environment: Development
2025-10-14 21:30:40.356 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-10-14 21:30:40.704 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-14 21:30:40.844 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 140.851ms
2025-10-14 21:30:40.850 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-14 21:30:40.850 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-14 21:30:40.868 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 17.8647ms
2025-10-14 21:30:40.892 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 41.4427ms
2025-10-14 21:30:41.129 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-14 21:30:41.312 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 182.5989ms
2025-10-14 21:31:01.579 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/requisitions/{5f3a01e1-635d-40db-2d90-08de0b170b68}/items - application/json 149
2025-10-14 21:31:01.595 +03:00 [INF] Request started
2025-10-14 21:31:01.597 +03:00 [INF] === Incoming Request ===
2025-10-14 21:31:01.598 +03:00 [INF] Path: /api/requisitions/%7B5f3a01e1-635d-40db-2d90-08de0b170b68%7D/items
2025-10-14 21:31:01.601 +03:00 [INF] Method: POST
2025-10-14 21:31:01.602 +03:00 [INF] === Headers ===
2025-10-14 21:31:01.605 +03:00 [INF] Accept: ["*/*"]
2025-10-14 21:31:01.609 +03:00 [INF] Connection: ["keep-alive"]
2025-10-14 21:31:01.611 +03:00 [INF] Host: ["localhost:7168"]
2025-10-14 21:31:01.613 +03:00 [INF] User-Agent: ["PostmanRuntime/7.48.0"]
2025-10-14 21:31:01.615 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-14 21:31:01.617 +03:00 [INF] Content-Type: ["application/json"]
2025-10-14 21:31:01.620 +03:00 [INF] Content-Length: ["149"]
2025-10-14 21:31:01.622 +03:00 [INF] X-Tenant-ID: ["7e4a49eb-2e0e-4be8-8d60-c13d7db0f018"]
2025-10-14 21:31:01.624 +03:00 [INF] Postman-Token: ["24f40fed-a15c-4234-a855-bfc1c708eb23"]
2025-10-14 21:31:01.629 +03:00 [INF] üîç TenantService returned: '7e4a49eb-2e0e-4be8-8d60-c13d7db0f018'
2025-10-14 21:31:01.630 +03:00 [INF] ‚úÖ Processing request for tenant: 7e4a49eb-2e0e-4be8-8d60-c13d7db0f018
2025-10-14 21:31:01.633 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController.CreateRequisitionItem (ModularERP)'
2025-10-14 21:31:01.654 +03:00 [INF] Route matched with {action = "CreateRequisitionItem", controller = "RequisitionItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateRequisitionItem(System.Guid, ModularERP.Modules.Inventory.Features.Requisitions.DTO.DTO_Requisition.CreateRequisitionItemDto) on controller ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController (ModularERP).
2025-10-14 21:31:01.662 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-14 21:31:01.690 +03:00 [INF] POST request received to create item for requisition "5f3a01e1-635d-40db-2d90-08de0b170b68"
2025-10-14 21:31:01.744 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-10-14 21:31:02.076 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-14 21:31:02.081 +03:00 [INF] Creating requisition item for requisition "5f3a01e1-635d-40db-2d90-08de0b170b68"
2025-10-14 21:31:02.161 +03:00 [INF] Fetching stock for WarehouseId: "ac97ee32-5d33-41e8-9a22-30e3162eaed3", ProductId: "1fae8b7e-132b-41ff-bffa-e48a1c822176"
2025-10-14 21:31:02.170 +03:00 [WRN] No warehouse stock found for ProductId: "1fae8b7e-132b-41ff-bffa-e48a1c822176" in WarehouseId: "ac97ee32-5d33-41e8-9a22-30e3162eaed3"
2025-10-14 21:31:02.304 +03:00 [INF] Requisition item "f1d3e5bf-ac21-41a8-6b70-08de0b4fd419" created successfully for requisition "5f3a01e1-635d-40db-2d90-08de0b170b68"
2025-10-14 21:31:02.372 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.Requisitions.DTO.DTO_Requisition.RequisitionItemDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-14 21:31:02.391 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController.CreateRequisitionItem (ModularERP) in 727.8826ms
2025-10-14 21:31:02.394 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController.CreateRequisitionItem (ModularERP)'
2025-10-14 21:31:02.396 +03:00 [INF] Request completed successfully with status code 200
2025-10-14 21:31:02.400 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/requisitions/{5f3a01e1-635d-40db-2d90-08de0b170b68}/items - 200 null application/json; charset=utf-8 821.2264ms
2025-10-14 21:31:23.856 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/requisitions/{5f3a01e1-635d-40db-2d90-08de0b170b68}/items - application/json 149
2025-10-14 21:31:23.863 +03:00 [INF] Request started
2025-10-14 21:31:23.864 +03:00 [INF] === Incoming Request ===
2025-10-14 21:31:23.867 +03:00 [INF] Path: /api/requisitions/%7B5f3a01e1-635d-40db-2d90-08de0b170b68%7D/items
2025-10-14 21:31:23.868 +03:00 [INF] Method: POST
2025-10-14 21:31:23.870 +03:00 [INF] === Headers ===
2025-10-14 21:31:23.871 +03:00 [INF] Accept: ["*/*"]
2025-10-14 21:31:23.873 +03:00 [INF] Connection: ["keep-alive"]
2025-10-14 21:31:23.874 +03:00 [INF] Host: ["localhost:7168"]
2025-10-14 21:31:23.878 +03:00 [INF] User-Agent: ["PostmanRuntime/7.48.0"]
2025-10-14 21:31:23.880 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-14 21:31:23.882 +03:00 [INF] Content-Type: ["application/json"]
2025-10-14 21:31:23.884 +03:00 [INF] Content-Length: ["149"]
2025-10-14 21:31:23.886 +03:00 [INF] X-Tenant-ID: ["7e4a49eb-2e0e-4be8-8d60-c13d7db0f018"]
2025-10-14 21:31:23.889 +03:00 [INF] Postman-Token: ["0b5df5c4-d428-4633-b7f6-6bfd058ad54f"]
2025-10-14 21:31:23.892 +03:00 [INF] üîç TenantService returned: '7e4a49eb-2e0e-4be8-8d60-c13d7db0f018'
2025-10-14 21:31:23.894 +03:00 [INF] ‚úÖ Processing request for tenant: 7e4a49eb-2e0e-4be8-8d60-c13d7db0f018
2025-10-14 21:31:23.895 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController.CreateRequisitionItem (ModularERP)'
2025-10-14 21:31:23.899 +03:00 [INF] Route matched with {action = "CreateRequisitionItem", controller = "RequisitionItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateRequisitionItem(System.Guid, ModularERP.Modules.Inventory.Features.Requisitions.DTO.DTO_Requisition.CreateRequisitionItemDto) on controller ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController (ModularERP).
2025-10-14 21:31:23.906 +03:00 [INF] POST request received to create item for requisition "5f3a01e1-635d-40db-2d90-08de0b170b68"
2025-10-14 21:31:23.909 +03:00 [INF] Creating requisition item for requisition "5f3a01e1-635d-40db-2d90-08de0b170b68"
2025-10-14 21:31:23.920 +03:00 [WRN] Product "b3835495-fed3-4cb4-ba6c-1dd684fab29d" already exists in requisition "5f3a01e1-635d-40db-2d90-08de0b170b68"
2025-10-14 21:31:23.924 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController.CreateRequisitionItem (ModularERP) in 19.2103ms
2025-10-14 21:31:23.927 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController.CreateRequisitionItem (ModularERP)'
2025-10-14 21:31:23.930 +03:00 [WRN] Business logic exception occurred: This product already exists in the requisition
ModularERP.Common.Exceptions.BusinessLogicException: This product already exists in the requisition
   at ModularERP.Modules.Inventory.Features.Requisitions.Handlers.Handlers_RequisitionItem.CreateRequisitionItemHandler.Handle(CreateRequisitionItemCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Requisitions\Handlers\Handlers_RequisitionItem\CreateRequisitionItemHandler.cs:line 78
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController.CreateRequisitionItem(Guid requisitionId, CreateRequisitionItemDto dto) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Requisitions\Controllers\RequisitionItemsController.cs:line 91
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 317
--- End of stack trace from previous location ---
   at ModularERP.Program.<>c.<<Main>b__0_5>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 270
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-10-14 21:31:23.978 +03:00 [INF] Error response sent with status code 400
2025-10-14 21:31:23.980 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/requisitions/{5f3a01e1-635d-40db-2d90-08de0b170b68}/items - 400 null application/json; charset=utf-8 124.1589ms
2025-10-14 21:31:38.197 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/requisitions/{5f3a01e1-635d-40db-2d90-08de0b170b68}/items - application/json 149
2025-10-14 21:31:38.202 +03:00 [INF] Request started
2025-10-14 21:31:38.203 +03:00 [INF] === Incoming Request ===
2025-10-14 21:31:38.203 +03:00 [INF] Path: /api/requisitions/%7B5f3a01e1-635d-40db-2d90-08de0b170b68%7D/items
2025-10-14 21:31:38.205 +03:00 [INF] Method: POST
2025-10-14 21:31:38.206 +03:00 [INF] === Headers ===
2025-10-14 21:31:38.208 +03:00 [INF] Accept: ["*/*"]
2025-10-14 21:31:38.210 +03:00 [INF] Connection: ["keep-alive"]
2025-10-14 21:31:38.213 +03:00 [INF] Host: ["localhost:7168"]
2025-10-14 21:31:38.215 +03:00 [INF] User-Agent: ["PostmanRuntime/7.48.0"]
2025-10-14 21:31:38.218 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-14 21:31:38.219 +03:00 [INF] Content-Type: ["application/json"]
2025-10-14 21:31:38.221 +03:00 [INF] Content-Length: ["149"]
2025-10-14 21:31:38.223 +03:00 [INF] X-Tenant-ID: ["7e4a49eb-2e0e-4be8-8d60-c13d7db0f018"]
2025-10-14 21:31:38.225 +03:00 [INF] Postman-Token: ["b30be79d-4097-40eb-b135-90ce1e62b962"]
2025-10-14 21:31:38.229 +03:00 [INF] üîç TenantService returned: '7e4a49eb-2e0e-4be8-8d60-c13d7db0f018'
2025-10-14 21:31:38.230 +03:00 [INF] ‚úÖ Processing request for tenant: 7e4a49eb-2e0e-4be8-8d60-c13d7db0f018
2025-10-14 21:31:38.232 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController.CreateRequisitionItem (ModularERP)'
2025-10-14 21:31:38.234 +03:00 [INF] Route matched with {action = "CreateRequisitionItem", controller = "RequisitionItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateRequisitionItem(System.Guid, ModularERP.Modules.Inventory.Features.Requisitions.DTO.DTO_Requisition.CreateRequisitionItemDto) on controller ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController (ModularERP).
2025-10-14 21:31:38.239 +03:00 [INF] POST request received to create item for requisition "5f3a01e1-635d-40db-2d90-08de0b170b68"
2025-10-14 21:31:38.245 +03:00 [INF] Creating requisition item for requisition "5f3a01e1-635d-40db-2d90-08de0b170b68"
2025-10-14 21:31:38.248 +03:00 [INF] Fetching stock for WarehouseId: "ac97ee32-5d33-41e8-9a22-30e3162eaed3", ProductId: "b3835495-fed3-4cb4-ba6c-1dd684fab29d"
2025-10-14 21:31:38.281 +03:00 [INF] Found stock quantity: 105.000 for ProductId: "b3835495-fed3-4cb4-ba6c-1dd684fab29d"
2025-10-14 21:31:38.292 +03:00 [INF] Requisition item "f5a75e1f-28d2-437c-6b71-08de0b4fd419" created successfully for requisition "5f3a01e1-635d-40db-2d90-08de0b170b68"
2025-10-14 21:31:38.299 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.Requisitions.DTO.DTO_Requisition.RequisitionItemDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-14 21:31:38.301 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController.CreateRequisitionItem (ModularERP) in 62.4052ms
2025-10-14 21:31:38.303 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController.CreateRequisitionItem (ModularERP)'
2025-10-14 21:31:38.305 +03:00 [INF] Request completed successfully with status code 200
2025-10-14 21:31:38.306 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/requisitions/{5f3a01e1-635d-40db-2d90-08de0b170b68}/items - 200 null application/json; charset=utf-8 108.982ms
2025-10-14 21:32:09.064 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/requisitions/{5f3a01e1-635d-40db-2d90-08de0b170b68}/items - application/json 149
2025-10-14 21:32:09.068 +03:00 [INF] Request started
2025-10-14 21:32:09.070 +03:00 [INF] === Incoming Request ===
2025-10-14 21:32:09.071 +03:00 [INF] Path: /api/requisitions/%7B5f3a01e1-635d-40db-2d90-08de0b170b68%7D/items
2025-10-14 21:32:09.074 +03:00 [INF] Method: POST
2025-10-14 21:32:09.075 +03:00 [INF] === Headers ===
2025-10-14 21:32:09.076 +03:00 [INF] Accept: ["*/*"]
2025-10-14 21:32:09.077 +03:00 [INF] Connection: ["keep-alive"]
2025-10-14 21:32:09.080 +03:00 [INF] Host: ["localhost:7168"]
2025-10-14 21:32:09.081 +03:00 [INF] User-Agent: ["PostmanRuntime/7.48.0"]
2025-10-14 21:32:09.082 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-14 21:32:09.086 +03:00 [INF] Content-Type: ["application/json"]
2025-10-14 21:32:09.089 +03:00 [INF] Content-Length: ["149"]
2025-10-14 21:32:09.091 +03:00 [INF] X-Tenant-ID: ["7e4a49eb-2e0e-4be8-8d60-c13d7db0f018"]
2025-10-14 21:32:09.093 +03:00 [INF] Postman-Token: ["f3943ae5-9de2-4577-95fa-0663a9327996"]
2025-10-14 21:32:09.096 +03:00 [INF] üîç TenantService returned: '7e4a49eb-2e0e-4be8-8d60-c13d7db0f018'
2025-10-14 21:32:09.097 +03:00 [INF] ‚úÖ Processing request for tenant: 7e4a49eb-2e0e-4be8-8d60-c13d7db0f018
2025-10-14 21:32:09.099 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController.CreateRequisitionItem (ModularERP)'
2025-10-14 21:32:09.101 +03:00 [INF] Route matched with {action = "CreateRequisitionItem", controller = "RequisitionItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateRequisitionItem(System.Guid, ModularERP.Modules.Inventory.Features.Requisitions.DTO.DTO_Requisition.CreateRequisitionItemDto) on controller ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController (ModularERP).
2025-10-14 21:32:09.107 +03:00 [INF] POST request received to create item for requisition "5f3a01e1-635d-40db-2d90-08de0b170b68"
2025-10-14 21:32:09.110 +03:00 [INF] Creating requisition item for requisition "5f3a01e1-635d-40db-2d90-08de0b170b68"
2025-10-14 21:32:09.113 +03:00 [INF] Fetching stock for WarehouseId: "ac97ee32-5d33-41e8-9a22-30e3162eaed3", ProductId: "b3835495-fed3-4cb4-ba6c-1dd684fab29d"
2025-10-14 21:32:09.116 +03:00 [INF] Found stock quantity: 105.000 for ProductId: "b3835495-fed3-4cb4-ba6c-1dd684fab29d"
2025-10-14 21:32:09.120 +03:00 [INF] Requisition item "556c8155-4e66-4df3-6b72-08de0b4fd419" created successfully for requisition "5f3a01e1-635d-40db-2d90-08de0b170b68"
2025-10-14 21:32:09.125 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.Requisitions.DTO.DTO_Requisition.RequisitionItemDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-14 21:32:09.127 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController.CreateRequisitionItem (ModularERP) in 20.7161ms
2025-10-14 21:32:09.129 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController.CreateRequisitionItem (ModularERP)'
2025-10-14 21:32:09.131 +03:00 [INF] Request completed successfully with status code 200
2025-10-14 21:32:09.132 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/requisitions/{5f3a01e1-635d-40db-2d90-08de0b170b68}/items - 200 null application/json; charset=utf-8 68.2878ms
2025-10-14 21:34:44.813 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/requisitions/{5f3a01e1-635d-40db-2d90-08de0b170b68}/items - application/json 101
2025-10-14 21:34:44.817 +03:00 [INF] Request started
2025-10-14 21:34:44.818 +03:00 [INF] === Incoming Request ===
2025-10-14 21:34:44.820 +03:00 [INF] Path: /api/requisitions/%7B5f3a01e1-635d-40db-2d90-08de0b170b68%7D/items
2025-10-14 21:34:44.823 +03:00 [INF] Method: POST
2025-10-14 21:34:44.824 +03:00 [INF] === Headers ===
2025-10-14 21:34:44.825 +03:00 [INF] Accept: ["*/*"]
2025-10-14 21:34:44.826 +03:00 [INF] Connection: ["keep-alive"]
2025-10-14 21:34:44.828 +03:00 [INF] Host: ["localhost:7168"]
2025-10-14 21:34:44.829 +03:00 [INF] User-Agent: ["PostmanRuntime/7.48.0"]
2025-10-14 21:34:44.831 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-14 21:34:44.834 +03:00 [INF] Content-Type: ["application/json"]
2025-10-14 21:34:44.836 +03:00 [INF] Content-Length: ["101"]
2025-10-14 21:34:44.838 +03:00 [INF] X-Tenant-ID: ["7e4a49eb-2e0e-4be8-8d60-c13d7db0f018"]
2025-10-14 21:34:44.840 +03:00 [INF] Postman-Token: ["9adbe691-4728-4d70-a941-f157c7f3bf15"]
2025-10-14 21:34:44.841 +03:00 [INF] üîç TenantService returned: '7e4a49eb-2e0e-4be8-8d60-c13d7db0f018'
2025-10-14 21:34:44.844 +03:00 [INF] ‚úÖ Processing request for tenant: 7e4a49eb-2e0e-4be8-8d60-c13d7db0f018
2025-10-14 21:34:44.845 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController.CreateRequisitionItem (ModularERP)'
2025-10-14 21:34:44.846 +03:00 [INF] Route matched with {action = "CreateRequisitionItem", controller = "RequisitionItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateRequisitionItem(System.Guid, ModularERP.Modules.Inventory.Features.Requisitions.DTO.DTO_Requisition.CreateRequisitionItemDto) on controller ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController (ModularERP).
2025-10-14 21:34:44.850 +03:00 [INF] POST request received to create item for requisition "5f3a01e1-635d-40db-2d90-08de0b170b68"
2025-10-14 21:34:44.852 +03:00 [INF] Creating requisition item for requisition "5f3a01e1-635d-40db-2d90-08de0b170b68"
2025-10-14 21:34:44.856 +03:00 [INF] Fetching stock for WarehouseId: "ac97ee32-5d33-41e8-9a22-30e3162eaed3", ProductId: "b3835495-fed3-4cb4-ba6c-1dd684fab29d"
2025-10-14 21:34:44.858 +03:00 [INF] Found stock quantity: 105.000 for ProductId: "b3835495-fed3-4cb4-ba6c-1dd684fab29d"
2025-10-14 21:34:44.868 +03:00 [INF] Requisition item "5c0aeaa7-91eb-41ef-6b73-08de0b4fd419" created successfully for requisition "5f3a01e1-635d-40db-2d90-08de0b170b68"
2025-10-14 21:34:44.871 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.Requisitions.DTO.DTO_Requisition.RequisitionItemDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-14 21:34:44.873 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController.CreateRequisitionItem (ModularERP) in 24.0417ms
2025-10-14 21:34:44.875 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController.CreateRequisitionItem (ModularERP)'
2025-10-14 21:34:44.877 +03:00 [INF] Request completed successfully with status code 200
2025-10-14 21:34:44.878 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/requisitions/{5f3a01e1-635d-40db-2d90-08de0b170b68}/items - 200 null application/json; charset=utf-8 65.1798ms
2025-10-14 21:39:15.686 +03:00 [INF] Starting web host...
2025-10-14 21:39:16.634 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 21:39:16.671 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-10-14 21:39:16.738 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 21:39:16.744 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-14 21:39:16.748 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-14 21:39:16.805 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-14 21:39:16.822 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 21:39:16.827 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-14 21:39:16.833 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-14 21:39:16.845 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-10-14 21:39:16.850 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-14 21:39:17.007 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-14 21:39:17.015 +03:00 [INF] Master database initialized successfully
2025-10-14 21:39:18.560 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-14 21:39:18.661 +03:00 [INF] Now listening on: https://localhost:7168
2025-10-14 21:39:18.664 +03:00 [INF] Now listening on: http://localhost:5004
2025-10-14 21:39:18.736 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-14 21:39:18.738 +03:00 [INF] Hosting environment: Development
2025-10-14 21:39:18.740 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-10-14 21:39:19.123 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-14 21:39:19.253 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 131.6648ms
2025-10-14 21:39:19.383 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-14 21:39:19.383 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-14 21:39:19.390 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 6.8674ms
2025-10-14 21:39:19.409 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 25.5836ms
2025-10-14 21:39:19.462 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-14 21:39:19.624 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 161.9938ms
2025-10-14 21:39:54.564 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/requisitions/{5f3a01e1-635d-40db-2d90-08de0b170b68}/items - application/json 101
2025-10-14 21:39:54.581 +03:00 [INF] Request started
2025-10-14 21:39:54.585 +03:00 [INF] === Incoming Request ===
2025-10-14 21:39:54.588 +03:00 [INF] Path: /api/requisitions/%7B5f3a01e1-635d-40db-2d90-08de0b170b68%7D/items
2025-10-14 21:39:54.589 +03:00 [INF] Method: POST
2025-10-14 21:39:54.590 +03:00 [INF] === Headers ===
2025-10-14 21:39:54.593 +03:00 [INF] Accept: ["*/*"]
2025-10-14 21:39:54.596 +03:00 [INF] Connection: ["keep-alive"]
2025-10-14 21:39:54.597 +03:00 [INF] Host: ["localhost:7168"]
2025-10-14 21:39:54.599 +03:00 [INF] User-Agent: ["PostmanRuntime/7.48.0"]
2025-10-14 21:39:54.603 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-14 21:39:54.605 +03:00 [INF] Content-Type: ["application/json"]
2025-10-14 21:39:54.607 +03:00 [INF] Content-Length: ["101"]
2025-10-14 21:39:54.609 +03:00 [INF] X-Tenant-ID: ["7e4a49eb-2e0e-4be8-8d60-c13d7db0f018"]
2025-10-14 21:39:54.610 +03:00 [INF] Postman-Token: ["b9a307aa-6240-457c-b883-b5948ece766f"]
2025-10-14 21:39:54.616 +03:00 [INF] üîç TenantService returned: '7e4a49eb-2e0e-4be8-8d60-c13d7db0f018'
2025-10-14 21:39:54.619 +03:00 [INF] ‚úÖ Processing request for tenant: 7e4a49eb-2e0e-4be8-8d60-c13d7db0f018
2025-10-14 21:39:54.620 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController.CreateRequisitionItem (ModularERP)'
2025-10-14 21:39:54.639 +03:00 [INF] Route matched with {action = "CreateRequisitionItem", controller = "RequisitionItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateRequisitionItem(System.Guid, ModularERP.Modules.Inventory.Features.Requisitions.DTO.DTO_Requisition.CreateRequisitionItemDto) on controller ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController (ModularERP).
2025-10-14 21:39:54.645 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-14 21:39:54.672 +03:00 [INF] POST request received to create item for requisition "5f3a01e1-635d-40db-2d90-08de0b170b68"
2025-10-14 21:39:54.746 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-10-14 21:39:55.070 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-14 21:39:55.076 +03:00 [INF] Creating requisition item for requisition "5f3a01e1-635d-40db-2d90-08de0b170b68"
2025-10-14 21:39:55.224 +03:00 [WRN] Product "73fcc544-cb2f-465d-9250-37a5f8a45139" not found in warehouse "ac97ee32-5d33-41e8-9a22-30e3162eaed3"
2025-10-14 21:39:55.230 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController.CreateRequisitionItem (ModularERP) in 585.0674ms
2025-10-14 21:39:55.235 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController.CreateRequisitionItem (ModularERP)'
2025-10-14 21:39:55.238 +03:00 [WRN] Business logic exception occurred: Product with ID 73fcc544-cb2f-465d-9250-37a5f8a45139 is not available in warehouse ac97ee32-5d33-41e8-9a22-30e3162eaed3
ModularERP.Common.Exceptions.BusinessLogicException: Product with ID 73fcc544-cb2f-465d-9250-37a5f8a45139 is not available in warehouse ac97ee32-5d33-41e8-9a22-30e3162eaed3
   at ModularERP.Modules.Inventory.Features.Requisitions.Handlers.Handlers_RequisitionItem.CreateRequisitionItemHandler.Handle(CreateRequisitionItemCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Requisitions\Handlers\Handlers_RequisitionItem\CreateRequisitionItemHandler.cs:line 94
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController.CreateRequisitionItem(Guid requisitionId, CreateRequisitionItemDto dto) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Requisitions\Controllers\RequisitionItemsController.cs:line 91
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 317
--- End of stack trace from previous location ---
   at ModularERP.Program.<>c.<<Main>b__0_5>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 270
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-10-14 21:39:55.287 +03:00 [INF] Error response sent with status code 400
2025-10-14 21:39:55.292 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/requisitions/{5f3a01e1-635d-40db-2d90-08de0b170b68}/items - 400 null application/json; charset=utf-8 727.7871ms
2025-10-14 21:42:46.032 +03:00 [INF] Starting web host...
2025-10-14 21:42:49.277 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 21:42:49.365 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-10-14 21:42:49.442 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 21:42:49.448 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-14 21:42:49.464 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-14 21:42:49.521 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-14 21:42:49.537 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 21:42:49.541 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-14 21:42:49.549 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-14 21:42:49.562 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-10-14 21:42:49.568 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-14 21:42:49.761 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-14 21:42:49.769 +03:00 [INF] Master database initialized successfully
2025-10-14 21:42:51.328 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-14 21:42:51.434 +03:00 [INF] Now listening on: https://localhost:7168
2025-10-14 21:42:51.437 +03:00 [INF] Now listening on: http://localhost:5004
2025-10-14 21:42:51.512 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-14 21:42:51.514 +03:00 [INF] Hosting environment: Development
2025-10-14 21:42:51.516 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-10-14 21:42:51.868 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-14 21:42:51.998 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 130.3392ms
2025-10-14 21:42:52.093 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-14 21:42:52.093 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-14 21:42:52.105 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 11.8578ms
2025-10-14 21:42:52.121 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 28.0025ms
2025-10-14 21:42:52.162 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-14 21:42:52.343 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 180.9894ms
2025-10-14 21:42:54.061 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/requisitions/{5f3a01e1-635d-40db-2d90-08de0b170b68}/items - application/json 101
2025-10-14 21:42:54.087 +03:00 [INF] Request started
2025-10-14 21:42:54.089 +03:00 [INF] === Incoming Request ===
2025-10-14 21:42:54.092 +03:00 [INF] Path: /api/requisitions/%7B5f3a01e1-635d-40db-2d90-08de0b170b68%7D/items
2025-10-14 21:42:54.094 +03:00 [INF] Method: POST
2025-10-14 21:42:54.095 +03:00 [INF] === Headers ===
2025-10-14 21:42:54.102 +03:00 [INF] Accept: ["*/*"]
2025-10-14 21:42:54.108 +03:00 [INF] Connection: ["keep-alive"]
2025-10-14 21:42:54.110 +03:00 [INF] Host: ["localhost:7168"]
2025-10-14 21:42:54.112 +03:00 [INF] User-Agent: ["PostmanRuntime/7.48.0"]
2025-10-14 21:42:54.115 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-14 21:42:54.119 +03:00 [INF] Content-Type: ["application/json"]
2025-10-14 21:42:54.122 +03:00 [INF] Content-Length: ["101"]
2025-10-14 21:42:54.125 +03:00 [INF] X-Tenant-ID: ["7e4a49eb-2e0e-4be8-8d60-c13d7db0f018"]
2025-10-14 21:42:54.127 +03:00 [INF] Postman-Token: ["046a8c45-5a69-46a0-bb58-05edb6f063b0"]
2025-10-14 21:42:54.136 +03:00 [INF] üîç TenantService returned: '7e4a49eb-2e0e-4be8-8d60-c13d7db0f018'
2025-10-14 21:42:54.139 +03:00 [INF] ‚úÖ Processing request for tenant: 7e4a49eb-2e0e-4be8-8d60-c13d7db0f018
2025-10-14 21:42:54.142 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController.CreateRequisitionItem (ModularERP)'
2025-10-14 21:42:54.169 +03:00 [INF] Route matched with {action = "CreateRequisitionItem", controller = "RequisitionItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateRequisitionItem(System.Guid, ModularERP.Modules.Inventory.Features.Requisitions.DTO.DTO_Requisition.CreateRequisitionItemDto) on controller ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController (ModularERP).
2025-10-14 21:42:54.177 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-14 21:42:54.241 +03:00 [INF] POST request received to create item for requisition "5f3a01e1-635d-40db-2d90-08de0b170b68"
2025-10-14 21:42:54.319 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-10-14 21:42:54.818 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-14 21:42:54.829 +03:00 [INF] Creating requisition item for requisition "5f3a01e1-635d-40db-2d90-08de0b170b68"
2025-10-14 21:42:55.226 +03:00 [INF] Requisition item "c90c37db-324f-4657-57cd-08de0b517d05" created successfully for requisition "5f3a01e1-635d-40db-2d90-08de0b170b68"
2025-10-14 21:42:55.311 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.Requisitions.DTO.DTO_Requisition.RequisitionItemDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-14 21:42:55.338 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController.CreateRequisitionItem (ModularERP) in 1162.5293ms
2025-10-14 21:42:55.342 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController.CreateRequisitionItem (ModularERP)'
2025-10-14 21:42:55.345 +03:00 [INF] Request completed successfully with status code 200
2025-10-14 21:42:55.352 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/requisitions/{5f3a01e1-635d-40db-2d90-08de0b170b68}/items - 200 null application/json; charset=utf-8 1290.7594ms
2025-10-14 21:43:13.064 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-14 21:43:13.070 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 6.5661ms
2025-10-14 21:43:13.084 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-14 21:43:13.084 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-14 21:43:13.094 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 9.6804ms
2025-10-14 21:43:13.097 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 13.2506ms
2025-10-14 21:43:13.141 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-14 21:43:13.316 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 174.457ms
2025-10-14 21:44:42.831 +03:00 [INF] Starting web host...
2025-10-14 21:44:43.795 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 21:44:43.877 +03:00 [INF] Executed DbCommand (67ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-10-14 21:44:43.958 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 21:44:43.963 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-14 21:44:43.982 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-14 21:44:44.042 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-14 21:44:44.058 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 21:44:44.062 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-14 21:44:44.069 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-14 21:44:44.082 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-10-14 21:44:44.089 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-14 21:44:44.264 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-14 21:44:44.271 +03:00 [INF] Master database initialized successfully
2025-10-14 21:44:45.614 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-14 21:44:45.709 +03:00 [INF] Now listening on: https://localhost:7168
2025-10-14 21:44:45.711 +03:00 [INF] Now listening on: http://localhost:5004
2025-10-14 21:44:45.781 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-14 21:44:45.783 +03:00 [INF] Hosting environment: Development
2025-10-14 21:44:45.784 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-10-14 21:44:46.212 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-14 21:44:46.340 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 128.2601ms
2025-10-14 21:44:46.349 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-14 21:44:46.349 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-14 21:44:46.358 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 8.6574ms
2025-10-14 21:44:46.384 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 35.5761ms
2025-10-14 21:44:46.428 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-14 21:44:46.559 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 131.034ms
2025-10-14 21:46:32.451 +03:00 [INF] Starting web host...
2025-10-14 21:46:33.446 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 21:46:33.536 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-10-14 21:46:33.608 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 21:46:33.614 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-14 21:46:33.633 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-14 21:46:33.721 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-14 21:46:33.741 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 21:46:33.746 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-14 21:46:33.755 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-14 21:46:33.770 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-10-14 21:46:33.778 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-14 21:46:33.972 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-14 21:46:33.979 +03:00 [INF] Master database initialized successfully
2025-10-14 21:46:35.749 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-14 21:46:35.891 +03:00 [INF] Now listening on: https://localhost:7168
2025-10-14 21:46:35.894 +03:00 [INF] Now listening on: http://localhost:5004
2025-10-14 21:46:35.967 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-14 21:46:35.969 +03:00 [INF] Hosting environment: Development
2025-10-14 21:46:35.971 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-10-14 21:46:36.399 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-14 21:46:36.543 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 145.932ms
2025-10-14 21:46:36.553 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-14 21:46:36.553 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-14 21:46:36.564 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 10.9884ms
2025-10-14 21:46:36.585 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 31.8546ms
2025-10-14 21:46:36.663 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-14 21:46:36.852 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 189.5111ms
2025-10-14 21:46:49.941 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-14 21:46:49.961 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 19.1661ms
2025-10-14 21:46:49.977 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-14 21:46:49.998 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-14 21:46:50.029 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 51.9746ms
2025-10-14 21:46:50.051 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 53.1051ms
2025-10-14 21:46:50.114 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-14 21:46:50.429 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 314.9801ms
2025-10-14 21:47:26.942 +03:00 [INF] Starting web host...
2025-10-14 21:47:27.897 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 21:47:27.927 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-10-14 21:47:27.995 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 21:47:28.001 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-14 21:47:28.004 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-14 21:47:28.061 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-14 21:47:28.077 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 21:47:28.081 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-14 21:47:28.087 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-14 21:47:28.098 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-10-14 21:47:28.102 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-14 21:47:28.258 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-14 21:47:28.265 +03:00 [INF] Master database initialized successfully
2025-10-14 21:47:29.770 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-14 21:47:29.885 +03:00 [INF] Now listening on: https://localhost:7168
2025-10-14 21:47:29.886 +03:00 [INF] Now listening on: http://localhost:5004
2025-10-14 21:47:29.967 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-14 21:47:29.969 +03:00 [INF] Hosting environment: Development
2025-10-14 21:47:29.971 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-10-14 21:47:30.078 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-14 21:47:30.268 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 191.8053ms
2025-10-14 21:47:30.272 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-14 21:47:30.272 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-14 21:47:30.296 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 23.5361ms
2025-10-14 21:47:30.324 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 51.5545ms
2025-10-14 21:47:30.387 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-14 21:47:30.573 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 186.0275ms
2025-10-14 21:50:15.405 +03:00 [INF] Starting web host...
2025-10-14 21:50:16.341 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 21:50:16.439 +03:00 [INF] Executed DbCommand (82ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-10-14 21:50:16.506 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 21:50:16.512 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-14 21:50:16.527 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-14 21:50:16.588 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-14 21:50:16.610 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 21:50:16.613 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-14 21:50:16.621 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-14 21:50:16.634 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-10-14 21:50:16.639 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-14 21:50:16.802 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-14 21:50:16.810 +03:00 [INF] Master database initialized successfully
2025-10-14 21:50:18.322 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-14 21:50:18.425 +03:00 [INF] Now listening on: https://localhost:7168
2025-10-14 21:50:18.427 +03:00 [INF] Now listening on: http://localhost:5004
2025-10-14 21:50:18.502 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-14 21:50:18.504 +03:00 [INF] Hosting environment: Development
2025-10-14 21:50:18.505 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-10-14 21:50:18.870 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-14 21:50:18.991 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 121.814ms
2025-10-14 21:50:19.000 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-14 21:50:19.000 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-14 21:50:19.007 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 6.8167ms
2025-10-14 21:50:19.029 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 28.4302ms
2025-10-14 21:50:19.071 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-14 21:50:19.224 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 153.09ms
2025-10-14 21:52:11.798 +03:00 [INF] Starting web host...
2025-10-14 21:52:12.768 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 21:52:12.861 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-10-14 21:52:12.937 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 21:52:12.942 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-14 21:52:12.959 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-14 21:52:13.015 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-14 21:52:13.031 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 21:52:13.035 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-14 21:52:13.041 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-14 21:52:13.051 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-10-14 21:52:13.057 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-14 21:52:13.220 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-14 21:52:13.227 +03:00 [INF] Master database initialized successfully
2025-10-14 21:52:14.673 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-14 21:52:14.771 +03:00 [INF] Now listening on: https://localhost:7168
2025-10-14 21:52:14.774 +03:00 [INF] Now listening on: http://localhost:5004
2025-10-14 21:52:14.845 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-14 21:52:14.847 +03:00 [INF] Hosting environment: Development
2025-10-14 21:52:14.848 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-10-14 21:52:15.223 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-14 21:52:15.343 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 120.7938ms
2025-10-14 21:52:15.345 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-14 21:52:15.345 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-14 21:52:15.359 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 13.11ms
2025-10-14 21:52:15.376 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 30.3202ms
2025-10-14 21:52:15.445 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-14 21:52:15.599 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 153.746ms
2025-10-14 21:55:26.963 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/requisitions/{5f3a01e1-635d-40db-2d90-08de0b170b68}/items - null null
2025-10-14 21:55:26.981 +03:00 [INF] Request started
2025-10-14 21:55:26.984 +03:00 [INF] === Incoming Request ===
2025-10-14 21:55:26.991 +03:00 [INF] Path: /api/requisitions/%7B5f3a01e1-635d-40db-2d90-08de0b170b68%7D/items
2025-10-14 21:55:26.993 +03:00 [INF] Method: GET
2025-10-14 21:55:26.994 +03:00 [INF] === Headers ===
2025-10-14 21:55:26.997 +03:00 [INF] Accept: ["*/*"]
2025-10-14 21:55:27.001 +03:00 [INF] Connection: ["keep-alive"]
2025-10-14 21:55:27.003 +03:00 [INF] Host: ["localhost:7168"]
2025-10-14 21:55:27.004 +03:00 [INF] User-Agent: ["PostmanRuntime/7.48.0"]
2025-10-14 21:55:27.006 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-14 21:55:27.007 +03:00 [INF] X-Tenant-ID: ["7e4a49eb-2e0e-4be8-8d60-c13d7db0f018"]
2025-10-14 21:55:27.009 +03:00 [INF] Postman-Token: ["4bfe6bdd-4c6e-4c5d-a279-0c72f5d1a21d"]
2025-10-14 21:55:27.016 +03:00 [INF] üîç TenantService returned: '7e4a49eb-2e0e-4be8-8d60-c13d7db0f018'
2025-10-14 21:55:27.018 +03:00 [INF] ‚úÖ Processing request for tenant: 7e4a49eb-2e0e-4be8-8d60-c13d7db0f018
2025-10-14 21:55:27.021 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController.GetRequisitionItems (ModularERP)'
2025-10-14 21:55:27.036 +03:00 [INF] Route matched with {action = "GetRequisitionItems", controller = "RequisitionItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRequisitionItems(System.Guid) on controller ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController (ModularERP).
2025-10-14 21:55:27.041 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-14 21:55:27.050 +03:00 [INF] GET request received for requisition "5f3a01e1-635d-40db-2d90-08de0b170b68" items
2025-10-14 21:55:27.118 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-10-14 21:55:27.176 +03:00 [INF] Retrieving items for requisition "5f3a01e1-635d-40db-2d90-08de0b170b68"
2025-10-14 21:55:27.269 +03:00 [INF] Retrieved 1 items for requisition "5f3a01e1-635d-40db-2d90-08de0b170b68"
2025-10-14 21:55:27.276 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[System.Collections.Generic.List`1[[ModularERP.Modules.Inventory.Features.Requisitions.DTO.DTO_Requisition.RequisitionItemDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-14 21:55:27.302 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController.GetRequisitionItems (ModularERP) in 260.4371ms
2025-10-14 21:55:27.304 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController.GetRequisitionItems (ModularERP)'
2025-10-14 21:55:27.306 +03:00 [INF] Request completed successfully with status code 200
2025-10-14 21:55:27.310 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/requisitions/{5f3a01e1-635d-40db-2d90-08de0b170b68}/items - 200 null application/json; charset=utf-8 346.8959ms
2025-10-14 22:02:16.067 +03:00 [INF] Starting web host...
2025-10-14 22:02:19.263 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 22:02:19.360 +03:00 [INF] Executed DbCommand (81ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-10-14 22:02:19.435 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 22:02:19.441 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-14 22:02:19.457 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-14 22:02:19.517 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-14 22:02:19.533 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 22:02:19.537 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-14 22:02:19.544 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-14 22:02:19.557 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-10-14 22:02:19.565 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-14 22:02:19.729 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-14 22:02:19.736 +03:00 [INF] Master database initialized successfully
2025-10-14 22:02:21.349 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-14 22:02:21.461 +03:00 [INF] Now listening on: https://localhost:7168
2025-10-14 22:02:21.463 +03:00 [INF] Now listening on: http://localhost:5004
2025-10-14 22:02:21.554 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-14 22:02:21.556 +03:00 [INF] Hosting environment: Development
2025-10-14 22:02:21.557 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-10-14 22:02:21.714 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-14 22:02:21.911 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 197.4026ms
2025-10-14 22:02:22.073 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-14 22:02:22.073 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-14 22:02:22.079 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 5.6553ms
2025-10-14 22:02:22.098 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 25.5921ms
2025-10-14 22:02:22.153 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-14 22:02:22.361 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 208.1683ms
2025-10-14 22:02:43.822 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/requisitions/{5f3a01e1-635d-40db-2d90-08de0b170b68}/items - application/json 101
2025-10-14 22:02:43.839 +03:00 [INF] Request started
2025-10-14 22:02:43.842 +03:00 [INF] === Incoming Request ===
2025-10-14 22:02:43.844 +03:00 [INF] Path: /api/requisitions/%7B5f3a01e1-635d-40db-2d90-08de0b170b68%7D/items
2025-10-14 22:02:43.845 +03:00 [INF] Method: POST
2025-10-14 22:02:43.846 +03:00 [INF] === Headers ===
2025-10-14 22:02:43.848 +03:00 [INF] Accept: ["*/*"]
2025-10-14 22:02:43.851 +03:00 [INF] Connection: ["keep-alive"]
2025-10-14 22:02:43.853 +03:00 [INF] Host: ["localhost:7168"]
2025-10-14 22:02:43.859 +03:00 [INF] User-Agent: ["PostmanRuntime/7.48.0"]
2025-10-14 22:02:43.861 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-14 22:02:43.862 +03:00 [INF] Content-Type: ["application/json"]
2025-10-14 22:02:43.864 +03:00 [INF] Content-Length: ["101"]
2025-10-14 22:02:43.865 +03:00 [INF] X-Tenant-ID: ["7e4a49eb-2e0e-4be8-8d60-c13d7db0f018"]
2025-10-14 22:02:43.867 +03:00 [INF] Postman-Token: ["7f5bc38c-c13e-49a1-bc17-9eb7102bc333"]
2025-10-14 22:02:43.873 +03:00 [INF] üîç TenantService returned: '7e4a49eb-2e0e-4be8-8d60-c13d7db0f018'
2025-10-14 22:02:43.875 +03:00 [INF] ‚úÖ Processing request for tenant: 7e4a49eb-2e0e-4be8-8d60-c13d7db0f018
2025-10-14 22:02:43.877 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController.CreateRequisitionItem (ModularERP)'
2025-10-14 22:02:43.897 +03:00 [INF] Route matched with {action = "CreateRequisitionItem", controller = "RequisitionItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateRequisitionItem(System.Guid, ModularERP.Modules.Inventory.Features.Requisitions.DTO.DTO_Requisition.CreateRequisitionItemDto) on controller ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController (ModularERP).
2025-10-14 22:02:43.903 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-14 22:02:43.935 +03:00 [INF] POST request received to create item for requisition "5f3a01e1-635d-40db-2d90-08de0b170b68"
2025-10-14 22:02:44.008 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-10-14 22:02:44.428 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-14 22:02:44.439 +03:00 [INF] Creating requisition item for requisition "5f3a01e1-635d-40db-2d90-08de0b170b68"
2025-10-14 22:02:44.752 +03:00 [INF] Requisition item "7543b7c0-336c-4e81-f73f-08de0b54420b" created successfully for requisition "5f3a01e1-635d-40db-2d90-08de0b170b68"
2025-10-14 22:02:44.820 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.Requisitions.DTO.DTO_Requisition.RequisitionItemDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-14 22:02:44.841 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController.CreateRequisitionItem (ModularERP) in 938.6809ms
2025-10-14 22:02:44.844 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController.CreateRequisitionItem (ModularERP)'
2025-10-14 22:02:44.846 +03:00 [INF] Request completed successfully with status code 200
2025-10-14 22:02:44.850 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/requisitions/{5f3a01e1-635d-40db-2d90-08de0b170b68}/items - 200 null application/json; charset=utf-8 1028.5785ms
2025-10-14 22:04:45.492 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/WarehouseStock - application/json 260
2025-10-14 22:04:45.499 +03:00 [INF] Request started
2025-10-14 22:04:45.500 +03:00 [INF] === Incoming Request ===
2025-10-14 22:04:45.501 +03:00 [INF] Path: /api/WarehouseStock
2025-10-14 22:04:45.503 +03:00 [INF] Method: POST
2025-10-14 22:04:45.504 +03:00 [INF] === Headers ===
2025-10-14 22:04:45.504 +03:00 [INF] Accept: ["*/*"]
2025-10-14 22:04:45.506 +03:00 [INF] Connection: ["keep-alive"]
2025-10-14 22:04:45.507 +03:00 [INF] Host: ["localhost:7168"]
2025-10-14 22:04:45.508 +03:00 [INF] User-Agent: ["PostmanRuntime/7.48.0"]
2025-10-14 22:04:45.510 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-14 22:04:45.511 +03:00 [INF] Content-Type: ["application/json"]
2025-10-14 22:04:45.512 +03:00 [INF] Content-Length: ["260"]
2025-10-14 22:04:45.514 +03:00 [INF] X-Tenant-ID: ["7e4a49eb-2e0e-4be8-8d60-c13d7db0f018"]
2025-10-14 22:04:45.516 +03:00 [INF] Postman-Token: ["7d677287-a801-4314-b5e7-586b251fd3a0"]
2025-10-14 22:04:45.519 +03:00 [INF] üîç TenantService returned: '7e4a49eb-2e0e-4be8-8d60-c13d7db0f018'
2025-10-14 22:04:45.520 +03:00 [INF] ‚úÖ Processing request for tenant: 7e4a49eb-2e0e-4be8-8d60-c13d7db0f018
2025-10-14 22:04:45.521 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehouseStockController.Create (ModularERP)'
2025-10-14 22:04:45.525 +03:00 [INF] Route matched with {action = "Create", controller = "WarehouseStock"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(ModularERP.Modules.Inventory.Features.Warehouses.DTO.DTO_WarehouseStock.CreateWarehouseStockDto) on controller ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehouseStockController (ModularERP).
2025-10-14 22:04:45.543 +03:00 [INF] Creating warehouse stock for Warehouse: "ac97ee32-5d33-41e8-9a22-30e3162eaed3", Product: "1fae8b7e-132b-41ff-bffa-e48a1c822176"
2025-10-14 22:04:45.593 +03:00 [INF] Warehouse stock created successfully with Id: "88d23d53-eb17-4b67-9437-22a9cedf70e7"
2025-10-14 22:04:45.618 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.Warehouses.DTO.DTO_WarehouseStock.WarehouseStockResponseDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-14 22:04:45.627 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehouseStockController.Create (ModularERP) in 100.2691ms
2025-10-14 22:04:45.630 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehouseStockController.Create (ModularERP)'
2025-10-14 22:04:45.632 +03:00 [INF] Request completed successfully with status code 200
2025-10-14 22:04:45.633 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/WarehouseStock - 200 null application/json; charset=utf-8 140.9745ms
2025-10-14 22:05:18.248 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/WarehouseStock - application/json 260
2025-10-14 22:05:18.252 +03:00 [INF] Request started
2025-10-14 22:05:18.253 +03:00 [INF] === Incoming Request ===
2025-10-14 22:05:18.255 +03:00 [INF] Path: /api/WarehouseStock
2025-10-14 22:05:18.257 +03:00 [INF] Method: POST
2025-10-14 22:05:18.258 +03:00 [INF] === Headers ===
2025-10-14 22:05:18.259 +03:00 [INF] Accept: ["*/*"]
2025-10-14 22:05:18.260 +03:00 [INF] Connection: ["keep-alive"]
2025-10-14 22:05:18.262 +03:00 [INF] Host: ["localhost:7168"]
2025-10-14 22:05:18.263 +03:00 [INF] User-Agent: ["PostmanRuntime/7.48.0"]
2025-10-14 22:05:18.264 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-14 22:05:18.266 +03:00 [INF] Content-Type: ["application/json"]
2025-10-14 22:05:18.267 +03:00 [INF] Content-Length: ["260"]
2025-10-14 22:05:18.268 +03:00 [INF] X-Tenant-ID: ["7e4a49eb-2e0e-4be8-8d60-c13d7db0f018"]
2025-10-14 22:05:18.270 +03:00 [INF] Postman-Token: ["137a9a5a-aa36-4cb1-99d1-f25a75f5547d"]
2025-10-14 22:05:18.272 +03:00 [INF] üîç TenantService returned: '7e4a49eb-2e0e-4be8-8d60-c13d7db0f018'
2025-10-14 22:05:18.274 +03:00 [INF] ‚úÖ Processing request for tenant: 7e4a49eb-2e0e-4be8-8d60-c13d7db0f018
2025-10-14 22:05:18.275 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehouseStockController.Create (ModularERP)'
2025-10-14 22:05:18.277 +03:00 [INF] Route matched with {action = "Create", controller = "WarehouseStock"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(ModularERP.Modules.Inventory.Features.Warehouses.DTO.DTO_WarehouseStock.CreateWarehouseStockDto) on controller ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehouseStockController (ModularERP).
2025-10-14 22:05:18.281 +03:00 [INF] Creating warehouse stock for Warehouse: "ac97ee32-5d33-41e8-9a22-30e3162eaed3", Product: "1fae8b7e-132b-41ff-bffa-e48a1c822176"
2025-10-14 22:05:18.298 +03:00 [WRN] Warehouse stock already exists for Warehouse: "ac97ee32-5d33-41e8-9a22-30e3162eaed3", Product: "1fae8b7e-132b-41ff-bffa-e48a1c822176"
2025-10-14 22:05:18.301 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehouseStockController.Create (ModularERP) in 21.163ms
2025-10-14 22:05:18.303 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehouseStockController.Create (ModularERP)'
2025-10-14 22:05:18.305 +03:00 [WRN] Business logic exception occurred: Stock record already exists for this warehouse and product
ModularERP.Common.Exceptions.BusinessLogicException: Stock record already exists for this warehouse and product
   at ModularERP.Modules.Inventory.Features.Warehouses.Handlers.Handlers_WarehouseStock.CreateWarehouseStockHandler.Handle(CreateWarehouseStockCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Warehouses\Handlers\Handlers_WarehouseStock\CreateWarehouseStockHandler.cs:line 56
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehouseStockController.Create(CreateWarehouseStockDto dto) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Warehouses\Controllers\WarehouseStockController.cs:line 23
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 317
--- End of stack trace from previous location ---
   at ModularERP.Program.<>c.<<Main>b__0_5>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 270
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-10-14 22:05:18.358 +03:00 [INF] Error response sent with status code 400
2025-10-14 22:05:18.360 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/WarehouseStock - 400 null application/json; charset=utf-8 111.9881ms
2025-10-14 22:05:26.161 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/WarehouseStock - application/json 260
2025-10-14 22:05:26.165 +03:00 [INF] Request started
2025-10-14 22:05:26.166 +03:00 [INF] === Incoming Request ===
2025-10-14 22:05:26.167 +03:00 [INF] Path: /api/WarehouseStock
2025-10-14 22:05:26.168 +03:00 [INF] Method: POST
2025-10-14 22:05:26.169 +03:00 [INF] === Headers ===
2025-10-14 22:05:26.170 +03:00 [INF] Accept: ["*/*"]
2025-10-14 22:05:26.172 +03:00 [INF] Connection: ["keep-alive"]
2025-10-14 22:05:26.174 +03:00 [INF] Host: ["localhost:7168"]
2025-10-14 22:05:26.175 +03:00 [INF] User-Agent: ["PostmanRuntime/7.48.0"]
2025-10-14 22:05:26.176 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-14 22:05:26.178 +03:00 [INF] Content-Type: ["application/json"]
2025-10-14 22:05:26.179 +03:00 [INF] Content-Length: ["260"]
2025-10-14 22:05:26.181 +03:00 [INF] X-Tenant-ID: ["7e4a49eb-2e0e-4be8-8d60-c13d7db0f018"]
2025-10-14 22:05:26.183 +03:00 [INF] Postman-Token: ["a2393634-298c-4599-bf12-ce66e7a95809"]
2025-10-14 22:05:26.185 +03:00 [INF] üîç TenantService returned: '7e4a49eb-2e0e-4be8-8d60-c13d7db0f018'
2025-10-14 22:05:26.186 +03:00 [INF] ‚úÖ Processing request for tenant: 7e4a49eb-2e0e-4be8-8d60-c13d7db0f018
2025-10-14 22:05:26.187 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehouseStockController.Create (ModularERP)'
2025-10-14 22:05:26.189 +03:00 [INF] Route matched with {action = "Create", controller = "WarehouseStock"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(ModularERP.Modules.Inventory.Features.Warehouses.DTO.DTO_WarehouseStock.CreateWarehouseStockDto) on controller ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehouseStockController (ModularERP).
2025-10-14 22:05:26.194 +03:00 [INF] Creating warehouse stock for Warehouse: "ac97ee32-5d33-41e8-9a22-30e3162eaed3", Product: "1fae8b7e-132b-41ff-bffa-e48a1c822176"
2025-10-14 22:05:26.209 +03:00 [INF] Warehouse stock created successfully with Id: "006d9d7d-922f-4a22-84e2-5d17ceae3cc7"
2025-10-14 22:05:26.218 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.Warehouses.DTO.DTO_WarehouseStock.WarehouseStockResponseDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-14 22:05:26.221 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehouseStockController.Create (ModularERP) in 27.7235ms
2025-10-14 22:05:26.223 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehouseStockController.Create (ModularERP)'
2025-10-14 22:05:26.224 +03:00 [INF] Request completed successfully with status code 200
2025-10-14 22:05:26.225 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/WarehouseStock - 200 null application/json; charset=utf-8 63.9363ms
2025-10-14 22:05:34.599 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/requisitions/{5f3a01e1-635d-40db-2d90-08de0b170b68}/items - application/json 101
2025-10-14 22:05:34.604 +03:00 [INF] Request started
2025-10-14 22:05:34.605 +03:00 [INF] === Incoming Request ===
2025-10-14 22:05:34.606 +03:00 [INF] Path: /api/requisitions/%7B5f3a01e1-635d-40db-2d90-08de0b170b68%7D/items
2025-10-14 22:05:34.607 +03:00 [INF] Method: POST
2025-10-14 22:05:34.608 +03:00 [INF] === Headers ===
2025-10-14 22:05:34.610 +03:00 [INF] Accept: ["*/*"]
2025-10-14 22:05:34.611 +03:00 [INF] Connection: ["keep-alive"]
2025-10-14 22:05:34.612 +03:00 [INF] Host: ["localhost:7168"]
2025-10-14 22:05:34.614 +03:00 [INF] User-Agent: ["PostmanRuntime/7.48.0"]
2025-10-14 22:05:34.616 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-14 22:05:34.618 +03:00 [INF] Content-Type: ["application/json"]
2025-10-14 22:05:34.620 +03:00 [INF] Content-Length: ["101"]
2025-10-14 22:05:34.621 +03:00 [INF] X-Tenant-ID: ["7e4a49eb-2e0e-4be8-8d60-c13d7db0f018"]
2025-10-14 22:05:34.623 +03:00 [INF] Postman-Token: ["9c417935-341c-417c-8def-d58830096f6d"]
2025-10-14 22:05:34.624 +03:00 [INF] üîç TenantService returned: '7e4a49eb-2e0e-4be8-8d60-c13d7db0f018'
2025-10-14 22:05:34.625 +03:00 [INF] ‚úÖ Processing request for tenant: 7e4a49eb-2e0e-4be8-8d60-c13d7db0f018
2025-10-14 22:05:34.626 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController.CreateRequisitionItem (ModularERP)'
2025-10-14 22:05:34.627 +03:00 [INF] Route matched with {action = "CreateRequisitionItem", controller = "RequisitionItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateRequisitionItem(System.Guid, ModularERP.Modules.Inventory.Features.Requisitions.DTO.DTO_Requisition.CreateRequisitionItemDto) on controller ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController (ModularERP).
2025-10-14 22:05:34.631 +03:00 [INF] POST request received to create item for requisition "5f3a01e1-635d-40db-2d90-08de0b170b68"
2025-10-14 22:05:34.634 +03:00 [INF] Creating requisition item for requisition "5f3a01e1-635d-40db-2d90-08de0b170b68"
2025-10-14 22:05:34.655 +03:00 [INF] Requisition item "dc5028ba-96f8-47f2-f740-08de0b54420b" created successfully for requisition "5f3a01e1-635d-40db-2d90-08de0b170b68"
2025-10-14 22:05:34.660 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.Requisitions.DTO.DTO_Requisition.RequisitionItemDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-14 22:05:34.663 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController.CreateRequisitionItem (ModularERP) in 31.9096ms
2025-10-14 22:05:34.664 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController.CreateRequisitionItem (ModularERP)'
2025-10-14 22:05:34.666 +03:00 [INF] Request completed successfully with status code 200
2025-10-14 22:05:34.667 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/requisitions/{5f3a01e1-635d-40db-2d90-08de0b170b68}/items - 200 null application/json; charset=utf-8 68.0985ms
2025-10-14 22:08:26.635 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7168/api/requisitions/{5f3a01e1-635d-40db-2d90-08de0b170b68}/items/{7543b7c0-336c-4e81-f73f-08de0b54420b} - application/json 111
2025-10-14 22:08:26.639 +03:00 [INF] Request started
2025-10-14 22:08:26.640 +03:00 [INF] === Incoming Request ===
2025-10-14 22:08:26.641 +03:00 [INF] Path: /api/requisitions/%7B5f3a01e1-635d-40db-2d90-08de0b170b68%7D/items/%7B7543b7c0-336c-4e81-f73f-08de0b54420b%7D
2025-10-14 22:08:26.642 +03:00 [INF] Method: PUT
2025-10-14 22:08:26.644 +03:00 [INF] === Headers ===
2025-10-14 22:08:26.645 +03:00 [INF] Accept: ["*/*"]
2025-10-14 22:08:26.647 +03:00 [INF] Connection: ["keep-alive"]
2025-10-14 22:08:26.648 +03:00 [INF] Host: ["localhost:7168"]
2025-10-14 22:08:26.650 +03:00 [INF] User-Agent: ["PostmanRuntime/7.48.0"]
2025-10-14 22:08:26.651 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-14 22:08:26.652 +03:00 [INF] Content-Type: ["application/json"]
2025-10-14 22:08:26.654 +03:00 [INF] Content-Length: ["111"]
2025-10-14 22:08:26.656 +03:00 [INF] X-Tenant-ID: ["7e4a49eb-2e0e-4be8-8d60-c13d7db0f018"]
2025-10-14 22:08:26.657 +03:00 [INF] Postman-Token: ["3ac2a6ee-be65-4ed9-b671-4d963dc1d82d"]
2025-10-14 22:08:26.659 +03:00 [INF] üîç TenantService returned: '7e4a49eb-2e0e-4be8-8d60-c13d7db0f018'
2025-10-14 22:08:26.660 +03:00 [INF] ‚úÖ Processing request for tenant: 7e4a49eb-2e0e-4be8-8d60-c13d7db0f018
2025-10-14 22:08:26.662 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController.UpdateRequisitionItem (ModularERP)'
2025-10-14 22:08:26.667 +03:00 [INF] Route matched with {action = "UpdateRequisitionItem", controller = "RequisitionItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateRequisitionItem(System.Guid, System.Guid, ModularERP.Modules.Inventory.Features.Requisitions.DTO.DTO_Requisition.UpdateRequisitionItemDTO) on controller ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController (ModularERP).
2025-10-14 22:08:26.672 +03:00 [INF] PUT request received to update item "7543b7c0-336c-4e81-f73f-08de0b54420b" in requisition "5f3a01e1-635d-40db-2d90-08de0b170b68"
2025-10-14 22:08:26.679 +03:00 [INF] Updating item "7543b7c0-336c-4e81-f73f-08de0b54420b" for requisition "5f3a01e1-635d-40db-2d90-08de0b170b68"
2025-10-14 22:08:26.703 +03:00 [WRN] Product "1fae8b7e-132b-41ff-bffa-e48a1c822176" already exists in requisition "5f3a01e1-635d-40db-2d90-08de0b170b68"
2025-10-14 22:08:26.705 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController.UpdateRequisitionItem (ModularERP) in 34.8393ms
2025-10-14 22:08:26.706 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController.UpdateRequisitionItem (ModularERP)'
2025-10-14 22:08:26.707 +03:00 [WRN] Business logic exception occurred: This product already exists in the requisition
ModularERP.Common.Exceptions.BusinessLogicException: This product already exists in the requisition
   at ModularERP.Modules.Inventory.Features.Requisitions.Handlers.Handlers_RequisitionItem.UpdateRequisitionItemHandler.Handle(UpdateRequisitionItemCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Requisitions\Handlers\Handlers_RequisitionItem\UpdateRequisitionItemHandler.cs:line 96
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController.UpdateRequisitionItem(Guid requisitionId, Guid itemId, UpdateRequisitionItemDTO dto) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Requisitions\Controllers\RequisitionItemsController.cs:line 121
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 317
--- End of stack trace from previous location ---
   at ModularERP.Program.<>c.<<Main>b__0_5>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 270
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-10-14 22:08:26.721 +03:00 [INF] Error response sent with status code 400
2025-10-14 22:08:26.723 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7168/api/requisitions/{5f3a01e1-635d-40db-2d90-08de0b170b68}/items/{7543b7c0-336c-4e81-f73f-08de0b54420b} - 400 null application/json; charset=utf-8 88.3844ms
2025-10-14 22:08:46.370 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7168/api/requisitions/{5f3a01e1-635d-40db-2d90-08de0b170b68}/items/{7543b7c0-336c-4e81-f73f-08de0b54420b} - application/json 55
2025-10-14 22:08:46.373 +03:00 [INF] Request started
2025-10-14 22:08:46.375 +03:00 [INF] === Incoming Request ===
2025-10-14 22:08:46.376 +03:00 [INF] Path: /api/requisitions/%7B5f3a01e1-635d-40db-2d90-08de0b170b68%7D/items/%7B7543b7c0-336c-4e81-f73f-08de0b54420b%7D
2025-10-14 22:08:46.377 +03:00 [INF] Method: PUT
2025-10-14 22:08:46.378 +03:00 [INF] === Headers ===
2025-10-14 22:08:46.379 +03:00 [INF] Accept: ["*/*"]
2025-10-14 22:08:46.380 +03:00 [INF] Connection: ["keep-alive"]
2025-10-14 22:08:46.381 +03:00 [INF] Host: ["localhost:7168"]
2025-10-14 22:08:46.383 +03:00 [INF] User-Agent: ["PostmanRuntime/7.48.0"]
2025-10-14 22:08:46.384 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-14 22:08:46.385 +03:00 [INF] Content-Type: ["application/json"]
2025-10-14 22:08:46.387 +03:00 [INF] Content-Length: ["55"]
2025-10-14 22:08:46.389 +03:00 [INF] X-Tenant-ID: ["7e4a49eb-2e0e-4be8-8d60-c13d7db0f018"]
2025-10-14 22:08:46.391 +03:00 [INF] Postman-Token: ["79456c03-594a-43fa-a6c8-45b0334e148b"]
2025-10-14 22:08:46.392 +03:00 [INF] üîç TenantService returned: '7e4a49eb-2e0e-4be8-8d60-c13d7db0f018'
2025-10-14 22:08:46.393 +03:00 [INF] ‚úÖ Processing request for tenant: 7e4a49eb-2e0e-4be8-8d60-c13d7db0f018
2025-10-14 22:08:46.394 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController.UpdateRequisitionItem (ModularERP)'
2025-10-14 22:08:46.395 +03:00 [INF] Route matched with {action = "UpdateRequisitionItem", controller = "RequisitionItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateRequisitionItem(System.Guid, System.Guid, ModularERP.Modules.Inventory.Features.Requisitions.DTO.DTO_Requisition.UpdateRequisitionItemDTO) on controller ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController (ModularERP).
2025-10-14 22:08:46.398 +03:00 [INF] PUT request received to update item "7543b7c0-336c-4e81-f73f-08de0b54420b" in requisition "5f3a01e1-635d-40db-2d90-08de0b170b68"
2025-10-14 22:08:46.400 +03:00 [INF] Updating item "7543b7c0-336c-4e81-f73f-08de0b54420b" for requisition "5f3a01e1-635d-40db-2d90-08de0b170b68"
2025-10-14 22:08:46.407 +03:00 [WRN] Product "00000000-0000-0000-0000-000000000000" not found in warehouse "ac97ee32-5d33-41e8-9a22-30e3162eaed3"
2025-10-14 22:08:46.409 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController.UpdateRequisitionItem (ModularERP) in 11.8824ms
2025-10-14 22:08:46.411 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController.UpdateRequisitionItem (ModularERP)'
2025-10-14 22:08:46.412 +03:00 [WRN] Business logic exception occurred: Product with ID 00000000-0000-0000-0000-000000000000 is not available in warehouse ac97ee32-5d33-41e8-9a22-30e3162eaed3
ModularERP.Common.Exceptions.BusinessLogicException: Product with ID 00000000-0000-0000-0000-000000000000 is not available in warehouse ac97ee32-5d33-41e8-9a22-30e3162eaed3
   at ModularERP.Modules.Inventory.Features.Requisitions.Handlers.Handlers_RequisitionItem.UpdateRequisitionItemHandler.Handle(UpdateRequisitionItemCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Requisitions\Handlers\Handlers_RequisitionItem\UpdateRequisitionItemHandler.cs:line 113
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController.UpdateRequisitionItem(Guid requisitionId, Guid itemId, UpdateRequisitionItemDTO dto) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Requisitions\Controllers\RequisitionItemsController.cs:line 121
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 317
--- End of stack trace from previous location ---
   at ModularERP.Program.<>c.<<Main>b__0_5>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 270
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-10-14 22:08:46.422 +03:00 [INF] Error response sent with status code 400
2025-10-14 22:08:46.424 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7168/api/requisitions/{5f3a01e1-635d-40db-2d90-08de0b170b68}/items/{7543b7c0-336c-4e81-f73f-08de0b54420b} - 400 null application/json; charset=utf-8 53.6319ms
2025-10-14 22:09:09.118 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7168/api/requisitions/{5f3a01e1-635d-40db-2d90-08de0b170b68}/items/{7543b7c0-336c-4e81-f73f-08de0b54420b} - application/json 111
2025-10-14 22:09:09.122 +03:00 [INF] Request started
2025-10-14 22:09:09.123 +03:00 [INF] === Incoming Request ===
2025-10-14 22:09:09.124 +03:00 [INF] Path: /api/requisitions/%7B5f3a01e1-635d-40db-2d90-08de0b170b68%7D/items/%7B7543b7c0-336c-4e81-f73f-08de0b54420b%7D
2025-10-14 22:09:09.125 +03:00 [INF] Method: PUT
2025-10-14 22:09:09.126 +03:00 [INF] === Headers ===
2025-10-14 22:09:09.127 +03:00 [INF] Accept: ["*/*"]
2025-10-14 22:09:09.129 +03:00 [INF] Connection: ["keep-alive"]
2025-10-14 22:09:09.131 +03:00 [INF] Host: ["localhost:7168"]
2025-10-14 22:09:09.132 +03:00 [INF] User-Agent: ["PostmanRuntime/7.48.0"]
2025-10-14 22:09:09.135 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-14 22:09:09.136 +03:00 [INF] Content-Type: ["application/json"]
2025-10-14 22:09:09.138 +03:00 [INF] Content-Length: ["111"]
2025-10-14 22:09:09.140 +03:00 [INF] X-Tenant-ID: ["7e4a49eb-2e0e-4be8-8d60-c13d7db0f018"]
2025-10-14 22:09:09.142 +03:00 [INF] Postman-Token: ["ff635ddc-fa97-4207-82bb-dcf36b97a141"]
2025-10-14 22:09:09.143 +03:00 [INF] üîç TenantService returned: '7e4a49eb-2e0e-4be8-8d60-c13d7db0f018'
2025-10-14 22:09:09.144 +03:00 [INF] ‚úÖ Processing request for tenant: 7e4a49eb-2e0e-4be8-8d60-c13d7db0f018
2025-10-14 22:09:09.145 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController.UpdateRequisitionItem (ModularERP)'
2025-10-14 22:09:09.147 +03:00 [INF] Route matched with {action = "UpdateRequisitionItem", controller = "RequisitionItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateRequisitionItem(System.Guid, System.Guid, ModularERP.Modules.Inventory.Features.Requisitions.DTO.DTO_Requisition.UpdateRequisitionItemDTO) on controller ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController (ModularERP).
2025-10-14 22:09:09.150 +03:00 [INF] PUT request received to update item "7543b7c0-336c-4e81-f73f-08de0b54420b" in requisition "5f3a01e1-635d-40db-2d90-08de0b170b68"
2025-10-14 22:09:09.154 +03:00 [INF] Updating item "7543b7c0-336c-4e81-f73f-08de0b54420b" for requisition "5f3a01e1-635d-40db-2d90-08de0b170b68"
2025-10-14 22:09:09.158 +03:00 [WRN] Product "1fae8b7e-132b-41ff-bffa-e48a1c822176" already exists in requisition "5f3a01e1-635d-40db-2d90-08de0b170b68"
2025-10-14 22:09:09.160 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController.UpdateRequisitionItem (ModularERP) in 10.2811ms
2025-10-14 22:09:09.161 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController.UpdateRequisitionItem (ModularERP)'
2025-10-14 22:09:09.163 +03:00 [WRN] Business logic exception occurred: This product already exists in the requisition
ModularERP.Common.Exceptions.BusinessLogicException: This product already exists in the requisition
   at ModularERP.Modules.Inventory.Features.Requisitions.Handlers.Handlers_RequisitionItem.UpdateRequisitionItemHandler.Handle(UpdateRequisitionItemCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Requisitions\Handlers\Handlers_RequisitionItem\UpdateRequisitionItemHandler.cs:line 96
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController.UpdateRequisitionItem(Guid requisitionId, Guid itemId, UpdateRequisitionItemDTO dto) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Requisitions\Controllers\RequisitionItemsController.cs:line 121
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 317
--- End of stack trace from previous location ---
   at ModularERP.Program.<>c.<<Main>b__0_5>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 270
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-10-14 22:09:09.174 +03:00 [INF] Error response sent with status code 400
2025-10-14 22:09:09.175 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7168/api/requisitions/{5f3a01e1-635d-40db-2d90-08de0b170b68}/items/{7543b7c0-336c-4e81-f73f-08de0b54420b} - 400 null application/json; charset=utf-8 57.1801ms
2025-10-14 22:10:08.151 +03:00 [INF] Starting web host...
2025-10-14 22:10:09.095 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 22:10:09.170 +03:00 [INF] Executed DbCommand (59ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-10-14 22:10:09.235 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 22:10:09.240 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-14 22:10:09.251 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-14 22:10:09.316 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-14 22:10:09.331 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 22:10:09.335 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-14 22:10:09.346 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-14 22:10:09.356 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-10-14 22:10:09.363 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-14 22:10:09.542 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-14 22:10:09.550 +03:00 [INF] Master database initialized successfully
2025-10-14 22:10:10.897 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-14 22:10:10.995 +03:00 [INF] Now listening on: https://localhost:7168
2025-10-14 22:10:10.998 +03:00 [INF] Now listening on: http://localhost:5004
2025-10-14 22:10:11.072 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-14 22:10:11.074 +03:00 [INF] Hosting environment: Development
2025-10-14 22:10:11.076 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-10-14 22:10:11.116 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-14 22:10:11.269 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 154.4154ms
2025-10-14 22:10:11.312 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-14 22:10:11.312 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-14 22:10:11.323 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 10.9914ms
2025-10-14 22:10:11.357 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 44.9085ms
2025-10-14 22:10:11.579 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-14 22:10:11.722 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 142.3049ms
2025-10-14 22:10:13.648 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7168/api/requisitions/{5f3a01e1-635d-40db-2d90-08de0b170b68}/items/{7543b7c0-336c-4e81-f73f-08de0b54420b} - application/json 111
2025-10-14 22:10:13.663 +03:00 [INF] Request started
2025-10-14 22:10:13.664 +03:00 [INF] === Incoming Request ===
2025-10-14 22:10:13.666 +03:00 [INF] Path: /api/requisitions/%7B5f3a01e1-635d-40db-2d90-08de0b170b68%7D/items/%7B7543b7c0-336c-4e81-f73f-08de0b54420b%7D
2025-10-14 22:10:13.667 +03:00 [INF] Method: PUT
2025-10-14 22:10:13.668 +03:00 [INF] === Headers ===
2025-10-14 22:10:13.670 +03:00 [INF] Accept: ["*/*"]
2025-10-14 22:10:13.673 +03:00 [INF] Connection: ["keep-alive"]
2025-10-14 22:10:13.674 +03:00 [INF] Host: ["localhost:7168"]
2025-10-14 22:10:13.677 +03:00 [INF] User-Agent: ["PostmanRuntime/7.48.0"]
2025-10-14 22:10:13.678 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-14 22:10:13.680 +03:00 [INF] Content-Type: ["application/json"]
2025-10-14 22:10:13.682 +03:00 [INF] Content-Length: ["111"]
2025-10-14 22:10:13.683 +03:00 [INF] X-Tenant-ID: ["7e4a49eb-2e0e-4be8-8d60-c13d7db0f018"]
2025-10-14 22:10:13.685 +03:00 [INF] Postman-Token: ["ff4f24b9-1573-4c68-b2dc-3e69fb40da96"]
2025-10-14 22:10:13.689 +03:00 [INF] üîç TenantService returned: '7e4a49eb-2e0e-4be8-8d60-c13d7db0f018'
2025-10-14 22:10:13.690 +03:00 [INF] ‚úÖ Processing request for tenant: 7e4a49eb-2e0e-4be8-8d60-c13d7db0f018
2025-10-14 22:10:13.692 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController.UpdateRequisitionItem (ModularERP)'
2025-10-14 22:10:13.707 +03:00 [INF] Route matched with {action = "UpdateRequisitionItem", controller = "RequisitionItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateRequisitionItem(System.Guid, System.Guid, ModularERP.Modules.Inventory.Features.Requisitions.DTO.DTO_Requisition.UpdateRequisitionItemDTO) on controller ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController (ModularERP).
2025-10-14 22:10:13.713 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-14 22:10:13.737 +03:00 [INF] PUT request received to update item "7543b7c0-336c-4e81-f73f-08de0b54420b" in requisition "5f3a01e1-635d-40db-2d90-08de0b170b68"
2025-10-14 22:10:13.799 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-10-14 22:10:14.103 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-14 22:10:14.110 +03:00 [INF] Updating item "7543b7c0-336c-4e81-f73f-08de0b54420b" for requisition "5f3a01e1-635d-40db-2d90-08de0b170b68"
2025-10-14 22:10:14.244 +03:00 [WRN] Product "1fae8b7e-132b-41ff-bffa-e48a1c822176" already exists in requisition "5f3a01e1-635d-40db-2d90-08de0b170b68"
2025-10-14 22:10:14.251 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController.UpdateRequisitionItem (ModularERP) in 538.4926ms
2025-10-14 22:10:14.254 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController.UpdateRequisitionItem (ModularERP)'
2025-10-14 22:10:14.256 +03:00 [WRN] Business logic exception occurred: This product already exists in the requisition
ModularERP.Common.Exceptions.BusinessLogicException: This product already exists in the requisition
   at ModularERP.Modules.Inventory.Features.Requisitions.Handlers.Handlers_RequisitionItem.UpdateRequisitionItemHandler.Handle(UpdateRequisitionItemCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Requisitions\Handlers\Handlers_RequisitionItem\UpdateRequisitionItemHandler.cs:line 96
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController.UpdateRequisitionItem(Guid requisitionId, Guid itemId, UpdateRequisitionItemDTO dto) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Requisitions\Controllers\RequisitionItemsController.cs:line 121
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 317
--- End of stack trace from previous location ---
   at ModularERP.Program.<>c.<<Main>b__0_5>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 270
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-10-14 22:10:14.294 +03:00 [INF] Error response sent with status code 400
2025-10-14 22:10:14.300 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7168/api/requisitions/{5f3a01e1-635d-40db-2d90-08de0b170b68}/items/{7543b7c0-336c-4e81-f73f-08de0b54420b} - 400 null application/json; charset=utf-8 651.7553ms
2025-10-14 22:10:42.387 +03:00 [INF] Starting web host...
2025-10-14 22:10:43.398 +03:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 22:10:43.470 +03:00 [INF] Executed DbCommand (53ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-10-14 22:10:43.559 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 22:10:43.565 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-14 22:10:43.575 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-14 22:10:43.643 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-14 22:10:43.660 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 22:10:43.663 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-14 22:10:43.673 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-14 22:10:43.684 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-10-14 22:10:43.692 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-14 22:10:43.877 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-14 22:10:43.887 +03:00 [INF] Master database initialized successfully
2025-10-14 22:10:45.434 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-14 22:10:45.536 +03:00 [INF] Now listening on: https://localhost:7168
2025-10-14 22:10:45.538 +03:00 [INF] Now listening on: http://localhost:5004
2025-10-14 22:10:45.611 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-14 22:10:45.613 +03:00 [INF] Hosting environment: Development
2025-10-14 22:10:45.614 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-10-14 22:10:45.878 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-14 22:10:46.015 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 137.7564ms
2025-10-14 22:10:46.095 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-14 22:10:46.095 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-14 22:10:46.104 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 8.6268ms
2025-10-14 22:10:46.121 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 25.8589ms
2025-10-14 22:10:46.172 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-14 22:10:46.381 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 208.7078ms
2025-10-14 22:10:52.864 +03:00 [INF] Starting web host...
2025-10-14 22:10:53.789 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 22:10:53.819 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-10-14 22:10:53.886 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 22:10:53.892 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-14 22:10:53.896 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-14 22:10:53.952 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-14 22:10:53.970 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 22:10:53.974 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-14 22:10:53.980 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-14 22:10:53.992 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-10-14 22:10:53.996 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-14 22:10:54.155 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-14 22:10:54.162 +03:00 [INF] Master database initialized successfully
2025-10-14 22:10:55.556 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-14 22:10:55.655 +03:00 [INF] Now listening on: https://localhost:7168
2025-10-14 22:10:55.657 +03:00 [INF] Now listening on: http://localhost:5004
2025-10-14 22:10:55.735 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-14 22:10:55.737 +03:00 [INF] Hosting environment: Development
2025-10-14 22:10:55.738 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-10-14 22:10:55.828 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-14 22:10:56.004 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 176.9199ms
2025-10-14 22:10:56.007 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-14 22:10:56.007 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-14 22:10:56.020 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 13.5368ms
2025-10-14 22:10:56.038 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 31.4981ms
2025-10-14 22:10:56.083 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-14 22:10:56.219 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 136.2383ms
2025-10-14 22:10:59.068 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7168/api/requisitions/{5f3a01e1-635d-40db-2d90-08de0b170b68}/items/{7543b7c0-336c-4e81-f73f-08de0b54420b} - application/json 111
2025-10-14 22:10:59.084 +03:00 [INF] Request started
2025-10-14 22:10:59.087 +03:00 [INF] === Incoming Request ===
2025-10-14 22:10:59.088 +03:00 [INF] Path: /api/requisitions/%7B5f3a01e1-635d-40db-2d90-08de0b170b68%7D/items/%7B7543b7c0-336c-4e81-f73f-08de0b54420b%7D
2025-10-14 22:10:59.089 +03:00 [INF] Method: PUT
2025-10-14 22:10:59.090 +03:00 [INF] === Headers ===
2025-10-14 22:10:59.092 +03:00 [INF] Accept: ["*/*"]
2025-10-14 22:10:59.096 +03:00 [INF] Connection: ["keep-alive"]
2025-10-14 22:10:59.098 +03:00 [INF] Host: ["localhost:7168"]
2025-10-14 22:10:59.099 +03:00 [INF] User-Agent: ["PostmanRuntime/7.48.0"]
2025-10-14 22:10:59.101 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-14 22:10:59.102 +03:00 [INF] Content-Type: ["application/json"]
2025-10-14 22:10:59.103 +03:00 [INF] Content-Length: ["111"]
2025-10-14 22:10:59.105 +03:00 [INF] X-Tenant-ID: ["7e4a49eb-2e0e-4be8-8d60-c13d7db0f018"]
2025-10-14 22:10:59.106 +03:00 [INF] Postman-Token: ["f1d66356-abc1-4521-8fc8-6c75055969ec"]
2025-10-14 22:10:59.111 +03:00 [INF] üîç TenantService returned: '7e4a49eb-2e0e-4be8-8d60-c13d7db0f018'
2025-10-14 22:10:59.113 +03:00 [INF] ‚úÖ Processing request for tenant: 7e4a49eb-2e0e-4be8-8d60-c13d7db0f018
2025-10-14 22:10:59.115 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController.UpdateRequisitionItem (ModularERP)'
2025-10-14 22:10:59.129 +03:00 [INF] Route matched with {action = "UpdateRequisitionItem", controller = "RequisitionItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateRequisitionItem(System.Guid, System.Guid, ModularERP.Modules.Inventory.Features.Requisitions.DTO.DTO_Requisition.UpdateRequisitionItemDTO) on controller ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController (ModularERP).
2025-10-14 22:10:59.136 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-14 22:10:59.161 +03:00 [INF] PUT request received to update item "7543b7c0-336c-4e81-f73f-08de0b54420b" in requisition "5f3a01e1-635d-40db-2d90-08de0b170b68"
2025-10-14 22:10:59.224 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-10-14 22:10:59.532 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-14 22:10:59.537 +03:00 [INF] Updating item "7543b7c0-336c-4e81-f73f-08de0b54420b" for requisition "5f3a01e1-635d-40db-2d90-08de0b170b68"
2025-10-14 22:10:59.819 +03:00 [ERR] Error updating item "7543b7c0-336c-4e81-f73f-08de0b54420b" for requisition "5f3a01e1-635d-40db-2d90-08de0b170b68"
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> System.ArgumentException: Parameter value '2504554124000000.0000' is out of range.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at ModularERP.Modules.Finance.Finance.Infrastructure.Data.FinanceDbContext.SaveChangesAsync(CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Finance\Finance.Infrastructure\Data\FinanceDbContext.cs:line 1820
   at ModularERP.SharedKernel.Repository.GeneralRepository`1.SaveChanges() in E:\ModelerERP\ModularERP\ModularERP\Shared\Repository\GeneralRepository.cs:line 157
   at ModularERP.Modules.Inventory.Features.Requisitions.Handlers.Handlers_RequisitionItem.UpdateRequisitionItemHandler.Handle(UpdateRequisitionItemCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Requisitions\Handlers\Handlers_RequisitionItem\UpdateRequisitionItemHandler.cs:line 130
2025-10-14 22:10:59.855 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController.UpdateRequisitionItem (ModularERP) in 719.4768ms
2025-10-14 22:10:59.858 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController.UpdateRequisitionItem (ModularERP)'
2025-10-14 22:10:59.860 +03:00 [ERR] Unexpected error occurred
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> System.ArgumentException: Parameter value '2504554124000000.0000' is out of range.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at ModularERP.Modules.Finance.Finance.Infrastructure.Data.FinanceDbContext.SaveChangesAsync(CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Finance\Finance.Infrastructure\Data\FinanceDbContext.cs:line 1820
   at ModularERP.SharedKernel.Repository.GeneralRepository`1.SaveChanges() in E:\ModelerERP\ModularERP\ModularERP\Shared\Repository\GeneralRepository.cs:line 157
   at ModularERP.Modules.Inventory.Features.Requisitions.Handlers.Handlers_RequisitionItem.UpdateRequisitionItemHandler.Handle(UpdateRequisitionItemCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Requisitions\Handlers\Handlers_RequisitionItem\UpdateRequisitionItemHandler.cs:line 130
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController.UpdateRequisitionItem(Guid requisitionId, Guid itemId, UpdateRequisitionItemDTO dto) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Requisitions\Controllers\RequisitionItemsController.cs:line 121
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 317
--- End of stack trace from previous location ---
   at ModularERP.Program.<>c.<<Main>b__0_5>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 270
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-10-14 22:10:59.894 +03:00 [INF] Error response sent with status code 500
2025-10-14 22:10:59.900 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7168/api/requisitions/{5f3a01e1-635d-40db-2d90-08de0b170b68}/items/{7543b7c0-336c-4e81-f73f-08de0b54420b} - 500 null application/json; charset=utf-8 832.2331ms
2025-10-14 22:11:37.969 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7168/api/requisitions/{5f3a01e1-635d-40db-2d90-08de0b170b68}/items/{7543b7c0-336c-4e81-f73f-08de0b54420b} - application/json 104
2025-10-14 22:11:37.979 +03:00 [INF] Request started
2025-10-14 22:11:37.980 +03:00 [INF] === Incoming Request ===
2025-10-14 22:11:37.983 +03:00 [INF] Path: /api/requisitions/%7B5f3a01e1-635d-40db-2d90-08de0b170b68%7D/items/%7B7543b7c0-336c-4e81-f73f-08de0b54420b%7D
2025-10-14 22:11:37.984 +03:00 [INF] Method: PUT
2025-10-14 22:11:37.985 +03:00 [INF] === Headers ===
2025-10-14 22:11:37.987 +03:00 [INF] Accept: ["*/*"]
2025-10-14 22:11:37.989 +03:00 [INF] Connection: ["keep-alive"]
2025-10-14 22:11:37.991 +03:00 [INF] Host: ["localhost:7168"]
2025-10-14 22:11:37.992 +03:00 [INF] User-Agent: ["PostmanRuntime/7.48.0"]
2025-10-14 22:11:37.994 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-14 22:11:37.997 +03:00 [INF] Content-Type: ["application/json"]
2025-10-14 22:11:38.001 +03:00 [INF] Content-Length: ["104"]
2025-10-14 22:11:38.003 +03:00 [INF] X-Tenant-ID: ["7e4a49eb-2e0e-4be8-8d60-c13d7db0f018"]
2025-10-14 22:11:38.005 +03:00 [INF] Postman-Token: ["4bbd4d6f-f8ef-42a6-bf3d-ec5af48ffc50"]
2025-10-14 22:11:38.009 +03:00 [INF] üîç TenantService returned: '7e4a49eb-2e0e-4be8-8d60-c13d7db0f018'
2025-10-14 22:11:38.010 +03:00 [INF] ‚úÖ Processing request for tenant: 7e4a49eb-2e0e-4be8-8d60-c13d7db0f018
2025-10-14 22:11:38.011 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController.UpdateRequisitionItem (ModularERP)'
2025-10-14 22:11:38.013 +03:00 [INF] Route matched with {action = "UpdateRequisitionItem", controller = "RequisitionItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateRequisitionItem(System.Guid, System.Guid, ModularERP.Modules.Inventory.Features.Requisitions.DTO.DTO_Requisition.UpdateRequisitionItemDTO) on controller ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController (ModularERP).
2025-10-14 22:11:38.021 +03:00 [INF] PUT request received to update item "7543b7c0-336c-4e81-f73f-08de0b54420b" in requisition "5f3a01e1-635d-40db-2d90-08de0b170b68"
2025-10-14 22:11:38.026 +03:00 [INF] Updating item "7543b7c0-336c-4e81-f73f-08de0b54420b" for requisition "5f3a01e1-635d-40db-2d90-08de0b170b68"
2025-10-14 22:11:38.059 +03:00 [INF] Item "7543b7c0-336c-4e81-f73f-08de0b54420b" updated successfully
2025-10-14 22:11:38.157 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.Requisitions.DTO.DTO_Requisition.RequisitionItemDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-14 22:11:38.170 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController.UpdateRequisitionItem (ModularERP) in 150.828ms
2025-10-14 22:11:38.172 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionItemsController.UpdateRequisitionItem (ModularERP)'
2025-10-14 22:11:38.174 +03:00 [INF] Request completed successfully with status code 200
2025-10-14 22:11:38.176 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7168/api/requisitions/{5f3a01e1-635d-40db-2d90-08de0b170b68}/items/{7543b7c0-336c-4e81-f73f-08de0b54420b} - 200 null application/json; charset=utf-8 207.3626ms
