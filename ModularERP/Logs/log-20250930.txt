2025-09-30 00:12:46.426 +03:00 [INF] Starting web host...
2025-09-30 00:12:49.239 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-30 00:12:49.347 +03:00 [INF] Executed DbCommand (92ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-09-30 00:12:49.432 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-30 00:12:49.437 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-30 00:12:49.454 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-09-30 00:12:49.509 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-09-30 00:12:49.525 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-30 00:12:49.530 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-09-30 00:12:49.537 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-09-30 00:12:49.549 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-09-30 00:12:49.555 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-09-30 00:12:49.715 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-30 00:12:49.722 +03:00 [INF] Master database initialized successfully
2025-09-30 00:12:51.235 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-30 00:12:51.375 +03:00 [INF] Now listening on: https://localhost:7168
2025-09-30 00:12:51.377 +03:00 [INF] Now listening on: http://localhost:5004
2025-09-30 00:12:51.465 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-30 00:12:51.467 +03:00 [INF] Hosting environment: Development
2025-09-30 00:12:51.468 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-09-30 00:12:51.503 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-09-30 00:12:51.657 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 156.281ms
2025-09-30 00:12:51.676 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-09-30 00:12:51.676 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-09-30 00:12:51.687 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 10.6675ms
2025-09-30 00:12:51.712 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 35.109ms
2025-09-30 00:12:51.891 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-09-30 00:12:51.955 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 64.1337ms
2025-09-30 00:13:20.487 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-09-30 00:13:20.499 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 12.3573ms
2025-09-30 00:13:20.508 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-09-30 00:13:20.508 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-09-30 00:13:20.513 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 4.6475ms
2025-09-30 00:13:20.526 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 17.0928ms
2025-09-30 00:13:20.600 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-09-30 00:13:20.674 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 74.1129ms
2025-09-30 00:18:34.697 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/Warehouses?X-Tenant-ID=cd60fd4f-1494-469e-ae6b-7ad12ce5ca1b - null null
2025-09-30 00:18:34.718 +03:00 [INF] Request started
2025-09-30 00:18:34.755 +03:00 [INF] Request completed successfully with status code 400
2025-09-30 00:18:34.759 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/Warehouses?X-Tenant-ID=cd60fd4f-1494-469e-ae6b-7ad12ce5ca1b - 400 null application/json 63.0448ms
2025-09-30 00:18:49.553 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/Warehouses?= - null null
2025-09-30 00:18:49.558 +03:00 [INF] Request started
2025-09-30 00:18:49.561 +03:00 [INF] Processing request for tenant: cd60fd4f-1494-469e-ae6b-7ad12ce5ca1b
2025-09-30 00:18:49.564 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.GetWarehouses (ModularERP)'
2025-09-30 00:18:49.585 +03:00 [INF] Route matched with {action = "GetWarehouses", controller = "Warehouses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Warehouses.Validators.PagedResult`1[ModularERP.Modules.Inventory.Features.Warehouses.DTO.WarehouseListDto]]]] GetWarehouses(System.Nullable`1[System.Guid], System.String, System.Nullable`1[System.Boolean], System.String, Int32, Int32) on controller ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController (ModularERP).
2025-09-30 00:18:49.591 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-30 00:18:49.680 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-09-30 00:18:49.968 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-30 00:18:49.971 +03:00 [INF] Getting warehouses with filters: CompanyId=null, Status=null, IsPrimary=null, SearchTerm=null
2025-09-30 00:18:50.065 +03:00 [INF] Retrieved 0 warehouses out of 0
2025-09-30 00:18:50.072 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.Warehouses.Validators.PagedResult`1[[ModularERP.Modules.Inventory.Features.Warehouses.DTO.WarehouseListDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-30 00:18:50.087 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.GetWarehouses (ModularERP) in 496.4719ms
2025-09-30 00:18:50.090 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.GetWarehouses (ModularERP)'
2025-09-30 00:18:50.092 +03:00 [INF] Request completed successfully with status code 200
2025-09-30 00:18:50.097 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/Warehouses?= - 200 null application/json; charset=utf-8 544.2132ms
2025-09-30 00:21:35.944 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/Companies - application/json 58
2025-09-30 00:21:35.950 +03:00 [INF] Request started
2025-09-30 00:21:35.952 +03:00 [INF] Processing request for tenant: cd60fd4f-1494-469e-ae6b-7ad12ce5ca1b
2025-09-30 00:21:35.953 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Finance.Features.Companys.Controllers.CompaniesController.CreateCompany (ModularERP)'
2025-09-30 00:21:35.959 +03:00 [INF] Route matched with {action = "CreateCompany", controller = "Companies"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Finance.Features.Companys.DTO.CompanyResponseDto]]] CreateCompany(ModularERP.Modules.Finance.Features.Companys.DTO.CreateCompanyDto) on controller ModularERP.Modules.Finance.Features.Companys.Controllers.CompaniesController (ModularERP).
2025-09-30 00:21:36.051 +03:00 [INF] Creating new company with name: ITechProMaxFax
2025-09-30 00:21:36.215 +03:00 [INF] Successfully created company with ID: "c8792c75-9cae-4039-8702-e480a2c083a2"
2025-09-30 00:21:36.224 +03:00 [INF] Executing CreatedAtActionResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Finance.Features.Companys.DTO.CompanyResponseDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-30 00:21:36.245 +03:00 [INF] Executed action ModularERP.Modules.Finance.Features.Companys.Controllers.CompaniesController.CreateCompany (ModularERP) in 283.4064ms
2025-09-30 00:21:36.248 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Finance.Features.Companys.Controllers.CompaniesController.CreateCompany (ModularERP)'
2025-09-30 00:21:36.249 +03:00 [INF] Request completed successfully with status code 201
2025-09-30 00:21:36.251 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/Companies - 201 null application/json; charset=utf-8 306.2591ms
2025-09-30 00:22:47.319 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/Warehouses - application/json 164
2025-09-30 00:22:47.323 +03:00 [INF] Request started
2025-09-30 00:22:47.324 +03:00 [INF] Processing request for tenant: cd60fd4f-1494-469e-ae6b-7ad12ce5ca1b
2025-09-30 00:22:47.325 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.CreateWarehouse (ModularERP)'
2025-09-30 00:22:47.329 +03:00 [INF] Route matched with {action = "CreateWarehouse", controller = "Warehouses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Warehouses.DTO.WarehouseDto]]] CreateWarehouse(ModularERP.Modules.Inventory.Features.Warehouses.DTO.CreateWarehouseDto) on controller ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController (ModularERP).
2025-09-30 00:22:47.350 +03:00 [INF] Creating new warehouse: anything for CompanyId: "c8792c75-9cae-4039-8702-e480a2c083a2"
2025-09-30 00:22:47.398 +03:00 [INF] Warehouse created successfully: "dce49a8a-55e4-418c-a590-2732ca9287ad"
2025-09-30 00:22:47.403 +03:00 [ERR] Error creating warehouse
AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
Warehouse -> WarehouseDto
ModularERP.Modules.Inventory.Features.Warehouses.Models.Warehouse -> ModularERP.Modules.Inventory.Features.Warehouses.DTO.WarehouseDto
   at lambda_method451(Closure, Object, WarehouseDto, ResolutionContext)
   at ModularERP.Modules.Inventory.Features.Warehouses.Handlers.CreateWarehouseCommandHandler.Handle(CreateWarehouseCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Warehouses\Handlers\CreateWarehouseCommandHandler.cs:line 72
   at ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.CreateWarehouse(CreateWarehouseDto dto) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Warehouses\Controllers\WarehousesController.cs:line 129
2025-09-30 00:22:47.444 +03:00 [INF] Executing ObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.Warehouses.DTO.WarehouseDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-30 00:22:47.447 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.CreateWarehouse (ModularERP) in 114.1338ms
2025-09-30 00:22:47.449 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.CreateWarehouse (ModularERP)'
2025-09-30 00:22:47.452 +03:00 [INF] Request completed successfully with status code 500
2025-09-30 00:22:47.453 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/Warehouses - 500 null application/json; charset=utf-8 133.9018ms
2025-09-30 00:24:13.693 +03:00 [INF] Starting web host...
2025-09-30 00:24:14.470 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-30 00:24:14.531 +03:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-09-30 00:24:14.597 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-30 00:24:14.603 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-30 00:24:14.622 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-09-30 00:24:14.676 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-09-30 00:24:14.692 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-30 00:24:14.698 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-09-30 00:24:14.706 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-09-30 00:24:14.716 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-09-30 00:24:14.723 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-09-30 00:24:14.880 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-30 00:24:14.887 +03:00 [INF] Master database initialized successfully
2025-09-30 00:24:16.237 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-30 00:24:16.341 +03:00 [INF] Now listening on: https://localhost:7168
2025-09-30 00:24:16.343 +03:00 [INF] Now listening on: http://localhost:5004
2025-09-30 00:24:16.412 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-30 00:24:16.414 +03:00 [INF] Hosting environment: Development
2025-09-30 00:24:16.416 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-09-30 00:24:16.604 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-09-30 00:24:16.725 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 121.6294ms
2025-09-30 00:24:16.872 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-09-30 00:24:16.872 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-09-30 00:24:16.878 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 5.6393ms
2025-09-30 00:24:16.899 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 26.6709ms
2025-09-30 00:24:16.959 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-09-30 00:24:17.014 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 54.5059ms
2025-09-30 00:24:17.205 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/Warehouses - application/json 164
2025-09-30 00:24:17.224 +03:00 [INF] Request started
2025-09-30 00:24:17.228 +03:00 [INF] Processing request for tenant: cd60fd4f-1494-469e-ae6b-7ad12ce5ca1b
2025-09-30 00:24:17.231 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.CreateWarehouse (ModularERP)'
2025-09-30 00:24:17.252 +03:00 [INF] Route matched with {action = "CreateWarehouse", controller = "Warehouses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Warehouses.DTO.WarehouseDto]]] CreateWarehouse(ModularERP.Modules.Inventory.Features.Warehouses.DTO.CreateWarehouseDto) on controller ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController (ModularERP).
2025-09-30 00:24:17.258 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-30 00:24:17.362 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-09-30 00:24:17.735 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-30 00:24:17.740 +03:00 [INF] Creating new warehouse: anything for CompanyId: "c8792c75-9cae-4039-8702-e480a2c083a2"
2025-09-30 00:24:17.825 +03:00 [INF] Warehouse created successfully: "cb3ca581-f890-4efe-a87b-5814ae67a4c4"
2025-09-30 00:24:17.862 +03:00 [INF] Executing CreatedAtActionResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.Warehouses.DTO.WarehouseDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-30 00:24:17.889 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.CreateWarehouse (ModularERP) in 631.1267ms
2025-09-30 00:24:17.892 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.CreateWarehouse (ModularERP)'
2025-09-30 00:24:17.894 +03:00 [INF] Request completed successfully with status code 201
2025-09-30 00:24:17.898 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/Warehouses - 201 null application/json; charset=utf-8 693.7801ms
2025-09-30 00:25:26.733 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/Warehouses?= - null null
2025-09-30 00:25:26.739 +03:00 [INF] Request started
2025-09-30 00:25:26.742 +03:00 [INF] Processing request for tenant: cd60fd4f-1494-469e-ae6b-7ad12ce5ca1b
2025-09-30 00:25:26.743 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.GetWarehouses (ModularERP)'
2025-09-30 00:25:26.750 +03:00 [INF] Route matched with {action = "GetWarehouses", controller = "Warehouses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Warehouses.Validators.PagedResult`1[ModularERP.Modules.Inventory.Features.Warehouses.DTO.WarehouseListDto]]]] GetWarehouses(System.Nullable`1[System.Guid], System.String, System.Nullable`1[System.Boolean], System.String, Int32, Int32) on controller ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController (ModularERP).
2025-09-30 00:25:26.799 +03:00 [INF] Getting warehouses with filters: CompanyId=null, Status=null, IsPrimary=null, SearchTerm=null
2025-09-30 00:25:26.839 +03:00 [INF] Retrieved 0 warehouses out of 0
2025-09-30 00:25:26.842 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.Warehouses.Validators.PagedResult`1[[ModularERP.Modules.Inventory.Features.Warehouses.DTO.WarehouseListDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-30 00:25:26.848 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.GetWarehouses (ModularERP) in 93.974ms
2025-09-30 00:25:26.851 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.GetWarehouses (ModularERP)'
2025-09-30 00:25:26.852 +03:00 [INF] Request completed successfully with status code 200
2025-09-30 00:25:26.853 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/Warehouses?= - 200 null application/json; charset=utf-8 120.4258ms
2025-09-30 00:29:09.633 +03:00 [INF] Starting web host...
2025-09-30 00:29:10.413 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-30 00:29:10.475 +03:00 [INF] Executed DbCommand (41ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-09-30 00:29:10.544 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-30 00:29:10.549 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-30 00:29:10.560 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-09-30 00:29:10.616 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-09-30 00:29:10.641 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-30 00:29:10.646 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-09-30 00:29:10.655 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-09-30 00:29:10.666 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-09-30 00:29:10.672 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-09-30 00:29:10.835 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-30 00:29:10.842 +03:00 [INF] Master database initialized successfully
2025-09-30 00:29:12.095 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-30 00:29:12.189 +03:00 [INF] Now listening on: https://localhost:7168
2025-09-30 00:29:12.191 +03:00 [INF] Now listening on: http://localhost:5004
2025-09-30 00:29:12.248 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-30 00:29:12.250 +03:00 [INF] Hosting environment: Development
2025-09-30 00:29:12.252 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-09-30 00:29:12.581 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-09-30 00:29:12.693 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 113.093ms
2025-09-30 00:29:12.696 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-09-30 00:29:12.696 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-09-30 00:29:12.709 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 12.4131ms
2025-09-30 00:29:12.736 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 39.9726ms
2025-09-30 00:29:12.828 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-09-30 00:29:12.887 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 58.597ms
2025-09-30 00:29:13.666 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/Warehouses - application/json 164
2025-09-30 00:29:13.718 +03:00 [INF] Request started
2025-09-30 00:29:13.724 +03:00 [INF] Processing request for tenant: cd60fd4f-1494-469e-ae6b-7ad12ce5ca1b
2025-09-30 00:29:13.726 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.CreateWarehouse (ModularERP)'
2025-09-30 00:29:13.771 +03:00 [INF] Route matched with {action = "CreateWarehouse", controller = "Warehouses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Warehouses.DTO.WarehouseDto]]] CreateWarehouse(ModularERP.Modules.Inventory.Features.Warehouses.DTO.CreateWarehouseDto) on controller ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController (ModularERP).
2025-09-30 00:29:13.777 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-30 00:29:13.908 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-09-30 00:29:14.422 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-30 00:29:14.427 +03:00 [INF] Creating new warehouse: anything for CompanyId: "c8792c75-9cae-4039-8702-e480a2c083a2"
2025-09-30 00:29:14.606 +03:00 [INF] Warehouse created successfully: "28558ced-8c3a-45b9-b9c7-dff696302273"
2025-09-30 00:29:14.661 +03:00 [INF] Executing CreatedAtActionResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.Warehouses.DTO.WarehouseDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-30 00:29:14.689 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.CreateWarehouse (ModularERP) in 911.4038ms
2025-09-30 00:29:14.692 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.CreateWarehouse (ModularERP)'
2025-09-30 00:29:14.694 +03:00 [INF] Request completed successfully with status code 201
2025-09-30 00:29:14.698 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/Warehouses - 201 null application/json; charset=utf-8 1032.3188ms
2025-09-30 00:29:26.707 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/Warehouses?= - null null
2025-09-30 00:29:26.712 +03:00 [INF] Request started
2025-09-30 00:29:26.715 +03:00 [INF] Processing request for tenant: cd60fd4f-1494-469e-ae6b-7ad12ce5ca1b
2025-09-30 00:29:26.717 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.GetWarehouses (ModularERP)'
2025-09-30 00:29:26.723 +03:00 [INF] Route matched with {action = "GetWarehouses", controller = "Warehouses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Warehouses.Validators.PagedResult`1[ModularERP.Modules.Inventory.Features.Warehouses.DTO.WarehouseListDto]]]] GetWarehouses(System.Nullable`1[System.Guid], System.String, System.Nullable`1[System.Boolean], System.String, Int32, Int32) on controller ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController (ModularERP).
2025-09-30 00:29:26.773 +03:00 [INF] Getting warehouses with filters: CompanyId=null, Status=null, IsPrimary=null, SearchTerm=null
2025-09-30 00:29:26.828 +03:00 [INF] Retrieved 1 warehouses out of 1
2025-09-30 00:29:26.832 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.Warehouses.Validators.PagedResult`1[[ModularERP.Modules.Inventory.Features.Warehouses.DTO.WarehouseListDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-30 00:29:26.839 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.GetWarehouses (ModularERP) in 112.3199ms
2025-09-30 00:29:26.842 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.GetWarehouses (ModularERP)'
2025-09-30 00:29:26.843 +03:00 [INF] Request completed successfully with status code 200
2025-09-30 00:29:26.845 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/Warehouses?= - 200 null application/json; charset=utf-8 137.8733ms
2025-09-30 00:30:22.078 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/Warehouses/{28558ced-8c3a-45b9-b9c7-dff696302273} - null null
2025-09-30 00:30:22.085 +03:00 [INF] Request started
2025-09-30 00:30:22.109 +03:00 [INF] Request completed successfully with status code 400
2025-09-30 00:30:22.112 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/Warehouses/{28558ced-8c3a-45b9-b9c7-dff696302273} - 400 null application/json 33.4871ms
2025-09-30 00:30:34.754 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/Warehouses/{28558ced-8c3a-45b9-b9c7-dff696302273} - null null
2025-09-30 00:30:34.757 +03:00 [INF] Request started
2025-09-30 00:30:34.759 +03:00 [INF] Processing request for tenant: cd60fd4f-1494-469e-ae6b-7ad12ce5ca1b
2025-09-30 00:30:34.760 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.GetWarehouse (ModularERP)'
2025-09-30 00:30:34.764 +03:00 [INF] Route matched with {action = "GetWarehouse", controller = "Warehouses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Warehouses.DTO.WarehouseDto]]] GetWarehouse(System.Guid) on controller ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController (ModularERP).
2025-09-30 00:30:34.770 +03:00 [INF] Getting warehouse by ID: "28558ced-8c3a-45b9-b9c7-dff696302273"
2025-09-30 00:30:34.792 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.Warehouses.DTO.WarehouseDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-30 00:30:34.797 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.GetWarehouse (ModularERP) in 30.0345ms
2025-09-30 00:30:34.800 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.GetWarehouse (ModularERP)'
2025-09-30 00:30:34.801 +03:00 [INF] Request completed successfully with status code 200
2025-09-30 00:30:34.802 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/Warehouses/{28558ced-8c3a-45b9-b9c7-dff696302273} - 200 null application/json; charset=utf-8 47.9792ms
2025-09-30 07:43:59.153 +03:00 [INF] Starting web host...
2025-09-30 07:44:02.899 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-30 07:44:02.945 +03:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-09-30 07:44:03.106 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-30 07:44:03.112 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-30 07:44:03.119 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-09-30 07:44:03.220 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-09-30 07:44:03.249 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-30 07:44:03.252 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-09-30 07:44:03.262 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-09-30 07:44:03.278 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-09-30 07:44:03.284 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-09-30 07:44:03.647 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-30 07:44:03.665 +03:00 [INF] Master database initialized successfully
2025-09-30 07:44:05.483 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-30 07:44:05.748 +03:00 [INF] Now listening on: https://localhost:7168
2025-09-30 07:44:05.750 +03:00 [INF] Now listening on: http://localhost:5004
2025-09-30 07:44:05.854 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-30 07:44:05.855 +03:00 [INF] Hosting environment: Development
2025-09-30 07:44:05.857 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-09-30 07:44:06.447 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-09-30 07:44:06.747 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 302.6459ms
2025-09-30 07:44:06.771 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-09-30 07:44:06.785 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-09-30 07:44:06.797 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 11.785ms
2025-09-30 07:44:06.841 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 69.8245ms
2025-09-30 07:44:06.956 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-09-30 07:44:07.038 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 82.1161ms
2025-09-30 07:44:07.587 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/Warehouses?= - null null
2025-09-30 07:44:07.612 +03:00 [INF] Request started
2025-09-30 07:44:07.617 +03:00 [INF] Processing request for tenant: cd60fd4f-1494-469e-ae6b-7ad12ce5ca1b
2025-09-30 07:44:07.620 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.GetWarehouses (ModularERP)'
2025-09-30 07:44:07.642 +03:00 [INF] Route matched with {action = "GetWarehouses", controller = "Warehouses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Warehouses.Validators.PagedResult`1[ModularERP.Modules.Inventory.Features.Warehouses.DTO.WarehouseListDto]]]] GetWarehouses(System.Nullable`1[System.Guid], System.String, System.Nullable`1[System.Boolean], System.String, Int32, Int32) on controller ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController (ModularERP).
2025-09-30 07:44:07.648 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-30 07:44:07.751 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-09-30 07:44:08.025 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-30 07:44:08.029 +03:00 [INF] Getting warehouses with filters: CompanyId=null, Status=null, IsPrimary=null, SearchTerm=null, PageNumber=1, PageSize=10
2025-09-30 07:44:08.169 +03:00 [INF] Retrieved 1 warehouses out of 1 (Page 1/1)
2025-09-30 07:44:08.229 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.Warehouses.Validators.PagedResult`1[[ModularERP.Modules.Inventory.Features.Warehouses.DTO.WarehouseListDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-30 07:44:08.249 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.GetWarehouses (ModularERP) in 602.1251ms
2025-09-30 07:44:08.252 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.GetWarehouses (ModularERP)'
2025-09-30 07:44:08.254 +03:00 [INF] Request completed successfully with status code 200
2025-09-30 07:44:08.258 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/Warehouses?= - 200 null application/json; charset=utf-8 671.2056ms
2025-09-30 07:44:14.236 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/Warehouses/{28558ced-8c3a-45b9-b9c7-dff696302273} - null null
2025-09-30 07:44:14.244 +03:00 [INF] Request started
2025-09-30 07:44:14.247 +03:00 [INF] Processing request for tenant: cd60fd4f-1494-469e-ae6b-7ad12ce5ca1b
2025-09-30 07:44:14.249 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.GetWarehouse (ModularERP)'
2025-09-30 07:44:14.255 +03:00 [INF] Route matched with {action = "GetWarehouse", controller = "Warehouses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Warehouses.DTO.WarehouseDto]]] GetWarehouse(System.Guid) on controller ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController (ModularERP).
2025-09-30 07:44:14.308 +03:00 [INF] Getting warehouse by ID: "28558ced-8c3a-45b9-b9c7-dff696302273"
2025-09-30 07:44:14.319 +03:00 [INF] Warehouse retrieved successfully: "28558ced-8c3a-45b9-b9c7-dff696302273"
2025-09-30 07:44:14.323 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.Warehouses.DTO.WarehouseDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-30 07:44:14.328 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.GetWarehouse (ModularERP) in 67.6354ms
2025-09-30 07:44:14.330 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.GetWarehouse (ModularERP)'
2025-09-30 07:44:14.331 +03:00 [INF] Request completed successfully with status code 200
2025-09-30 07:44:14.333 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/Warehouses/{28558ced-8c3a-45b9-b9c7-dff696302273} - 200 null application/json; charset=utf-8 97.1974ms
2025-09-30 07:44:20.235 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/Warehouses - application/json 164
2025-09-30 07:44:20.246 +03:00 [INF] Request started
2025-09-30 07:44:20.248 +03:00 [INF] Processing request for tenant: cd60fd4f-1494-469e-ae6b-7ad12ce5ca1b
2025-09-30 07:44:20.249 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.CreateWarehouse (ModularERP)'
2025-09-30 07:44:20.253 +03:00 [INF] Route matched with {action = "CreateWarehouse", controller = "Warehouses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Warehouses.DTO.WarehouseDto]]] CreateWarehouse(ModularERP.Modules.Inventory.Features.Warehouses.DTO.CreateWarehouseDto) on controller ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController (ModularERP).
2025-09-30 07:44:20.315 +03:00 [INF] Creating new warehouse: anything for CompanyId: "c8792c75-9cae-4039-8702-e480a2c083a2"
2025-09-30 07:44:20.337 +03:00 [WRN] Warehouse name already exists: anything for CompanyId: "c8792c75-9cae-4039-8702-e480a2c083a2"
2025-09-30 07:44:20.341 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.CreateWarehouse (ModularERP) in 84.2431ms
2025-09-30 07:44:20.343 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.CreateWarehouse (ModularERP)'
2025-09-30 07:44:20.346 +03:00 [WRN] Business logic exception occurred: Warehouse name already exists in this company
ModularERP.Common.Exceptions.BusinessLogicException: Warehouse name already exists in this company
   at ModularERP.Modules.Inventory.Features.Warehouses.Handlers.CreateWarehouseCommandHandler.Handle(CreateWarehouseCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Warehouses\Handlers\CreateWarehouseCommandHandler.cs:line 42
   at ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.CreateWarehouse(CreateWarehouseDto dto) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Warehouses\Controllers\WarehousesController.cs:line 97
   at lambda_method282(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 249
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-09-30 07:44:20.385 +03:00 [INF] Error response sent with status code 400
2025-09-30 07:44:20.387 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/Warehouses - 400 null application/json; charset=utf-8 152.7117ms
2025-09-30 07:44:39.290 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/Warehouses - application/json 166
2025-09-30 07:44:39.294 +03:00 [INF] Request started
2025-09-30 07:44:39.295 +03:00 [INF] Processing request for tenant: cd60fd4f-1494-469e-ae6b-7ad12ce5ca1b
2025-09-30 07:44:39.296 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.CreateWarehouse (ModularERP)'
2025-09-30 07:44:39.298 +03:00 [INF] Route matched with {action = "CreateWarehouse", controller = "Warehouses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Warehouses.DTO.WarehouseDto]]] CreateWarehouse(ModularERP.Modules.Inventory.Features.Warehouses.DTO.CreateWarehouseDto) on controller ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController (ModularERP).
2025-09-30 07:44:39.302 +03:00 [INF] Creating new warehouse: Wahehouse1 for CompanyId: "c8792c75-9cae-4039-8702-e480a2c083a2"
2025-09-30 07:44:39.314 +03:00 [INF] Updating previous primary warehouse: "28558ced-8c3a-45b9-b9c7-dff696302273"
2025-09-30 07:44:39.455 +03:00 [INF] Warehouse created successfully: "b1e80f6f-f2ea-420d-a619-4520d965078f"
2025-09-30 07:44:39.458 +03:00 [INF] Executing CreatedAtActionResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.Warehouses.DTO.WarehouseDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-30 07:44:39.470 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.CreateWarehouse (ModularERP) in 169.3986ms
2025-09-30 07:44:39.473 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.CreateWarehouse (ModularERP)'
2025-09-30 07:44:39.475 +03:00 [INF] Request completed successfully with status code 201
2025-09-30 07:44:39.476 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/Warehouses - 201 null application/json; charset=utf-8 185.9385ms
2025-09-30 07:44:49.737 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/Warehouses?= - null null
2025-09-30 07:44:49.741 +03:00 [INF] Request started
2025-09-30 07:44:49.742 +03:00 [INF] Processing request for tenant: cd60fd4f-1494-469e-ae6b-7ad12ce5ca1b
2025-09-30 07:44:49.743 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.GetWarehouses (ModularERP)'
2025-09-30 07:44:49.745 +03:00 [INF] Route matched with {action = "GetWarehouses", controller = "Warehouses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Warehouses.Validators.PagedResult`1[ModularERP.Modules.Inventory.Features.Warehouses.DTO.WarehouseListDto]]]] GetWarehouses(System.Nullable`1[System.Guid], System.String, System.Nullable`1[System.Boolean], System.String, Int32, Int32) on controller ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController (ModularERP).
2025-09-30 07:44:49.749 +03:00 [INF] Getting warehouses with filters: CompanyId=null, Status=null, IsPrimary=null, SearchTerm=null, PageNumber=1, PageSize=10
2025-09-30 07:44:49.754 +03:00 [INF] Retrieved 2 warehouses out of 2 (Page 1/1)
2025-09-30 07:44:49.755 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.Warehouses.Validators.PagedResult`1[[ModularERP.Modules.Inventory.Features.Warehouses.DTO.WarehouseListDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-30 07:44:49.757 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.GetWarehouses (ModularERP) in 9.37ms
2025-09-30 07:44:49.759 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.GetWarehouses (ModularERP)'
2025-09-30 07:44:49.761 +03:00 [INF] Request completed successfully with status code 200
2025-09-30 07:44:49.763 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/Warehouses?= - 200 null application/json; charset=utf-8 25.5345ms
2025-09-30 07:45:43.780 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/Warehouses/{b1e80f6f-f2ea-420d-a619-4520d965078f} - null null
2025-09-30 07:45:43.785 +03:00 [INF] Request started
2025-09-30 07:45:43.786 +03:00 [INF] Processing request for tenant: cd60fd4f-1494-469e-ae6b-7ad12ce5ca1b
2025-09-30 07:45:43.786 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.GetWarehouse (ModularERP)'
2025-09-30 07:45:43.788 +03:00 [INF] Route matched with {action = "GetWarehouse", controller = "Warehouses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Warehouses.DTO.WarehouseDto]]] GetWarehouse(System.Guid) on controller ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController (ModularERP).
2025-09-30 07:45:43.792 +03:00 [INF] Getting warehouse by ID: "b1e80f6f-f2ea-420d-a619-4520d965078f"
2025-09-30 07:45:43.794 +03:00 [INF] Warehouse retrieved successfully: "b1e80f6f-f2ea-420d-a619-4520d965078f"
2025-09-30 07:45:43.795 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.Warehouses.DTO.WarehouseDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-30 07:45:43.797 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.GetWarehouse (ModularERP) in 7.1177ms
2025-09-30 07:45:43.798 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.GetWarehouse (ModularERP)'
2025-09-30 07:45:43.800 +03:00 [INF] Request completed successfully with status code 200
2025-09-30 07:45:43.801 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/Warehouses/{b1e80f6f-f2ea-420d-a619-4520d965078f} - 200 null application/json; charset=utf-8 21.2282ms
2025-09-30 08:03:03.163 +03:00 [INF] Starting web host...
2025-09-30 08:03:03.975 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-30 08:03:04.013 +03:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-09-30 08:03:04.086 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-30 08:03:04.091 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-30 08:03:04.094 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-09-30 08:03:04.147 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-09-30 08:03:04.162 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-30 08:03:04.166 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-09-30 08:03:04.172 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-09-30 08:03:04.182 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-09-30 08:03:04.186 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-09-30 08:03:04.338 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-30 08:03:04.346 +03:00 [INF] Master database initialized successfully
2025-09-30 08:03:05.739 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-30 08:03:05.841 +03:00 [INF] Now listening on: https://localhost:7168
2025-09-30 08:03:05.843 +03:00 [INF] Now listening on: http://localhost:5004
2025-09-30 08:03:05.905 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-30 08:03:05.907 +03:00 [INF] Hosting environment: Development
2025-09-30 08:03:05.908 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-09-30 08:03:06.005 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-09-30 08:03:06.121 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 116.7952ms
2025-09-30 08:03:06.247 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-09-30 08:03:06.247 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-09-30 08:03:06.255 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 8.0056ms
2025-09-30 08:03:06.269 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 22.5415ms
2025-09-30 08:03:06.314 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-09-30 08:03:06.386 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 72.5155ms
2025-09-30 08:07:18.210 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7168/api/Warehouses/{b1e80f6f-f2ea-420d-a619-4520d965078f} - application/json 121
2025-09-30 08:07:18.229 +03:00 [INF] Request started
2025-09-30 08:07:18.234 +03:00 [INF] Processing request for tenant: cd60fd4f-1494-469e-ae6b-7ad12ce5ca1b
2025-09-30 08:07:18.237 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.UpdateWarehouse (ModularERP)'
2025-09-30 08:07:18.257 +03:00 [INF] Route matched with {action = "UpdateWarehouse", controller = "Warehouses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Warehouses.DTO.WarehouseDto]]] UpdateWarehouse(System.Guid, ModularERP.Modules.Inventory.Features.Warehouses.DTO.UpdateWarehouseDto, System.Guid) on controller ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController (ModularERP).
2025-09-30 08:07:18.263 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-30 08:07:18.363 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-09-30 08:07:18.578 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-30 08:07:18.582 +03:00 [INF] Updating warehouse: "b1e80f6f-f2ea-420d-a619-4520d965078f"
2025-09-30 08:07:18.666 +03:00 [WRN] Warehouse not found: "b1e80f6f-f2ea-420d-a619-4520d965078f"
2025-09-30 08:07:18.672 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.UpdateWarehouse (ModularERP) in 408.7495ms
2025-09-30 08:07:18.675 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.UpdateWarehouse (ModularERP)'
2025-09-30 08:07:18.680 +03:00 [ERR] Application exception occurred: Warehouse with ID b1e80f6f-f2ea-420d-a619-4520d965078f not found
ModularERP.Common.Exceptions.NotFoundException: Warehouse with ID b1e80f6f-f2ea-420d-a619-4520d965078f not found
   at ModularERP.Modules.Inventory.Features.Warehouses.Handlers.UpdateWarehouseCommandHandler.Handle(UpdateWarehouseCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Warehouses\Handlers\UpdateWarehouseCommandHandler.cs:line 38
   at ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.UpdateWarehouse(Guid id, UpdateWarehouseDto dto, Guid companyId) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Warehouses\Controllers\WarehousesController.cs:line 140
   at lambda_method95(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 249
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-09-30 08:07:18.756 +03:00 [INF] Error response sent with status code 404
2025-09-30 08:07:18.761 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7168/api/Warehouses/{b1e80f6f-f2ea-420d-a619-4520d965078f} - 404 null application/json; charset=utf-8 550.9564ms
2025-09-30 08:07:59.123 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7168/api/Warehouses/{b1e80f6f-f2ea-420d-a619-4520d965078f} - application/json 121
2025-09-30 08:07:59.129 +03:00 [INF] Request started
2025-09-30 08:07:59.132 +03:00 [INF] Processing request for tenant: cd60fd4f-1494-469e-ae6b-7ad12ce5ca1b
2025-09-30 08:07:59.135 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.UpdateWarehouse (ModularERP)'
2025-09-30 08:07:59.137 +03:00 [INF] Route matched with {action = "UpdateWarehouse", controller = "Warehouses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Warehouses.DTO.WarehouseDto]]] UpdateWarehouse(System.Guid, ModularERP.Modules.Inventory.Features.Warehouses.DTO.UpdateWarehouseDto, System.Guid) on controller ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController (ModularERP).
2025-09-30 08:07:59.182 +03:00 [INF] Updating warehouse: "b1e80f6f-f2ea-420d-a619-4520d965078f"
2025-09-30 08:07:59.188 +03:00 [WRN] Warehouse not found: "b1e80f6f-f2ea-420d-a619-4520d965078f"
2025-09-30 08:07:59.190 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.UpdateWarehouse (ModularERP) in 50.5815ms
2025-09-30 08:07:59.192 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.UpdateWarehouse (ModularERP)'
2025-09-30 08:07:59.193 +03:00 [ERR] Application exception occurred: Warehouse with ID b1e80f6f-f2ea-420d-a619-4520d965078f not found
ModularERP.Common.Exceptions.NotFoundException: Warehouse with ID b1e80f6f-f2ea-420d-a619-4520d965078f not found
   at ModularERP.Modules.Inventory.Features.Warehouses.Handlers.UpdateWarehouseCommandHandler.Handle(UpdateWarehouseCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Warehouses\Handlers\UpdateWarehouseCommandHandler.cs:line 38
   at ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.UpdateWarehouse(Guid id, UpdateWarehouseDto dto, Guid companyId) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Warehouses\Controllers\WarehousesController.cs:line 140
   at lambda_method95(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 249
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-09-30 08:07:59.204 +03:00 [INF] Error response sent with status code 404
2025-09-30 08:07:59.205 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7168/api/Warehouses/{b1e80f6f-f2ea-420d-a619-4520d965078f} - 404 null application/json; charset=utf-8 81.8963ms
2025-09-30 08:12:29.375 +03:00 [INF] Starting web host...
2025-09-30 08:12:30.190 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-30 08:12:30.243 +03:00 [INF] Executed DbCommand (36ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-09-30 08:12:30.314 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-30 08:12:30.320 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-30 08:12:30.325 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-09-30 08:12:30.378 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-09-30 08:12:30.394 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-30 08:12:30.398 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-09-30 08:12:30.404 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-09-30 08:12:30.414 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-09-30 08:12:30.418 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-09-30 08:12:30.568 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-30 08:12:30.576 +03:00 [INF] Master database initialized successfully
2025-09-30 08:12:31.956 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-30 08:12:32.049 +03:00 [INF] Now listening on: https://localhost:7168
2025-09-30 08:12:32.051 +03:00 [INF] Now listening on: http://localhost:5004
2025-09-30 08:12:32.109 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-30 08:12:32.110 +03:00 [INF] Hosting environment: Development
2025-09-30 08:12:32.112 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-09-30 08:12:32.318 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-09-30 08:12:32.424 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 106.3496ms
2025-09-30 08:12:32.427 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-09-30 08:12:32.427 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-09-30 08:12:32.442 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 14.8573ms
2025-09-30 08:12:32.459 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 32.4255ms
2025-09-30 08:12:32.620 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-09-30 08:12:32.687 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 67.7069ms
2025-09-30 08:12:37.943 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7168/api/Warehouses/{b1e80f6f-f2ea-420d-a619-4520d965078f} - application/json 121
2025-09-30 08:12:37.960 +03:00 [INF] Request started
2025-09-30 08:12:37.967 +03:00 [INF] Processing request for tenant: cd60fd4f-1494-469e-ae6b-7ad12ce5ca1b
2025-09-30 08:12:37.970 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.UpdateWarehouse (ModularERP)'
2025-09-30 08:12:37.987 +03:00 [INF] Route matched with {action = "UpdateWarehouse", controller = "Warehouses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Warehouses.DTO.WarehouseDto]]] UpdateWarehouse(System.Guid, ModularERP.Modules.Inventory.Features.Warehouses.DTO.UpdateWarehouseDto, System.Guid) on controller ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController (ModularERP).
2025-09-30 08:12:37.994 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-30 08:12:38.084 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-09-30 08:12:38.316 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-30 08:12:38.320 +03:00 [INF] Starting UpdateWarehouse for Id: "b1e80f6f-f2ea-420d-a619-4520d965078f", CompanyId: "00000000-0000-0000-0000-000000000000"
2025-09-30 08:12:38.366 +03:00 [WRN] Warehouse not found with Id: "b1e80f6f-f2ea-420d-a619-4520d965078f" and CompanyId: "00000000-0000-0000-0000-000000000000"
2025-09-30 08:12:38.416 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.UpdateWarehouse (ModularERP) in 422.0513ms
2025-09-30 08:12:38.418 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.UpdateWarehouse (ModularERP)'
2025-09-30 08:12:38.420 +03:00 [ERR] Unexpected error occurred
System.InvalidOperationException: The EF.Property<T> method may only be used within Entity Framework LINQ queries.
   at Microsoft.EntityFrameworkCore.EF.Property[TProperty](Object instance, String propertyName)
   at ModularERP.Modules.Inventory.Features.Warehouses.Handlers.UpdateWarehouseCommandHandler.Handle(UpdateWarehouseCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Warehouses\Handlers\UpdateWarehouseCommandHandler.cs:line 51
   at ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.UpdateWarehouse(Guid id, UpdateWarehouseDto dto, Guid companyId) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Warehouses\Controllers\WarehousesController.cs:line 140
   at lambda_method95(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 249
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-09-30 08:12:38.464 +03:00 [INF] Error response sent with status code 500
2025-09-30 08:12:38.472 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7168/api/Warehouses/{b1e80f6f-f2ea-420d-a619-4520d965078f} - 500 null application/json; charset=utf-8 528.4494ms
2025-09-30 08:14:58.518 +03:00 [INF] Starting web host...
2025-09-30 08:14:59.385 +03:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-30 08:14:59.442 +03:00 [INF] Executed DbCommand (39ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-09-30 08:14:59.509 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-30 08:14:59.514 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-30 08:14:59.528 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-09-30 08:14:59.583 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-09-30 08:14:59.598 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-30 08:14:59.603 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-09-30 08:14:59.609 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-09-30 08:14:59.620 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-09-30 08:14:59.626 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-09-30 08:14:59.777 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-30 08:14:59.786 +03:00 [INF] Master database initialized successfully
2025-09-30 08:15:01.137 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-30 08:15:01.231 +03:00 [INF] Now listening on: https://localhost:7168
2025-09-30 08:15:01.233 +03:00 [INF] Now listening on: http://localhost:5004
2025-09-30 08:15:01.298 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-30 08:15:01.300 +03:00 [INF] Hosting environment: Development
2025-09-30 08:15:01.301 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-09-30 08:15:01.483 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-09-30 08:15:01.594 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 111.3291ms
2025-09-30 08:15:01.595 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-09-30 08:15:01.595 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-09-30 08:15:01.619 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 23.4353ms
2025-09-30 08:15:01.631 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 35.894ms
2025-09-30 08:15:01.786 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-09-30 08:15:01.854 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 67.8046ms
2025-09-30 08:15:02.644 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7168/api/Warehouses/{b1e80f6f-f2ea-420d-a619-4520d965078f} - application/json 121
2025-09-30 08:15:02.661 +03:00 [INF] Request started
2025-09-30 08:15:02.666 +03:00 [INF] Processing request for tenant: cd60fd4f-1494-469e-ae6b-7ad12ce5ca1b
2025-09-30 08:15:02.669 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.UpdateWarehouse (ModularERP)'
2025-09-30 08:15:02.684 +03:00 [INF] Route matched with {action = "UpdateWarehouse", controller = "Warehouses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Warehouses.DTO.WarehouseDto]]] UpdateWarehouse(System.Guid, ModularERP.Modules.Inventory.Features.Warehouses.DTO.UpdateWarehouseDto, System.Guid) on controller ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController (ModularERP).
2025-09-30 08:15:02.690 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-30 08:15:02.777 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-09-30 08:15:02.970 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-30 08:15:02.975 +03:00 [INF] Starting UpdateWarehouse for Id: "b1e80f6f-f2ea-420d-a619-4520d965078f", CompanyId: "00000000-0000-0000-0000-000000000000"
2025-09-30 08:15:03.013 +03:00 [WRN] Warehouse not found with Id: "b1e80f6f-f2ea-420d-a619-4520d965078f" and CompanyId: "00000000-0000-0000-0000-000000000000"
2025-09-30 08:15:03.016 +03:00 [ERR] Error updating warehouse "b1e80f6f-f2ea-420d-a619-4520d965078f" for CompanyId "00000000-0000-0000-0000-000000000000"
ModularERP.Common.Exceptions.NotFoundException: Warehouse with ID b1e80f6f-f2ea-420d-a619-4520d965078f not found
   at ModularERP.Modules.Inventory.Features.Warehouses.Handlers.UpdateWarehouseCommandHandler.Handle(UpdateWarehouseCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Warehouses\Handlers\UpdateWarehouseCommandHandler.cs:line 45
2025-09-30 08:15:03.039 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.UpdateWarehouse (ModularERP) in 349.0206ms
2025-09-30 08:15:03.044 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.UpdateWarehouse (ModularERP)'
2025-09-30 08:15:03.047 +03:00 [ERR] Application exception occurred: Warehouse with ID b1e80f6f-f2ea-420d-a619-4520d965078f not found
ModularERP.Common.Exceptions.NotFoundException: Warehouse with ID b1e80f6f-f2ea-420d-a619-4520d965078f not found
   at ModularERP.Modules.Inventory.Features.Warehouses.Handlers.UpdateWarehouseCommandHandler.Handle(UpdateWarehouseCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Warehouses\Handlers\UpdateWarehouseCommandHandler.cs:line 45
   at ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.UpdateWarehouse(Guid id, UpdateWarehouseDto dto, Guid companyId) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Warehouses\Controllers\WarehousesController.cs:line 140
   at lambda_method95(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 249
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-09-30 08:15:03.077 +03:00 [INF] Error response sent with status code 404
2025-09-30 08:15:03.084 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7168/api/Warehouses/{b1e80f6f-f2ea-420d-a619-4520d965078f} - 404 null application/json; charset=utf-8 439.2476ms
2025-09-30 08:20:18.113 +03:00 [INF] Starting web host...
2025-09-30 08:20:18.964 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-30 08:20:19.021 +03:00 [INF] Executed DbCommand (40ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-09-30 08:20:19.106 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-30 08:20:19.111 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-30 08:20:19.116 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-09-30 08:20:19.179 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-09-30 08:20:19.194 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-30 08:20:19.198 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-09-30 08:20:19.205 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-09-30 08:20:19.216 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-09-30 08:20:19.222 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-09-30 08:20:19.380 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-30 08:20:19.387 +03:00 [INF] Master database initialized successfully
2025-09-30 08:20:20.826 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-30 08:20:20.924 +03:00 [INF] Now listening on: https://localhost:7168
2025-09-30 08:20:20.926 +03:00 [INF] Now listening on: http://localhost:5004
2025-09-30 08:20:20.985 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-30 08:20:20.987 +03:00 [INF] Hosting environment: Development
2025-09-30 08:20:20.989 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-09-30 08:20:21.043 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-09-30 08:20:21.163 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 120.7544ms
2025-09-30 08:20:21.167 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-09-30 08:20:21.167 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-09-30 08:20:21.182 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 14.0729ms
2025-09-30 08:20:21.203 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 36.299ms
2025-09-30 08:20:21.379 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-09-30 08:20:21.474 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 95.0037ms
2025-09-30 08:20:21.617 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7168/api/Warehouses/{b1e80f6f-f2ea-420d-a619-4520d965078f} - application/json 121
2025-09-30 08:20:21.639 +03:00 [INF] Request started
2025-09-30 08:20:21.644 +03:00 [INF] Processing request for tenant: cd60fd4f-1494-469e-ae6b-7ad12ce5ca1b
2025-09-30 08:20:21.647 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.UpdateWarehouse (ModularERP)'
2025-09-30 08:20:21.663 +03:00 [INF] Route matched with {action = "UpdateWarehouse", controller = "Warehouses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Warehouses.DTO.WarehouseDto]]] UpdateWarehouse(System.Guid, ModularERP.Modules.Inventory.Features.Warehouses.DTO.UpdateWarehouseDto, System.Guid) on controller ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController (ModularERP).
2025-09-30 08:20:21.671 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-30 08:20:21.813 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-09-30 08:20:22.011 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-30 08:20:22.016 +03:00 [INF] Starting UpdateWarehouse for Id: "b1e80f6f-f2ea-420d-a619-4520d965078f", CompanyId: "00000000-0000-0000-0000-000000000000"
2025-09-30 08:20:22.052 +03:00 [WRN] Warehouse not found with Id: "b1e80f6f-f2ea-420d-a619-4520d965078f" and CompanyId: "00000000-0000-0000-0000-000000000000"
2025-09-30 08:20:22.056 +03:00 [ERR] Error updating warehouse "b1e80f6f-f2ea-420d-a619-4520d965078f" for CompanyId "00000000-0000-0000-0000-000000000000"
ModularERP.Common.Exceptions.NotFoundException: Warehouse with ID b1e80f6f-f2ea-420d-a619-4520d965078f not found
   at ModularERP.Modules.Inventory.Features.Warehouses.Handlers.UpdateWarehouseCommandHandler.Handle(UpdateWarehouseCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Warehouses\Handlers\UpdateWarehouseCommandHandler.cs:line 48
2025-09-30 08:20:22.078 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.UpdateWarehouse (ModularERP) in 407.1176ms
2025-09-30 08:20:22.080 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.UpdateWarehouse (ModularERP)'
2025-09-30 08:20:22.084 +03:00 [ERR] Application exception occurred: Warehouse with ID b1e80f6f-f2ea-420d-a619-4520d965078f not found
ModularERP.Common.Exceptions.NotFoundException: Warehouse with ID b1e80f6f-f2ea-420d-a619-4520d965078f not found
   at ModularERP.Modules.Inventory.Features.Warehouses.Handlers.UpdateWarehouseCommandHandler.Handle(UpdateWarehouseCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Warehouses\Handlers\UpdateWarehouseCommandHandler.cs:line 48
   at ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.UpdateWarehouse(Guid id, UpdateWarehouseDto dto, Guid companyId) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Warehouses\Controllers\WarehousesController.cs:line 140
   at lambda_method95(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 249
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-09-30 08:20:22.116 +03:00 [INF] Error response sent with status code 404
2025-09-30 08:20:22.124 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7168/api/Warehouses/{b1e80f6f-f2ea-420d-a619-4520d965078f} - 404 null application/json; charset=utf-8 506.5498ms
2025-09-30 08:25:45.078 +03:00 [INF] Starting web host...
2025-09-30 08:25:45.883 +03:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-30 08:25:45.930 +03:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-09-30 08:25:46.001 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-30 08:25:46.007 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-30 08:25:46.012 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-09-30 08:25:46.066 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-09-30 08:25:46.081 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-30 08:25:46.085 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-09-30 08:25:46.091 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-09-30 08:25:46.109 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-09-30 08:25:46.114 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-09-30 08:25:46.271 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-30 08:25:46.279 +03:00 [INF] Master database initialized successfully
2025-09-30 08:25:47.570 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-30 08:25:47.667 +03:00 [INF] Now listening on: https://localhost:7168
2025-09-30 08:25:47.669 +03:00 [INF] Now listening on: http://localhost:5004
2025-09-30 08:25:47.732 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-30 08:25:47.734 +03:00 [INF] Hosting environment: Development
2025-09-30 08:25:47.737 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-09-30 08:25:48.040 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-09-30 08:25:48.175 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 135.71ms
2025-09-30 08:25:48.309 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-09-30 08:25:48.309 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-09-30 08:25:48.315 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 6.0408ms
2025-09-30 08:25:48.340 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 30.7583ms
2025-09-30 08:25:48.376 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-09-30 08:25:48.463 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 87.02ms
2025-09-30 08:26:40.636 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7168/api/Warehouses/{b1e80f6f-f2ea-420d-a619-4520d965078f} - application/json 177
2025-09-30 08:26:40.654 +03:00 [INF] Request started
2025-09-30 08:26:40.658 +03:00 [INF] Processing request for tenant: cd60fd4f-1494-469e-ae6b-7ad12ce5ca1b
2025-09-30 08:26:40.661 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.UpdateWarehouse (ModularERP)'
2025-09-30 08:26:40.677 +03:00 [INF] Route matched with {action = "UpdateWarehouse", controller = "Warehouses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Warehouses.DTO.WarehouseDto]]] UpdateWarehouse(System.Guid, ModularERP.Modules.Inventory.Features.Warehouses.DTO.UpdateWarehouseDto, System.Guid) on controller ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController (ModularERP).
2025-09-30 08:26:40.684 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-30 08:26:40.770 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-09-30 08:26:40.961 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-30 08:26:40.966 +03:00 [INF] Starting UpdateWarehouse for Id: "b1e80f6f-f2ea-420d-a619-4520d965078f", CompanyId: "00000000-0000-0000-0000-000000000000"
2025-09-30 08:26:41.003 +03:00 [WRN] Warehouse not found with Id: "b1e80f6f-f2ea-420d-a619-4520d965078f" and CompanyId: "00000000-0000-0000-0000-000000000000"
2025-09-30 08:26:41.006 +03:00 [ERR] Error updating warehouse "b1e80f6f-f2ea-420d-a619-4520d965078f" for CompanyId "00000000-0000-0000-0000-000000000000"
ModularERP.Common.Exceptions.NotFoundException: Warehouse with ID b1e80f6f-f2ea-420d-a619-4520d965078f not found
   at ModularERP.Modules.Inventory.Features.Warehouses.Handlers.UpdateWarehouseCommandHandler.Handle(UpdateWarehouseCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Warehouses\Handlers\UpdateWarehouseCommandHandler.cs:line 48
2025-09-30 08:26:41.028 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.UpdateWarehouse (ModularERP) in 343.5585ms
2025-09-30 08:26:41.032 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.UpdateWarehouse (ModularERP)'
2025-09-30 08:26:41.035 +03:00 [ERR] Application exception occurred: Warehouse with ID b1e80f6f-f2ea-420d-a619-4520d965078f not found
ModularERP.Common.Exceptions.NotFoundException: Warehouse with ID b1e80f6f-f2ea-420d-a619-4520d965078f not found
   at ModularERP.Modules.Inventory.Features.Warehouses.Handlers.UpdateWarehouseCommandHandler.Handle(UpdateWarehouseCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Warehouses\Handlers\UpdateWarehouseCommandHandler.cs:line 48
   at ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.UpdateWarehouse(Guid id, UpdateWarehouseDto dto, Guid companyId) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Warehouses\Controllers\WarehousesController.cs:line 140
   at lambda_method95(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 249
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-09-30 08:26:41.062 +03:00 [INF] Error response sent with status code 404
2025-09-30 08:26:41.068 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7168/api/Warehouses/{b1e80f6f-f2ea-420d-a619-4520d965078f} - 404 null application/json; charset=utf-8 431.3732ms
2025-09-30 08:28:11.231 +03:00 [INF] Starting web host...
2025-09-30 08:28:12.047 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-30 08:28:12.089 +03:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-09-30 08:28:12.157 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-30 08:28:12.162 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-30 08:28:12.166 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-09-30 08:28:12.221 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-09-30 08:28:12.237 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-30 08:28:12.242 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-09-30 08:28:12.248 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-09-30 08:28:12.260 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-09-30 08:28:12.265 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-09-30 08:28:12.417 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-30 08:28:12.425 +03:00 [INF] Master database initialized successfully
2025-09-30 08:28:13.672 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-30 08:28:13.765 +03:00 [INF] Now listening on: https://localhost:7168
2025-09-30 08:28:13.766 +03:00 [INF] Now listening on: http://localhost:5004
2025-09-30 08:28:13.827 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-30 08:28:13.829 +03:00 [INF] Hosting environment: Development
2025-09-30 08:28:13.832 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-09-30 08:28:14.191 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-09-30 08:28:14.306 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 116.4031ms
2025-09-30 08:28:14.352 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-09-30 08:28:14.352 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-09-30 08:28:14.360 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 8.5245ms
2025-09-30 08:28:14.375 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 23.4432ms
2025-09-30 08:28:14.407 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-09-30 08:28:14.509 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 102.1892ms
2025-09-30 08:28:15.583 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7168/api/Warehouses/{b1e80f6f-f2ea-420d-a619-4520d965078f} - application/json 177
2025-09-30 08:28:15.601 +03:00 [INF] Request started
2025-09-30 08:28:15.605 +03:00 [INF] Processing request for tenant: cd60fd4f-1494-469e-ae6b-7ad12ce5ca1b
2025-09-30 08:28:15.608 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.UpdateWarehouse (ModularERP)'
2025-09-30 08:28:15.623 +03:00 [INF] Route matched with {action = "UpdateWarehouse", controller = "Warehouses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Warehouses.DTO.WarehouseDto]]] UpdateWarehouse(System.Guid, ModularERP.Modules.Inventory.Features.Warehouses.DTO.UpdateWarehouseDto) on controller ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController (ModularERP).
2025-09-30 08:28:15.630 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-30 08:28:15.719 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-09-30 08:28:15.903 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-30 08:28:15.907 +03:00 [INF] Starting UpdateWarehouse for Id: "b1e80f6f-f2ea-420d-a619-4520d965078f", CompanyId: "c8792c75-9cae-4039-8702-e480a2c083a2"
2025-09-30 08:28:15.972 +03:00 [INF] Warehouse found. Proceeding with validation. Name: Wahehouse1, IsPrimary: true
2025-09-30 08:28:15.991 +03:00 [INF] Validation passed. Updating warehouse.
2025-09-30 08:28:15.996 +03:00 [INF] Saving changes to database...
2025-09-30 08:28:16.094 +03:00 [INF] Warehouse updated successfully: "b1e80f6f-f2ea-420d-a619-4520d965078f"
2025-09-30 08:28:16.103 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.Warehouses.DTO.WarehouseDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-30 08:28:16.121 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.UpdateWarehouse (ModularERP) in 492.0475ms
2025-09-30 08:28:16.123 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.UpdateWarehouse (ModularERP)'
2025-09-30 08:28:16.125 +03:00 [INF] Request completed successfully with status code 200
2025-09-30 08:28:16.131 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7168/api/Warehouses/{b1e80f6f-f2ea-420d-a619-4520d965078f} - 200 null application/json; charset=utf-8 547.5009ms
2025-09-30 08:29:22.672 +03:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7168/api/Warehouses/{28558ced-8c3a-45b9-b9c7-dff696302273} - null null
2025-09-30 08:29:22.680 +03:00 [INF] Request started
2025-09-30 08:29:22.683 +03:00 [INF] Processing request for tenant: cd60fd4f-1494-469e-ae6b-7ad12ce5ca1b
2025-09-30 08:29:22.684 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.DeleteWarehouse (ModularERP)'
2025-09-30 08:29:22.690 +03:00 [INF] Route matched with {action = "DeleteWarehouse", controller = "Warehouses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[System.Boolean]]] DeleteWarehouse(System.Guid, System.Guid) on controller ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController (ModularERP).
2025-09-30 08:29:22.737 +03:00 [INF] Deleting warehouse: "28558ced-8c3a-45b9-b9c7-dff696302273"
2025-09-30 08:29:22.750 +03:00 [WRN] Warehouse not found: "28558ced-8c3a-45b9-b9c7-dff696302273"
2025-09-30 08:29:22.753 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.DeleteWarehouse (ModularERP) in 58.058ms
2025-09-30 08:29:22.755 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.DeleteWarehouse (ModularERP)'
2025-09-30 08:29:22.759 +03:00 [ERR] Application exception occurred: Warehouse with ID 28558ced-8c3a-45b9-b9c7-dff696302273 not found
ModularERP.Common.Exceptions.NotFoundException: Warehouse with ID 28558ced-8c3a-45b9-b9c7-dff696302273 not found
   at ModularERP.Modules.Inventory.Features.Warehouses.Handlers.DeleteWarehouseCommandHandler.Handle(DeleteWarehouseCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Warehouses\Handlers\DeleteWarehouseCommandHandler.cs:line 32
   at ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.DeleteWarehouse(Guid id, Guid companyId) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Warehouses\Controllers\WarehousesController.cs:line 160
   at lambda_method354(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 249
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-09-30 08:29:22.817 +03:00 [INF] Error response sent with status code 404
2025-09-30 08:29:22.819 +03:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7168/api/Warehouses/{28558ced-8c3a-45b9-b9c7-dff696302273} - 404 null application/json; charset=utf-8 146.0602ms
2025-09-30 08:30:11.658 +03:00 [INF] Starting web host...
2025-09-30 08:30:12.506 +03:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-30 08:30:12.548 +03:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-09-30 08:30:12.615 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-30 08:30:12.621 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-30 08:30:12.627 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-09-30 08:30:12.687 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-09-30 08:30:12.703 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-30 08:30:12.706 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-09-30 08:30:12.715 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-09-30 08:30:12.727 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-09-30 08:30:12.732 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-09-30 08:30:12.896 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-30 08:30:12.903 +03:00 [INF] Master database initialized successfully
2025-09-30 08:30:14.391 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-30 08:30:14.483 +03:00 [INF] Now listening on: https://localhost:7168
2025-09-30 08:30:14.485 +03:00 [INF] Now listening on: http://localhost:5004
2025-09-30 08:30:14.563 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-30 08:30:14.565 +03:00 [INF] Hosting environment: Development
2025-09-30 08:30:14.567 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-09-30 08:30:14.607 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-09-30 08:30:14.741 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 135.305ms
2025-09-30 08:30:14.871 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-09-30 08:30:14.871 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-09-30 08:30:14.877 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 6.6632ms
2025-09-30 08:30:14.897 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 25.9781ms
2025-09-30 08:30:14.946 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-09-30 08:30:15.009 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 62.8005ms
2025-09-30 08:30:16.230 +03:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7168/api/Warehouses/{28558ced-8c3a-45b9-b9c7-dff696302273} - null null
2025-09-30 08:30:16.248 +03:00 [INF] Request started
2025-09-30 08:30:16.253 +03:00 [INF] Processing request for tenant: cd60fd4f-1494-469e-ae6b-7ad12ce5ca1b
2025-09-30 08:30:16.257 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.DeleteWarehouse (ModularERP)'
2025-09-30 08:30:16.275 +03:00 [INF] Route matched with {action = "DeleteWarehouse", controller = "Warehouses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[System.Boolean]]] DeleteWarehouse(System.Guid) on controller ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController (ModularERP).
2025-09-30 08:30:16.280 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-30 08:30:16.343 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-09-30 08:30:16.399 +03:00 [INF] Deleting warehouse: "28558ced-8c3a-45b9-b9c7-dff696302273"
2025-09-30 08:30:16.430 +03:00 [WRN] Warehouse not found: "28558ced-8c3a-45b9-b9c7-dff696302273"
2025-09-30 08:30:16.437 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.DeleteWarehouse (ModularERP) in 156.8216ms
2025-09-30 08:30:16.442 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.DeleteWarehouse (ModularERP)'
2025-09-30 08:30:16.447 +03:00 [ERR] Application exception occurred: Warehouse with ID 28558ced-8c3a-45b9-b9c7-dff696302273 not found
ModularERP.Common.Exceptions.NotFoundException: Warehouse with ID 28558ced-8c3a-45b9-b9c7-dff696302273 not found
   at ModularERP.Modules.Inventory.Features.Warehouses.Handlers.DeleteWarehouseCommandHandler.Handle(DeleteWarehouseCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Warehouses\Handlers\DeleteWarehouseCommandHandler.cs:line 32
   at ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.DeleteWarehouse(Guid id) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Warehouses\Controllers\WarehousesController.cs:line 159
   at lambda_method95(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 249
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-09-30 08:30:16.502 +03:00 [INF] Error response sent with status code 404
2025-09-30 08:30:16.510 +03:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7168/api/Warehouses/{28558ced-8c3a-45b9-b9c7-dff696302273} - 404 null application/json; charset=utf-8 279.8476ms
2025-09-30 08:33:05.782 +03:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7168/api/Warehouses/{28558ced-8c3a-45b9-b9c7-dff696302273} - null null
2025-09-30 08:33:05.789 +03:00 [INF] Request started
2025-09-30 08:33:05.792 +03:00 [INF] Processing request for tenant: cd60fd4f-1494-469e-ae6b-7ad12ce5ca1b
2025-09-30 08:33:05.793 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.DeleteWarehouse (ModularERP)'
2025-09-30 08:33:05.794 +03:00 [INF] Route matched with {action = "DeleteWarehouse", controller = "Warehouses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[System.Boolean]]] DeleteWarehouse(System.Guid) on controller ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController (ModularERP).
2025-09-30 08:33:05.839 +03:00 [INF] Deleting warehouse: "28558ced-8c3a-45b9-b9c7-dff696302273"
2025-09-30 08:33:05.846 +03:00 [WRN] Warehouse not found: "28558ced-8c3a-45b9-b9c7-dff696302273"
2025-09-30 08:33:05.850 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.DeleteWarehouse (ModularERP) in 53.1615ms
2025-09-30 08:33:05.852 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.DeleteWarehouse (ModularERP)'
2025-09-30 08:33:05.853 +03:00 [ERR] Application exception occurred: Warehouse with ID 28558ced-8c3a-45b9-b9c7-dff696302273 not found
ModularERP.Common.Exceptions.NotFoundException: Warehouse with ID 28558ced-8c3a-45b9-b9c7-dff696302273 not found
   at ModularERP.Modules.Inventory.Features.Warehouses.Handlers.DeleteWarehouseCommandHandler.Handle(DeleteWarehouseCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Warehouses\Handlers\DeleteWarehouseCommandHandler.cs:line 32
   at ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.DeleteWarehouse(Guid id) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Warehouses\Controllers\WarehousesController.cs:line 159
   at lambda_method95(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 249
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-09-30 08:33:05.863 +03:00 [INF] Error response sent with status code 404
2025-09-30 08:33:05.864 +03:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7168/api/Warehouses/{28558ced-8c3a-45b9-b9c7-dff696302273} - 404 null application/json; charset=utf-8 81.7604ms
2025-09-30 08:33:14.223 +03:00 [INF] Starting web host...
2025-09-30 08:33:15.059 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-30 08:33:15.101 +03:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-09-30 08:33:15.173 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-30 08:33:15.179 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-30 08:33:15.184 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-09-30 08:33:15.238 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-09-30 08:33:15.263 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-30 08:33:15.269 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-09-30 08:33:15.276 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-09-30 08:33:15.289 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-09-30 08:33:15.292 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-09-30 08:33:15.449 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-30 08:33:15.457 +03:00 [INF] Master database initialized successfully
2025-09-30 08:33:16.752 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-30 08:33:16.890 +03:00 [INF] Now listening on: https://localhost:7168
2025-09-30 08:33:16.902 +03:00 [INF] Now listening on: http://localhost:5004
2025-09-30 08:33:16.979 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-30 08:33:16.980 +03:00 [INF] Hosting environment: Development
2025-09-30 08:33:16.981 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-09-30 08:33:17.171 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-09-30 08:33:17.281 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 110.8787ms
2025-09-30 08:33:17.425 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-09-30 08:33:17.425 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-09-30 08:33:17.431 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 5.4379ms
2025-09-30 08:33:17.450 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 24.8092ms
2025-09-30 08:33:17.503 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-09-30 08:33:17.590 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 86.6614ms
2025-09-30 08:33:18.020 +03:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7168/api/Warehouses/{28558ced-8c3a-45b9-b9c7-dff696302273} - null null
2025-09-30 08:33:18.036 +03:00 [INF] Request started
2025-09-30 08:33:18.040 +03:00 [INF] Processing request for tenant: cd60fd4f-1494-469e-ae6b-7ad12ce5ca1b
2025-09-30 08:33:18.043 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.DeleteWarehouse (ModularERP)'
2025-09-30 08:33:18.058 +03:00 [INF] Route matched with {action = "DeleteWarehouse", controller = "Warehouses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[System.Boolean]]] DeleteWarehouse(System.Guid, System.Guid) on controller ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController (ModularERP).
2025-09-30 08:33:18.065 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-30 08:33:18.121 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-09-30 08:33:18.174 +03:00 [INF] Deleting warehouse: "28558ced-8c3a-45b9-b9c7-dff696302273"
2025-09-30 08:33:18.321 +03:00 [INF] Warehouse deleted successfully: "28558ced-8c3a-45b9-b9c7-dff696302273"
2025-09-30 08:33:18.329 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-30 08:33:18.347 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.DeleteWarehouse (ModularERP) in 281.6357ms
2025-09-30 08:33:18.351 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.DeleteWarehouse (ModularERP)'
2025-09-30 08:33:18.353 +03:00 [INF] Request completed successfully with status code 200
2025-09-30 08:33:18.358 +03:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7168/api/Warehouses/{28558ced-8c3a-45b9-b9c7-dff696302273} - 200 null application/json; charset=utf-8 337.8427ms
2025-09-30 08:36:14.747 +03:00 [INF] Starting web host...
2025-09-30 08:36:15.624 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-30 08:36:15.664 +03:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-09-30 08:36:15.739 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-30 08:36:15.745 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-30 08:36:15.750 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-09-30 08:36:15.811 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-09-30 08:36:15.827 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-30 08:36:15.832 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-09-30 08:36:15.842 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-09-30 08:36:15.853 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-09-30 08:36:15.858 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-09-30 08:36:16.038 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-30 08:36:16.044 +03:00 [INF] Master database initialized successfully
2025-09-30 08:36:17.411 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-30 08:36:17.513 +03:00 [INF] Now listening on: https://localhost:7168
2025-09-30 08:36:17.515 +03:00 [INF] Now listening on: http://localhost:5004
2025-09-30 08:36:17.586 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-30 08:36:17.587 +03:00 [INF] Hosting environment: Development
2025-09-30 08:36:17.589 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-09-30 08:36:17.664 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-09-30 08:36:17.785 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 121.5107ms
2025-09-30 08:36:17.861 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-09-30 08:36:17.861 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-09-30 08:36:17.872 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 10.238ms
2025-09-30 08:36:17.886 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 24.4918ms
2025-09-30 08:36:17.920 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-09-30 08:36:17.984 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 64.4745ms
2025-09-30 08:36:26.470 +03:00 [INF] Request starting HTTP/1.1 DELETE https://localhost:7168/api/Warehouses/{28558ced-8c3a-45b9-b9c7-dff696302273} - null null
2025-09-30 08:36:26.485 +03:00 [INF] Request started
2025-09-30 08:36:26.489 +03:00 [INF] Processing request for tenant: cd60fd4f-1494-469e-ae6b-7ad12ce5ca1b
2025-09-30 08:36:26.492 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.DeleteWarehouse (ModularERP)'
2025-09-30 08:36:26.506 +03:00 [INF] Route matched with {action = "DeleteWarehouse", controller = "Warehouses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[System.Boolean]]] DeleteWarehouse(System.Guid) on controller ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController (ModularERP).
2025-09-30 08:36:26.512 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-30 08:36:26.566 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-09-30 08:36:26.618 +03:00 [INF] Deleting warehouse: "28558ced-8c3a-45b9-b9c7-dff696302273"
2025-09-30 08:36:26.776 +03:00 [INF] Warehouse deleted successfully: "28558ced-8c3a-45b9-b9c7-dff696302273"
2025-09-30 08:36:26.783 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-30 08:36:26.800 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.DeleteWarehouse (ModularERP) in 287.5133ms
2025-09-30 08:36:26.804 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.DeleteWarehouse (ModularERP)'
2025-09-30 08:36:26.806 +03:00 [INF] Request completed successfully with status code 200
2025-09-30 08:36:26.811 +03:00 [INF] Request finished HTTP/1.1 DELETE https://localhost:7168/api/Warehouses/{28558ced-8c3a-45b9-b9c7-dff696302273} - 200 null application/json; charset=utf-8 340.3294ms
2025-09-30 08:37:26.799 +03:00 [INF] Starting web host...
2025-09-30 08:37:27.575 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-30 08:37:27.625 +03:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-09-30 08:37:27.701 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-30 08:37:27.707 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-30 08:37:27.712 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-09-30 08:37:27.766 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-09-30 08:37:27.782 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-30 08:37:27.786 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-09-30 08:37:27.792 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-09-30 08:37:27.804 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-09-30 08:37:27.809 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-09-30 08:37:27.960 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-30 08:37:27.967 +03:00 [INF] Master database initialized successfully
2025-09-30 08:37:29.230 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-30 08:37:29.329 +03:00 [INF] Now listening on: https://localhost:7168
2025-09-30 08:37:29.331 +03:00 [INF] Now listening on: http://localhost:5004
2025-09-30 08:37:29.388 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-30 08:37:29.389 +03:00 [INF] Hosting environment: Development
2025-09-30 08:37:29.391 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-09-30 08:37:29.772 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-09-30 08:37:29.889 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 117.9656ms
2025-09-30 08:37:29.931 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-09-30 08:37:29.931 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-09-30 08:37:29.941 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 8.8842ms
2025-09-30 08:37:29.955 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 23.6762ms
2025-09-30 08:37:29.987 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-09-30 08:37:30.062 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 75.1019ms
2025-09-30 08:38:01.585 +03:00 [INF] Starting web host...
2025-09-30 08:38:02.418 +03:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-30 08:38:02.449 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-09-30 08:38:02.517 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-30 08:38:02.523 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-30 08:38:02.527 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-09-30 08:38:02.582 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-09-30 08:38:02.597 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-30 08:38:02.603 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-09-30 08:38:02.609 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-09-30 08:38:02.621 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-09-30 08:38:02.625 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-09-30 08:38:02.793 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-30 08:38:02.802 +03:00 [INF] Master database initialized successfully
2025-09-30 08:38:04.074 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-30 08:38:04.180 +03:00 [INF] Now listening on: https://localhost:7168
2025-09-30 08:38:04.182 +03:00 [INF] Now listening on: http://localhost:5004
2025-09-30 08:38:04.252 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-30 08:38:04.254 +03:00 [INF] Hosting environment: Development
2025-09-30 08:38:04.256 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-09-30 08:38:04.525 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-09-30 08:38:04.639 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 114.593ms
2025-09-30 08:38:04.673 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-09-30 08:38:04.673 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-09-30 08:38:04.684 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 9.4665ms
2025-09-30 08:38:04.696 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 22.9793ms
2025-09-30 08:38:04.719 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-09-30 08:38:04.791 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 71.9381ms
2025-09-30 08:39:35.869 +03:00 [INF] Request starting HTTP/1.1 PATCH https://localhost:7168/api/Warehouses/{b1e80f6f-f2ea-420d-a619-4520d965078f}/status - application/json 28
2025-09-30 08:39:35.885 +03:00 [INF] Request started
2025-09-30 08:39:35.890 +03:00 [INF] Processing request for tenant: cd60fd4f-1494-469e-ae6b-7ad12ce5ca1b
2025-09-30 08:39:35.892 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.UpdateWarehouseStatus (ModularERP)'
2025-09-30 08:39:35.907 +03:00 [INF] Route matched with {action = "UpdateWarehouseStatus", controller = "Warehouses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Warehouses.DTO.WarehouseDto]]] UpdateWarehouseStatus(System.Guid, ModularERP.Modules.Inventory.Features.Warehouses.DTO.UpdateWarehouseStatusDto) on controller ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController (ModularERP).
2025-09-30 08:39:35.913 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-30 08:39:35.991 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-09-30 08:39:36.169 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-30 08:39:36.174 +03:00 [INF] Updating warehouse status: "b1e80f6f-f2ea-420d-a619-4520d965078f" to Inactive
2025-09-30 08:39:36.232 +03:00 [WRN] Cannot deactivate primary warehouse: "b1e80f6f-f2ea-420d-a619-4520d965078f"
2025-09-30 08:39:36.240 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.UpdateWarehouseStatus (ModularERP) in 325.6709ms
2025-09-30 08:39:36.243 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.UpdateWarehouseStatus (ModularERP)'
2025-09-30 08:39:36.245 +03:00 [WRN] Business logic exception occurred: Cannot deactivate primary warehouse. Please set another warehouse as primary first
ModularERP.Common.Exceptions.BusinessLogicException: Cannot deactivate primary warehouse. Please set another warehouse as primary first
   at ModularERP.Modules.Inventory.Features.Warehouses.Handlers.UpdateWarehouseStatusCommandHandler.Handle(UpdateWarehouseStatusCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Warehouses\Handlers\UpdateWarehouseStatusCommandHandler.cs:line 49
   at ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.UpdateWarehouseStatus(Guid id, UpdateWarehouseStatusDto dto) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Warehouses\Controllers\WarehousesController.cs:line 193
   at lambda_method95(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 249
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-09-30 08:39:36.294 +03:00 [INF] Error response sent with status code 400
2025-09-30 08:39:36.299 +03:00 [INF] Request finished HTTP/1.1 PATCH https://localhost:7168/api/Warehouses/{b1e80f6f-f2ea-420d-a619-4520d965078f}/status - 400 null application/json; charset=utf-8 430.7419ms
2025-09-30 08:40:05.759 +03:00 [INF] Request starting HTTP/1.1 PATCH https://localhost:7168/api/Warehouses/{28558ced-8c3a-45b9-b9c7-dff696302273}/status - application/json 28
2025-09-30 08:40:05.793 +03:00 [INF] Request started
2025-09-30 08:40:05.797 +03:00 [INF] Processing request for tenant: cd60fd4f-1494-469e-ae6b-7ad12ce5ca1b
2025-09-30 08:40:05.799 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.UpdateWarehouseStatus (ModularERP)'
2025-09-30 08:40:05.803 +03:00 [INF] Route matched with {action = "UpdateWarehouseStatus", controller = "Warehouses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Warehouses.DTO.WarehouseDto]]] UpdateWarehouseStatus(System.Guid, ModularERP.Modules.Inventory.Features.Warehouses.DTO.UpdateWarehouseStatusDto) on controller ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController (ModularERP).
2025-09-30 08:40:05.858 +03:00 [INF] Updating warehouse status: "28558ced-8c3a-45b9-b9c7-dff696302273" to Inactive
2025-09-30 08:40:05.982 +03:00 [INF] Warehouse status updated successfully: "28558ced-8c3a-45b9-b9c7-dff696302273"
2025-09-30 08:40:05.991 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.Warehouses.DTO.WarehouseDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-30 08:40:06.004 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.UpdateWarehouseStatus (ModularERP) in 191.8691ms
2025-09-30 08:40:06.007 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.UpdateWarehouseStatus (ModularERP)'
2025-09-30 08:40:06.009 +03:00 [INF] Request completed successfully with status code 200
2025-09-30 08:40:06.012 +03:00 [INF] Request finished HTTP/1.1 PATCH https://localhost:7168/api/Warehouses/{28558ced-8c3a-45b9-b9c7-dff696302273}/status - 200 null application/json; charset=utf-8 252.2557ms
2025-09-30 08:41:29.127 +03:00 [INF] Request starting HTTP/1.1 PATCH https://localhost:7168/api/Warehouses/{28558ced-8c3a-45b9-b9c7-dff696302273}/set-primary - null 0
2025-09-30 08:41:29.131 +03:00 [INF] Request started
2025-09-30 08:41:29.133 +03:00 [INF] Processing request for tenant: cd60fd4f-1494-469e-ae6b-7ad12ce5ca1b
2025-09-30 08:41:29.134 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.SetPrimaryWarehouse (ModularERP)'
2025-09-30 08:41:29.140 +03:00 [INF] Route matched with {action = "SetPrimaryWarehouse", controller = "Warehouses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Warehouses.DTO.WarehouseDto]]] SetPrimaryWarehouse(System.Guid) on controller ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController (ModularERP).
2025-09-30 08:41:29.146 +03:00 [INF] Setting warehouse as primary: "28558ced-8c3a-45b9-b9c7-dff696302273"
2025-09-30 08:41:29.173 +03:00 [INF] Warehouse set as primary successfully: "28558ced-8c3a-45b9-b9c7-dff696302273"
2025-09-30 08:41:29.175 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.Warehouses.DTO.WarehouseDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-30 08:41:29.177 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.SetPrimaryWarehouse (ModularERP) in 34.1279ms
2025-09-30 08:41:29.179 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.SetPrimaryWarehouse (ModularERP)'
2025-09-30 08:41:29.181 +03:00 [INF] Request completed successfully with status code 200
2025-09-30 08:41:29.185 +03:00 [INF] Request finished HTTP/1.1 PATCH https://localhost:7168/api/Warehouses/{28558ced-8c3a-45b9-b9c7-dff696302273}/set-primary - 200 null application/json; charset=utf-8 58.0285ms
2025-09-30 10:49:44.002 +03:00 [INF] Starting web host...
2025-09-30 10:49:44.356 +03:00 [FTL] Host terminated unexpectedly
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at ModularERP.Program.Main(String[] args) in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 176
2025-09-30 10:51:44.567 +03:00 [INF] Starting web host...
2025-09-30 10:51:44.945 +03:00 [FTL] Host terminated unexpectedly
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at ModularERP.Program.Main(String[] args) in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 176
2025-09-30 10:53:17.662 +03:00 [INF] Starting web host...
2025-09-30 10:53:18.000 +03:00 [FTL] Host terminated unexpectedly
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at ModularERP.Program.Main(String[] args) in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 176
2025-09-30 10:53:41.520 +03:00 [INF] Starting web host...
2025-09-30 10:53:41.871 +03:00 [FTL] Host terminated unexpectedly
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at ModularERP.Program.Main(String[] args) in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 176
2025-09-30 12:25:54.868 +03:00 [INF] Starting web host...
2025-09-30 12:26:25.055 +03:00 [INF] Starting web host...
2025-09-30 12:27:21.719 +03:00 [INF] Starting web host...
2025-09-30 12:27:22.537 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-30 12:27:22.626 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-09-30 12:27:22.754 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-30 12:27:22.759 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-30 12:27:22.769 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-09-30 12:27:22.857 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-09-30 12:27:22.886 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-30 12:27:22.891 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-09-30 12:27:22.901 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-09-30 12:27:22.917 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-09-30 12:27:22.923 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-09-30 12:27:23.252 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-30 12:27:23.259 +03:00 [INF] Master database initialized successfully
2025-09-30 12:27:24.765 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-30 12:27:24.977 +03:00 [INF] Now listening on: https://localhost:7168
2025-09-30 12:27:24.979 +03:00 [INF] Now listening on: http://localhost:5004
2025-09-30 12:27:25.090 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-30 12:27:25.092 +03:00 [INF] Hosting environment: Development
2025-09-30 12:27:25.094 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-09-30 12:27:25.576 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-09-30 12:27:25.809 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 236.2176ms
2025-09-30 12:27:25.814 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-09-30 12:27:25.817 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-09-30 12:27:25.830 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 15.0292ms
2025-09-30 12:27:25.878 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 60.7662ms
2025-09-30 12:27:25.930 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-09-30 12:27:26.020 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 89.7524ms
2025-09-30 12:31:11.157 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/Tenants/create - application/json 58
2025-09-30 12:31:11.177 +03:00 [INF] Request started
2025-09-30 12:31:11.183 +03:00 [INF] Executing endpoint 'ModularERP.Common.Controller.TenantsController.CreateTenant (ModularERP)'
2025-09-30 12:31:11.200 +03:00 [INF] Route matched with {action = "CreateTenant", controller = "Tenants"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateTenant(ModularERP.Common.Controller.CreateTenantRequest) on controller ModularERP.Common.Controller.TenantsController (ModularERP).
2025-09-30 12:31:11.388 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 3), @p3='?' (Size = 4000), @p4='?' (Size = 100), @p5='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [MasterCompanies] ([Id], [CreatedAt], [CurrencyCode], [DatabaseName], [Name], [Status])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-09-30 12:31:11.458 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-09-30 12:31:13.815 +03:00 [INF] Applied 10 migrations to database ModularERP_Tenant_9add702b51c34237a850cb41aaf7c244
2025-09-30 12:31:13.818 +03:00 [INF] Created tenant database for company "17704541-e83f-418a-99ca-072da75eb904": ModularERP_Tenant_9add702b51c34237a850cb41aaf7c244
2025-09-30 12:31:13.825 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`5[[System.Guid, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-30 12:31:13.841 +03:00 [INF] Executed action ModularERP.Common.Controller.TenantsController.CreateTenant (ModularERP) in 2635.2074ms
2025-09-30 12:31:13.844 +03:00 [INF] Executed endpoint 'ModularERP.Common.Controller.TenantsController.CreateTenant (ModularERP)'
2025-09-30 12:31:13.845 +03:00 [INF] Request completed successfully with status code 200
2025-09-30 12:31:13.850 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/Tenants/create - 200 null application/json; charset=utf-8 2692.4914ms
2025-09-30 12:31:53.132 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/Products - null null
2025-09-30 12:31:53.137 +03:00 [INF] Request started
2025-09-30 12:31:53.141 +03:00 [INF] Processing request for tenant: 17704541-e83f-418a-99ca-072da75eb904
2025-09-30 12:31:53.143 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Products.Controllers.ProductsController.GetProducts (ModularERP)'
2025-09-30 12:31:53.155 +03:00 [INF] Route matched with {action = "GetProducts", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetProducts(ModularERP.Modules.Inventory.Features.Products.DTO.ProductListRequestDto) on controller ModularERP.Modules.Inventory.Features.Products.Controllers.ProductsController (ModularERP).
2025-09-30 12:31:53.161 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-30 12:31:53.170 +03:00 [INF] Getting products list for company "00000000-0000-0000-0000-000000000000"
2025-09-30 12:31:53.219 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-09-30 12:31:53.507 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-30 12:31:53.598 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.Products.DTO.PaginatedProductListDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-30 12:31:53.613 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Products.Controllers.ProductsController.GetProducts (ModularERP) in 454.5394ms
2025-09-30 12:31:53.616 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Products.Controllers.ProductsController.GetProducts (ModularERP)'
2025-09-30 12:31:53.618 +03:00 [INF] Request completed successfully with status code 200
2025-09-30 12:31:53.620 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/Products - 200 null application/json; charset=utf-8 487.8052ms
2025-09-30 12:37:34.348 +03:00 [INF] Starting web host...
2025-09-30 12:37:37.031 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-30 12:37:37.068 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-09-30 12:37:37.137 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-30 12:37:37.143 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-09-30 12:37:37.147 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-09-30 12:37:37.202 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-09-30 12:37:37.218 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-09-30 12:37:37.221 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-09-30 12:37:37.227 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-09-30 12:37:37.238 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-09-30 12:37:37.243 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-09-30 12:37:37.397 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-09-30 12:37:37.405 +03:00 [INF] Master database initialized successfully
2025-09-30 12:37:38.896 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-30 12:37:39.115 +03:00 [INF] Now listening on: https://localhost:7168
2025-09-30 12:37:39.117 +03:00 [INF] Now listening on: http://localhost:5004
2025-09-30 12:37:39.201 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-30 12:37:39.205 +03:00 [INF] Hosting environment: Development
2025-09-30 12:37:39.206 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-09-30 12:37:39.233 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-09-30 12:37:39.379 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 147.3669ms
2025-09-30 12:37:39.392 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-09-30 12:37:39.392 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-09-30 12:37:39.401 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 8.3181ms
2025-09-30 12:37:39.427 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 34.5822ms
2025-09-30 12:37:39.617 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-09-30 12:37:39.721 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 104.5361ms
