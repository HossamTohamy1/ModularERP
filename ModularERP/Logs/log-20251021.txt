2025-10-21 12:25:12.164 +03:00 [INF] Starting web host...
2025-10-21 12:25:14.091 +03:00 [FTL] Host terminated unexpectedly
System.AggregateException: Some services are not able to be constructed (Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[ModularERP.Modules.Inventory.Features.Stocktaking.Commends.Commands_StockTraking_WorkFlow.CreateStocktakingCommand,ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_Header.CreateStocktakingDto]] Lifetime: Transient ImplementationType: ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.CreateStocktakingHandler': Unable to resolve service for type 'Microsoft.Extensions.Logging.ILogger' while attempting to activate 'ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.CreateStocktakingHandler'.) (Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[ModularERP.Modules.Inventory.Features.Stocktaking.Commends.Commands_StockTraking_WorkFlow.DeleteStocktakingCommand,ModularERP.Common.ViewModel.ResponseViewModel`1[System.Boolean]] Lifetime: Transient ImplementationType: ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.DeleteStocktakingHandler': Unable to resolve service for type 'Microsoft.Extensions.Logging.ILogger' while attempting to activate 'ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.DeleteStocktakingHandler'.) (Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[ModularERP.Modules.Inventory.Features.Stocktaking.Qeuries.Qeuries_StockTraking_WorkFlow.GetAllStocktakingsQuery,ModularERP.Common.ViewModel.ResponseViewModel`1[System.Collections.Generic.List`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_Header.StocktakingListDto]]] Lifetime: Transient ImplementationType: ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.GetAllStocktakingsHandler': Unable to resolve service for type 'Microsoft.Extensions.Logging.ILogger' while attempting to activate 'ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.GetAllStocktakingsHandler'.) (Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[ModularERP.Modules.Inventory.Features.Stocktaking.Qeuries.Qeuries_StockTraking_WorkFlow.GetPreviewAdjustmentsQuery,ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_WorkFlow.PreviewAdjustmentsDto]] Lifetime: Transient ImplementationType: ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.GetPreviewAdjustmentsHandler': Unable to resolve service for type 'Microsoft.Extensions.Logging.ILogger' while attempting to activate 'ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.GetPreviewAdjustmentsHandler'.) (Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[ModularERP.Modules.Inventory.Features.Stocktaking.Qeuries.Qeuries_StockTraking_WorkFlow.GetStocktakingDetailQuery,ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_Header.StocktakingDetailDto]] Lifetime: Transient ImplementationType: ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.GetStocktakingDetailHandler': Unable to resolve service for type 'Microsoft.Extensions.Logging.ILogger' while attempting to activate 'ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.GetStocktakingDetailHandler'.) (Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[ModularERP.Modules.Inventory.Features.Stocktaking.Qeuries.Qeuries_StockTraking_WorkFlow.GetStocktakingVarianceSummaryQuery,ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_WorkFlow.VarianceSummaryDto]] Lifetime: Transient ImplementationType: ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.GetStocktakingVarianceSummaryHandler': Unable to resolve service for type 'Microsoft.Extensions.Logging.ILogger' while attempting to activate 'ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.GetStocktakingVarianceSummaryHandler'.) (Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[ModularERP.Modules.Inventory.Features.Stocktaking.Commends.Commands_StockTraking_WorkFlow.PostStocktakingCommand,ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_WorkFlow.PostStocktakingDto]] Lifetime: Transient ImplementationType: ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.PostStocktakingHandler': Unable to resolve service for type 'Microsoft.Extensions.Logging.ILogger' while attempting to activate 'ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.PostStocktakingHandler'.) (Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[ModularERP.Modules.Inventory.Features.Stocktaking.Commends.Commands_StockTraking_WorkFlow.ReviewStocktakingCommand,ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_WorkFlow.ReviewStocktakingDto]] Lifetime: Transient ImplementationType: ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.ReviewStocktakingHandler': Unable to resolve service for type 'Microsoft.Extensions.Logging.ILogger' while attempting to activate 'ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.ReviewStocktakingHandler'.) (Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[ModularERP.Modules.Inventory.Features.Stocktaking.Commends.Commands_StockTraking_WorkFlow.StartStocktakingCommand,ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_WorkFlow.StartStocktakingDto]] Lifetime: Transient ImplementationType: ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.StartStocktakingHandler': Unable to resolve service for type 'Microsoft.Extensions.Logging.ILogger' while attempting to activate 'ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.StartStocktakingHandler'.) (Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[ModularERP.Modules.Inventory.Features.Stocktaking.Commends.Commands_StockTraking_WorkFlow.UpdateStocktakingCommand,ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_Header.UpdateStocktakingDto]] Lifetime: Transient ImplementationType: ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.UpdateStocktakingHandler': Unable to resolve service for type 'Microsoft.Extensions.Logging.ILogger' while attempting to activate 'ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.UpdateStocktakingHandler'.)
 ---> System.InvalidOperationException: Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[ModularERP.Modules.Inventory.Features.Stocktaking.Commends.Commands_StockTraking_WorkFlow.CreateStocktakingCommand,ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_Header.CreateStocktakingDto]] Lifetime: Transient ImplementationType: ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.CreateStocktakingHandler': Unable to resolve service for type 'Microsoft.Extensions.Logging.ILogger' while attempting to activate 'ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.CreateStocktakingHandler'.
 ---> System.InvalidOperationException: Unable to resolve service for type 'Microsoft.Extensions.Logging.ILogger' while attempting to activate 'ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.CreateStocktakingHandler'.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceDescriptor serviceDescriptor, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)
   at Microsoft.Extensions.DependencyInjection.ServiceCollectionContainerBuilderExtensions.BuildServiceProvider(IServiceCollection services, ServiceProviderOptions options)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at ModularERP.Program.Main(String[] args) in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 254
 ---> (Inner Exception #1) System.InvalidOperationException: Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[ModularERP.Modules.Inventory.Features.Stocktaking.Commends.Commands_StockTraking_WorkFlow.DeleteStocktakingCommand,ModularERP.Common.ViewModel.ResponseViewModel`1[System.Boolean]] Lifetime: Transient ImplementationType: ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.DeleteStocktakingHandler': Unable to resolve service for type 'Microsoft.Extensions.Logging.ILogger' while attempting to activate 'ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.DeleteStocktakingHandler'.
 ---> System.InvalidOperationException: Unable to resolve service for type 'Microsoft.Extensions.Logging.ILogger' while attempting to activate 'ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.DeleteStocktakingHandler'.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceDescriptor serviceDescriptor, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)<---

 ---> (Inner Exception #2) System.InvalidOperationException: Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[ModularERP.Modules.Inventory.Features.Stocktaking.Qeuries.Qeuries_StockTraking_WorkFlow.GetAllStocktakingsQuery,ModularERP.Common.ViewModel.ResponseViewModel`1[System.Collections.Generic.List`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_Header.StocktakingListDto]]] Lifetime: Transient ImplementationType: ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.GetAllStocktakingsHandler': Unable to resolve service for type 'Microsoft.Extensions.Logging.ILogger' while attempting to activate 'ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.GetAllStocktakingsHandler'.
 ---> System.InvalidOperationException: Unable to resolve service for type 'Microsoft.Extensions.Logging.ILogger' while attempting to activate 'ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.GetAllStocktakingsHandler'.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceDescriptor serviceDescriptor, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)<---

 ---> (Inner Exception #3) System.InvalidOperationException: Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[ModularERP.Modules.Inventory.Features.Stocktaking.Qeuries.Qeuries_StockTraking_WorkFlow.GetPreviewAdjustmentsQuery,ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_WorkFlow.PreviewAdjustmentsDto]] Lifetime: Transient ImplementationType: ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.GetPreviewAdjustmentsHandler': Unable to resolve service for type 'Microsoft.Extensions.Logging.ILogger' while attempting to activate 'ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.GetPreviewAdjustmentsHandler'.
 ---> System.InvalidOperationException: Unable to resolve service for type 'Microsoft.Extensions.Logging.ILogger' while attempting to activate 'ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.GetPreviewAdjustmentsHandler'.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceDescriptor serviceDescriptor, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)<---

 ---> (Inner Exception #4) System.InvalidOperationException: Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[ModularERP.Modules.Inventory.Features.Stocktaking.Qeuries.Qeuries_StockTraking_WorkFlow.GetStocktakingDetailQuery,ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_Header.StocktakingDetailDto]] Lifetime: Transient ImplementationType: ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.GetStocktakingDetailHandler': Unable to resolve service for type 'Microsoft.Extensions.Logging.ILogger' while attempting to activate 'ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.GetStocktakingDetailHandler'.
 ---> System.InvalidOperationException: Unable to resolve service for type 'Microsoft.Extensions.Logging.ILogger' while attempting to activate 'ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.GetStocktakingDetailHandler'.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceDescriptor serviceDescriptor, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)<---

 ---> (Inner Exception #5) System.InvalidOperationException: Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[ModularERP.Modules.Inventory.Features.Stocktaking.Qeuries.Qeuries_StockTraking_WorkFlow.GetStocktakingVarianceSummaryQuery,ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_WorkFlow.VarianceSummaryDto]] Lifetime: Transient ImplementationType: ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.GetStocktakingVarianceSummaryHandler': Unable to resolve service for type 'Microsoft.Extensions.Logging.ILogger' while attempting to activate 'ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.GetStocktakingVarianceSummaryHandler'.
 ---> System.InvalidOperationException: Unable to resolve service for type 'Microsoft.Extensions.Logging.ILogger' while attempting to activate 'ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.GetStocktakingVarianceSummaryHandler'.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceDescriptor serviceDescriptor, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)<---

 ---> (Inner Exception #6) System.InvalidOperationException: Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[ModularERP.Modules.Inventory.Features.Stocktaking.Commends.Commands_StockTraking_WorkFlow.PostStocktakingCommand,ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_WorkFlow.PostStocktakingDto]] Lifetime: Transient ImplementationType: ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.PostStocktakingHandler': Unable to resolve service for type 'Microsoft.Extensions.Logging.ILogger' while attempting to activate 'ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.PostStocktakingHandler'.
 ---> System.InvalidOperationException: Unable to resolve service for type 'Microsoft.Extensions.Logging.ILogger' while attempting to activate 'ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.PostStocktakingHandler'.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceDescriptor serviceDescriptor, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)<---

 ---> (Inner Exception #7) System.InvalidOperationException: Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[ModularERP.Modules.Inventory.Features.Stocktaking.Commends.Commands_StockTraking_WorkFlow.ReviewStocktakingCommand,ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_WorkFlow.ReviewStocktakingDto]] Lifetime: Transient ImplementationType: ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.ReviewStocktakingHandler': Unable to resolve service for type 'Microsoft.Extensions.Logging.ILogger' while attempting to activate 'ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.ReviewStocktakingHandler'.
 ---> System.InvalidOperationException: Unable to resolve service for type 'Microsoft.Extensions.Logging.ILogger' while attempting to activate 'ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.ReviewStocktakingHandler'.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceDescriptor serviceDescriptor, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)<---

 ---> (Inner Exception #8) System.InvalidOperationException: Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[ModularERP.Modules.Inventory.Features.Stocktaking.Commends.Commands_StockTraking_WorkFlow.StartStocktakingCommand,ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_WorkFlow.StartStocktakingDto]] Lifetime: Transient ImplementationType: ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.StartStocktakingHandler': Unable to resolve service for type 'Microsoft.Extensions.Logging.ILogger' while attempting to activate 'ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.StartStocktakingHandler'.
 ---> System.InvalidOperationException: Unable to resolve service for type 'Microsoft.Extensions.Logging.ILogger' while attempting to activate 'ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.StartStocktakingHandler'.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceDescriptor serviceDescriptor, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)<---

 ---> (Inner Exception #9) System.InvalidOperationException: Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[ModularERP.Modules.Inventory.Features.Stocktaking.Commends.Commands_StockTraking_WorkFlow.UpdateStocktakingCommand,ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_Header.UpdateStocktakingDto]] Lifetime: Transient ImplementationType: ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.UpdateStocktakingHandler': Unable to resolve service for type 'Microsoft.Extensions.Logging.ILogger' while attempting to activate 'ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.UpdateStocktakingHandler'.
 ---> System.InvalidOperationException: Unable to resolve service for type 'Microsoft.Extensions.Logging.ILogger' while attempting to activate 'ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.UpdateStocktakingHandler'.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceDescriptor serviceDescriptor, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)<---

2025-10-21 12:30:28.681 +03:00 [INF] Starting web host...
2025-10-21 12:30:31.167 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-21 12:30:31.254 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-10-21 12:30:31.341 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-21 12:30:31.354 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-21 12:30:31.369 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-21 12:30:31.464 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-21 12:30:31.481 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-21 12:30:31.485 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-21 12:30:31.496 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-21 12:30:31.508 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-10-21 12:30:31.514 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-21 12:30:31.743 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-21 12:30:31.750 +03:00 [INF] Master database initialized successfully
2025-10-21 12:30:33.560 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-21 12:30:33.754 +03:00 [INF] Now listening on: https://localhost:7168
2025-10-21 12:30:33.756 +03:00 [INF] Now listening on: http://localhost:5004
2025-10-21 12:30:33.859 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-21 12:30:33.861 +03:00 [INF] Hosting environment: Development
2025-10-21 12:30:33.862 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-10-21 12:30:34.269 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-21 12:30:34.451 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 183.7741ms
2025-10-21 12:30:34.457 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-21 12:30:34.457 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-21 12:30:34.469 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 12.3077ms
2025-10-21 12:30:34.513 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 55.8589ms
2025-10-21 12:30:34.633 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-21 12:30:34.879 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 245.8997ms
2025-10-21 15:16:57.519 +03:00 [INF] Starting web host...
2025-10-21 15:17:02.121 +03:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-21 15:17:02.176 +03:00 [INF] Executed DbCommand (34ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-10-21 15:17:02.287 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-21 15:17:02.293 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-21 15:17:02.299 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-21 15:17:02.380 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-21 15:17:02.395 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-21 15:17:02.399 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-21 15:17:02.411 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-21 15:17:02.422 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-10-21 15:17:02.426 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-21 15:17:02.654 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-21 15:17:02.666 +03:00 [INF] Master database initialized successfully
2025-10-21 15:17:04.513 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-21 15:17:04.729 +03:00 [INF] Now listening on: https://localhost:7168
2025-10-21 15:17:04.731 +03:00 [INF] Now listening on: http://localhost:5004
2025-10-21 15:17:04.849 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-21 15:17:04.851 +03:00 [INF] Hosting environment: Development
2025-10-21 15:17:04.852 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-10-21 15:17:05.771 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-21 15:17:06.027 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 260.4202ms
2025-10-21 15:17:06.051 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-21 15:17:06.055 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-21 15:17:06.079 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 27.9058ms
2025-10-21 15:17:06.125 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 70.9631ms
2025-10-21 15:17:06.170 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-21 15:17:06.466 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 295.3267ms
2025-10-21 15:22:37.123 +03:00 [INF] Starting web host...
2025-10-21 15:22:38.215 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-21 15:22:38.245 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-10-21 15:22:38.322 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-21 15:22:38.328 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-21 15:22:38.332 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-21 15:22:38.387 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-21 15:22:38.402 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-21 15:22:38.406 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-21 15:22:38.412 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-21 15:22:38.422 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-10-21 15:22:38.426 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-21 15:22:38.587 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-21 15:22:38.594 +03:00 [INF] Master database initialized successfully
2025-10-21 15:22:40.165 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-21 15:22:40.266 +03:00 [INF] Now listening on: https://localhost:7168
2025-10-21 15:22:40.268 +03:00 [INF] Now listening on: http://localhost:5004
2025-10-21 15:22:40.349 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-21 15:22:40.351 +03:00 [INF] Hosting environment: Development
2025-10-21 15:22:40.353 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-10-21 15:22:40.610 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-21 15:22:40.756 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 148.3266ms
2025-10-21 15:22:40.767 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-21 15:22:40.767 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-21 15:22:40.775 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 7.7927ms
2025-10-21 15:22:40.797 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 30.4539ms
2025-10-21 15:22:40.969 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-21 15:22:41.214 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 245.4719ms
2025-10-21 15:23:06.713 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/Stocktaking - application/json 235
2025-10-21 15:23:06.737 +03:00 [INF] Request started
2025-10-21 15:23:06.740 +03:00 [INF] === Incoming Request ===
2025-10-21 15:23:06.742 +03:00 [INF] Path: /api/Stocktaking
2025-10-21 15:23:06.742 +03:00 [INF] Method: POST
2025-10-21 15:23:06.743 +03:00 [INF] === Headers ===
2025-10-21 15:23:06.746 +03:00 [INF] Accept: ["*/*"]
2025-10-21 15:23:06.748 +03:00 [INF] Connection: ["keep-alive"]
2025-10-21 15:23:06.751 +03:00 [INF] Host: ["localhost:7168"]
2025-10-21 15:23:06.753 +03:00 [INF] User-Agent: ["PostmanRuntime/7.49.0"]
2025-10-21 15:23:06.755 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-21 15:23:06.757 +03:00 [INF] Content-Type: ["application/json"]
2025-10-21 15:23:06.758 +03:00 [INF] Content-Length: ["235"]
2025-10-21 15:23:06.759 +03:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-10-21 15:23:06.761 +03:00 [INF] Postman-Token: ["599d798c-1250-45ad-a3f3-0a15e7639b5f"]
2025-10-21 15:23:06.765 +03:00 [INF] 🔍 TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-10-21 15:23:06.767 +03:00 [INF] ✅ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-10-21 15:23:06.770 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingController.Create (ModularERP)'
2025-10-21 15:23:06.795 +03:00 [INF] Route matched with {action = "Create", controller = "Stocktaking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(ModularERP.Modules.Inventory.Features.Stocktaking.Commends.Commends_StockTaking_Header.CreateStocktakingCommand) on controller ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingController (ModularERP).
2025-10-21 15:23:06.801 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-21 15:23:06.945 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-10-21 15:23:07.655 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-21 15:23:07.665 +03:00 [INF] Creating stocktaking with number 123456789 for warehouse "e5d0bbaa-9099-43e1-bb16-f9744078a9ea"
2025-10-21 15:23:07.864 +03:00 [INF] Stocktaking created successfully with ID "a0a90f3a-8c30-40fe-97eb-d6c4f3d64040"
2025-10-21 15:23:07.958 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_Header.CreateStocktakingDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-21 15:23:07.985 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingController.Create (ModularERP) in 1184.4951ms
2025-10-21 15:23:07.988 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingController.Create (ModularERP)'
2025-10-21 15:23:07.990 +03:00 [INF] Request completed successfully with status code 200
2025-10-21 15:23:07.995 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/Stocktaking - 200 null application/json; charset=utf-8 1282.3419ms
2025-10-21 16:42:45.944 +03:00 [INF] Starting web host...
2025-10-21 16:42:50.239 +03:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-21 16:42:50.284 +03:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-10-21 16:42:50.378 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-21 16:42:50.383 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-21 16:42:50.391 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-21 16:42:50.473 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-21 16:42:50.487 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-21 16:42:50.491 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-21 16:42:50.498 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-21 16:42:50.509 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-10-21 16:42:50.514 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-21 16:42:50.745 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-21 16:42:50.757 +03:00 [INF] Master database initialized successfully
2025-10-21 16:42:52.388 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-21 16:42:52.582 +03:00 [INF] Now listening on: https://localhost:7168
2025-10-21 16:42:52.585 +03:00 [INF] Now listening on: http://localhost:5004
2025-10-21 16:42:52.688 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-21 16:42:52.690 +03:00 [INF] Hosting environment: Development
2025-10-21 16:42:52.691 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-10-21 16:42:53.180 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-21 16:42:53.630 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 452.5078ms
2025-10-21 16:42:53.657 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-21 16:42:53.657 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-21 16:42:53.686 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 28.5449ms
2025-10-21 16:42:53.737 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 79.8009ms
2025-10-21 16:42:53.922 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-21 16:42:54.294 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 371.7487ms
2025-10-21 16:43:33.085 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/Stocktaking - application/json 235
2025-10-21 16:43:33.109 +03:00 [INF] Request started
2025-10-21 16:43:33.111 +03:00 [INF] === Incoming Request ===
2025-10-21 16:43:33.112 +03:00 [INF] Path: /api/Stocktaking
2025-10-21 16:43:33.113 +03:00 [INF] Method: POST
2025-10-21 16:43:33.114 +03:00 [INF] === Headers ===
2025-10-21 16:43:33.117 +03:00 [INF] Accept: ["*/*"]
2025-10-21 16:43:33.119 +03:00 [INF] Connection: ["keep-alive"]
2025-10-21 16:43:33.121 +03:00 [INF] Host: ["localhost:7168"]
2025-10-21 16:43:33.122 +03:00 [INF] User-Agent: ["PostmanRuntime/7.49.0"]
2025-10-21 16:43:33.124 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-21 16:43:33.125 +03:00 [INF] Content-Type: ["application/json"]
2025-10-21 16:43:33.127 +03:00 [INF] Content-Length: ["235"]
2025-10-21 16:43:33.129 +03:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-10-21 16:43:33.130 +03:00 [INF] Postman-Token: ["050225f6-6c88-497f-8c24-10ca11db0055"]
2025-10-21 16:43:33.135 +03:00 [INF] 🔍 TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-10-21 16:43:33.136 +03:00 [INF] ✅ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-10-21 16:43:33.138 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingController.Create (ModularERP)'
2025-10-21 16:43:33.153 +03:00 [INF] Route matched with {action = "Create", controller = "Stocktaking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(ModularERP.Modules.Inventory.Features.Stocktaking.Commends.Commends_StockTaking_Header.CreateStocktakingCommand) on controller ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingController (ModularERP).
2025-10-21 16:43:33.158 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-21 16:43:33.249 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-10-21 16:43:33.835 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-21 16:43:33.844 +03:00 [INF] Creating stocktaking with number 123456789 for warehouse "e5d0bbaa-9099-43e1-bb16-f9744078a9ea"
2025-10-21 16:43:33.920 +03:00 [WRN] Stocktaking number 123456789 already exists
2025-10-21 16:43:33.927 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingController.Create (ModularERP) in 768.6333ms
2025-10-21 16:43:33.929 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingController.Create (ModularERP)'
2025-10-21 16:43:33.932 +03:00 [WRN] Business logic exception occurred: Stocktaking number '123456789' already exists
ModularERP.Common.Exceptions.BusinessLogicException: Stocktaking number '123456789' already exists
   at ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTaking_Header.CreateStocktakingHandler.Handle(CreateStocktakingCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Stocktaking\Handlers\Handlers_StockTaking_Header\CreateStocktakingHandler.cs:line 47
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingController.Create(CreateStocktakingCommand command) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Stocktaking\Controllers\StocktakingController.cs:line 31
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_7>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 352
--- End of stack trace from previous location ---
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 305
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-10-21 16:43:33.993 +03:00 [INF] Error response sent with status code 400
2025-10-21 16:43:33.998 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/Stocktaking - 400 null application/json; charset=utf-8 913.8468ms
2025-10-21 16:43:40.709 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/Stocktaking - application/json 237
2025-10-21 16:43:40.732 +03:00 [INF] Request started
2025-10-21 16:43:40.736 +03:00 [INF] === Incoming Request ===
2025-10-21 16:43:40.740 +03:00 [INF] Path: /api/Stocktaking
2025-10-21 16:43:40.741 +03:00 [INF] Method: POST
2025-10-21 16:43:40.742 +03:00 [INF] === Headers ===
2025-10-21 16:43:40.743 +03:00 [INF] Accept: ["*/*"]
2025-10-21 16:43:40.745 +03:00 [INF] Connection: ["keep-alive"]
2025-10-21 16:43:40.746 +03:00 [INF] Host: ["localhost:7168"]
2025-10-21 16:43:40.748 +03:00 [INF] User-Agent: ["PostmanRuntime/7.49.0"]
2025-10-21 16:43:40.749 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-21 16:43:40.751 +03:00 [INF] Content-Type: ["application/json"]
2025-10-21 16:43:40.752 +03:00 [INF] Content-Length: ["237"]
2025-10-21 16:43:40.753 +03:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-10-21 16:43:40.754 +03:00 [INF] Postman-Token: ["13e19535-b01f-4335-8508-b23b52f27b74"]
2025-10-21 16:43:40.759 +03:00 [INF] 🔍 TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-10-21 16:43:40.761 +03:00 [INF] ✅ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-10-21 16:43:40.762 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingController.Create (ModularERP)'
2025-10-21 16:43:40.764 +03:00 [INF] Route matched with {action = "Create", controller = "Stocktaking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(ModularERP.Modules.Inventory.Features.Stocktaking.Commends.Commends_StockTaking_Header.CreateStocktakingCommand) on controller ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingController (ModularERP).
2025-10-21 16:43:40.772 +03:00 [INF] Creating stocktaking with number 12345678910 for warehouse "e5d0bbaa-9099-43e1-bb16-f9744078a9ea"
2025-10-21 16:43:40.896 +03:00 [INF] Stocktaking created successfully with ID "45ef0250-4160-4789-884f-8d5c14239b1c"
2025-10-21 16:43:40.950 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_Header.CreateStocktakingDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-21 16:43:40.960 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingController.Create (ModularERP) in 194.4395ms
2025-10-21 16:43:40.963 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingController.Create (ModularERP)'
2025-10-21 16:43:40.965 +03:00 [INF] Request completed successfully with status code 200
2025-10-21 16:43:40.967 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/Stocktaking - 200 null application/json; charset=utf-8 257.5551ms
2025-10-21 16:54:19.157 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/Stocktaking - null null
2025-10-21 16:54:19.163 +03:00 [INF] Request started
2025-10-21 16:54:19.165 +03:00 [INF] === Incoming Request ===
2025-10-21 16:54:19.167 +03:00 [INF] Path: /api/Stocktaking
2025-10-21 16:54:19.169 +03:00 [INF] Method: GET
2025-10-21 16:54:19.170 +03:00 [INF] === Headers ===
2025-10-21 16:54:19.171 +03:00 [INF] Accept: ["*/*"]
2025-10-21 16:54:19.172 +03:00 [INF] Connection: ["keep-alive"]
2025-10-21 16:54:19.174 +03:00 [INF] Host: ["localhost:7168"]
2025-10-21 16:54:19.176 +03:00 [INF] User-Agent: ["PostmanRuntime/7.49.0"]
2025-10-21 16:54:19.178 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-21 16:54:19.182 +03:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-10-21 16:54:19.184 +03:00 [INF] Postman-Token: ["15dfe2c2-a0fe-498c-9e19-c7d0e68d12dd"]
2025-10-21 16:54:19.187 +03:00 [INF] 🔍 TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-10-21 16:54:19.188 +03:00 [INF] ✅ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-10-21 16:54:19.189 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingController.GetAll (ModularERP)'
2025-10-21 16:54:19.195 +03:00 [INF] Route matched with {action = "GetAll", controller = "Stocktaking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String) on controller ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingController (ModularERP).
2025-10-21 16:54:19.206 +03:00 [INF] Fetching all stocktakings
2025-10-21 16:54:19.250 +03:00 [INF] Fetched 2 stocktakings
2025-10-21 16:54:19.253 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[System.Collections.Generic.List`1[[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_Header.StocktakingListDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-21 16:54:19.260 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingController.GetAll (ModularERP) in 59.4952ms
2025-10-21 16:54:19.263 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingController.GetAll (ModularERP)'
2025-10-21 16:54:19.266 +03:00 [INF] Request completed successfully with status code 200
2025-10-21 16:54:19.267 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/Stocktaking - 200 null application/json; charset=utf-8 110.1334ms
2025-10-21 16:59:37.891 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/Stocktaking/{a0a90f3a-8c30-40fe-97eb-d6c4f3d64040} - null null
2025-10-21 16:59:37.895 +03:00 [INF] Request started
2025-10-21 16:59:37.896 +03:00 [INF] === Incoming Request ===
2025-10-21 16:59:37.897 +03:00 [INF] Path: /api/Stocktaking/%7Ba0a90f3a-8c30-40fe-97eb-d6c4f3d64040%7D
2025-10-21 16:59:37.899 +03:00 [INF] Method: GET
2025-10-21 16:59:37.900 +03:00 [INF] === Headers ===
2025-10-21 16:59:37.902 +03:00 [INF] Accept: ["*/*"]
2025-10-21 16:59:37.904 +03:00 [INF] Connection: ["keep-alive"]
2025-10-21 16:59:37.906 +03:00 [INF] Host: ["localhost:7168"]
2025-10-21 16:59:37.908 +03:00 [INF] User-Agent: ["PostmanRuntime/7.49.0"]
2025-10-21 16:59:37.910 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-21 16:59:37.912 +03:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-10-21 16:59:37.914 +03:00 [INF] Postman-Token: ["0199b173-0d94-4c2f-8293-805e3e5b8831"]
2025-10-21 16:59:37.916 +03:00 [INF] 🔍 TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-10-21 16:59:37.917 +03:00 [INF] ✅ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-10-21 16:59:37.918 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingController.GetById (ModularERP)'
2025-10-21 16:59:37.922 +03:00 [INF] Route matched with {action = "GetById", controller = "Stocktaking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetById(System.Guid) on controller ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingController (ModularERP).
2025-10-21 16:59:37.931 +03:00 [INF] Fetching stocktaking with ID "a0a90f3a-8c30-40fe-97eb-d6c4f3d64040"
2025-10-21 16:59:37.988 +03:00 [INF] Stocktaking with ID "a0a90f3a-8c30-40fe-97eb-d6c4f3d64040" fetched successfully
2025-10-21 16:59:37.990 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_Header.StocktakingDetailDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-21 16:59:38.003 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingController.GetById (ModularERP) in 78.1111ms
2025-10-21 16:59:38.009 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingController.GetById (ModularERP)'
2025-10-21 16:59:38.011 +03:00 [INF] Request completed successfully with status code 200
2025-10-21 16:59:38.013 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/Stocktaking/{a0a90f3a-8c30-40fe-97eb-d6c4f3d64040} - 200 null application/json; charset=utf-8 122.0372ms
2025-10-21 17:01:34.427 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7168/api/Stocktaking/{a0a90f3a-8c30-40fe-97eb-d6c4f3d64040} - application/json 229
2025-10-21 17:01:34.432 +03:00 [INF] Request started
2025-10-21 17:01:34.433 +03:00 [INF] === Incoming Request ===
2025-10-21 17:01:34.434 +03:00 [INF] Path: /api/Stocktaking/%7Ba0a90f3a-8c30-40fe-97eb-d6c4f3d64040%7D
2025-10-21 17:01:34.436 +03:00 [INF] Method: PUT
2025-10-21 17:01:34.440 +03:00 [INF] === Headers ===
2025-10-21 17:01:34.442 +03:00 [INF] Accept: ["*/*"]
2025-10-21 17:01:34.444 +03:00 [INF] Connection: ["keep-alive"]
2025-10-21 17:01:34.446 +03:00 [INF] Host: ["localhost:7168"]
2025-10-21 17:01:34.448 +03:00 [INF] User-Agent: ["PostmanRuntime/7.49.0"]
2025-10-21 17:01:34.450 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-21 17:01:34.452 +03:00 [INF] Content-Type: ["application/json"]
2025-10-21 17:01:34.454 +03:00 [INF] Content-Length: ["229"]
2025-10-21 17:01:34.458 +03:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-10-21 17:01:34.460 +03:00 [INF] Postman-Token: ["dc857afc-203a-4252-bbc0-04428a81a3d6"]
2025-10-21 17:01:34.461 +03:00 [INF] 🔍 TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-10-21 17:01:34.462 +03:00 [INF] ✅ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-10-21 17:01:34.463 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingController.Update (ModularERP)'
2025-10-21 17:01:34.467 +03:00 [INF] Route matched with {action = "Update", controller = "Stocktaking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Update(System.Guid, ModularERP.Modules.Inventory.Features.Stocktaking.Commends.Commends_StockTaking_Header.UpdateStocktakingCommand) on controller ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingController (ModularERP).
2025-10-21 17:01:34.476 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-21 17:01:34.480 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingController.Update (ModularERP) in 8.1743ms
2025-10-21 17:01:34.482 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingController.Update (ModularERP)'
2025-10-21 17:01:34.484 +03:00 [INF] Request completed successfully with status code 400
2025-10-21 17:01:34.486 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7168/api/Stocktaking/{a0a90f3a-8c30-40fe-97eb-d6c4f3d64040} - 400 null application/json; charset=utf-8 59.4412ms
2025-10-21 17:01:54.632 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7168/api/Stocktaking/{a0a90f3a-8c30-40fe-97eb-d6c4f3d64040} - application/json 229
2025-10-21 17:01:54.636 +03:00 [INF] Request started
2025-10-21 17:01:54.637 +03:00 [INF] === Incoming Request ===
2025-10-21 17:01:54.638 +03:00 [INF] Path: /api/Stocktaking/%7Ba0a90f3a-8c30-40fe-97eb-d6c4f3d64040%7D
2025-10-21 17:01:54.639 +03:00 [INF] Method: PUT
2025-10-21 17:01:54.640 +03:00 [INF] === Headers ===
2025-10-21 17:01:54.641 +03:00 [INF] Accept: ["*/*"]
2025-10-21 17:01:54.644 +03:00 [INF] Connection: ["keep-alive"]
2025-10-21 17:01:54.647 +03:00 [INF] Host: ["localhost:7168"]
2025-10-21 17:01:54.649 +03:00 [INF] User-Agent: ["PostmanRuntime/7.49.0"]
2025-10-21 17:01:54.650 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-21 17:01:54.653 +03:00 [INF] Content-Type: ["application/json"]
2025-10-21 17:01:54.654 +03:00 [INF] Content-Length: ["229"]
2025-10-21 17:01:54.656 +03:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-10-21 17:01:54.657 +03:00 [INF] Postman-Token: ["212956bf-80e1-48db-ad2b-f442403e44d5"]
2025-10-21 17:01:54.659 +03:00 [INF] 🔍 TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-10-21 17:01:54.662 +03:00 [INF] ✅ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-10-21 17:01:54.664 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingController.Update (ModularERP)'
2025-10-21 17:01:54.666 +03:00 [INF] Route matched with {action = "Update", controller = "Stocktaking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Update(System.Guid, ModularERP.Modules.Inventory.Features.Stocktaking.Commends.Commends_StockTaking_Header.UpdateStocktakingCommand) on controller ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingController (ModularERP).
2025-10-21 17:01:54.713 +03:00 [INF] Updating stocktaking with ID "a0a90f3a-8c30-40fe-97eb-d6c4f3d64040"
2025-10-21 17:01:54.731 +03:00 [INF] Stocktaking "a0a90f3a-8c30-40fe-97eb-d6c4f3d64040" updated successfully
2025-10-21 17:01:54.740 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_Header.UpdateStocktakingDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-21 17:01:54.747 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingController.Update (ModularERP) in 78.1466ms
2025-10-21 17:01:54.750 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingController.Update (ModularERP)'
2025-10-21 17:01:54.752 +03:00 [INF] Request completed successfully with status code 200
2025-10-21 17:01:54.754 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7168/api/Stocktaking/{a0a90f3a-8c30-40fe-97eb-d6c4f3d64040} - 200 null application/json; charset=utf-8 120.874ms
2025-10-21 17:02:50.214 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/Stocktaking/by-warehouse/{e5d0bbaa-9099-43e1-bb16-f9744078a9ea} - null null
2025-10-21 17:02:50.217 +03:00 [INF] Request started
2025-10-21 17:02:50.218 +03:00 [INF] === Incoming Request ===
2025-10-21 17:02:50.219 +03:00 [INF] Path: /api/Stocktaking/by-warehouse/%7Be5d0bbaa-9099-43e1-bb16-f9744078a9ea%7D
2025-10-21 17:02:50.220 +03:00 [INF] Method: GET
2025-10-21 17:02:50.221 +03:00 [INF] === Headers ===
2025-10-21 17:02:50.222 +03:00 [INF] Accept: ["*/*"]
2025-10-21 17:02:50.226 +03:00 [INF] Connection: ["keep-alive"]
2025-10-21 17:02:50.229 +03:00 [INF] Host: ["localhost:7168"]
2025-10-21 17:02:50.232 +03:00 [INF] User-Agent: ["PostmanRuntime/7.49.0"]
2025-10-21 17:02:50.235 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-21 17:02:50.236 +03:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-10-21 17:02:50.238 +03:00 [INF] Postman-Token: ["8edc0232-4394-4bed-8350-417a4356ae67"]
2025-10-21 17:02:50.239 +03:00 [INF] 🔍 TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-10-21 17:02:50.240 +03:00 [INF] ✅ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-10-21 17:02:50.242 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingController.GetByWarehouse (ModularERP)'
2025-10-21 17:02:50.248 +03:00 [INF] Route matched with {action = "GetByWarehouse", controller = "Stocktaking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetByWarehouse(System.Guid) on controller ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingController (ModularERP).
2025-10-21 17:02:50.255 +03:00 [INF] Fetching stocktakings for warehouse "e5d0bbaa-9099-43e1-bb16-f9744078a9ea"
2025-10-21 17:02:50.279 +03:00 [INF] Fetched 2 stocktakings for warehouse "e5d0bbaa-9099-43e1-bb16-f9744078a9ea"
2025-10-21 17:02:50.281 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[System.Collections.Generic.List`1[[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_Header.StocktakingListDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-21 17:02:50.284 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingController.GetByWarehouse (ModularERP) in 32.4919ms
2025-10-21 17:02:50.287 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingController.GetByWarehouse (ModularERP)'
2025-10-21 17:02:50.290 +03:00 [INF] Request completed successfully with status code 200
2025-10-21 17:02:50.291 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/Stocktaking/by-warehouse/{e5d0bbaa-9099-43e1-bb16-f9744078a9ea} - 200 null application/json; charset=utf-8 77.1678ms
2025-10-21 17:19:16.972 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/stocktaking/{45ef0250-4160-4789-884f-8d5c14239b1c}/lines - application/json 593
2025-10-21 17:19:16.977 +03:00 [INF] Request started
2025-10-21 17:19:16.978 +03:00 [INF] === Incoming Request ===
2025-10-21 17:19:16.979 +03:00 [INF] Path: /api/stocktaking/%7B45ef0250-4160-4789-884f-8d5c14239b1c%7D/lines
2025-10-21 17:19:16.980 +03:00 [INF] Method: POST
2025-10-21 17:19:16.983 +03:00 [INF] === Headers ===
2025-10-21 17:19:16.985 +03:00 [INF] Accept: ["*/*"]
2025-10-21 17:19:16.987 +03:00 [INF] Connection: ["keep-alive"]
2025-10-21 17:19:16.989 +03:00 [INF] Host: ["localhost:7168"]
2025-10-21 17:19:16.990 +03:00 [INF] User-Agent: ["PostmanRuntime/7.49.0"]
2025-10-21 17:19:16.993 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-21 17:19:16.995 +03:00 [INF] Content-Type: ["application/json"]
2025-10-21 17:19:16.996 +03:00 [INF] Content-Length: ["593"]
2025-10-21 17:19:16.998 +03:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-10-21 17:19:17.000 +03:00 [INF] Postman-Token: ["c9a264b1-4e6f-4fae-b741-bcb6e7362d85"]
2025-10-21 17:19:17.004 +03:00 [INF] 🔍 TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-10-21 17:19:17.005 +03:00 [INF] ✅ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-10-21 17:19:17.007 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingLineController.CreateLine (ModularERP)'
2025-10-21 17:19:17.011 +03:00 [INF] Route matched with {action = "CreateLine", controller = "StocktakingLine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_Line.StocktakingLineDto]]] CreateLine(System.Guid, ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_Line.CreateStocktakingLineDto) on controller ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingLineController (ModularERP).
2025-10-21 17:19:17.023 +03:00 [INF] Creating stocktaking line for stocktaking "45ef0250-4160-4789-884f-8d5c14239b1c"
2025-10-21 17:19:17.047 +03:00 [INF] Processing CreateStocktakingLineCommand for stocktaking "45ef0250-4160-4789-884f-8d5c14239b1c"
2025-10-21 17:19:17.172 +03:00 [INF] Stocktaking line created successfully with ID "089fc53e-0b63-4c78-9058-0b900382d44d"
2025-10-21 17:19:17.200 +03:00 [INF] Stocktaking line created successfully with ID "089fc53e-0b63-4c78-9058-0b900382d44d"
2025-10-21 17:19:17.203 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_Line.StocktakingLineDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-21 17:19:17.211 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingLineController.CreateLine (ModularERP) in 193.9259ms
2025-10-21 17:19:17.214 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingLineController.CreateLine (ModularERP)'
2025-10-21 17:19:17.217 +03:00 [INF] Request completed successfully with status code 200
2025-10-21 17:19:17.218 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/stocktaking/{45ef0250-4160-4789-884f-8d5c14239b1c}/lines - 200 null application/json; charset=utf-8 245.8341ms
2025-10-21 17:36:44.146 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/stocktaking/{45ef0250-4160-4789-884f-8d5c14239b1c}/lines - application/json 593
2025-10-21 17:36:44.151 +03:00 [INF] Request started
2025-10-21 17:36:44.152 +03:00 [INF] === Incoming Request ===
2025-10-21 17:36:44.154 +03:00 [INF] Path: /api/stocktaking/%7B45ef0250-4160-4789-884f-8d5c14239b1c%7D/lines
2025-10-21 17:36:44.158 +03:00 [INF] Method: POST
2025-10-21 17:36:44.159 +03:00 [INF] === Headers ===
2025-10-21 17:36:44.160 +03:00 [INF] Accept: ["*/*"]
2025-10-21 17:36:44.164 +03:00 [INF] Connection: ["keep-alive"]
2025-10-21 17:36:44.167 +03:00 [INF] Host: ["localhost:7168"]
2025-10-21 17:36:44.169 +03:00 [INF] User-Agent: ["PostmanRuntime/7.49.0"]
2025-10-21 17:36:44.172 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-21 17:36:44.175 +03:00 [INF] Content-Type: ["application/json"]
2025-10-21 17:36:44.178 +03:00 [INF] Content-Length: ["593"]
2025-10-21 17:36:44.180 +03:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-10-21 17:36:44.181 +03:00 [INF] Postman-Token: ["8392adc5-8b05-4428-930a-6656751185f0"]
2025-10-21 17:36:44.185 +03:00 [INF] 🔍 TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-10-21 17:36:44.186 +03:00 [INF] ✅ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-10-21 17:36:44.188 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingLineController.CreateLine (ModularERP)'
2025-10-21 17:36:44.190 +03:00 [INF] Route matched with {action = "CreateLine", controller = "StocktakingLine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_Line.StocktakingLineDto]]] CreateLine(System.Guid, ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_Line.CreateStocktakingLineDto) on controller ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingLineController (ModularERP).
2025-10-21 17:36:44.197 +03:00 [INF] Creating stocktaking line for stocktaking "45ef0250-4160-4789-884f-8d5c14239b1c"
2025-10-21 17:36:44.203 +03:00 [INF] Processing CreateStocktakingLineCommand for stocktaking "45ef0250-4160-4789-884f-8d5c14239b1c"
2025-10-21 17:36:44.225 +03:00 [WRN] Product "1455fbe8-d0b2-4615-b998-5b00ed509ab7" already exists in stocktaking "45ef0250-4160-4789-884f-8d5c14239b1c"
2025-10-21 17:36:44.229 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingLineController.CreateLine (ModularERP) in 32.2825ms
2025-10-21 17:36:44.231 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingLineController.CreateLine (ModularERP)'
2025-10-21 17:36:44.233 +03:00 [WRN] Business logic exception occurred: This product already exists in the stocktaking
ModularERP.Common.Exceptions.BusinessLogicException: This product already exists in the stocktaking
   at ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTaking_Line.CreateStocktakingLineHandler.Handle(CreateStocktakingLineCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Stocktaking\Handlers\Handlers_StockTaking_Line\CreateStocktakingLineHandler.cs:line 93
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingLineController.CreateLine(Guid stocktakingId, CreateStocktakingLineDto dto) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Stocktaking\Controllers\StocktakingLineController.cs:line 42
   at lambda_method527(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_7>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 352
--- End of stack trace from previous location ---
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 305
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-10-21 17:36:44.266 +03:00 [INF] Error response sent with status code 400
2025-10-21 17:36:44.269 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/stocktaking/{45ef0250-4160-4789-884f-8d5c14239b1c}/lines - 400 null application/json; charset=utf-8 122.7473ms
2025-10-21 17:37:05.260 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/stocktaking/{45ef0250-4160-4789-884f-8d5c14239b1c}/lines - application/json 593
2025-10-21 17:37:05.266 +03:00 [INF] Request started
2025-10-21 17:37:05.267 +03:00 [INF] === Incoming Request ===
2025-10-21 17:37:05.268 +03:00 [INF] Path: /api/stocktaking/%7B45ef0250-4160-4789-884f-8d5c14239b1c%7D/lines
2025-10-21 17:37:05.272 +03:00 [INF] Method: POST
2025-10-21 17:37:05.273 +03:00 [INF] === Headers ===
2025-10-21 17:37:05.274 +03:00 [INF] Accept: ["*/*"]
2025-10-21 17:37:05.276 +03:00 [INF] Connection: ["keep-alive"]
2025-10-21 17:37:05.278 +03:00 [INF] Host: ["localhost:7168"]
2025-10-21 17:37:05.279 +03:00 [INF] User-Agent: ["PostmanRuntime/7.49.0"]
2025-10-21 17:37:05.283 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-21 17:37:05.285 +03:00 [INF] Content-Type: ["application/json"]
2025-10-21 17:37:05.287 +03:00 [INF] Content-Length: ["593"]
2025-10-21 17:37:05.289 +03:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-10-21 17:37:05.291 +03:00 [INF] Postman-Token: ["1867df5f-5813-46c0-8b31-e948c99d4e5f"]
2025-10-21 17:37:05.293 +03:00 [INF] 🔍 TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-10-21 17:37:05.294 +03:00 [INF] ✅ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-10-21 17:37:05.296 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingLineController.CreateLine (ModularERP)'
2025-10-21 17:37:05.298 +03:00 [INF] Route matched with {action = "CreateLine", controller = "StocktakingLine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_Line.StocktakingLineDto]]] CreateLine(System.Guid, ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_Line.CreateStocktakingLineDto) on controller ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingLineController (ModularERP).
2025-10-21 17:37:05.306 +03:00 [INF] Creating stocktaking line for stocktaking "45ef0250-4160-4789-884f-8d5c14239b1c"
2025-10-21 17:37:05.312 +03:00 [INF] Processing CreateStocktakingLineCommand for stocktaking "45ef0250-4160-4789-884f-8d5c14239b1c"
2025-10-21 17:37:05.328 +03:00 [INF] Stocktaking line created successfully with ID "c98ed6e2-98ab-4d74-9f4d-1df282fbea94"
2025-10-21 17:37:05.337 +03:00 [INF] Stocktaking line created successfully with ID "c98ed6e2-98ab-4d74-9f4d-1df282fbea94"
2025-10-21 17:37:05.340 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_Line.StocktakingLineDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-21 17:37:05.342 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingLineController.CreateLine (ModularERP) in 37.6503ms
2025-10-21 17:37:05.345 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingLineController.CreateLine (ModularERP)'
2025-10-21 17:37:05.347 +03:00 [INF] Request completed successfully with status code 200
2025-10-21 17:37:05.350 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/stocktaking/{45ef0250-4160-4789-884f-8d5c14239b1c}/lines - 200 null application/json; charset=utf-8 89.6318ms
2025-10-21 17:47:08.247 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/stocktaking/{45ef0250-4160-4789-884f-8d5c14239b1c}/lines - null null
2025-10-21 17:47:08.252 +03:00 [INF] Request started
2025-10-21 17:47:08.254 +03:00 [INF] === Incoming Request ===
2025-10-21 17:47:08.256 +03:00 [INF] Path: /api/stocktaking/%7B45ef0250-4160-4789-884f-8d5c14239b1c%7D/lines
2025-10-21 17:47:08.258 +03:00 [INF] Method: GET
2025-10-21 17:47:08.260 +03:00 [INF] === Headers ===
2025-10-21 17:47:08.262 +03:00 [INF] Accept: ["*/*"]
2025-10-21 17:47:08.264 +03:00 [INF] Connection: ["keep-alive"]
2025-10-21 17:47:08.266 +03:00 [INF] Host: ["localhost:7168"]
2025-10-21 17:47:08.270 +03:00 [INF] User-Agent: ["PostmanRuntime/7.49.0"]
2025-10-21 17:47:08.271 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-21 17:47:08.273 +03:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-10-21 17:47:08.275 +03:00 [INF] Postman-Token: ["ce9b9240-8eda-4c50-8b8d-2d39f2019e12"]
2025-10-21 17:47:08.278 +03:00 [INF] 🔍 TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-10-21 17:47:08.280 +03:00 [INF] ✅ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-10-21 17:47:08.282 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingLineController.GetAllLines (ModularERP)'
2025-10-21 17:47:08.287 +03:00 [INF] Route matched with {action = "GetAllLines", controller = "StocktakingLine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[System.Collections.Generic.List`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_Line.StocktakingLineDto]]]] GetAllLines(System.Guid) on controller ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingLineController (ModularERP).
2025-10-21 17:47:08.292 +03:00 [INF] Retrieving all lines for stocktaking "45ef0250-4160-4789-884f-8d5c14239b1c"
2025-10-21 17:47:08.351 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-10-21 17:47:08.358 +03:00 [INF] Processing GetStocktakingLinesQuery for stocktaking "45ef0250-4160-4789-884f-8d5c14239b1c"
2025-10-21 17:47:08.386 +03:00 [INF] Retrieved 1 lines for stocktaking "45ef0250-4160-4789-884f-8d5c14239b1c"
2025-10-21 17:47:08.389 +03:00 [INF] Retrieved 1 lines for stocktaking "45ef0250-4160-4789-884f-8d5c14239b1c"
2025-10-21 17:47:08.390 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[System.Collections.Generic.List`1[[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_Line.StocktakingLineDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-21 17:47:08.394 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingLineController.GetAllLines (ModularERP) in 102.4582ms
2025-10-21 17:47:08.398 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingLineController.GetAllLines (ModularERP)'
2025-10-21 17:47:08.401 +03:00 [INF] Request completed successfully with status code 200
2025-10-21 17:47:08.403 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/stocktaking/{45ef0250-4160-4789-884f-8d5c14239b1c}/lines - 200 null application/json; charset=utf-8 156.1032ms
2025-10-21 17:48:02.880 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/stocktaking/{45ef0250-4160-4789-884f-8d5c14239b1c}/lines/{c98ed6e2-98ab-4d74-9f4d-1df282fbea94} - null null
2025-10-21 17:48:02.885 +03:00 [INF] Request started
2025-10-21 17:48:02.887 +03:00 [INF] === Incoming Request ===
2025-10-21 17:48:02.888 +03:00 [INF] Path: /api/stocktaking/%7B45ef0250-4160-4789-884f-8d5c14239b1c%7D/lines/%7Bc98ed6e2-98ab-4d74-9f4d-1df282fbea94%7D
2025-10-21 17:48:02.892 +03:00 [INF] Method: GET
2025-10-21 17:48:02.895 +03:00 [INF] === Headers ===
2025-10-21 17:48:02.896 +03:00 [INF] Accept: ["*/*"]
2025-10-21 17:48:02.899 +03:00 [INF] Connection: ["keep-alive"]
2025-10-21 17:48:02.903 +03:00 [INF] Host: ["localhost:7168"]
2025-10-21 17:48:02.904 +03:00 [INF] User-Agent: ["PostmanRuntime/7.49.0"]
2025-10-21 17:48:02.906 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-21 17:48:02.908 +03:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-10-21 17:48:02.909 +03:00 [INF] Postman-Token: ["152fcbfa-f3ac-4ce8-a2de-fe838cf83584"]
2025-10-21 17:48:02.912 +03:00 [INF] 🔍 TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-10-21 17:48:02.915 +03:00 [INF] ✅ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-10-21 17:48:02.917 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingLineController.GetLineById (ModularERP)'
2025-10-21 17:48:02.921 +03:00 [INF] Route matched with {action = "GetLineById", controller = "StocktakingLine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_Line.StocktakingLineDto]]] GetLineById(System.Guid, System.Guid) on controller ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingLineController (ModularERP).
2025-10-21 17:48:02.926 +03:00 [INF] Retrieving line "c98ed6e2-98ab-4d74-9f4d-1df282fbea94" for stocktaking "45ef0250-4160-4789-884f-8d5c14239b1c"
2025-10-21 17:48:02.931 +03:00 [INF] Processing GetStocktakingLineByIdQuery for line "c98ed6e2-98ab-4d74-9f4d-1df282fbea94"
2025-10-21 17:48:02.943 +03:00 [INF] Retrieved stocktaking line "c98ed6e2-98ab-4d74-9f4d-1df282fbea94" successfully
2025-10-21 17:48:02.946 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_Line.StocktakingLineDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-21 17:48:02.952 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingLineController.GetLineById (ModularERP) in 26.4934ms
2025-10-21 17:48:02.955 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingLineController.GetLineById (ModularERP)'
2025-10-21 17:48:02.959 +03:00 [INF] Request completed successfully with status code 200
2025-10-21 17:48:02.960 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/stocktaking/{45ef0250-4160-4789-884f-8d5c14239b1c}/lines/{c98ed6e2-98ab-4d74-9f4d-1df282fbea94} - 200 null application/json; charset=utf-8 79.7975ms
2025-10-21 17:49:29.717 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7168/api/stocktaking/{45ef0250-4160-4789-884f-8d5c14239b1c}/lines/{c98ed6e2-98ab-4d74-9f4d-1df282fbea94} - application/json 28
2025-10-21 17:49:29.722 +03:00 [INF] Request started
2025-10-21 17:49:29.723 +03:00 [INF] === Incoming Request ===
2025-10-21 17:49:29.724 +03:00 [INF] Path: /api/stocktaking/%7B45ef0250-4160-4789-884f-8d5c14239b1c%7D/lines/%7Bc98ed6e2-98ab-4d74-9f4d-1df282fbea94%7D
2025-10-21 17:49:29.726 +03:00 [INF] Method: PUT
2025-10-21 17:49:29.728 +03:00 [INF] === Headers ===
2025-10-21 17:49:29.730 +03:00 [INF] Accept: ["*/*"]
2025-10-21 17:49:29.731 +03:00 [INF] Connection: ["keep-alive"]
2025-10-21 17:49:29.733 +03:00 [INF] Host: ["localhost:7168"]
2025-10-21 17:49:29.736 +03:00 [INF] User-Agent: ["PostmanRuntime/7.49.0"]
2025-10-21 17:49:29.740 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-21 17:49:29.742 +03:00 [INF] Content-Type: ["application/json"]
2025-10-21 17:49:29.744 +03:00 [INF] Content-Length: ["28"]
2025-10-21 17:49:29.746 +03:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-10-21 17:49:29.749 +03:00 [INF] Postman-Token: ["40c7ad98-e2b4-4363-8d88-0bedaaeba6dd"]
2025-10-21 17:49:29.751 +03:00 [INF] 🔍 TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-10-21 17:49:29.753 +03:00 [INF] ✅ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-10-21 17:49:29.756 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingLineController.UpdateLine (ModularERP)'
2025-10-21 17:49:29.761 +03:00 [INF] Route matched with {action = "UpdateLine", controller = "StocktakingLine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_Line.StocktakingLineDto]]] UpdateLine(System.Guid, System.Guid, ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_Line.UpdateStocktakingLineDto) on controller ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingLineController (ModularERP).
2025-10-21 17:49:29.770 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-10-21 17:49:29.783 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingLineController.UpdateLine (ModularERP) in 16.2919ms
2025-10-21 17:49:29.787 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingLineController.UpdateLine (ModularERP)'
2025-10-21 17:49:29.789 +03:00 [INF] Request completed successfully with status code 400
2025-10-21 17:49:29.791 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7168/api/stocktaking/{45ef0250-4160-4789-884f-8d5c14239b1c}/lines/{c98ed6e2-98ab-4d74-9f4d-1df282fbea94} - 400 null application/problem+json; charset=utf-8 73.4417ms
2025-10-21 17:50:16.081 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7168/api/stocktaking/{45ef0250-4160-4789-884f-8d5c14239b1c}/lines/{c98ed6e2-98ab-4d74-9f4d-1df282fbea94} - application/json 460
2025-10-21 17:50:16.087 +03:00 [INF] Request started
2025-10-21 17:50:16.088 +03:00 [INF] === Incoming Request ===
2025-10-21 17:50:16.089 +03:00 [INF] Path: /api/stocktaking/%7B45ef0250-4160-4789-884f-8d5c14239b1c%7D/lines/%7Bc98ed6e2-98ab-4d74-9f4d-1df282fbea94%7D
2025-10-21 17:50:16.092 +03:00 [INF] Method: PUT
2025-10-21 17:50:16.094 +03:00 [INF] === Headers ===
2025-10-21 17:50:16.096 +03:00 [INF] Accept: ["*/*"]
2025-10-21 17:50:16.098 +03:00 [INF] Connection: ["keep-alive"]
2025-10-21 17:50:16.099 +03:00 [INF] Host: ["localhost:7168"]
2025-10-21 17:50:16.102 +03:00 [INF] User-Agent: ["PostmanRuntime/7.49.0"]
2025-10-21 17:50:16.105 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-21 17:50:16.107 +03:00 [INF] Content-Type: ["application/json"]
2025-10-21 17:50:16.109 +03:00 [INF] Content-Length: ["460"]
2025-10-21 17:50:16.112 +03:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-10-21 17:50:16.113 +03:00 [INF] Postman-Token: ["a4c46b8d-3548-44ee-bb10-662dfef3659f"]
2025-10-21 17:50:16.116 +03:00 [INF] 🔍 TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-10-21 17:50:16.117 +03:00 [INF] ✅ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-10-21 17:50:16.118 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingLineController.UpdateLine (ModularERP)'
2025-10-21 17:50:16.122 +03:00 [INF] Route matched with {action = "UpdateLine", controller = "StocktakingLine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_Line.StocktakingLineDto]]] UpdateLine(System.Guid, System.Guid, ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_Line.UpdateStocktakingLineDto) on controller ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingLineController (ModularERP).
2025-10-21 17:50:16.128 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-10-21 17:50:16.131 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingLineController.UpdateLine (ModularERP) in 3.9188ms
2025-10-21 17:50:16.134 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingLineController.UpdateLine (ModularERP)'
2025-10-21 17:50:16.136 +03:00 [INF] Request completed successfully with status code 400
2025-10-21 17:50:16.138 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7168/api/stocktaking/{45ef0250-4160-4789-884f-8d5c14239b1c}/lines/{c98ed6e2-98ab-4d74-9f4d-1df282fbea94} - 400 null application/problem+json; charset=utf-8 56.737ms
2025-10-21 17:50:40.315 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7168/api/stocktaking/{45ef0250-4160-4789-884f-8d5c14239b1c}/lines/{c98ed6e2-98ab-4d74-9f4d-1df282fbea94} - application/json 481
2025-10-21 17:50:40.319 +03:00 [INF] Request started
2025-10-21 17:50:40.320 +03:00 [INF] === Incoming Request ===
2025-10-21 17:50:40.321 +03:00 [INF] Path: /api/stocktaking/%7B45ef0250-4160-4789-884f-8d5c14239b1c%7D/lines/%7Bc98ed6e2-98ab-4d74-9f4d-1df282fbea94%7D
2025-10-21 17:50:40.322 +03:00 [INF] Method: PUT
2025-10-21 17:50:40.325 +03:00 [INF] === Headers ===
2025-10-21 17:50:40.326 +03:00 [INF] Accept: ["*/*"]
2025-10-21 17:50:40.329 +03:00 [INF] Connection: ["keep-alive"]
2025-10-21 17:50:40.331 +03:00 [INF] Host: ["localhost:7168"]
2025-10-21 17:50:40.333 +03:00 [INF] User-Agent: ["PostmanRuntime/7.49.0"]
2025-10-21 17:50:40.337 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-21 17:50:40.339 +03:00 [INF] Content-Type: ["application/json"]
2025-10-21 17:50:40.341 +03:00 [INF] Content-Length: ["481"]
2025-10-21 17:50:40.343 +03:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-10-21 17:50:40.346 +03:00 [INF] Postman-Token: ["cb6af4a9-0d7e-4b7d-99cb-b8246e41d0b8"]
2025-10-21 17:50:40.349 +03:00 [INF] 🔍 TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-10-21 17:50:40.350 +03:00 [INF] ✅ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-10-21 17:50:40.352 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingLineController.UpdateLine (ModularERP)'
2025-10-21 17:50:40.355 +03:00 [INF] Route matched with {action = "UpdateLine", controller = "StocktakingLine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_Line.StocktakingLineDto]]] UpdateLine(System.Guid, System.Guid, ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_Line.UpdateStocktakingLineDto) on controller ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingLineController (ModularERP).
2025-10-21 17:50:40.360 +03:00 [INF] Updating line "c98ed6e2-98ab-4d74-9f4d-1df282fbea94" for stocktaking "45ef0250-4160-4789-884f-8d5c14239b1c"
2025-10-21 17:50:40.371 +03:00 [INF] Processing UpdateStocktakingLineCommand for line "c98ed6e2-98ab-4d74-9f4d-1df282fbea94"
2025-10-21 17:50:40.412 +03:00 [INF] Stocktaking line "c98ed6e2-98ab-4d74-9f4d-1df282fbea94" updated successfully
2025-10-21 17:50:40.424 +03:00 [INF] Line "c98ed6e2-98ab-4d74-9f4d-1df282fbea94" updated successfully
2025-10-21 17:50:40.426 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_Line.StocktakingLineDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-21 17:50:40.431 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingLineController.UpdateLine (ModularERP) in 72.1784ms
2025-10-21 17:50:40.434 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingLineController.UpdateLine (ModularERP)'
2025-10-21 17:50:40.436 +03:00 [INF] Request completed successfully with status code 200
2025-10-21 17:50:40.439 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7168/api/stocktaking/{45ef0250-4160-4789-884f-8d5c14239b1c}/lines/{c98ed6e2-98ab-4d74-9f4d-1df282fbea94} - 200 null application/json; charset=utf-8 124.0383ms
2025-10-21 17:57:43.583 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/Stocktaking - null null
2025-10-21 17:57:43.587 +03:00 [INF] Request started
2025-10-21 17:57:43.588 +03:00 [INF] === Incoming Request ===
2025-10-21 17:57:43.590 +03:00 [INF] Path: /api/Stocktaking
2025-10-21 17:57:43.591 +03:00 [INF] Method: GET
2025-10-21 17:57:43.594 +03:00 [INF] === Headers ===
2025-10-21 17:57:43.595 +03:00 [INF] Accept: ["*/*"]
2025-10-21 17:57:43.596 +03:00 [INF] Connection: ["keep-alive"]
2025-10-21 17:57:43.598 +03:00 [INF] Host: ["localhost:7168"]
2025-10-21 17:57:43.600 +03:00 [INF] User-Agent: ["PostmanRuntime/7.49.0"]
2025-10-21 17:57:43.603 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-21 17:57:43.605 +03:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-10-21 17:57:43.607 +03:00 [INF] Postman-Token: ["e0949725-d5b4-49e3-bc57-da2733f29359"]
2025-10-21 17:57:43.610 +03:00 [INF] 🔍 TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-10-21 17:57:43.611 +03:00 [INF] ✅ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-10-21 17:57:43.613 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingController.GetAll (ModularERP)'
2025-10-21 17:57:43.615 +03:00 [INF] Route matched with {action = "GetAll", controller = "Stocktaking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.Nullable`1[System.Guid], System.Nullable`1[System.Guid], System.String) on controller ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingController (ModularERP).
2025-10-21 17:57:43.620 +03:00 [INF] Fetching all stocktakings
2025-10-21 17:57:43.668 +03:00 [INF] Fetched 2 stocktakings
2025-10-21 17:57:43.670 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[System.Collections.Generic.List`1[[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_Header.StocktakingListDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-21 17:57:43.674 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingController.GetAll (ModularERP) in 55.0339ms
2025-10-21 17:57:43.676 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingController.GetAll (ModularERP)'
2025-10-21 17:57:43.679 +03:00 [INF] Request completed successfully with status code 200
2025-10-21 17:57:43.682 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/Stocktaking - 200 null application/json; charset=utf-8 98.8391ms
2025-10-21 22:25:19.886 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-21 22:25:19.903 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 16.8449ms
2025-10-21 22:25:19.915 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-21 22:25:19.929 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-21 22:25:19.929 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 13.9268ms
2025-10-21 22:25:19.946 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 17.3856ms
2025-10-21 22:25:20.024 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-21 22:25:20.237 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 213.0588ms
2025-10-21 22:29:16.126 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/create - application/json 271
2025-10-21 22:29:16.133 +03:00 [INF] Request started
2025-10-21 22:29:16.134 +03:00 [INF] === Incoming Request ===
2025-10-21 22:29:16.135 +03:00 [INF] Path: /api/StocktakingWorkFlow/create
2025-10-21 22:29:16.138 +03:00 [INF] Method: POST
2025-10-21 22:29:16.139 +03:00 [INF] === Headers ===
2025-10-21 22:29:16.140 +03:00 [INF] Accept: ["*/*"]
2025-10-21 22:29:16.142 +03:00 [INF] Connection: ["keep-alive"]
2025-10-21 22:29:16.144 +03:00 [INF] Host: ["localhost:7168"]
2025-10-21 22:29:16.148 +03:00 [INF] User-Agent: ["PostmanRuntime/7.49.0"]
2025-10-21 22:29:16.151 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-21 22:29:16.153 +03:00 [INF] Content-Type: ["application/json"]
2025-10-21 22:29:16.157 +03:00 [INF] Content-Length: ["271"]
2025-10-21 22:29:16.158 +03:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-10-21 22:29:16.160 +03:00 [INF] Postman-Token: ["fbbf12b2-1df9-4a0e-9d68-e17873b597bd"]
2025-10-21 22:29:16.163 +03:00 [INF] 🔍 TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-10-21 22:29:16.165 +03:00 [INF] ✅ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-10-21 22:29:16.168 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Create (ModularERP)'
2025-10-21 22:29:16.180 +03:00 [INF] Route matched with {action = "Create", controller = "StocktakingWorkFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_WorkFlow.CreateStocktakingDto]]] Create(ModularERP.Modules.Inventory.Features.Stocktaking.Commends.Commands_StockTraking_WorkFlow.CreateStocktakingCommand, System.Threading.CancellationToken) on controller ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController (ModularERP).
2025-10-21 22:29:16.187 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Create (ModularERP) in 1.4695ms
2025-10-21 22:29:16.189 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Create (ModularERP)'
2025-10-21 22:29:16.192 +03:00 [ERR] Unexpected error occurred
System.InvalidOperationException: Unable to resolve service for type 'Microsoft.Extensions.Logging.ILogger' while attempting to activate 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method940(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_7>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 352
--- End of stack trace from previous location ---
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 305
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-10-21 22:29:16.213 +03:00 [INF] Error response sent with status code 500
2025-10-21 22:29:16.215 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/create - 500 null application/json; charset=utf-8 89.1529ms
2025-10-21 22:30:54.270 +03:00 [INF] Starting web host...
2025-10-21 22:30:57.827 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-21 22:30:57.910 +03:00 [INF] Executed DbCommand (66ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-10-21 22:30:57.987 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-21 22:30:57.993 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-21 22:30:58.012 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-21 22:30:58.070 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-21 22:30:58.087 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-21 22:30:58.092 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-21 22:30:58.100 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-21 22:30:58.113 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-10-21 22:30:58.121 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-21 22:30:58.287 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-21 22:30:58.296 +03:00 [INF] Master database initialized successfully
2025-10-21 22:31:00.203 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-21 22:31:00.390 +03:00 [INF] Now listening on: https://localhost:7168
2025-10-21 22:31:00.392 +03:00 [INF] Now listening on: http://localhost:5004
2025-10-21 22:31:00.478 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-21 22:31:00.480 +03:00 [INF] Hosting environment: Development
2025-10-21 22:31:00.482 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-10-21 22:31:00.740 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-21 22:31:00.917 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 178.587ms
2025-10-21 22:31:00.928 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-21 22:31:00.928 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-21 22:31:00.936 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 8.207ms
2025-10-21 22:31:00.959 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 31.5511ms
2025-10-21 22:31:01.019 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-21 22:31:01.277 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 258.318ms
2025-10-21 22:31:03.187 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/create - application/json 271
2025-10-21 22:31:03.203 +03:00 [INF] Request started
2025-10-21 22:31:03.206 +03:00 [INF] === Incoming Request ===
2025-10-21 22:31:03.207 +03:00 [INF] Path: /api/StocktakingWorkFlow/create
2025-10-21 22:31:03.209 +03:00 [INF] Method: POST
2025-10-21 22:31:03.211 +03:00 [INF] === Headers ===
2025-10-21 22:31:03.213 +03:00 [INF] Accept: ["*/*"]
2025-10-21 22:31:03.217 +03:00 [INF] Connection: ["keep-alive"]
2025-10-21 22:31:03.218 +03:00 [INF] Host: ["localhost:7168"]
2025-10-21 22:31:03.220 +03:00 [INF] User-Agent: ["PostmanRuntime/7.49.0"]
2025-10-21 22:31:03.221 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-21 22:31:03.223 +03:00 [INF] Content-Type: ["application/json"]
2025-10-21 22:31:03.225 +03:00 [INF] Content-Length: ["271"]
2025-10-21 22:31:03.227 +03:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-10-21 22:31:03.229 +03:00 [INF] Postman-Token: ["a57867f0-6c09-4812-9562-6e9d12cdcc95"]
2025-10-21 22:31:03.233 +03:00 [INF] 🔍 TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-10-21 22:31:03.234 +03:00 [INF] ✅ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-10-21 22:31:03.236 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Create (ModularERP)'
2025-10-21 22:31:03.251 +03:00 [INF] Route matched with {action = "Create", controller = "StocktakingWorkFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_WorkFlow.CreateStocktakingDto]]] Create(ModularERP.Modules.Inventory.Features.Stocktaking.Commends.Commands_StockTraking_WorkFlow.CreateStocktakingCommand, System.Threading.CancellationToken) on controller ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController (ModularERP).
2025-10-21 22:31:03.257 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-21 22:31:03.281 +03:00 [INF] POST: Create Stocktaking
2025-10-21 22:31:03.366 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-10-21 22:31:03.762 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-21 22:31:03.765 +03:00 [INF] Creating stocktaking 123456789 for warehouse "e5d0bbaa-9099-43e1-bb16-f9744078a9ea"
2025-10-21 22:31:03.990 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_Header.CreateStocktakingDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-21 22:31:04.007 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Create (ModularERP) in 749.6074ms
2025-10-21 22:31:04.010 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Create (ModularERP)'
2025-10-21 22:31:04.012 +03:00 [INF] Request completed successfully with status code 200
2025-10-21 22:31:04.017 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/create - 200 null application/json; charset=utf-8 829.5668ms
2025-10-21 22:31:59.481 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/create - application/json 272
2025-10-21 22:31:59.491 +03:00 [INF] Request started
2025-10-21 22:31:59.493 +03:00 [INF] === Incoming Request ===
2025-10-21 22:31:59.494 +03:00 [INF] Path: /api/StocktakingWorkFlow/create
2025-10-21 22:31:59.495 +03:00 [INF] Method: POST
2025-10-21 22:31:59.497 +03:00 [INF] === Headers ===
2025-10-21 22:31:59.498 +03:00 [INF] Accept: ["*/*"]
2025-10-21 22:31:59.499 +03:00 [INF] Connection: ["keep-alive"]
2025-10-21 22:31:59.501 +03:00 [INF] Host: ["localhost:7168"]
2025-10-21 22:31:59.502 +03:00 [INF] User-Agent: ["PostmanRuntime/7.49.0"]
2025-10-21 22:31:59.504 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-21 22:31:59.506 +03:00 [INF] Content-Type: ["application/json"]
2025-10-21 22:31:59.508 +03:00 [INF] Content-Length: ["272"]
2025-10-21 22:31:59.509 +03:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-10-21 22:31:59.512 +03:00 [INF] Postman-Token: ["239352ba-c713-47ba-9abc-696555ec35b1"]
2025-10-21 22:31:59.516 +03:00 [INF] 🔍 TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-10-21 22:31:59.519 +03:00 [INF] ✅ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-10-21 22:31:59.520 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Create (ModularERP)'
2025-10-21 22:31:59.521 +03:00 [INF] Route matched with {action = "Create", controller = "StocktakingWorkFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_WorkFlow.CreateStocktakingDto]]] Create(ModularERP.Modules.Inventory.Features.Stocktaking.Commends.Commands_StockTraking_WorkFlow.CreateStocktakingCommand, System.Threading.CancellationToken) on controller ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController (ModularERP).
2025-10-21 22:31:59.526 +03:00 [INF] POST: Create Stocktaking
2025-10-21 22:31:59.566 +03:00 [INF] Creating stocktaking 1234567891 for warehouse "e5d0bbaa-9099-43e1-bb16-f9744078a9ea"
2025-10-21 22:31:59.583 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_Header.CreateStocktakingDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-21 22:31:59.587 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Create (ModularERP) in 62.1632ms
2025-10-21 22:31:59.590 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Create (ModularERP)'
2025-10-21 22:31:59.591 +03:00 [INF] Request completed successfully with status code 200
2025-10-21 22:31:59.593 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/create - 200 null application/json; charset=utf-8 111.315ms
2025-10-21 22:32:55.393 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/create - application/json 273
2025-10-21 22:32:55.397 +03:00 [INF] Request started
2025-10-21 22:32:55.399 +03:00 [INF] === Incoming Request ===
2025-10-21 22:32:55.400 +03:00 [INF] Path: /api/StocktakingWorkFlow/create
2025-10-21 22:32:55.401 +03:00 [INF] Method: POST
2025-10-21 22:32:55.402 +03:00 [INF] === Headers ===
2025-10-21 22:32:55.403 +03:00 [INF] Accept: ["*/*"]
2025-10-21 22:32:55.406 +03:00 [INF] Connection: ["keep-alive"]
2025-10-21 22:32:55.409 +03:00 [INF] Host: ["localhost:7168"]
2025-10-21 22:32:55.411 +03:00 [INF] User-Agent: ["PostmanRuntime/7.49.0"]
2025-10-21 22:32:55.414 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-21 22:32:55.417 +03:00 [INF] Content-Type: ["application/json"]
2025-10-21 22:32:55.419 +03:00 [INF] Content-Length: ["273"]
2025-10-21 22:32:55.421 +03:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-10-21 22:32:55.423 +03:00 [INF] Postman-Token: ["d0e04174-4033-4550-8a6b-91fd62182f80"]
2025-10-21 22:32:55.426 +03:00 [INF] 🔍 TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-10-21 22:32:55.428 +03:00 [INF] ✅ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-10-21 22:32:55.430 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Create (ModularERP)'
2025-10-21 22:32:55.431 +03:00 [INF] Route matched with {action = "Create", controller = "StocktakingWorkFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_WorkFlow.CreateStocktakingDto]]] Create(ModularERP.Modules.Inventory.Features.Stocktaking.Commends.Commands_StockTraking_WorkFlow.CreateStocktakingCommand, System.Threading.CancellationToken) on controller ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController (ModularERP).
2025-10-21 22:32:55.436 +03:00 [INF] POST: Create Stocktaking
2025-10-21 22:32:55.441 +03:00 [INF] Creating stocktaking 1234567891 for warehouse "e5d0bbaa-9099-43e1-bb16-f9744078a9ea"
2025-10-21 22:32:55.456 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_Header.CreateStocktakingDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-21 22:32:55.459 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Create (ModularERP) in 23.4448ms
2025-10-21 22:32:55.462 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Create (ModularERP)'
2025-10-21 22:32:55.469 +03:00 [INF] Request completed successfully with status code 200
2025-10-21 22:32:55.471 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/create - 200 null application/json; charset=utf-8 78.0763ms
2025-10-21 22:33:28.309 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/create - application/json 273
2025-10-21 22:33:28.315 +03:00 [INF] Request started
2025-10-21 22:33:28.316 +03:00 [INF] === Incoming Request ===
2025-10-21 22:33:28.317 +03:00 [INF] Path: /api/StocktakingWorkFlow/create
2025-10-21 22:33:28.318 +03:00 [INF] Method: POST
2025-10-21 22:33:28.320 +03:00 [INF] === Headers ===
2025-10-21 22:33:28.321 +03:00 [INF] Accept: ["*/*"]
2025-10-21 22:33:28.322 +03:00 [INF] Connection: ["keep-alive"]
2025-10-21 22:33:28.324 +03:00 [INF] Host: ["localhost:7168"]
2025-10-21 22:33:28.326 +03:00 [INF] User-Agent: ["PostmanRuntime/7.49.0"]
2025-10-21 22:33:28.327 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-21 22:33:28.330 +03:00 [INF] Content-Type: ["application/json"]
2025-10-21 22:33:28.333 +03:00 [INF] Content-Length: ["273"]
2025-10-21 22:33:28.335 +03:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-10-21 22:33:28.337 +03:00 [INF] Postman-Token: ["b6988165-0e13-4ce4-a38c-d7b578f2019b"]
2025-10-21 22:33:28.339 +03:00 [INF] 🔍 TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-10-21 22:33:28.340 +03:00 [INF] ✅ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-10-21 22:33:28.341 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Create (ModularERP)'
2025-10-21 22:33:28.343 +03:00 [INF] Route matched with {action = "Create", controller = "StocktakingWorkFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_WorkFlow.CreateStocktakingDto]]] Create(ModularERP.Modules.Inventory.Features.Stocktaking.Commends.Commands_StockTraking_WorkFlow.CreateStocktakingCommand, System.Threading.CancellationToken) on controller ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController (ModularERP).
2025-10-21 22:33:28.348 +03:00 [INF] POST: Create Stocktaking
2025-10-21 22:33:28.350 +03:00 [INF] Creating stocktaking 1234567891 for warehouse "e5d0bbaa-9099-43e1-bb16-f9744078a9ea"
2025-10-21 22:33:28.360 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_Header.CreateStocktakingDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-21 22:33:28.364 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Create (ModularERP) in 16.8041ms
2025-10-21 22:33:28.368 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Create (ModularERP)'
2025-10-21 22:33:28.369 +03:00 [INF] Request completed successfully with status code 200
2025-10-21 22:33:28.370 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/create - 200 null application/json; charset=utf-8 61.1933ms
2025-10-21 22:36:32.104 +03:00 [INF] Starting web host...
2025-10-21 22:36:33.247 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-21 22:36:33.319 +03:00 [INF] Executed DbCommand (56ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-10-21 22:36:33.388 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-21 22:36:33.394 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-21 22:36:33.411 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-21 22:36:33.465 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-21 22:36:33.483 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-21 22:36:33.488 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-21 22:36:33.495 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-21 22:36:33.506 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-10-21 22:36:33.515 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-21 22:36:33.678 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-21 22:36:33.686 +03:00 [INF] Master database initialized successfully
2025-10-21 22:36:35.319 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-21 22:36:35.423 +03:00 [INF] Now listening on: https://localhost:7168
2025-10-21 22:36:35.425 +03:00 [INF] Now listening on: http://localhost:5004
2025-10-21 22:36:35.497 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-21 22:36:35.513 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-21 22:36:35.515 +03:00 [INF] Hosting environment: Development
2025-10-21 22:36:35.517 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-10-21 22:36:35.635 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 139.3109ms
2025-10-21 22:36:35.687 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-21 22:36:35.687 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-21 22:36:35.696 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 8.8359ms
2025-10-21 22:36:35.713 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 26.5411ms
2025-10-21 22:36:35.744 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-21 22:36:35.992 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 248.8748ms
2025-10-21 22:38:20.000 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/{a0a90f3a-8c30-40fe-97eb-d6c4f3d64040}/start - null 0
2025-10-21 22:38:20.024 +03:00 [INF] Request started
2025-10-21 22:38:20.026 +03:00 [INF] === Incoming Request ===
2025-10-21 22:38:20.028 +03:00 [INF] Path: /api/StocktakingWorkFlow/%7Ba0a90f3a-8c30-40fe-97eb-d6c4f3d64040%7D/start
2025-10-21 22:38:20.029 +03:00 [INF] Method: POST
2025-10-21 22:38:20.030 +03:00 [INF] === Headers ===
2025-10-21 22:38:20.034 +03:00 [INF] Accept: ["*/*"]
2025-10-21 22:38:20.037 +03:00 [INF] Connection: ["keep-alive"]
2025-10-21 22:38:20.039 +03:00 [INF] Host: ["localhost:7168"]
2025-10-21 22:38:20.040 +03:00 [INF] User-Agent: ["PostmanRuntime/7.49.0"]
2025-10-21 22:38:20.043 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-21 22:38:20.046 +03:00 [INF] Content-Length: ["0"]
2025-10-21 22:38:20.047 +03:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-10-21 22:38:20.051 +03:00 [INF] Postman-Token: ["c9d3a562-3a77-4aad-a3c4-10d637df5d06"]
2025-10-21 22:38:20.056 +03:00 [INF] 🔍 TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-10-21 22:38:20.057 +03:00 [INF] ✅ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-10-21 22:38:20.059 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Start (ModularERP)'
2025-10-21 22:38:20.080 +03:00 [INF] Route matched with {action = "Start", controller = "StocktakingWorkFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_WorkFlow.StartStocktakingDto]]] Start(System.Guid, System.Guid, System.Threading.CancellationToken) on controller ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController (ModularERP).
2025-10-21 22:38:20.087 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-21 22:38:20.102 +03:00 [INF] POST: Start Stocktaking "a0a90f3a-8c30-40fe-97eb-d6c4f3d64040"
2025-10-21 22:38:20.148 +03:00 [WRN] Validation failed for StartStocktakingCommand. Errors: [{"PropertyName":"CompanyId","ErrorMessage":"Company ID is required"},{"PropertyName":"UserId","ErrorMessage":"User ID is required"}]
2025-10-21 22:38:20.161 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Start (ModularERP) in 74.0998ms
2025-10-21 22:38:20.164 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Start (ModularERP)'
2025-10-21 22:38:20.174 +03:00 [WRN] Validation exception occurred: Validation failed. Validation errors: {"CompanyId":["Company ID is required"],"UserId":["User ID is required"]}
ModularERP.Common.Exceptions.ValidationException: Validation failed
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 44
   at ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Start(Guid id, Guid companyId, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Stocktaking\Controllers\StocktakingWorkFlowController.cs:line 137
   at lambda_method99(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_7>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 352
--- End of stack trace from previous location ---
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 305
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-10-21 22:38:20.242 +03:00 [INF] Error response sent with status code 400
2025-10-21 22:38:20.246 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/{a0a90f3a-8c30-40fe-97eb-d6c4f3d64040}/start - 400 null application/json; charset=utf-8 245.8028ms
2025-10-21 22:39:18.157 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/{a0a90f3a-8c30-40fe-97eb-d6c4f3d64040}/start?CompanyId=90137c92-382d-404c-bade-e5fefb1e8dbf - null 0
2025-10-21 22:39:18.168 +03:00 [INF] Request started
2025-10-21 22:39:18.171 +03:00 [INF] === Incoming Request ===
2025-10-21 22:39:18.172 +03:00 [INF] Path: /api/StocktakingWorkFlow/%7Ba0a90f3a-8c30-40fe-97eb-d6c4f3d64040%7D/start
2025-10-21 22:39:18.173 +03:00 [INF] Method: POST
2025-10-21 22:39:18.174 +03:00 [INF] === Headers ===
2025-10-21 22:39:18.175 +03:00 [INF] Accept: ["*/*"]
2025-10-21 22:39:18.177 +03:00 [INF] Connection: ["keep-alive"]
2025-10-21 22:39:18.178 +03:00 [INF] Host: ["localhost:7168"]
2025-10-21 22:39:18.180 +03:00 [INF] User-Agent: ["PostmanRuntime/7.49.0"]
2025-10-21 22:39:18.182 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-21 22:39:18.184 +03:00 [INF] Content-Length: ["0"]
2025-10-21 22:39:18.186 +03:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-10-21 22:39:18.187 +03:00 [INF] Postman-Token: ["df2efa7d-c923-4106-bdae-10997be3a260"]
2025-10-21 22:39:18.191 +03:00 [INF] 🔍 TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-10-21 22:39:18.192 +03:00 [INF] ✅ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-10-21 22:39:18.194 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Start (ModularERP)'
2025-10-21 22:39:18.197 +03:00 [INF] Route matched with {action = "Start", controller = "StocktakingWorkFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_WorkFlow.StartStocktakingDto]]] Start(System.Guid, System.Guid, System.Threading.CancellationToken) on controller ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController (ModularERP).
2025-10-21 22:39:18.211 +03:00 [INF] POST: Start Stocktaking "a0a90f3a-8c30-40fe-97eb-d6c4f3d64040"
2025-10-21 22:39:18.214 +03:00 [WRN] Validation failed for StartStocktakingCommand. Errors: [{"PropertyName":"UserId","ErrorMessage":"User ID is required"}]
2025-10-21 22:39:18.218 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Start (ModularERP) in 18.204ms
2025-10-21 22:39:18.220 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Start (ModularERP)'
2025-10-21 22:39:18.222 +03:00 [WRN] Validation exception occurred: Validation failed. Validation errors: {"UserId":["User ID is required"]}
ModularERP.Common.Exceptions.ValidationException: Validation failed
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 44
   at ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Start(Guid id, Guid companyId, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Stocktaking\Controllers\StocktakingWorkFlowController.cs:line 137
   at lambda_method99(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_7>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 352
--- End of stack trace from previous location ---
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 305
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-10-21 22:39:18.235 +03:00 [INF] Error response sent with status code 400
2025-10-21 22:39:18.237 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/{a0a90f3a-8c30-40fe-97eb-d6c4f3d64040}/start?CompanyId=90137c92-382d-404c-bade-e5fefb1e8dbf - 400 null application/json; charset=utf-8 80.337ms
2025-10-21 22:39:53.065 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/{a0a90f3a-8c30-40fe-97eb-d6c4f3d64040}/start?CompanyId=90137c92-382d-404c-bade-e5fefb1e8dbf?UserId=f0602c31-0c12-4b5c-9ccf-fe17811d5c53 - null 0
2025-10-21 22:39:53.071 +03:00 [INF] Request started
2025-10-21 22:39:53.072 +03:00 [INF] === Incoming Request ===
2025-10-21 22:39:53.074 +03:00 [INF] Path: /api/StocktakingWorkFlow/%7Ba0a90f3a-8c30-40fe-97eb-d6c4f3d64040%7D/start
2025-10-21 22:39:53.075 +03:00 [INF] Method: POST
2025-10-21 22:39:53.076 +03:00 [INF] === Headers ===
2025-10-21 22:39:53.077 +03:00 [INF] Accept: ["*/*"]
2025-10-21 22:39:53.078 +03:00 [INF] Connection: ["keep-alive"]
2025-10-21 22:39:53.080 +03:00 [INF] Host: ["localhost:7168"]
2025-10-21 22:39:53.081 +03:00 [INF] User-Agent: ["PostmanRuntime/7.49.0"]
2025-10-21 22:39:53.083 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-21 22:39:53.086 +03:00 [INF] Content-Length: ["0"]
2025-10-21 22:39:53.088 +03:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-10-21 22:39:53.090 +03:00 [INF] Postman-Token: ["363d78cc-b662-4fd8-8801-be440fad2381"]
2025-10-21 22:39:53.092 +03:00 [INF] 🔍 TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-10-21 22:39:53.093 +03:00 [INF] ✅ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-10-21 22:39:53.094 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Start (ModularERP)'
2025-10-21 22:39:53.096 +03:00 [INF] Route matched with {action = "Start", controller = "StocktakingWorkFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_WorkFlow.StartStocktakingDto]]] Start(System.Guid, System.Guid, System.Threading.CancellationToken) on controller ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController (ModularERP).
2025-10-21 22:39:53.111 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-10-21 22:39:53.126 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Start (ModularERP) in 26.7994ms
2025-10-21 22:39:53.129 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Start (ModularERP)'
2025-10-21 22:39:53.130 +03:00 [INF] Request completed successfully with status code 400
2025-10-21 22:39:53.132 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/{a0a90f3a-8c30-40fe-97eb-d6c4f3d64040}/start?CompanyId=90137c92-382d-404c-bade-e5fefb1e8dbf?UserId=f0602c31-0c12-4b5c-9ccf-fe17811d5c53 - 400 null application/problem+json; charset=utf-8 66.9284ms
2025-10-21 22:40:18.847 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/{0cf7db88-a08b-47f2-b003-1bb4dc0a425f}/start?CompanyId=90137c92-382d-404c-bade-e5fefb1e8dbf?UserId=f0602c31-0c12-4b5c-9ccf-fe17811d5c53 - null 0
2025-10-21 22:40:18.851 +03:00 [INF] Request started
2025-10-21 22:40:18.852 +03:00 [INF] === Incoming Request ===
2025-10-21 22:40:18.853 +03:00 [INF] Path: /api/StocktakingWorkFlow/%7B0cf7db88-a08b-47f2-b003-1bb4dc0a425f%7D/start
2025-10-21 22:40:18.854 +03:00 [INF] Method: POST
2025-10-21 22:40:18.855 +03:00 [INF] === Headers ===
2025-10-21 22:40:18.856 +03:00 [INF] Accept: ["*/*"]
2025-10-21 22:40:18.857 +03:00 [INF] Connection: ["keep-alive"]
2025-10-21 22:40:18.860 +03:00 [INF] Host: ["localhost:7168"]
2025-10-21 22:40:18.862 +03:00 [INF] User-Agent: ["PostmanRuntime/7.49.0"]
2025-10-21 22:40:18.865 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-21 22:40:18.867 +03:00 [INF] Content-Length: ["0"]
2025-10-21 22:40:18.868 +03:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-10-21 22:40:18.870 +03:00 [INF] Postman-Token: ["56ca40a5-29da-452c-b65d-07ab829848d3"]
2025-10-21 22:40:18.871 +03:00 [INF] 🔍 TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-10-21 22:40:18.873 +03:00 [INF] ✅ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-10-21 22:40:18.874 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Start (ModularERP)'
2025-10-21 22:40:18.875 +03:00 [INF] Route matched with {action = "Start", controller = "StocktakingWorkFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_WorkFlow.StartStocktakingDto]]] Start(System.Guid, System.Guid, System.Threading.CancellationToken) on controller ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController (ModularERP).
2025-10-21 22:40:18.879 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-10-21 22:40:18.881 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Start (ModularERP) in 2.334ms
2025-10-21 22:40:18.883 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Start (ModularERP)'
2025-10-21 22:40:18.885 +03:00 [INF] Request completed successfully with status code 400
2025-10-21 22:40:18.886 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/{0cf7db88-a08b-47f2-b003-1bb4dc0a425f}/start?CompanyId=90137c92-382d-404c-bade-e5fefb1e8dbf?UserId=f0602c31-0c12-4b5c-9ccf-fe17811d5c53 - 400 null application/problem+json; charset=utf-8 39.0419ms
2025-10-21 22:41:23.218 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/a0a90f3a-8c30-40fe-97eb-d6c4f3d64040/start?CompanyId=90137c92-382d-404c-bade-e5fefb1e8dbf&UserId=f0602c31-0c12-4b5c-9ccf-fe17811d5c53 - null 0
2025-10-21 22:41:23.222 +03:00 [INF] Request started
2025-10-21 22:41:23.224 +03:00 [INF] === Incoming Request ===
2025-10-21 22:41:23.225 +03:00 [INF] Path: /api/StocktakingWorkFlow/a0a90f3a-8c30-40fe-97eb-d6c4f3d64040/start
2025-10-21 22:41:23.226 +03:00 [INF] Method: POST
2025-10-21 22:41:23.227 +03:00 [INF] === Headers ===
2025-10-21 22:41:23.228 +03:00 [INF] Accept: ["*/*"]
2025-10-21 22:41:23.230 +03:00 [INF] Connection: ["keep-alive"]
2025-10-21 22:41:23.231 +03:00 [INF] Host: ["localhost:7168"]
2025-10-21 22:41:23.233 +03:00 [INF] User-Agent: ["PostmanRuntime/7.49.0"]
2025-10-21 22:41:23.234 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-21 22:41:23.236 +03:00 [INF] Content-Length: ["0"]
2025-10-21 22:41:23.238 +03:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-10-21 22:41:23.240 +03:00 [INF] Postman-Token: ["aa1c86c2-a3cf-4cd0-a77d-2e651327e389"]
2025-10-21 22:41:23.243 +03:00 [INF] 🔍 TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-10-21 22:41:23.244 +03:00 [INF] ✅ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-10-21 22:41:23.245 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Start (ModularERP)'
2025-10-21 22:41:23.246 +03:00 [INF] Route matched with {action = "Start", controller = "StocktakingWorkFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_WorkFlow.StartStocktakingDto]]] Start(System.Guid, System.Guid, System.Threading.CancellationToken) on controller ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController (ModularERP).
2025-10-21 22:41:23.249 +03:00 [INF] POST: Start Stocktaking "a0a90f3a-8c30-40fe-97eb-d6c4f3d64040"
2025-10-21 22:41:23.252 +03:00 [WRN] Validation failed for StartStocktakingCommand. Errors: [{"PropertyName":"UserId","ErrorMessage":"User ID is required"}]
2025-10-21 22:41:23.256 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Start (ModularERP) in 6.6964ms
2025-10-21 22:41:23.258 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Start (ModularERP)'
2025-10-21 22:41:23.260 +03:00 [WRN] Validation exception occurred: Validation failed. Validation errors: {"UserId":["User ID is required"]}
ModularERP.Common.Exceptions.ValidationException: Validation failed
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 44
   at ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Start(Guid id, Guid companyId, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Stocktaking\Controllers\StocktakingWorkFlowController.cs:line 137
   at lambda_method99(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_7>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 352
--- End of stack trace from previous location ---
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 305
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-10-21 22:41:23.273 +03:00 [INF] Error response sent with status code 400
2025-10-21 22:41:23.274 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/a0a90f3a-8c30-40fe-97eb-d6c4f3d64040/start?CompanyId=90137c92-382d-404c-bade-e5fefb1e8dbf&UserId=f0602c31-0c12-4b5c-9ccf-fe17811d5c53 - 400 null application/json; charset=utf-8 55.9313ms
2025-10-21 22:41:30.513 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/0cf7db88-a08b-47f2-b003-1bb4dc0a425f/start?CompanyId=90137c92-382d-404c-bade-e5fefb1e8dbf&UserId=f0602c31-0c12-4b5c-9ccf-fe17811d5c53 - null 0
2025-10-21 22:41:30.517 +03:00 [INF] Request started
2025-10-21 22:41:30.518 +03:00 [INF] === Incoming Request ===
2025-10-21 22:41:30.519 +03:00 [INF] Path: /api/StocktakingWorkFlow/0cf7db88-a08b-47f2-b003-1bb4dc0a425f/start
2025-10-21 22:41:30.521 +03:00 [INF] Method: POST
2025-10-21 22:41:30.523 +03:00 [INF] === Headers ===
2025-10-21 22:41:30.525 +03:00 [INF] Accept: ["*/*"]
2025-10-21 22:41:30.527 +03:00 [INF] Connection: ["keep-alive"]
2025-10-21 22:41:30.528 +03:00 [INF] Host: ["localhost:7168"]
2025-10-21 22:41:30.531 +03:00 [INF] User-Agent: ["PostmanRuntime/7.49.0"]
2025-10-21 22:41:30.532 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-21 22:41:30.534 +03:00 [INF] Content-Length: ["0"]
2025-10-21 22:41:30.536 +03:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-10-21 22:41:30.538 +03:00 [INF] Postman-Token: ["a6cba229-63b5-4543-a8a4-d55e18a456ce"]
2025-10-21 22:41:30.540 +03:00 [INF] 🔍 TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-10-21 22:41:30.542 +03:00 [INF] ✅ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-10-21 22:41:30.544 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Start (ModularERP)'
2025-10-21 22:41:30.545 +03:00 [INF] Route matched with {action = "Start", controller = "StocktakingWorkFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_WorkFlow.StartStocktakingDto]]] Start(System.Guid, System.Guid, System.Threading.CancellationToken) on controller ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController (ModularERP).
2025-10-21 22:41:30.548 +03:00 [INF] POST: Start Stocktaking "0cf7db88-a08b-47f2-b003-1bb4dc0a425f"
2025-10-21 22:41:30.549 +03:00 [WRN] Validation failed for StartStocktakingCommand. Errors: [{"PropertyName":"UserId","ErrorMessage":"User ID is required"}]
2025-10-21 22:41:30.554 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Start (ModularERP) in 6.4317ms
2025-10-21 22:41:30.557 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Start (ModularERP)'
2025-10-21 22:41:30.558 +03:00 [WRN] Validation exception occurred: Validation failed. Validation errors: {"UserId":["User ID is required"]}
ModularERP.Common.Exceptions.ValidationException: Validation failed
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 44
   at ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Start(Guid id, Guid companyId, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Stocktaking\Controllers\StocktakingWorkFlowController.cs:line 137
   at lambda_method99(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_7>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 352
--- End of stack trace from previous location ---
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 305
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-10-21 22:41:30.571 +03:00 [INF] Error response sent with status code 400
2025-10-21 22:41:30.573 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/0cf7db88-a08b-47f2-b003-1bb4dc0a425f/start?CompanyId=90137c92-382d-404c-bade-e5fefb1e8dbf&UserId=f0602c31-0c12-4b5c-9ccf-fe17811d5c53 - 400 null application/json; charset=utf-8 60.203ms
2025-10-21 22:42:13.527 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/0cf7db88-a08b-47f2-b003-1bb4dc0a425f/start?CompanyId=90137c92-382d-404c-bade-e5fefb1e8dbf&createdByUserId=f0602c31-0c12-4b5c-9ccf-fe17811d5c53 - null 0
2025-10-21 22:42:13.531 +03:00 [INF] Request started
2025-10-21 22:42:13.532 +03:00 [INF] === Incoming Request ===
2025-10-21 22:42:13.533 +03:00 [INF] Path: /api/StocktakingWorkFlow/0cf7db88-a08b-47f2-b003-1bb4dc0a425f/start
2025-10-21 22:42:13.534 +03:00 [INF] Method: POST
2025-10-21 22:42:13.535 +03:00 [INF] === Headers ===
2025-10-21 22:42:13.536 +03:00 [INF] Accept: ["*/*"]
2025-10-21 22:42:13.539 +03:00 [INF] Connection: ["keep-alive"]
2025-10-21 22:42:13.541 +03:00 [INF] Host: ["localhost:7168"]
2025-10-21 22:42:13.543 +03:00 [INF] User-Agent: ["PostmanRuntime/7.49.0"]
2025-10-21 22:42:13.545 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-21 22:42:13.546 +03:00 [INF] Content-Length: ["0"]
2025-10-21 22:42:13.548 +03:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-10-21 22:42:13.550 +03:00 [INF] Postman-Token: ["e3655147-38f2-420a-bd56-1e9bd155430d"]
2025-10-21 22:42:13.551 +03:00 [INF] 🔍 TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-10-21 22:42:13.552 +03:00 [INF] ✅ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-10-21 22:42:13.554 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Start (ModularERP)'
2025-10-21 22:42:13.555 +03:00 [INF] Route matched with {action = "Start", controller = "StocktakingWorkFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_WorkFlow.StartStocktakingDto]]] Start(System.Guid, System.Guid, System.Threading.CancellationToken) on controller ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController (ModularERP).
2025-10-21 22:42:13.560 +03:00 [INF] POST: Start Stocktaking "0cf7db88-a08b-47f2-b003-1bb4dc0a425f"
2025-10-21 22:42:13.561 +03:00 [WRN] Validation failed for StartStocktakingCommand. Errors: [{"PropertyName":"UserId","ErrorMessage":"User ID is required"}]
2025-10-21 22:42:13.565 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Start (ModularERP) in 4.8914ms
2025-10-21 22:42:13.566 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Start (ModularERP)'
2025-10-21 22:42:13.568 +03:00 [WRN] Validation exception occurred: Validation failed. Validation errors: {"UserId":["User ID is required"]}
ModularERP.Common.Exceptions.ValidationException: Validation failed
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 44
   at ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Start(Guid id, Guid companyId, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Stocktaking\Controllers\StocktakingWorkFlowController.cs:line 137
   at lambda_method99(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_7>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 352
--- End of stack trace from previous location ---
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 305
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-10-21 22:42:13.581 +03:00 [INF] Error response sent with status code 400
2025-10-21 22:42:13.583 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/0cf7db88-a08b-47f2-b003-1bb4dc0a425f/start?CompanyId=90137c92-382d-404c-bade-e5fefb1e8dbf&createdByUserId=f0602c31-0c12-4b5c-9ccf-fe17811d5c53 - 400 null application/json; charset=utf-8 55.7839ms
2025-10-21 22:43:16.912 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/0cf7db88-a08b-47f2-b003-1bb4dc0a425f/start?CompanyId=90137c92-382d-404c-bade-e5fefb1e8dbf&UserId=f0602c31-0c12-4b5c-9ccf-fe17811d5c53 - application/json 54
2025-10-21 22:43:16.916 +03:00 [INF] Request started
2025-10-21 22:43:16.917 +03:00 [INF] === Incoming Request ===
2025-10-21 22:43:16.918 +03:00 [INF] Path: /api/StocktakingWorkFlow/0cf7db88-a08b-47f2-b003-1bb4dc0a425f/start
2025-10-21 22:43:16.920 +03:00 [INF] Method: POST
2025-10-21 22:43:16.921 +03:00 [INF] === Headers ===
2025-10-21 22:43:16.922 +03:00 [INF] Accept: ["*/*"]
2025-10-21 22:43:16.924 +03:00 [INF] Connection: ["keep-alive"]
2025-10-21 22:43:16.925 +03:00 [INF] Host: ["localhost:7168"]
2025-10-21 22:43:16.927 +03:00 [INF] User-Agent: ["PostmanRuntime/7.49.0"]
2025-10-21 22:43:16.929 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-21 22:43:16.930 +03:00 [INF] Content-Type: ["application/json"]
2025-10-21 22:43:16.932 +03:00 [INF] Content-Length: ["54"]
2025-10-21 22:43:16.934 +03:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-10-21 22:43:16.935 +03:00 [INF] Postman-Token: ["9e30a3c9-1748-4957-942a-6108a55372b4"]
2025-10-21 22:43:16.937 +03:00 [INF] 🔍 TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-10-21 22:43:16.938 +03:00 [INF] ✅ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-10-21 22:43:16.940 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Start (ModularERP)'
2025-10-21 22:43:16.941 +03:00 [INF] Route matched with {action = "Start", controller = "StocktakingWorkFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_WorkFlow.StartStocktakingDto]]] Start(System.Guid, System.Guid, System.Threading.CancellationToken) on controller ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController (ModularERP).
2025-10-21 22:43:16.944 +03:00 [INF] POST: Start Stocktaking "0cf7db88-a08b-47f2-b003-1bb4dc0a425f"
2025-10-21 22:43:16.946 +03:00 [WRN] Validation failed for StartStocktakingCommand. Errors: [{"PropertyName":"UserId","ErrorMessage":"User ID is required"}]
2025-10-21 22:43:16.950 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Start (ModularERP) in 5.6016ms
2025-10-21 22:43:16.951 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Start (ModularERP)'
2025-10-21 22:43:16.953 +03:00 [WRN] Validation exception occurred: Validation failed. Validation errors: {"UserId":["User ID is required"]}
ModularERP.Common.Exceptions.ValidationException: Validation failed
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 44
   at ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Start(Guid id, Guid companyId, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Stocktaking\Controllers\StocktakingWorkFlowController.cs:line 137
   at lambda_method99(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_7>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 352
--- End of stack trace from previous location ---
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 305
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-10-21 22:43:16.966 +03:00 [INF] Error response sent with status code 400
2025-10-21 22:43:16.967 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/0cf7db88-a08b-47f2-b003-1bb4dc0a425f/start?CompanyId=90137c92-382d-404c-bade-e5fefb1e8dbf&UserId=f0602c31-0c12-4b5c-9ccf-fe17811d5c53 - 400 null application/json; charset=utf-8 55.6082ms
2025-10-21 22:52:02.717 +03:00 [INF] Starting web host...
2025-10-21 22:52:03.840 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-21 22:52:03.899 +03:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-10-21 22:52:03.994 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-21 22:52:04.001 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-21 22:52:04.022 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-21 22:52:04.082 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-21 22:52:04.097 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-21 22:52:04.101 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-21 22:52:04.108 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-21 22:52:04.120 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-10-21 22:52:04.127 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-21 22:52:04.309 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-21 22:52:04.316 +03:00 [INF] Master database initialized successfully
2025-10-21 22:52:06.041 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-21 22:52:06.161 +03:00 [INF] Now listening on: https://localhost:7168
2025-10-21 22:52:06.164 +03:00 [INF] Now listening on: http://localhost:5004
2025-10-21 22:52:06.243 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-21 22:52:06.246 +03:00 [INF] Hosting environment: Development
2025-10-21 22:52:06.247 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-10-21 22:52:06.589 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-21 22:52:06.720 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 132.3807ms
2025-10-21 22:52:06.868 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-21 22:52:06.868 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-21 22:52:06.878 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 9.7333ms
2025-10-21 22:52:06.890 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 22.2406ms
2025-10-21 22:52:06.939 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-21 22:52:07.167 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 227.7769ms
2025-10-21 22:52:11.667 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/0cf7db88-a08b-47f2-b003-1bb4dc0a425f/start?CompanyId=90137c92-382d-404c-bade-e5fefb1e8dbf - null 0
2025-10-21 22:52:11.686 +03:00 [INF] Request started
2025-10-21 22:52:11.689 +03:00 [INF] === Incoming Request ===
2025-10-21 22:52:11.690 +03:00 [INF] Path: /api/StocktakingWorkFlow/0cf7db88-a08b-47f2-b003-1bb4dc0a425f/start
2025-10-21 22:52:11.692 +03:00 [INF] Method: POST
2025-10-21 22:52:11.693 +03:00 [INF] === Headers ===
2025-10-21 22:52:11.697 +03:00 [INF] Accept: ["*/*"]
2025-10-21 22:52:11.700 +03:00 [INF] Connection: ["keep-alive"]
2025-10-21 22:52:11.701 +03:00 [INF] Host: ["localhost:7168"]
2025-10-21 22:52:11.702 +03:00 [INF] User-Agent: ["PostmanRuntime/7.49.0"]
2025-10-21 22:52:11.704 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-21 22:52:11.707 +03:00 [INF] Content-Length: ["0"]
2025-10-21 22:52:11.710 +03:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-10-21 22:52:11.712 +03:00 [INF] Postman-Token: ["adca0971-a42a-4b8c-b5cd-7300994e7e32"]
2025-10-21 22:52:11.716 +03:00 [INF] 🔍 TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-10-21 22:52:11.717 +03:00 [INF] ✅ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-10-21 22:52:11.720 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Start (ModularERP)'
2025-10-21 22:52:11.741 +03:00 [INF] Route matched with {action = "Start", controller = "StocktakingWorkFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_WorkFlow.StartStocktakingDto]]] Start(System.Guid, System.Guid, System.Threading.CancellationToken) on controller ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController (ModularERP).
2025-10-21 22:52:11.748 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-21 22:52:11.764 +03:00 [INF] POST: Start Stocktaking "0cf7db88-a08b-47f2-b003-1bb4dc0a425f"
2025-10-21 22:52:11.873 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-10-21 22:52:12.482 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-21 22:52:12.490 +03:00 [INF] Starting stocktaking session "0cf7db88-a08b-47f2-b003-1bb4dc0a425f"
2025-10-21 22:52:12.692 +03:00 [ERR] Error starting stocktaking "0cf7db88-a08b-47f2-b003-1bb4dc0a425f"
AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
StocktakingHeader -> StartStocktakingDto
ModularERP.Modules.Inventory.Features.Stocktaking.Models.StocktakingHeader -> ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_WorkFlow.StartStocktakingDto
   at lambda_method397(Closure, Object, StartStocktakingDto, ResolutionContext)
   at ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.StartStocktakingHandler.Handle(StartStocktakingCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Stocktaking\Handlers\Handlers_StockTraking_WorkFlow\StartStocktakingHandler.cs:line 51
2025-10-21 22:52:12.735 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Start (ModularERP) in 987.3577ms
2025-10-21 22:52:12.740 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Start (ModularERP)'
2025-10-21 22:52:12.743 +03:00 [ERR] Unexpected error occurred
AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
StocktakingHeader -> StartStocktakingDto
ModularERP.Modules.Inventory.Features.Stocktaking.Models.StocktakingHeader -> ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_WorkFlow.StartStocktakingDto
   at lambda_method397(Closure, Object, StartStocktakingDto, ResolutionContext)
   at ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.StartStocktakingHandler.Handle(StartStocktakingCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Stocktaking\Handlers\Handlers_StockTraking_WorkFlow\StartStocktakingHandler.cs:line 51
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Start(Guid id, Guid companyId, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Stocktaking\Controllers\StocktakingWorkFlowController.cs:line 137
   at lambda_method99(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_7>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 352
--- End of stack trace from previous location ---
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 305
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-10-21 22:52:12.779 +03:00 [INF] Error response sent with status code 500
2025-10-21 22:52:12.785 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/0cf7db88-a08b-47f2-b003-1bb4dc0a425f/start?CompanyId=90137c92-382d-404c-bade-e5fefb1e8dbf - 500 null application/json; charset=utf-8 1118.1464ms
