2025-10-22 11:55:30.026 +03:00 [INF] Starting web host...
2025-10-22 11:55:33.503 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-22 11:55:33.545 +03:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-10-22 11:55:33.652 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-22 11:55:33.658 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-22 11:55:33.662 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-22 11:55:33.726 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-22 11:55:33.743 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-22 11:55:33.748 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-22 11:55:33.755 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-22 11:55:33.766 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-10-22 11:55:33.771 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-22 11:55:33.945 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-22 11:55:33.952 +03:00 [INF] Master database initialized successfully
2025-10-22 11:55:35.741 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-22 11:55:36.016 +03:00 [INF] Now listening on: https://localhost:7168
2025-10-22 11:55:36.018 +03:00 [INF] Now listening on: http://localhost:5004
2025-10-22 11:55:36.099 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-22 11:55:36.101 +03:00 [INF] Hosting environment: Development
2025-10-22 11:55:36.102 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-10-22 11:55:36.870 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-22 11:55:37.189 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 323.4444ms
2025-10-22 11:55:37.210 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-22 11:55:37.214 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-22 11:55:37.239 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 24.4254ms
2025-10-22 11:55:37.281 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 71.2689ms
2025-10-22 11:55:37.465 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-22 11:55:37.769 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 304.3557ms
2025-10-22 11:55:40.817 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/0cf7db88-a08b-47f2-b003-1bb4dc0a425f/start?CompanyId=90137c92-382d-404c-bade-e5fefb1e8dbf - null 0
2025-10-22 11:55:40.841 +03:00 [INF] Request started
2025-10-22 11:55:40.845 +03:00 [INF] === Incoming Request ===
2025-10-22 11:55:40.847 +03:00 [INF] Path: /api/StocktakingWorkFlow/0cf7db88-a08b-47f2-b003-1bb4dc0a425f/start
2025-10-22 11:55:40.849 +03:00 [INF] Method: POST
2025-10-22 11:55:40.850 +03:00 [INF] === Headers ===
2025-10-22 11:55:40.853 +03:00 [INF] Accept: ["*/*"]
2025-10-22 11:55:40.856 +03:00 [INF] Connection: ["keep-alive"]
2025-10-22 11:55:40.857 +03:00 [INF] Host: ["localhost:7168"]
2025-10-22 11:55:40.858 +03:00 [INF] User-Agent: ["PostmanRuntime/7.49.0"]
2025-10-22 11:55:40.861 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-22 11:55:40.862 +03:00 [INF] Content-Length: ["0"]
2025-10-22 11:55:40.865 +03:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-10-22 11:55:40.867 +03:00 [INF] Postman-Token: ["b67d35b9-a6ec-4f4b-b6e3-f6ded98d6bc0"]
2025-10-22 11:55:40.871 +03:00 [INF] üîç TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-10-22 11:55:40.872 +03:00 [INF] ‚úÖ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-10-22 11:55:40.875 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Start (ModularERP)'
2025-10-22 11:55:40.905 +03:00 [INF] Route matched with {action = "Start", controller = "StocktakingWorkFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_WorkFlow.StartStocktakingDto]]] Start(System.Guid, System.Guid, System.Threading.CancellationToken) on controller ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController (ModularERP).
2025-10-22 11:55:40.912 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-22 11:55:40.936 +03:00 [INF] POST: Start Stocktaking "0cf7db88-a08b-47f2-b003-1bb4dc0a425f"
2025-10-22 11:55:41.039 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-10-22 11:55:41.599 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-22 11:55:41.607 +03:00 [INF] Starting stocktaking session "0cf7db88-a08b-47f2-b003-1bb4dc0a425f"
2025-10-22 11:55:41.672 +03:00 [ERR] Error starting stocktaking "0cf7db88-a08b-47f2-b003-1bb4dc0a425f"
ModularERP.Common.Exceptions.BusinessLogicException: Cannot start stocktaking with status Counting
   at ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.StartStocktakingHandler.Handle(StartStocktakingCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Stocktaking\Handlers\Handlers_StockTraking_WorkFlow\StartStocktakingHandler.cs:line 46
2025-10-22 11:55:41.719 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Start (ModularERP) in 807.4498ms
2025-10-22 11:55:41.721 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Start (ModularERP)'
2025-10-22 11:55:41.723 +03:00 [WRN] Business logic exception occurred: Cannot start stocktaking with status Counting
ModularERP.Common.Exceptions.BusinessLogicException: Cannot start stocktaking with status Counting
   at ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.StartStocktakingHandler.Handle(StartStocktakingCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Stocktaking\Handlers\Handlers_StockTraking_WorkFlow\StartStocktakingHandler.cs:line 46
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Start(Guid id, Guid companyId, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Stocktaking\Controllers\StocktakingWorkFlowController.cs:line 137
   at lambda_method99(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_7>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 352
--- End of stack trace from previous location ---
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 305
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-10-22 11:55:41.751 +03:00 [INF] Error response sent with status code 400
2025-10-22 11:55:41.755 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/0cf7db88-a08b-47f2-b003-1bb4dc0a425f/start?CompanyId=90137c92-382d-404c-bade-e5fefb1e8dbf - 400 null application/json; charset=utf-8 937.9981ms
2025-10-22 11:57:14.910 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlowbc6c42eb-9fb5-4611-95c8-66f11793b79d/start?CompanyId=90137c92-382d-404c-bade-e5fefb1e8dbf - null 0
2025-10-22 11:57:14.920 +03:00 [INF] Request started
2025-10-22 11:57:14.921 +03:00 [INF] === Incoming Request ===
2025-10-22 11:57:14.922 +03:00 [INF] Path: /api/StocktakingWorkFlowbc6c42eb-9fb5-4611-95c8-66f11793b79d/start
2025-10-22 11:57:14.923 +03:00 [INF] Method: POST
2025-10-22 11:57:14.925 +03:00 [INF] === Headers ===
2025-10-22 11:57:14.926 +03:00 [INF] Accept: ["*/*"]
2025-10-22 11:57:14.927 +03:00 [INF] Connection: ["keep-alive"]
2025-10-22 11:57:14.929 +03:00 [INF] Host: ["localhost:7168"]
2025-10-22 11:57:14.930 +03:00 [INF] User-Agent: ["PostmanRuntime/7.49.0"]
2025-10-22 11:57:14.932 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-22 11:57:14.933 +03:00 [INF] Content-Length: ["0"]
2025-10-22 11:57:14.935 +03:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-10-22 11:57:14.936 +03:00 [INF] Postman-Token: ["808d5108-a8dd-4b83-8046-5779aac6d6a6"]
2025-10-22 11:57:14.939 +03:00 [INF] üîç TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-10-22 11:57:14.940 +03:00 [INF] ‚úÖ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-10-22 11:57:14.941 +03:00 [INF] Request completed successfully with status code 404
2025-10-22 11:57:14.942 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlowbc6c42eb-9fb5-4611-95c8-66f11793b79d/start?CompanyId=90137c92-382d-404c-bade-e5fefb1e8dbf - 404 0 null 31.9252ms
2025-10-22 11:57:14.946 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST https://localhost:7168/api/StocktakingWorkFlowbc6c42eb-9fb5-4611-95c8-66f11793b79d/start, Response status code: 404
2025-10-22 11:57:41.459 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/bc6c42eb-9fb5-4611-95c8-66f11793b79d/start?CompanyId=90137c92-382d-404c-bade-e5fefb1e8dbf - null 0
2025-10-22 11:57:41.464 +03:00 [INF] Request started
2025-10-22 11:57:41.465 +03:00 [INF] === Incoming Request ===
2025-10-22 11:57:41.466 +03:00 [INF] Path: /api/StocktakingWorkFlow/bc6c42eb-9fb5-4611-95c8-66f11793b79d/start
2025-10-22 11:57:41.467 +03:00 [INF] Method: POST
2025-10-22 11:57:41.468 +03:00 [INF] === Headers ===
2025-10-22 11:57:41.469 +03:00 [INF] Accept: ["*/*"]
2025-10-22 11:57:41.470 +03:00 [INF] Connection: ["keep-alive"]
2025-10-22 11:57:41.471 +03:00 [INF] Host: ["localhost:7168"]
2025-10-22 11:57:41.473 +03:00 [INF] User-Agent: ["PostmanRuntime/7.49.0"]
2025-10-22 11:57:41.475 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-22 11:57:41.477 +03:00 [INF] Content-Length: ["0"]
2025-10-22 11:57:41.478 +03:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-10-22 11:57:41.479 +03:00 [INF] Postman-Token: ["cced7e24-2946-4a21-a723-711f331f49bf"]
2025-10-22 11:57:41.481 +03:00 [INF] üîç TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-10-22 11:57:41.482 +03:00 [INF] ‚úÖ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-10-22 11:57:41.483 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Start (ModularERP)'
2025-10-22 11:57:41.484 +03:00 [INF] Route matched with {action = "Start", controller = "StocktakingWorkFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_WorkFlow.StartStocktakingDto]]] Start(System.Guid, System.Guid, System.Threading.CancellationToken) on controller ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController (ModularERP).
2025-10-22 11:57:41.487 +03:00 [INF] POST: Start Stocktaking "bc6c42eb-9fb5-4611-95c8-66f11793b79d"
2025-10-22 11:57:41.529 +03:00 [INF] Starting stocktaking session "bc6c42eb-9fb5-4611-95c8-66f11793b79d"
2025-10-22 11:57:41.638 +03:00 [ERR] Error starting stocktaking "bc6c42eb-9fb5-4611-95c8-66f11793b79d"
AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
StocktakingHeader -> StartStocktakingDto
ModularERP.Modules.Inventory.Features.Stocktaking.Models.StocktakingHeader -> ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_WorkFlow.StartStocktakingDto
   at lambda_method397(Closure, Object, StartStocktakingDto, ResolutionContext)
   at ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.StartStocktakingHandler.Handle(StartStocktakingCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Stocktaking\Handlers\Handlers_StockTraking_WorkFlow\StartStocktakingHandler.cs:line 51
2025-10-22 11:57:41.644 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Start (ModularERP) in 158.0155ms
2025-10-22 11:57:41.646 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Start (ModularERP)'
2025-10-22 11:57:41.647 +03:00 [ERR] Unexpected error occurred
AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
StocktakingHeader -> StartStocktakingDto
ModularERP.Modules.Inventory.Features.Stocktaking.Models.StocktakingHeader -> ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_WorkFlow.StartStocktakingDto
   at lambda_method397(Closure, Object, StartStocktakingDto, ResolutionContext)
   at ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.StartStocktakingHandler.Handle(StartStocktakingCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Stocktaking\Handlers\Handlers_StockTraking_WorkFlow\StartStocktakingHandler.cs:line 51
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Start(Guid id, Guid companyId, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Stocktaking\Controllers\StocktakingWorkFlowController.cs:line 137
   at lambda_method99(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_7>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 352
--- End of stack trace from previous location ---
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 305
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-10-22 11:57:41.662 +03:00 [INF] Error response sent with status code 500
2025-10-22 11:57:41.663 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/bc6c42eb-9fb5-4611-95c8-66f11793b79d/start?CompanyId=90137c92-382d-404c-bade-e5fefb1e8dbf - 500 null application/json; charset=utf-8 204.1065ms
2025-10-22 12:03:42.692 +03:00 [INF] Starting web host...
2025-10-22 12:03:45.785 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-22 12:03:45.823 +03:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-10-22 12:03:45.903 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-22 12:03:45.908 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-22 12:03:45.911 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-22 12:03:45.972 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-22 12:03:45.989 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-22 12:03:45.993 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-22 12:03:45.999 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-22 12:03:46.011 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-10-22 12:03:46.015 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-22 12:03:46.173 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-22 12:03:46.180 +03:00 [INF] Master database initialized successfully
2025-10-22 12:03:47.912 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-22 12:03:48.028 +03:00 [INF] Now listening on: https://localhost:7168
2025-10-22 12:03:48.030 +03:00 [INF] Now listening on: http://localhost:5004
2025-10-22 12:03:48.109 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-22 12:03:48.111 +03:00 [INF] Hosting environment: Development
2025-10-22 12:03:48.114 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-10-22 12:04:02.565 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/151ab924-c688-444c-bdbf-aaa758c74d8a/start?CompanyId=90137c92-382d-404c-bade-e5fefb1e8dbf - null 0
2025-10-22 12:04:02.617 +03:00 [INF] Request started
2025-10-22 12:04:02.619 +03:00 [INF] === Incoming Request ===
2025-10-22 12:04:02.621 +03:00 [INF] Path: /api/StocktakingWorkFlow/151ab924-c688-444c-bdbf-aaa758c74d8a/start
2025-10-22 12:04:02.622 +03:00 [INF] Method: POST
2025-10-22 12:04:02.623 +03:00 [INF] === Headers ===
2025-10-22 12:04:02.626 +03:00 [INF] Accept: ["*/*"]
2025-10-22 12:04:02.629 +03:00 [INF] Connection: ["keep-alive"]
2025-10-22 12:04:02.631 +03:00 [INF] Host: ["localhost:7168"]
2025-10-22 12:04:02.633 +03:00 [INF] User-Agent: ["PostmanRuntime/7.49.0"]
2025-10-22 12:04:02.634 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-22 12:04:02.637 +03:00 [INF] Content-Length: ["0"]
2025-10-22 12:04:02.639 +03:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-10-22 12:04:02.640 +03:00 [INF] Postman-Token: ["c6a521e9-bc28-4765-8bc4-68da6b6c09c0"]
2025-10-22 12:04:02.645 +03:00 [INF] üîç TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-10-22 12:04:02.647 +03:00 [INF] ‚úÖ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-10-22 12:04:02.649 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Start (ModularERP)'
2025-10-22 12:04:02.670 +03:00 [INF] Route matched with {action = "Start", controller = "StocktakingWorkFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_WorkFlow.StartStocktakingDto]]] Start(System.Guid, System.Guid, System.Threading.CancellationToken) on controller ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController (ModularERP).
2025-10-22 12:04:02.677 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-22 12:04:02.694 +03:00 [INF] POST: Start Stocktaking "151ab924-c688-444c-bdbf-aaa758c74d8a"
2025-10-22 12:04:02.777 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-10-22 12:04:03.302 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-22 12:04:03.311 +03:00 [INF] Starting stocktaking session "151ab924-c688-444c-bdbf-aaa758c74d8a"
2025-10-22 12:04:03.513 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_WorkFlow.StartStocktakingDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-22 12:04:03.535 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Start (ModularERP) in 858.2517ms
2025-10-22 12:04:03.540 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Start (ModularERP)'
2025-10-22 12:04:03.542 +03:00 [INF] Request completed successfully with status code 200
2025-10-22 12:04:03.550 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/151ab924-c688-444c-bdbf-aaa758c74d8a/start?CompanyId=90137c92-382d-404c-bade-e5fefb1e8dbf - 200 null application/json; charset=utf-8 985.8851ms
2025-10-22 12:04:55.968 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-22 12:04:56.061 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 92.1819ms
2025-10-22 12:04:56.065 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-22 12:04:56.079 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 13.9309ms
2025-10-22 12:04:56.084 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-22 12:04:56.112 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 28.1872ms
2025-10-22 12:04:56.244 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-22 12:04:56.408 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 163.6307ms
2025-10-22 12:07:02.656 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/{151ab924-c688-444c-bdbf-aaa758c74d8a}/review - null 0
2025-10-22 12:07:02.667 +03:00 [INF] Request started
2025-10-22 12:07:02.669 +03:00 [INF] === Incoming Request ===
2025-10-22 12:07:02.670 +03:00 [INF] Path: /api/StocktakingWorkFlow/%7B151ab924-c688-444c-bdbf-aaa758c74d8a%7D/review
2025-10-22 12:07:02.672 +03:00 [INF] Method: POST
2025-10-22 12:07:02.673 +03:00 [INF] === Headers ===
2025-10-22 12:07:02.674 +03:00 [INF] Accept: ["*/*"]
2025-10-22 12:07:02.676 +03:00 [INF] Connection: ["keep-alive"]
2025-10-22 12:07:02.678 +03:00 [INF] Host: ["localhost:7168"]
2025-10-22 12:07:02.679 +03:00 [INF] User-Agent: ["PostmanRuntime/7.49.0"]
2025-10-22 12:07:02.681 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-22 12:07:02.683 +03:00 [INF] Content-Length: ["0"]
2025-10-22 12:07:02.687 +03:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-10-22 12:07:02.690 +03:00 [INF] Postman-Token: ["acee8dc0-d7a5-4755-a5b1-3d4cd9545a12"]
2025-10-22 12:07:02.693 +03:00 [INF] üîç TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-10-22 12:07:02.695 +03:00 [INF] ‚úÖ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-10-22 12:07:02.696 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Review (ModularERP)'
2025-10-22 12:07:02.702 +03:00 [INF] Route matched with {action = "Review", controller = "StocktakingWorkFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_WorkFlow.ReviewStocktakingDto]]] Review(System.Guid, System.Guid, System.Threading.CancellationToken) on controller ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController (ModularERP).
2025-10-22 12:07:02.708 +03:00 [INF] POST: Review Stocktaking "151ab924-c688-444c-bdbf-aaa758c74d8a"
2025-10-22 12:07:02.715 +03:00 [WRN] Validation failed for ReviewStocktakingCommand. Errors: [{"PropertyName":"CompanyId","ErrorMessage":"Company ID is required"},{"PropertyName":"UserId","ErrorMessage":"User ID is required"}]
2025-10-22 12:07:02.725 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Review (ModularERP) in 18.5391ms
2025-10-22 12:07:02.727 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Review (ModularERP)'
2025-10-22 12:07:02.730 +03:00 [WRN] Validation exception occurred: Validation failed. Validation errors: {"CompanyId":["Company ID is required"],"UserId":["User ID is required"]}
ModularERP.Common.Exceptions.ValidationException: Validation failed
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 44
   at ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Review(Guid id, Guid companyId, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Stocktaking\Controllers\StocktakingWorkFlowController.cs:line 158
   at lambda_method401(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_7>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 352
--- End of stack trace from previous location ---
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 305
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-10-22 12:07:02.794 +03:00 [INF] Error response sent with status code 400
2025-10-22 12:07:02.796 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/{151ab924-c688-444c-bdbf-aaa758c74d8a}/review - 400 null application/json; charset=utf-8 139.7055ms
2025-10-22 12:08:55.708 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/{151ab924-c688-444c-bdbf-aaa758c74d8a}/review?CompanyId=90137c92-382d-404c-bade-e5fefb1e8dbf&UserId= - null 0
2025-10-22 12:08:55.714 +03:00 [INF] Request started
2025-10-22 12:08:55.715 +03:00 [INF] === Incoming Request ===
2025-10-22 12:08:55.716 +03:00 [INF] Path: /api/StocktakingWorkFlow/%7B151ab924-c688-444c-bdbf-aaa758c74d8a%7D/review
2025-10-22 12:08:55.719 +03:00 [INF] Method: POST
2025-10-22 12:08:55.720 +03:00 [INF] === Headers ===
2025-10-22 12:08:55.721 +03:00 [INF] Accept: ["*/*"]
2025-10-22 12:08:55.723 +03:00 [INF] Connection: ["keep-alive"]
2025-10-22 12:08:55.725 +03:00 [INF] Host: ["localhost:7168"]
2025-10-22 12:08:55.728 +03:00 [INF] User-Agent: ["PostmanRuntime/7.49.0"]
2025-10-22 12:08:55.731 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-22 12:08:55.733 +03:00 [INF] Content-Length: ["0"]
2025-10-22 12:08:55.735 +03:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-10-22 12:08:55.737 +03:00 [INF] Postman-Token: ["22f9a091-d755-4947-a971-a1a7615f2a20"]
2025-10-22 12:08:55.739 +03:00 [INF] üîç TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-10-22 12:08:55.740 +03:00 [INF] ‚úÖ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-10-22 12:08:55.741 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Review (ModularERP)'
2025-10-22 12:08:55.743 +03:00 [INF] Route matched with {action = "Review", controller = "StocktakingWorkFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_WorkFlow.ReviewStocktakingDto]]] Review(System.Guid, System.Guid, System.Threading.CancellationToken) on controller ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController (ModularERP).
2025-10-22 12:08:55.748 +03:00 [INF] POST: Review Stocktaking "151ab924-c688-444c-bdbf-aaa758c74d8a"
2025-10-22 12:08:55.750 +03:00 [WRN] Validation failed for ReviewStocktakingCommand. Errors: [{"PropertyName":"UserId","ErrorMessage":"User ID is required"}]
2025-10-22 12:08:55.753 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Review (ModularERP) in 5.2311ms
2025-10-22 12:08:55.755 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Review (ModularERP)'
2025-10-22 12:08:55.758 +03:00 [WRN] Validation exception occurred: Validation failed. Validation errors: {"UserId":["User ID is required"]}
ModularERP.Common.Exceptions.ValidationException: Validation failed
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 44
   at ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Review(Guid id, Guid companyId, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Stocktaking\Controllers\StocktakingWorkFlowController.cs:line 158
   at lambda_method401(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_7>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 352
--- End of stack trace from previous location ---
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 305
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-10-22 12:08:55.776 +03:00 [INF] Error response sent with status code 400
2025-10-22 12:08:55.780 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/{151ab924-c688-444c-bdbf-aaa758c74d8a}/review?CompanyId=90137c92-382d-404c-bade-e5fefb1e8dbf&UserId= - 400 null application/json; charset=utf-8 71.8975ms
2025-10-22 12:10:15.006 +03:00 [INF] Starting web host...
2025-10-22 12:10:16.143 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-22 12:10:16.178 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-10-22 12:10:16.251 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-22 12:10:16.257 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-22 12:10:16.260 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-22 12:10:16.323 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-22 12:10:16.338 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-22 12:10:16.343 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-22 12:10:16.349 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-22 12:10:16.366 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-10-22 12:10:16.372 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-22 12:10:16.537 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-22 12:10:16.544 +03:00 [INF] Master database initialized successfully
2025-10-22 12:10:18.216 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-22 12:10:18.324 +03:00 [INF] Now listening on: https://localhost:7168
2025-10-22 12:10:18.325 +03:00 [INF] Now listening on: http://localhost:5004
2025-10-22 12:10:18.388 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-22 12:10:18.425 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-22 12:10:18.427 +03:00 [INF] Hosting environment: Development
2025-10-22 12:10:18.428 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-10-22 12:10:18.522 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 133.5462ms
2025-10-22 12:10:18.523 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-22 12:10:18.523 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-22 12:10:18.544 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 20.397ms
2025-10-22 12:10:18.560 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 37.0049ms
2025-10-22 12:10:18.625 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-22 12:10:18.906 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 281.5405ms
2025-10-22 12:10:24.447 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/{151ab924-c688-444c-bdbf-aaa758c74d8a}/review?CompanyId=90137c92-382d-404c-bade-e5fefb1e8dbf&UserId= - null 0
2025-10-22 12:10:24.463 +03:00 [INF] Request started
2025-10-22 12:10:24.466 +03:00 [INF] === Incoming Request ===
2025-10-22 12:10:24.468 +03:00 [INF] Path: /api/StocktakingWorkFlow/%7B151ab924-c688-444c-bdbf-aaa758c74d8a%7D/review
2025-10-22 12:10:24.470 +03:00 [INF] Method: POST
2025-10-22 12:10:24.471 +03:00 [INF] === Headers ===
2025-10-22 12:10:24.473 +03:00 [INF] Accept: ["*/*"]
2025-10-22 12:10:24.475 +03:00 [INF] Connection: ["keep-alive"]
2025-10-22 12:10:24.477 +03:00 [INF] Host: ["localhost:7168"]
2025-10-22 12:10:24.478 +03:00 [INF] User-Agent: ["PostmanRuntime/7.49.0"]
2025-10-22 12:10:24.479 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-22 12:10:24.481 +03:00 [INF] Content-Length: ["0"]
2025-10-22 12:10:24.484 +03:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-10-22 12:10:24.485 +03:00 [INF] Postman-Token: ["8bc43178-48cc-436b-9021-c6a0d77ab5b1"]
2025-10-22 12:10:24.489 +03:00 [INF] üîç TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-10-22 12:10:24.490 +03:00 [INF] ‚úÖ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-10-22 12:10:24.492 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Review (ModularERP)'
2025-10-22 12:10:24.507 +03:00 [INF] Route matched with {action = "Review", controller = "StocktakingWorkFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_WorkFlow.ReviewStocktakingDto]]] Review(System.Guid, System.Guid, System.Threading.CancellationToken) on controller ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController (ModularERP).
2025-10-22 12:10:24.512 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-22 12:10:24.521 +03:00 [INF] POST: Review Stocktaking "151ab924-c688-444c-bdbf-aaa758c74d8a"
2025-10-22 12:10:24.546 +03:00 [WRN] Validation failed for ReviewStocktakingCommand. Errors: [{"PropertyName":"UserId","ErrorMessage":"User ID is required"}]
2025-10-22 12:10:24.556 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Review (ModularERP) in 43.7005ms
2025-10-22 12:10:24.558 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Review (ModularERP)'
2025-10-22 12:10:24.560 +03:00 [WRN] Validation exception occurred: Validation failed. Validation errors: {"UserId":["User ID is required"]}
ModularERP.Common.Exceptions.ValidationException: Validation failed
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 44
   at ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Review(Guid id, Guid companyId, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Stocktaking\Controllers\StocktakingWorkFlowController.cs:line 158
   at lambda_method99(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_7>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 352
--- End of stack trace from previous location ---
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 305
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-10-22 12:10:24.604 +03:00 [INF] Error response sent with status code 400
2025-10-22 12:10:24.607 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/{151ab924-c688-444c-bdbf-aaa758c74d8a}/review?CompanyId=90137c92-382d-404c-bade-e5fefb1e8dbf&UserId= - 400 null application/json; charset=utf-8 160.4699ms
2025-10-22 12:14:12.303 +03:00 [INF] Starting web host...
2025-10-22 12:14:13.412 +03:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-22 12:14:13.445 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-10-22 12:14:13.517 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-22 12:14:13.523 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-22 12:14:13.527 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-22 12:14:13.587 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-22 12:14:13.605 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-22 12:14:13.611 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-22 12:14:13.618 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-22 12:14:13.630 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-10-22 12:14:13.635 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-22 12:14:13.799 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-22 12:14:13.807 +03:00 [INF] Master database initialized successfully
2025-10-22 12:14:15.627 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-22 12:14:15.731 +03:00 [INF] Now listening on: https://localhost:7168
2025-10-22 12:14:15.733 +03:00 [INF] Now listening on: http://localhost:5004
2025-10-22 12:14:15.816 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-22 12:14:15.818 +03:00 [INF] Hosting environment: Development
2025-10-22 12:14:15.819 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-10-22 12:14:16.188 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-22 12:14:16.318 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 131.3101ms
2025-10-22 12:14:16.446 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-22 12:14:16.446 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-22 12:14:16.453 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 6.7052ms
2025-10-22 12:14:16.474 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 27.4834ms
2025-10-22 12:14:16.517 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-22 12:14:16.748 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 230.1373ms
2025-10-22 12:14:25.562 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/{151ab924-c688-444c-bdbf-aaa758c74d8a}/review?CompanyId=90137c92-382d-404c-bade-e5fefb1e8dbf&UserId= - null 0
2025-10-22 12:14:25.579 +03:00 [INF] Request started
2025-10-22 12:14:25.587 +03:00 [INF] === Incoming Request ===
2025-10-22 12:14:25.590 +03:00 [INF] Path: /api/StocktakingWorkFlow/%7B151ab924-c688-444c-bdbf-aaa758c74d8a%7D/review
2025-10-22 12:14:25.591 +03:00 [INF] Method: POST
2025-10-22 12:14:25.592 +03:00 [INF] === Headers ===
2025-10-22 12:14:25.595 +03:00 [INF] Accept: ["*/*"]
2025-10-22 12:14:25.597 +03:00 [INF] Connection: ["keep-alive"]
2025-10-22 12:14:25.599 +03:00 [INF] Host: ["localhost:7168"]
2025-10-22 12:14:25.600 +03:00 [INF] User-Agent: ["PostmanRuntime/7.49.0"]
2025-10-22 12:14:25.604 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-22 12:14:25.606 +03:00 [INF] Content-Length: ["0"]
2025-10-22 12:14:25.608 +03:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-10-22 12:14:25.609 +03:00 [INF] Postman-Token: ["8f2b5f13-a859-4529-a55f-4be84d784a83"]
2025-10-22 12:14:25.615 +03:00 [INF] üîç TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-10-22 12:14:25.616 +03:00 [INF] ‚úÖ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-10-22 12:14:25.618 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Review (ModularERP)'
2025-10-22 12:14:25.643 +03:00 [INF] Route matched with {action = "Review", controller = "StocktakingWorkFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_WorkFlow.ReviewStocktakingDto]]] Review(System.Guid, System.Guid, System.Threading.CancellationToken) on controller ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController (ModularERP).
2025-10-22 12:14:25.650 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-22 12:14:25.668 +03:00 [INF] POST: Review Stocktaking "151ab924-c688-444c-bdbf-aaa758c74d8a"
2025-10-22 12:14:25.749 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-10-22 12:14:26.349 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-22 12:14:26.359 +03:00 [INF] Moving stocktaking "151ab924-c688-444c-bdbf-aaa758c74d8a" to review
2025-10-22 12:14:26.417 +03:00 [ERR] Error reviewing stocktaking "151ab924-c688-444c-bdbf-aaa758c74d8a"
ModularERP.Common.Exceptions.BusinessLogicException: Stocktaking must have at least one recorded item
   at ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.ReviewStocktakingHandler.Handle(ReviewStocktakingCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Stocktaking\Handlers\Handlers_StockTraking_WorkFlow\ReviewStocktakingHandler.cs:line 46
2025-10-22 12:14:26.459 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Review (ModularERP) in 809.1366ms
2025-10-22 12:14:26.463 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Review (ModularERP)'
2025-10-22 12:14:26.466 +03:00 [WRN] Business logic exception occurred: Stocktaking must have at least one recorded item
ModularERP.Common.Exceptions.BusinessLogicException: Stocktaking must have at least one recorded item
   at ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.ReviewStocktakingHandler.Handle(ReviewStocktakingCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Stocktaking\Handlers\Handlers_StockTraking_WorkFlow\ReviewStocktakingHandler.cs:line 46
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Review(Guid id, Guid companyId, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Stocktaking\Controllers\StocktakingWorkFlowController.cs:line 158
   at lambda_method99(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_7>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 352
--- End of stack trace from previous location ---
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 305
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-10-22 12:14:26.505 +03:00 [INF] Error response sent with status code 400
2025-10-22 12:14:26.511 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/{151ab924-c688-444c-bdbf-aaa758c74d8a}/review?CompanyId=90137c92-382d-404c-bade-e5fefb1e8dbf&UserId= - 400 null application/json; charset=utf-8 948.8268ms
2025-10-22 12:15:24.656 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/{45ef0250-4160-4789-884f-8d5c14239b1c}/review?CompanyId=90137c92-382d-404c-bade-e5fefb1e8dbf&UserId= - null 0
2025-10-22 12:15:24.665 +03:00 [INF] Request started
2025-10-22 12:15:24.667 +03:00 [INF] === Incoming Request ===
2025-10-22 12:15:24.668 +03:00 [INF] Path: /api/StocktakingWorkFlow/%7B45ef0250-4160-4789-884f-8d5c14239b1c%7D/review
2025-10-22 12:15:24.670 +03:00 [INF] Method: POST
2025-10-22 12:15:24.672 +03:00 [INF] === Headers ===
2025-10-22 12:15:24.673 +03:00 [INF] Accept: ["*/*"]
2025-10-22 12:15:24.674 +03:00 [INF] Connection: ["keep-alive"]
2025-10-22 12:15:24.677 +03:00 [INF] Host: ["localhost:7168"]
2025-10-22 12:15:24.678 +03:00 [INF] User-Agent: ["PostmanRuntime/7.49.0"]
2025-10-22 12:15:24.680 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-22 12:15:24.681 +03:00 [INF] Content-Length: ["0"]
2025-10-22 12:15:24.683 +03:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-10-22 12:15:24.686 +03:00 [INF] Postman-Token: ["abc4e45c-0140-419f-b862-a8ebf6d82430"]
2025-10-22 12:15:24.690 +03:00 [INF] üîç TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-10-22 12:15:24.691 +03:00 [INF] ‚úÖ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-10-22 12:15:24.692 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Review (ModularERP)'
2025-10-22 12:15:24.695 +03:00 [INF] Route matched with {action = "Review", controller = "StocktakingWorkFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_WorkFlow.ReviewStocktakingDto]]] Review(System.Guid, System.Guid, System.Threading.CancellationToken) on controller ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController (ModularERP).
2025-10-22 12:15:24.699 +03:00 [INF] POST: Review Stocktaking "45ef0250-4160-4789-884f-8d5c14239b1c"
2025-10-22 12:15:24.740 +03:00 [INF] Moving stocktaking "45ef0250-4160-4789-884f-8d5c14239b1c" to review
2025-10-22 12:15:24.746 +03:00 [ERR] Error reviewing stocktaking "45ef0250-4160-4789-884f-8d5c14239b1c"
ModularERP.Common.Exceptions.BusinessLogicException: Stocktaking must have at least one recorded item
   at ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.ReviewStocktakingHandler.Handle(ReviewStocktakingCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Stocktaking\Handlers\Handlers_StockTraking_WorkFlow\ReviewStocktakingHandler.cs:line 46
2025-10-22 12:15:24.749 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Review (ModularERP) in 51.5405ms
2025-10-22 12:15:24.753 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Review (ModularERP)'
2025-10-22 12:15:24.755 +03:00 [WRN] Business logic exception occurred: Stocktaking must have at least one recorded item
ModularERP.Common.Exceptions.BusinessLogicException: Stocktaking must have at least one recorded item
   at ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.ReviewStocktakingHandler.Handle(ReviewStocktakingCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Stocktaking\Handlers\Handlers_StockTraking_WorkFlow\ReviewStocktakingHandler.cs:line 46
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Review(Guid id, Guid companyId, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Stocktaking\Controllers\StocktakingWorkFlowController.cs:line 158
   at lambda_method99(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_7>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 352
--- End of stack trace from previous location ---
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 305
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-10-22 12:15:24.779 +03:00 [INF] Error response sent with status code 400
2025-10-22 12:15:24.782 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/{45ef0250-4160-4789-884f-8d5c14239b1c}/review?CompanyId=90137c92-382d-404c-bade-e5fefb1e8dbf&UserId= - 400 null application/json; charset=utf-8 126.3051ms
2025-10-22 12:19:57.195 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/{45ef0250-4160-4789-884f-8d5c14239b1c}/post - null 0
2025-10-22 12:19:57.201 +03:00 [INF] Request started
2025-10-22 12:19:57.201 +03:00 [INF] === Incoming Request ===
2025-10-22 12:19:57.202 +03:00 [INF] Path: /api/StocktakingWorkFlow/%7B45ef0250-4160-4789-884f-8d5c14239b1c%7D/post
2025-10-22 12:19:57.204 +03:00 [INF] Method: POST
2025-10-22 12:19:57.206 +03:00 [INF] === Headers ===
2025-10-22 12:19:57.207 +03:00 [INF] Accept: ["*/*"]
2025-10-22 12:19:57.208 +03:00 [INF] Connection: ["keep-alive"]
2025-10-22 12:19:57.210 +03:00 [INF] Host: ["localhost:7168"]
2025-10-22 12:19:57.213 +03:00 [INF] User-Agent: ["PostmanRuntime/7.49.0"]
2025-10-22 12:19:57.216 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-22 12:19:57.217 +03:00 [INF] Content-Length: ["0"]
2025-10-22 12:19:57.219 +03:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-10-22 12:19:57.220 +03:00 [INF] Postman-Token: ["0236cdaa-b489-4aec-82bb-5293b138890c"]
2025-10-22 12:19:57.222 +03:00 [INF] üîç TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-10-22 12:19:57.223 +03:00 [INF] ‚úÖ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-10-22 12:19:57.226 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Post (ModularERP)'
2025-10-22 12:19:57.231 +03:00 [INF] Route matched with {action = "Post", controller = "StocktakingWorkFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_WorkFlow.PostStocktakingDto]]] Post(System.Guid, System.Guid, Boolean, System.Threading.CancellationToken) on controller ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController (ModularERP).
2025-10-22 12:19:57.239 +03:00 [INF] POST: Post Stocktaking "45ef0250-4160-4789-884f-8d5c14239b1c"
2025-10-22 12:19:57.247 +03:00 [WRN] Validation failed for PostStocktakingCommand. Errors: [{"PropertyName":"CompanyId","ErrorMessage":"Company ID is required"}]
2025-10-22 12:19:57.254 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Post (ModularERP) in 16.9256ms
2025-10-22 12:19:57.256 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Post (ModularERP)'
2025-10-22 12:19:57.257 +03:00 [WRN] Validation exception occurred: Validation failed. Validation errors: {"CompanyId":["Company ID is required"]}
ModularERP.Common.Exceptions.ValidationException: Validation failed
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 44
   at ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Post(Guid id, Guid companyId, Boolean forcePost, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Stocktaking\Controllers\StocktakingWorkFlowController.cs:line 181
   at lambda_method282(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_7>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 352
--- End of stack trace from previous location ---
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 305
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-10-22 12:19:57.283 +03:00 [INF] Error response sent with status code 400
2025-10-22 12:19:57.285 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/{45ef0250-4160-4789-884f-8d5c14239b1c}/post - 400 null application/json; charset=utf-8 89.9107ms
2025-10-22 12:20:32.935 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/{45ef0250-4160-4789-884f-8d5c14239b1c}/post?CompanyId=90137c92-382d-404c-bade-e5fefb1e8dbf - null 0
2025-10-22 12:20:32.939 +03:00 [INF] Request started
2025-10-22 12:20:32.939 +03:00 [INF] === Incoming Request ===
2025-10-22 12:20:32.940 +03:00 [INF] Path: /api/StocktakingWorkFlow/%7B45ef0250-4160-4789-884f-8d5c14239b1c%7D/post
2025-10-22 12:20:32.942 +03:00 [INF] Method: POST
2025-10-22 12:20:32.943 +03:00 [INF] === Headers ===
2025-10-22 12:20:32.946 +03:00 [INF] Accept: ["*/*"]
2025-10-22 12:20:32.950 +03:00 [INF] Connection: ["keep-alive"]
2025-10-22 12:20:32.951 +03:00 [INF] Host: ["localhost:7168"]
2025-10-22 12:20:32.954 +03:00 [INF] User-Agent: ["PostmanRuntime/7.49.0"]
2025-10-22 12:20:32.956 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-22 12:20:32.957 +03:00 [INF] Content-Length: ["0"]
2025-10-22 12:20:32.959 +03:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-10-22 12:20:32.960 +03:00 [INF] Postman-Token: ["3fbff769-0db7-4c8f-947a-10776f294c66"]
2025-10-22 12:20:32.962 +03:00 [INF] üîç TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-10-22 12:20:32.966 +03:00 [INF] ‚úÖ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-10-22 12:20:32.967 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Post (ModularERP)'
2025-10-22 12:20:32.969 +03:00 [INF] Route matched with {action = "Post", controller = "StocktakingWorkFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_WorkFlow.PostStocktakingDto]]] Post(System.Guid, System.Guid, Boolean, System.Threading.CancellationToken) on controller ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController (ModularERP).
2025-10-22 12:20:32.972 +03:00 [INF] POST: Post Stocktaking "45ef0250-4160-4789-884f-8d5c14239b1c"
2025-10-22 12:20:32.978 +03:00 [INF] Posting stocktaking "45ef0250-4160-4789-884f-8d5c14239b1c"
2025-10-22 12:20:32.985 +03:00 [ERR] Error posting stocktaking "45ef0250-4160-4789-884f-8d5c14239b1c"
ModularERP.Common.Exceptions.BusinessLogicException: Stocktaking must be in Review status to post
   at ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.PostStocktakingHandler.Handle(PostStocktakingCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Stocktaking\Handlers\Handlers_StockTraking_WorkFlow\PostStocktakingHandler.cs:line 51
2025-10-22 12:20:32.989 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Post (ModularERP) in 16.6627ms
2025-10-22 12:20:32.990 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Post (ModularERP)'
2025-10-22 12:20:32.993 +03:00 [WRN] Business logic exception occurred: Stocktaking must be in Review status to post
ModularERP.Common.Exceptions.BusinessLogicException: Stocktaking must be in Review status to post
   at ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.PostStocktakingHandler.Handle(PostStocktakingCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Stocktaking\Handlers\Handlers_StockTraking_WorkFlow\PostStocktakingHandler.cs:line 51
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Post(Guid id, Guid companyId, Boolean forcePost, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Stocktaking\Controllers\StocktakingWorkFlowController.cs:line 181
   at lambda_method282(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_7>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 352
--- End of stack trace from previous location ---
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 305
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-10-22 12:20:33.016 +03:00 [INF] Error response sent with status code 400
2025-10-22 12:20:33.018 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/{45ef0250-4160-4789-884f-8d5c14239b1c}/post?CompanyId=90137c92-382d-404c-bade-e5fefb1e8dbf - 400 null application/json; charset=utf-8 82.8746ms
2025-10-22 12:28:31.127 +03:00 [INF] Starting web host...
2025-10-22 12:28:32.234 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-22 12:28:32.283 +03:00 [INF] Executed DbCommand (33ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-10-22 12:28:32.352 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-22 12:28:32.357 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-22 12:28:32.368 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-22 12:28:32.431 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-22 12:28:32.446 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-22 12:28:32.450 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-22 12:28:32.456 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-22 12:28:32.466 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-10-22 12:28:32.472 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-22 12:28:32.655 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-22 12:28:32.662 +03:00 [INF] Master database initialized successfully
2025-10-22 12:28:34.260 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-22 12:28:34.363 +03:00 [INF] Now listening on: https://localhost:7168
2025-10-22 12:28:34.365 +03:00 [INF] Now listening on: http://localhost:5004
2025-10-22 12:28:34.442 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-22 12:28:34.444 +03:00 [INF] Hosting environment: Development
2025-10-22 12:28:34.445 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-10-22 12:28:34.681 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-22 12:28:34.847 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 167.2368ms
2025-10-22 12:28:34.976 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-22 12:28:34.976 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-22 12:28:34.984 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 8.7094ms
2025-10-22 12:28:34.998 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 22.5464ms
2025-10-22 12:28:35.048 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-22 12:28:35.299 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 250.9391ms
2025-10-22 12:29:58.018 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/api/BankAccount?page=1&pageSize=10&sortDescending=false - null null
2025-10-22 12:29:58.046 +03:00 [INF] Request started
2025-10-22 12:29:58.048 +03:00 [INF] === Incoming Request ===
2025-10-22 12:29:58.050 +03:00 [INF] Path: /api/BankAccount
2025-10-22 12:29:58.051 +03:00 [INF] Method: GET
2025-10-22 12:29:58.053 +03:00 [INF] === Headers ===
2025-10-22 12:29:58.055 +03:00 [INF] Accept: ["text/plain"]
2025-10-22 12:29:58.059 +03:00 [INF] Host: ["localhost:7168"]
2025-10-22 12:29:58.061 +03:00 [INF] User-Agent: ["Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36 Edg/141.0.0.0"]
2025-10-22 12:29:58.063 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br, zstd"]
2025-10-22 12:29:58.064 +03:00 [INF] Accept-Language: ["en-US,en;q=0.9"]
2025-10-22 12:29:58.066 +03:00 [INF] Referer: ["https://localhost:7168/swagger/index.html"]
2025-10-22 12:29:58.069 +03:00 [INF] sec-ch-ua-platform: ["\"Windows\""]
2025-10-22 12:29:58.070 +03:00 [INF] sec-ch-ua: ["\"Microsoft Edge\";v=\"141\", \"Not?A_Brand\";v=\"8\", \"Chromium\";v=\"141\""]
2025-10-22 12:29:58.073 +03:00 [INF] sec-ch-ua-mobile: ["?0"]
2025-10-22 12:29:58.074 +03:00 [INF] sec-fetch-site: ["same-origin"]
2025-10-22 12:29:58.077 +03:00 [INF] sec-fetch-mode: ["cors"]
2025-10-22 12:29:58.079 +03:00 [INF] sec-fetch-dest: ["empty"]
2025-10-22 12:29:58.081 +03:00 [INF] priority: ["u=1, i"]
2025-10-22 12:29:58.087 +03:00 [INF] üîç TenantService returned: 'NULL'
2025-10-22 12:29:58.095 +03:00 [INF] Request completed successfully with status code 400
2025-10-22 12:29:58.098 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/api/BankAccount?page=1&pageSize=10&sortDescending=false - 400 null application/json 80.5542ms
2025-10-22 12:30:15.769 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/stocktaking/{151ab924-c688-444c-bdbf-aaa758c74d8a}/lines - application/json 593
2025-10-22 12:30:15.780 +03:00 [INF] Request started
2025-10-22 12:30:15.782 +03:00 [INF] === Incoming Request ===
2025-10-22 12:30:15.783 +03:00 [INF] Path: /api/stocktaking/%7B151ab924-c688-444c-bdbf-aaa758c74d8a%7D/lines
2025-10-22 12:30:15.785 +03:00 [INF] Method: POST
2025-10-22 12:30:15.786 +03:00 [INF] === Headers ===
2025-10-22 12:30:15.789 +03:00 [INF] Accept: ["*/*"]
2025-10-22 12:30:15.792 +03:00 [INF] Connection: ["keep-alive"]
2025-10-22 12:30:15.793 +03:00 [INF] Host: ["localhost:7168"]
2025-10-22 12:30:15.795 +03:00 [INF] User-Agent: ["PostmanRuntime/7.49.0"]
2025-10-22 12:30:15.797 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-22 12:30:15.801 +03:00 [INF] Content-Type: ["application/json"]
2025-10-22 12:30:15.802 +03:00 [INF] Content-Length: ["593"]
2025-10-22 12:30:15.805 +03:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-10-22 12:30:15.807 +03:00 [INF] Postman-Token: ["478120a8-83f9-4aa1-bd2d-086b81453375"]
2025-10-22 12:30:15.812 +03:00 [INF] üîç TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-10-22 12:30:15.813 +03:00 [INF] ‚úÖ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-10-22 12:30:15.815 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingLineController.CreateLine (ModularERP)'
2025-10-22 12:30:15.830 +03:00 [INF] Route matched with {action = "CreateLine", controller = "StocktakingLine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_Line.StocktakingLineDto]]] CreateLine(System.Guid, ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_Line.CreateStocktakingLineDto) on controller ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingLineController (ModularERP).
2025-10-22 12:30:15.836 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-22 12:30:15.877 +03:00 [INF] Creating stocktaking line for stocktaking "151ab924-c688-444c-bdbf-aaa758c74d8a"
2025-10-22 12:30:15.962 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-10-22 12:30:16.421 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-22 12:30:16.426 +03:00 [INF] Processing CreateStocktakingLineCommand for stocktaking "151ab924-c688-444c-bdbf-aaa758c74d8a"
2025-10-22 12:30:16.687 +03:00 [INF] Stocktaking line created successfully with ID "4e3f4cf1-4deb-436c-a70b-2e16f3e1c301"
2025-10-22 12:30:16.750 +03:00 [INF] Stocktaking line created successfully with ID "4e3f4cf1-4deb-436c-a70b-2e16f3e1c301"
2025-10-22 12:30:16.757 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_Line.StocktakingLineDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-22 12:30:16.783 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingLineController.CreateLine (ModularERP) in 947.4859ms
2025-10-22 12:30:16.788 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingLineController.CreateLine (ModularERP)'
2025-10-22 12:30:16.790 +03:00 [INF] Request completed successfully with status code 200
2025-10-22 12:30:16.794 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/stocktaking/{151ab924-c688-444c-bdbf-aaa758c74d8a}/lines - 200 null application/json; charset=utf-8 1025.5105ms
2025-10-22 12:31:16.091 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/151ab924-c688-444c-bdbf-aaa758c74d8a/start?CompanyId=90137c92-382d-404c-bade-e5fefb1e8dbf - null 0
2025-10-22 12:31:16.097 +03:00 [INF] Request started
2025-10-22 12:31:16.098 +03:00 [INF] === Incoming Request ===
2025-10-22 12:31:16.100 +03:00 [INF] Path: /api/StocktakingWorkFlow/151ab924-c688-444c-bdbf-aaa758c74d8a/start
2025-10-22 12:31:16.102 +03:00 [INF] Method: POST
2025-10-22 12:31:16.103 +03:00 [INF] === Headers ===
2025-10-22 12:31:16.105 +03:00 [INF] Accept: ["*/*"]
2025-10-22 12:31:16.107 +03:00 [INF] Connection: ["keep-alive"]
2025-10-22 12:31:16.109 +03:00 [INF] Host: ["localhost:7168"]
2025-10-22 12:31:16.112 +03:00 [INF] User-Agent: ["PostmanRuntime/7.49.0"]
2025-10-22 12:31:16.114 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-22 12:31:16.115 +03:00 [INF] Content-Length: ["0"]
2025-10-22 12:31:16.119 +03:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-10-22 12:31:16.122 +03:00 [INF] Postman-Token: ["397bcef4-6785-4481-a197-19e8269980fa"]
2025-10-22 12:31:16.125 +03:00 [INF] üîç TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-10-22 12:31:16.126 +03:00 [INF] ‚úÖ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-10-22 12:31:16.127 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Start (ModularERP)'
2025-10-22 12:31:16.133 +03:00 [INF] Route matched with {action = "Start", controller = "StocktakingWorkFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_WorkFlow.StartStocktakingDto]]] Start(System.Guid, System.Guid, System.Threading.CancellationToken) on controller ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController (ModularERP).
2025-10-22 12:31:16.142 +03:00 [INF] POST: Start Stocktaking "151ab924-c688-444c-bdbf-aaa758c74d8a"
2025-10-22 12:31:16.148 +03:00 [INF] Starting stocktaking session "151ab924-c688-444c-bdbf-aaa758c74d8a"
2025-10-22 12:31:16.159 +03:00 [ERR] Error starting stocktaking "151ab924-c688-444c-bdbf-aaa758c74d8a"
ModularERP.Common.Exceptions.BusinessLogicException: Cannot start stocktaking with status Counting
   at ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.StartStocktakingHandler.Handle(StartStocktakingCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Stocktaking\Handlers\Handlers_StockTraking_WorkFlow\StartStocktakingHandler.cs:line 46
2025-10-22 12:31:16.173 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Start (ModularERP) in 34.6442ms
2025-10-22 12:31:16.176 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Start (ModularERP)'
2025-10-22 12:31:16.179 +03:00 [WRN] Business logic exception occurred: Cannot start stocktaking with status Counting
ModularERP.Common.Exceptions.BusinessLogicException: Cannot start stocktaking with status Counting
   at ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.StartStocktakingHandler.Handle(StartStocktakingCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Stocktaking\Handlers\Handlers_StockTraking_WorkFlow\StartStocktakingHandler.cs:line 46
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Start(Guid id, Guid companyId, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Stocktaking\Controllers\StocktakingWorkFlowController.cs:line 137
   at lambda_method599(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_7>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 352
--- End of stack trace from previous location ---
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 305
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-10-22 12:31:16.207 +03:00 [INF] Error response sent with status code 400
2025-10-22 12:31:16.209 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/151ab924-c688-444c-bdbf-aaa758c74d8a/start?CompanyId=90137c92-382d-404c-bade-e5fefb1e8dbf - 400 null application/json; charset=utf-8 117.7672ms
2025-10-22 12:31:44.061 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/{151ab924-c688-444c-bdbf-aaa758c74d8a}/review?CompanyId=90137c92-382d-404c-bade-e5fefb1e8dbf&UserId= - null 0
2025-10-22 12:31:44.065 +03:00 [INF] Request started
2025-10-22 12:31:44.066 +03:00 [INF] === Incoming Request ===
2025-10-22 12:31:44.067 +03:00 [INF] Path: /api/StocktakingWorkFlow/%7B151ab924-c688-444c-bdbf-aaa758c74d8a%7D/review
2025-10-22 12:31:44.068 +03:00 [INF] Method: POST
2025-10-22 12:31:44.069 +03:00 [INF] === Headers ===
2025-10-22 12:31:44.071 +03:00 [INF] Accept: ["*/*"]
2025-10-22 12:31:44.073 +03:00 [INF] Connection: ["keep-alive"]
2025-10-22 12:31:44.075 +03:00 [INF] Host: ["localhost:7168"]
2025-10-22 12:31:44.077 +03:00 [INF] User-Agent: ["PostmanRuntime/7.49.0"]
2025-10-22 12:31:44.078 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-22 12:31:44.082 +03:00 [INF] Content-Length: ["0"]
2025-10-22 12:31:44.084 +03:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-10-22 12:31:44.085 +03:00 [INF] Postman-Token: ["ce035f62-1e37-4642-adca-f185773cdb0b"]
2025-10-22 12:31:44.087 +03:00 [INF] üîç TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-10-22 12:31:44.088 +03:00 [INF] ‚úÖ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-10-22 12:31:44.090 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Review (ModularERP)'
2025-10-22 12:31:44.097 +03:00 [INF] Route matched with {action = "Review", controller = "StocktakingWorkFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_WorkFlow.ReviewStocktakingDto]]] Review(System.Guid, System.Guid, System.Threading.CancellationToken) on controller ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController (ModularERP).
2025-10-22 12:31:44.102 +03:00 [INF] POST: Review Stocktaking "151ab924-c688-444c-bdbf-aaa758c74d8a"
2025-10-22 12:31:44.107 +03:00 [INF] Moving stocktaking "151ab924-c688-444c-bdbf-aaa758c74d8a" to review
2025-10-22 12:31:44.113 +03:00 [ERR] Error reviewing stocktaking "151ab924-c688-444c-bdbf-aaa758c74d8a"
ModularERP.Common.Exceptions.BusinessLogicException: Stocktaking must have at least one recorded item
   at ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.ReviewStocktakingHandler.Handle(ReviewStocktakingCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Stocktaking\Handlers\Handlers_StockTraking_WorkFlow\ReviewStocktakingHandler.cs:line 46
2025-10-22 12:31:44.116 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Review (ModularERP) in 14.9953ms
2025-10-22 12:31:44.119 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Review (ModularERP)'
2025-10-22 12:31:44.120 +03:00 [WRN] Business logic exception occurred: Stocktaking must have at least one recorded item
ModularERP.Common.Exceptions.BusinessLogicException: Stocktaking must have at least one recorded item
   at ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.ReviewStocktakingHandler.Handle(ReviewStocktakingCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Stocktaking\Handlers\Handlers_StockTraking_WorkFlow\ReviewStocktakingHandler.cs:line 46
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Review(Guid id, Guid companyId, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Stocktaking\Controllers\StocktakingWorkFlowController.cs:line 158
   at lambda_method609(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_7>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 352
--- End of stack trace from previous location ---
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 305
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-10-22 12:31:44.144 +03:00 [INF] Error response sent with status code 400
2025-10-22 12:31:44.146 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/{151ab924-c688-444c-bdbf-aaa758c74d8a}/review?CompanyId=90137c92-382d-404c-bade-e5fefb1e8dbf&UserId= - 400 null application/json; charset=utf-8 84.8096ms
2025-10-22 12:31:59.593 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/{151ab924-c688-444c-bdbf-aaa758c74d8a}/review?CompanyId=90137c92-382d-404c-bade-e5fefb1e8dbf - null 0
2025-10-22 12:31:59.598 +03:00 [INF] Request started
2025-10-22 12:31:59.599 +03:00 [INF] === Incoming Request ===
2025-10-22 12:31:59.600 +03:00 [INF] Path: /api/StocktakingWorkFlow/%7B151ab924-c688-444c-bdbf-aaa758c74d8a%7D/review
2025-10-22 12:31:59.604 +03:00 [INF] Method: POST
2025-10-22 12:31:59.605 +03:00 [INF] === Headers ===
2025-10-22 12:31:59.606 +03:00 [INF] Accept: ["*/*"]
2025-10-22 12:31:59.608 +03:00 [INF] Connection: ["keep-alive"]
2025-10-22 12:31:59.610 +03:00 [INF] Host: ["localhost:7168"]
2025-10-22 12:31:59.611 +03:00 [INF] User-Agent: ["PostmanRuntime/7.49.0"]
2025-10-22 12:31:59.614 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-22 12:31:59.615 +03:00 [INF] Content-Length: ["0"]
2025-10-22 12:31:59.618 +03:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-10-22 12:31:59.621 +03:00 [INF] Postman-Token: ["41005eab-d86a-433c-b083-804e0a281b59"]
2025-10-22 12:31:59.625 +03:00 [INF] üîç TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-10-22 12:31:59.626 +03:00 [INF] ‚úÖ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-10-22 12:31:59.628 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Review (ModularERP)'
2025-10-22 12:31:59.629 +03:00 [INF] Route matched with {action = "Review", controller = "StocktakingWorkFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_WorkFlow.ReviewStocktakingDto]]] Review(System.Guid, System.Guid, System.Threading.CancellationToken) on controller ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController (ModularERP).
2025-10-22 12:31:59.634 +03:00 [INF] POST: Review Stocktaking "151ab924-c688-444c-bdbf-aaa758c74d8a"
2025-10-22 12:31:59.637 +03:00 [INF] Moving stocktaking "151ab924-c688-444c-bdbf-aaa758c74d8a" to review
2025-10-22 12:31:59.642 +03:00 [ERR] Error reviewing stocktaking "151ab924-c688-444c-bdbf-aaa758c74d8a"
ModularERP.Common.Exceptions.BusinessLogicException: Stocktaking must have at least one recorded item
   at ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.ReviewStocktakingHandler.Handle(ReviewStocktakingCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Stocktaking\Handlers\Handlers_StockTraking_WorkFlow\ReviewStocktakingHandler.cs:line 46
2025-10-22 12:31:59.646 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Review (ModularERP) in 12.5188ms
2025-10-22 12:31:59.648 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Review (ModularERP)'
2025-10-22 12:31:59.650 +03:00 [WRN] Business logic exception occurred: Stocktaking must have at least one recorded item
ModularERP.Common.Exceptions.BusinessLogicException: Stocktaking must have at least one recorded item
   at ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.ReviewStocktakingHandler.Handle(ReviewStocktakingCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Stocktaking\Handlers\Handlers_StockTraking_WorkFlow\ReviewStocktakingHandler.cs:line 46
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Review(Guid id, Guid companyId, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Stocktaking\Controllers\StocktakingWorkFlowController.cs:line 158
   at lambda_method609(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_7>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 352
--- End of stack trace from previous location ---
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 305
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-10-22 12:31:59.676 +03:00 [INF] Error response sent with status code 400
2025-10-22 12:31:59.677 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/{151ab924-c688-444c-bdbf-aaa758c74d8a}/review?CompanyId=90137c92-382d-404c-bade-e5fefb1e8dbf - 400 null application/json; charset=utf-8 84.7298ms
2025-10-22 12:42:26.897 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/{151ab924-c688-444c-bdbf-aaa758c74d8a}/review?CompanyId=90137c92-382d-404c-bade-e5fefb1e8dbf - null 0
2025-10-22 12:42:26.902 +03:00 [INF] Request started
2025-10-22 12:42:26.903 +03:00 [INF] === Incoming Request ===
2025-10-22 12:42:26.904 +03:00 [INF] Path: /api/StocktakingWorkFlow/%7B151ab924-c688-444c-bdbf-aaa758c74d8a%7D/review
2025-10-22 12:42:26.905 +03:00 [INF] Method: POST
2025-10-22 12:42:26.906 +03:00 [INF] === Headers ===
2025-10-22 12:42:26.908 +03:00 [INF] Accept: ["*/*"]
2025-10-22 12:42:26.910 +03:00 [INF] Connection: ["keep-alive"]
2025-10-22 12:42:26.912 +03:00 [INF] Host: ["localhost:7168"]
2025-10-22 12:42:26.914 +03:00 [INF] User-Agent: ["PostmanRuntime/7.49.0"]
2025-10-22 12:42:26.917 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-22 12:42:26.919 +03:00 [INF] Content-Length: ["0"]
2025-10-22 12:42:26.921 +03:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-10-22 12:42:26.923 +03:00 [INF] Postman-Token: ["69659514-c8a2-445d-ad8e-a0db349db91e"]
2025-10-22 12:42:26.924 +03:00 [INF] üîç TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-10-22 12:42:26.927 +03:00 [INF] ‚úÖ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-10-22 12:42:26.929 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Review (ModularERP)'
2025-10-22 12:42:26.931 +03:00 [INF] Route matched with {action = "Review", controller = "StocktakingWorkFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_WorkFlow.ReviewStocktakingDto]]] Review(System.Guid, System.Guid, System.Threading.CancellationToken) on controller ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController (ModularERP).
2025-10-22 12:42:26.934 +03:00 [INF] POST: Review Stocktaking "151ab924-c688-444c-bdbf-aaa758c74d8a"
2025-10-22 12:42:26.939 +03:00 [INF] Moving stocktaking "151ab924-c688-444c-bdbf-aaa758c74d8a" to review
2025-10-22 12:42:26.947 +03:00 [ERR] Error reviewing stocktaking "151ab924-c688-444c-bdbf-aaa758c74d8a"
ModularERP.Common.Exceptions.BusinessLogicException: Stocktaking must have at least one recorded item
   at ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.ReviewStocktakingHandler.Handle(ReviewStocktakingCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Stocktaking\Handlers\Handlers_StockTraking_WorkFlow\ReviewStocktakingHandler.cs:line 46
2025-10-22 12:42:26.952 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Review (ModularERP) in 17.8678ms
2025-10-22 12:42:26.954 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Review (ModularERP)'
2025-10-22 12:42:26.956 +03:00 [WRN] Business logic exception occurred: Stocktaking must have at least one recorded item
ModularERP.Common.Exceptions.BusinessLogicException: Stocktaking must have at least one recorded item
   at ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.ReviewStocktakingHandler.Handle(ReviewStocktakingCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Stocktaking\Handlers\Handlers_StockTraking_WorkFlow\ReviewStocktakingHandler.cs:line 46
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Review(Guid id, Guid companyId, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Stocktaking\Controllers\StocktakingWorkFlowController.cs:line 158
   at lambda_method609(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_7>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 352
--- End of stack trace from previous location ---
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 305
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-10-22 12:42:26.979 +03:00 [INF] Error response sent with status code 400
2025-10-22 12:42:26.981 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/{151ab924-c688-444c-bdbf-aaa758c74d8a}/review?CompanyId=90137c92-382d-404c-bade-e5fefb1e8dbf - 400 null application/json; charset=utf-8 82.9106ms
2025-10-22 12:46:00.473 +03:00 [INF] Starting web host...
2025-10-22 12:46:03.931 +03:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-22 12:46:03.974 +03:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-10-22 12:46:04.063 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-22 12:46:04.069 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-22 12:46:04.073 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-22 12:46:04.133 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-22 12:46:04.148 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-22 12:46:04.154 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-22 12:46:04.162 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-22 12:46:04.174 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-10-22 12:46:04.178 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-22 12:46:04.333 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-22 12:46:04.341 +03:00 [INF] Master database initialized successfully
2025-10-22 12:46:06.272 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-22 12:46:06.438 +03:00 [INF] Now listening on: https://localhost:7168
2025-10-22 12:46:06.440 +03:00 [INF] Now listening on: http://localhost:5004
2025-10-22 12:46:06.528 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-22 12:46:06.531 +03:00 [INF] Hosting environment: Development
2025-10-22 12:46:06.532 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-10-22 12:46:06.858 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-22 12:46:07.314 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 457.8833ms
2025-10-22 12:46:07.326 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-22 12:46:07.326 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-22 12:46:07.344 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 17.3342ms
2025-10-22 12:46:07.375 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 48.4648ms
2025-10-22 12:46:07.634 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-22 12:46:07.854 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 220.1563ms
2025-10-22 12:46:18.564 +03:00 [INF] Starting web host...
2025-10-22 12:46:19.777 +03:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-22 12:46:19.816 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-10-22 12:46:19.925 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-22 12:46:19.931 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-22 12:46:19.936 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-22 12:46:20.014 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-22 12:46:20.030 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-22 12:46:20.036 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-22 12:46:20.042 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-22 12:46:20.054 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-10-22 12:46:20.058 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-22 12:46:20.225 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-22 12:46:20.233 +03:00 [INF] Master database initialized successfully
2025-10-22 12:46:21.973 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-22 12:46:22.074 +03:00 [INF] Now listening on: https://localhost:7168
2025-10-22 12:46:22.076 +03:00 [INF] Now listening on: http://localhost:5004
2025-10-22 12:46:22.155 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-22 12:46:22.157 +03:00 [INF] Hosting environment: Development
2025-10-22 12:46:22.158 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-10-22 12:46:22.506 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-22 12:46:22.637 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 131.5254ms
2025-10-22 12:46:22.645 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-22 12:46:22.645 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-22 12:46:22.653 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 7.5405ms
2025-10-22 12:46:22.674 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 28.7419ms
2025-10-22 12:46:22.732 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-22 12:46:22.960 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 228.6295ms
2025-10-22 12:46:28.664 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/{151ab924-c688-444c-bdbf-aaa758c74d8a}/review?CompanyId=90137c92-382d-404c-bade-e5fefb1e8dbf - null 0
2025-10-22 12:46:28.689 +03:00 [INF] Request started
2025-10-22 12:46:28.690 +03:00 [INF] === Incoming Request ===
2025-10-22 12:46:28.692 +03:00 [INF] Path: /api/StocktakingWorkFlow/%7B151ab924-c688-444c-bdbf-aaa758c74d8a%7D/review
2025-10-22 12:46:28.693 +03:00 [INF] Method: POST
2025-10-22 12:46:28.694 +03:00 [INF] === Headers ===
2025-10-22 12:46:28.696 +03:00 [INF] Accept: ["*/*"]
2025-10-22 12:46:28.699 +03:00 [INF] Connection: ["keep-alive"]
2025-10-22 12:46:28.701 +03:00 [INF] Host: ["localhost:7168"]
2025-10-22 12:46:28.702 +03:00 [INF] User-Agent: ["PostmanRuntime/7.49.0"]
2025-10-22 12:46:28.703 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-22 12:46:28.704 +03:00 [INF] Content-Length: ["0"]
2025-10-22 12:46:28.706 +03:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-10-22 12:46:28.707 +03:00 [INF] Postman-Token: ["931740b3-8ffa-4bd7-9d2f-e7fd97423e89"]
2025-10-22 12:46:28.711 +03:00 [INF] üîç TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-10-22 12:46:28.712 +03:00 [INF] ‚úÖ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-10-22 12:46:28.714 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Review (ModularERP)'
2025-10-22 12:46:28.736 +03:00 [INF] Route matched with {action = "Review", controller = "StocktakingWorkFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_WorkFlow.ReviewStocktakingDto]]] Review(System.Guid, System.Guid, System.Threading.CancellationToken) on controller ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController (ModularERP).
2025-10-22 12:46:28.741 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-22 12:46:28.765 +03:00 [INF] POST: Review Stocktaking "151ab924-c688-444c-bdbf-aaa758c74d8a"
2025-10-22 12:46:28.870 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-10-22 12:46:29.479 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-22 12:46:29.489 +03:00 [INF] Moving stocktaking "151ab924-c688-444c-bdbf-aaa758c74d8a" to review
2025-10-22 12:46:29.807 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_WorkFlow.ReviewStocktakingDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-22 12:46:29.832 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Review (ModularERP) in 1090.942ms
2025-10-22 12:46:29.835 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Review (ModularERP)'
2025-10-22 12:46:29.837 +03:00 [INF] Request completed successfully with status code 200
2025-10-22 12:46:29.843 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/{151ab924-c688-444c-bdbf-aaa758c74d8a}/review?CompanyId=90137c92-382d-404c-bade-e5fefb1e8dbf - 200 null application/json; charset=utf-8 1179.1189ms
2025-10-22 13:18:51.588 +03:00 [INF] Starting web host...
2025-10-22 13:18:52.973 +03:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-22 13:18:53.024 +03:00 [INF] Executed DbCommand (35ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-10-22 13:18:53.130 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-22 13:18:53.135 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-22 13:18:53.141 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-22 13:18:53.201 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-22 13:18:53.215 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-22 13:18:53.218 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-22 13:18:53.224 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-22 13:18:53.242 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-10-22 13:18:53.247 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-22 13:18:53.422 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-22 13:18:53.429 +03:00 [INF] Master database initialized successfully
2025-10-22 13:18:55.029 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-22 13:18:55.137 +03:00 [INF] Now listening on: https://localhost:7168
2025-10-22 13:18:55.139 +03:00 [INF] Now listening on: http://localhost:5004
2025-10-22 13:18:55.219 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-22 13:18:55.221 +03:00 [INF] Hosting environment: Development
2025-10-22 13:18:55.222 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-10-22 13:18:55.425 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-22 13:18:55.599 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 174.7047ms
2025-10-22 13:18:55.637 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-22 13:18:55.637 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-22 13:18:55.647 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 9.0065ms
2025-10-22 13:18:55.660 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 22.331ms
2025-10-22 13:18:55.691 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-22 13:18:55.924 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 232.9567ms
2025-10-22 13:19:19.163 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/{151ab924-c688-444c-bdbf-aaa758c74d8a}/post?CompanyId=90137c92-382d-404c-bade-e5fefb1e8dbf - null 0
2025-10-22 13:19:19.180 +03:00 [INF] Request started
2025-10-22 13:19:19.183 +03:00 [INF] === Incoming Request ===
2025-10-22 13:19:19.184 +03:00 [INF] Path: /api/StocktakingWorkFlow/%7B151ab924-c688-444c-bdbf-aaa758c74d8a%7D/post
2025-10-22 13:19:19.185 +03:00 [INF] Method: POST
2025-10-22 13:19:19.187 +03:00 [INF] === Headers ===
2025-10-22 13:19:19.189 +03:00 [INF] Accept: ["*/*"]
2025-10-22 13:19:19.192 +03:00 [INF] Connection: ["keep-alive"]
2025-10-22 13:19:19.194 +03:00 [INF] Host: ["localhost:7168"]
2025-10-22 13:19:19.197 +03:00 [INF] User-Agent: ["PostmanRuntime/7.49.0"]
2025-10-22 13:19:19.198 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-22 13:19:19.199 +03:00 [INF] Content-Length: ["0"]
2025-10-22 13:19:19.201 +03:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-10-22 13:19:19.202 +03:00 [INF] Postman-Token: ["89dbe79b-0866-4641-a31c-2bad399b7445"]
2025-10-22 13:19:19.207 +03:00 [INF] üîç TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-10-22 13:19:19.209 +03:00 [INF] ‚úÖ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-10-22 13:19:19.211 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Post (ModularERP)'
2025-10-22 13:19:19.228 +03:00 [INF] Route matched with {action = "Post", controller = "StocktakingWorkFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_WorkFlow.PostStocktakingDto]]] Post(System.Guid, System.Guid, Boolean, System.Threading.CancellationToken) on controller ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController (ModularERP).
2025-10-22 13:19:19.236 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-22 13:19:19.250 +03:00 [INF] POST: Post Stocktaking "151ab924-c688-444c-bdbf-aaa758c74d8a"
2025-10-22 13:19:19.351 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-10-22 13:19:19.891 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-22 13:19:19.896 +03:00 [INF] Posting stocktaking "151ab924-c688-444c-bdbf-aaa758c74d8a"
2025-10-22 13:19:20.065 +03:00 [INF] Write-off: Product "1455fbe8-d0b2-4615-b998-5b00ed509ab7" -10.000
2025-10-22 13:19:20.243 +03:00 [INF] Stocktaking "151ab924-c688-444c-bdbf-aaa758c74d8a" posted with 1 adjustments
2025-10-22 13:19:20.257 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_WorkFlow.PostStocktakingDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-22 13:19:20.279 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Post (ModularERP) in 1043.1132ms
2025-10-22 13:19:20.282 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Post (ModularERP)'
2025-10-22 13:19:20.284 +03:00 [INF] Request completed successfully with status code 200
2025-10-22 13:19:20.288 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/{151ab924-c688-444c-bdbf-aaa758c74d8a}/post?CompanyId=90137c92-382d-404c-bade-e5fefb1e8dbf - 200 null application/json; charset=utf-8 1124.9451ms
2025-10-22 13:29:46.199 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-22 13:29:46.208 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 8.6249ms
2025-10-22 13:29:46.216 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-22 13:29:46.216 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-22 13:29:46.223 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 7.1913ms
2025-10-22 13:29:46.229 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 12.2983ms
2025-10-22 13:29:46.288 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-22 13:29:46.502 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 213.1916ms
2025-10-22 13:29:54.988 +03:00 [INF] Starting web host...
2025-10-22 13:29:56.237 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-22 13:29:56.282 +03:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-10-22 13:29:56.367 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-22 13:29:56.373 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-22 13:29:56.379 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-22 13:29:56.454 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-22 13:29:56.472 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-22 13:29:56.477 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-22 13:29:56.485 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-22 13:29:56.499 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-10-22 13:29:56.504 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-22 13:29:56.710 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-22 13:29:56.717 +03:00 [INF] Master database initialized successfully
2025-10-22 13:29:58.338 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-22 13:29:58.444 +03:00 [INF] Now listening on: https://localhost:7168
2025-10-22 13:29:58.446 +03:00 [INF] Now listening on: http://localhost:5004
2025-10-22 13:29:58.530 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-22 13:29:58.531 +03:00 [INF] Hosting environment: Development
2025-10-22 13:29:58.532 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-10-22 13:29:58.904 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-22 13:29:59.026 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 122.6051ms
2025-10-22 13:29:59.058 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-22 13:29:59.058 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-22 13:29:59.070 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 10.8852ms
2025-10-22 13:29:59.083 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 24.587ms
2025-10-22 13:29:59.111 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-22 13:29:59.307 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 195.643ms
2025-10-22 13:31:32.679 +03:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7168/api/stocktaking/{45ef0250-4160-4789-884f-8d5c14239b1c}/lines/{c98ed6e2-98ab-4d74-9f4d-1df282fbea94} - application/json 481
2025-10-22 13:31:32.696 +03:00 [INF] Request started
2025-10-22 13:31:32.699 +03:00 [INF] === Incoming Request ===
2025-10-22 13:31:32.701 +03:00 [INF] Path: /api/stocktaking/%7B45ef0250-4160-4789-884f-8d5c14239b1c%7D/lines/%7Bc98ed6e2-98ab-4d74-9f4d-1df282fbea94%7D
2025-10-22 13:31:32.702 +03:00 [INF] Method: PUT
2025-10-22 13:31:32.703 +03:00 [INF] === Headers ===
2025-10-22 13:31:32.706 +03:00 [INF] Accept: ["*/*"]
2025-10-22 13:31:32.709 +03:00 [INF] Connection: ["keep-alive"]
2025-10-22 13:31:32.710 +03:00 [INF] Host: ["localhost:7168"]
2025-10-22 13:31:32.711 +03:00 [INF] User-Agent: ["PostmanRuntime/7.49.0"]
2025-10-22 13:31:32.714 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-22 13:31:32.715 +03:00 [INF] Content-Type: ["application/json"]
2025-10-22 13:31:32.717 +03:00 [INF] Content-Length: ["481"]
2025-10-22 13:31:32.719 +03:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-10-22 13:31:32.721 +03:00 [INF] Postman-Token: ["b91aed84-ad81-40c7-b9cf-bd811b3d912f"]
2025-10-22 13:31:32.725 +03:00 [INF] üîç TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-10-22 13:31:32.726 +03:00 [INF] ‚úÖ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-10-22 13:31:32.728 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingLineController.UpdateLine (ModularERP)'
2025-10-22 13:31:32.743 +03:00 [INF] Route matched with {action = "UpdateLine", controller = "StocktakingLine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_Line.StocktakingLineDto]]] UpdateLine(System.Guid, System.Guid, ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_Line.UpdateStocktakingLineDto) on controller ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingLineController (ModularERP).
2025-10-22 13:31:32.749 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-22 13:31:32.773 +03:00 [INF] Updating line "c98ed6e2-98ab-4d74-9f4d-1df282fbea94" for stocktaking "45ef0250-4160-4789-884f-8d5c14239b1c"
2025-10-22 13:31:32.861 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-10-22 13:31:33.348 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-22 13:31:33.352 +03:00 [INF] Processing UpdateStocktakingLineCommand for line "c98ed6e2-98ab-4d74-9f4d-1df282fbea94"
2025-10-22 13:31:33.585 +03:00 [INF] Stocktaking line "c98ed6e2-98ab-4d74-9f4d-1df282fbea94" updated successfully
2025-10-22 13:31:33.648 +03:00 [INF] Line "c98ed6e2-98ab-4d74-9f4d-1df282fbea94" updated successfully
2025-10-22 13:31:33.655 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_Line.StocktakingLineDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-22 13:31:33.683 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingLineController.UpdateLine (ModularERP) in 934.4178ms
2025-10-22 13:31:33.687 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingLineController.UpdateLine (ModularERP)'
2025-10-22 13:31:33.688 +03:00 [INF] Request completed successfully with status code 200
2025-10-22 13:31:33.693 +03:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7168/api/stocktaking/{45ef0250-4160-4789-884f-8d5c14239b1c}/lines/{c98ed6e2-98ab-4d74-9f4d-1df282fbea94} - 200 null application/json; charset=utf-8 1013.9794ms
2025-10-22 13:31:50.876 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/{45ef0250-4160-4789-884f-8d5c14239b1c}/review?CompanyId=90137c92-382d-404c-bade-e5fefb1e8dbf - null 0
2025-10-22 13:31:50.886 +03:00 [INF] Request started
2025-10-22 13:31:50.887 +03:00 [INF] === Incoming Request ===
2025-10-22 13:31:50.889 +03:00 [INF] Path: /api/StocktakingWorkFlow/%7B45ef0250-4160-4789-884f-8d5c14239b1c%7D/review
2025-10-22 13:31:50.890 +03:00 [INF] Method: POST
2025-10-22 13:31:50.891 +03:00 [INF] === Headers ===
2025-10-22 13:31:50.892 +03:00 [INF] Accept: ["*/*"]
2025-10-22 13:31:50.893 +03:00 [INF] Connection: ["keep-alive"]
2025-10-22 13:31:50.895 +03:00 [INF] Host: ["localhost:7168"]
2025-10-22 13:31:50.897 +03:00 [INF] User-Agent: ["PostmanRuntime/7.49.0"]
2025-10-22 13:31:50.898 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-22 13:31:50.899 +03:00 [INF] Content-Length: ["0"]
2025-10-22 13:31:50.900 +03:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-10-22 13:31:50.902 +03:00 [INF] Postman-Token: ["8307fd75-a175-440c-a984-538ab83949e6"]
2025-10-22 13:31:50.905 +03:00 [INF] üîç TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-10-22 13:31:50.906 +03:00 [INF] ‚úÖ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-10-22 13:31:50.907 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Review (ModularERP)'
2025-10-22 13:31:50.912 +03:00 [INF] Route matched with {action = "Review", controller = "StocktakingWorkFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_WorkFlow.ReviewStocktakingDto]]] Review(System.Guid, System.Guid, System.Threading.CancellationToken) on controller ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController (ModularERP).
2025-10-22 13:31:50.918 +03:00 [INF] POST: Review Stocktaking "45ef0250-4160-4789-884f-8d5c14239b1c"
2025-10-22 13:31:50.926 +03:00 [INF] Moving stocktaking "45ef0250-4160-4789-884f-8d5c14239b1c" to review
2025-10-22 13:31:50.971 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_WorkFlow.ReviewStocktakingDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-22 13:31:50.977 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Review (ModularERP) in 61.6604ms
2025-10-22 13:31:50.979 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Review (ModularERP)'
2025-10-22 13:31:50.981 +03:00 [INF] Request completed successfully with status code 200
2025-10-22 13:31:50.982 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/{45ef0250-4160-4789-884f-8d5c14239b1c}/review?CompanyId=90137c92-382d-404c-bade-e5fefb1e8dbf - 200 null application/json; charset=utf-8 105.8986ms
2025-10-22 13:32:03.098 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/{45ef0250-4160-4789-884f-8d5c14239b1c}/post?CompanyId=90137c92-382d-404c-bade-e5fefb1e8dbf - null 0
2025-10-22 13:32:03.105 +03:00 [INF] Request started
2025-10-22 13:32:03.106 +03:00 [INF] === Incoming Request ===
2025-10-22 13:32:03.107 +03:00 [INF] Path: /api/StocktakingWorkFlow/%7B45ef0250-4160-4789-884f-8d5c14239b1c%7D/post
2025-10-22 13:32:03.107 +03:00 [INF] Method: POST
2025-10-22 13:32:03.108 +03:00 [INF] === Headers ===
2025-10-22 13:32:03.109 +03:00 [INF] Accept: ["*/*"]
2025-10-22 13:32:03.110 +03:00 [INF] Connection: ["keep-alive"]
2025-10-22 13:32:03.112 +03:00 [INF] Host: ["localhost:7168"]
2025-10-22 13:32:03.113 +03:00 [INF] User-Agent: ["PostmanRuntime/7.49.0"]
2025-10-22 13:32:03.115 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-22 13:32:03.116 +03:00 [INF] Content-Length: ["0"]
2025-10-22 13:32:03.118 +03:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-10-22 13:32:03.120 +03:00 [INF] Postman-Token: ["283c50e7-de77-4961-a69f-016608488c03"]
2025-10-22 13:32:03.122 +03:00 [INF] üîç TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-10-22 13:32:03.123 +03:00 [INF] ‚úÖ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-10-22 13:32:03.124 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Post (ModularERP)'
2025-10-22 13:32:03.128 +03:00 [INF] Route matched with {action = "Post", controller = "StocktakingWorkFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_WorkFlow.PostStocktakingDto]]] Post(System.Guid, System.Guid, Boolean, System.Threading.CancellationToken) on controller ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController (ModularERP).
2025-10-22 13:32:03.132 +03:00 [INF] POST: Post Stocktaking "45ef0250-4160-4789-884f-8d5c14239b1c"
2025-10-22 13:32:03.140 +03:00 [INF] Posting stocktaking "45ef0250-4160-4789-884f-8d5c14239b1c"
2025-10-22 13:32:03.163 +03:00 [INF] Write-on: Product "1455fbe8-d0b2-4615-b998-5b00ed509ab7" +10.000
2025-10-22 13:32:03.221 +03:00 [INF] Updated ProductStats for Product "1455fbe8-d0b2-4615-b998-5b00ed509ab7": OnHand=110.000, AvgCost=63.6818
2025-10-22 13:32:03.267 +03:00 [INF] Stocktaking "45ef0250-4160-4789-884f-8d5c14239b1c" posted with 1 adjustments
2025-10-22 13:32:03.274 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_WorkFlow.PostStocktakingDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-22 13:32:03.278 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Post (ModularERP) in 147.2678ms
2025-10-22 13:32:03.281 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Post (ModularERP)'
2025-10-22 13:32:03.282 +03:00 [INF] Request completed successfully with status code 200
2025-10-22 13:32:03.283 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/{45ef0250-4160-4789-884f-8d5c14239b1c}/post?CompanyId=90137c92-382d-404c-bade-e5fefb1e8dbf - 200 null application/json; charset=utf-8 185.462ms
2025-10-22 13:59:42.712 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/stocktaking/{151ab924-c688-444c-bdbf-aaa758c74d8a}/lines - application/json 593
2025-10-22 13:59:42.717 +03:00 [INF] Request started
2025-10-22 13:59:42.718 +03:00 [INF] === Incoming Request ===
2025-10-22 13:59:42.719 +03:00 [INF] Path: /api/stocktaking/%7B151ab924-c688-444c-bdbf-aaa758c74d8a%7D/lines
2025-10-22 13:59:42.721 +03:00 [INF] Method: POST
2025-10-22 13:59:42.723 +03:00 [INF] === Headers ===
2025-10-22 13:59:42.723 +03:00 [INF] Accept: ["*/*"]
2025-10-22 13:59:42.725 +03:00 [INF] Connection: ["keep-alive"]
2025-10-22 13:59:42.726 +03:00 [INF] Host: ["localhost:7168"]
2025-10-22 13:59:42.727 +03:00 [INF] User-Agent: ["PostmanRuntime/7.49.0"]
2025-10-22 13:59:42.728 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-22 13:59:42.730 +03:00 [INF] Content-Type: ["application/json"]
2025-10-22 13:59:42.732 +03:00 [INF] Content-Length: ["593"]
2025-10-22 13:59:42.734 +03:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-10-22 13:59:42.735 +03:00 [INF] Postman-Token: ["0c1b16f2-f2d0-42c6-b495-1f885d1726df"]
2025-10-22 13:59:42.737 +03:00 [INF] üîç TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-10-22 13:59:42.738 +03:00 [INF] ‚úÖ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-10-22 13:59:42.739 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingLineController.CreateLine (ModularERP)'
2025-10-22 13:59:42.743 +03:00 [INF] Route matched with {action = "CreateLine", controller = "StocktakingLine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_Line.StocktakingLineDto]]] CreateLine(System.Guid, ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_Line.CreateStocktakingLineDto) on controller ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingLineController (ModularERP).
2025-10-22 13:59:42.751 +03:00 [INF] Creating stocktaking line for stocktaking "151ab924-c688-444c-bdbf-aaa758c74d8a"
2025-10-22 13:59:42.761 +03:00 [INF] Processing CreateStocktakingLineCommand for stocktaking "151ab924-c688-444c-bdbf-aaa758c74d8a"
2025-10-22 13:59:42.770 +03:00 [WRN] Cannot add lines to stocktaking "151ab924-c688-444c-bdbf-aaa758c74d8a" with status "Posted"
2025-10-22 13:59:42.774 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingLineController.CreateLine (ModularERP) in 28.6369ms
2025-10-22 13:59:42.776 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingLineController.CreateLine (ModularERP)'
2025-10-22 13:59:42.779 +03:00 [WRN] Business logic exception occurred: Cannot add lines to stocktaking with status Posted
ModularERP.Common.Exceptions.BusinessLogicException: Cannot add lines to stocktaking with status Posted
   at ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTaking_Line.CreateStocktakingLineHandler.Handle(CreateStocktakingLineCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Stocktaking\Handlers\Handlers_StockTaking_Line\CreateStocktakingLineHandler.cs:line 65
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingLineController.CreateLine(Guid stocktakingId, CreateStocktakingLineDto dto) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Stocktaking\Controllers\StocktakingLineController.cs:line 42
   at lambda_method1044(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_7>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 352
--- End of stack trace from previous location ---
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 305
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-10-22 13:59:42.818 +03:00 [INF] Error response sent with status code 400
2025-10-22 13:59:42.820 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/stocktaking/{151ab924-c688-444c-bdbf-aaa758c74d8a}/lines - 400 null application/json; charset=utf-8 108.5137ms
2025-10-22 14:00:24.276 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/stocktaking/{a0a90f3a-8c30-40fe-97eb-d6c4f3d64040}/lines - application/json 593
2025-10-22 14:00:24.279 +03:00 [INF] Request started
2025-10-22 14:00:24.280 +03:00 [INF] === Incoming Request ===
2025-10-22 14:00:24.281 +03:00 [INF] Path: /api/stocktaking/%7Ba0a90f3a-8c30-40fe-97eb-d6c4f3d64040%7D/lines
2025-10-22 14:00:24.282 +03:00 [INF] Method: POST
2025-10-22 14:00:24.283 +03:00 [INF] === Headers ===
2025-10-22 14:00:24.285 +03:00 [INF] Accept: ["*/*"]
2025-10-22 14:00:24.287 +03:00 [INF] Connection: ["keep-alive"]
2025-10-22 14:00:24.289 +03:00 [INF] Host: ["localhost:7168"]
2025-10-22 14:00:24.290 +03:00 [INF] User-Agent: ["PostmanRuntime/7.49.0"]
2025-10-22 14:00:24.292 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-22 14:00:24.293 +03:00 [INF] Content-Type: ["application/json"]
2025-10-22 14:00:24.295 +03:00 [INF] Content-Length: ["593"]
2025-10-22 14:00:24.296 +03:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-10-22 14:00:24.298 +03:00 [INF] Postman-Token: ["5443a6ed-f083-416e-bb0a-a707e6c5769e"]
2025-10-22 14:00:24.299 +03:00 [INF] üîç TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-10-22 14:00:24.300 +03:00 [INF] ‚úÖ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-10-22 14:00:24.301 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingLineController.CreateLine (ModularERP)'
2025-10-22 14:00:24.303 +03:00 [INF] Route matched with {action = "CreateLine", controller = "StocktakingLine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_Line.StocktakingLineDto]]] CreateLine(System.Guid, ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_Line.CreateStocktakingLineDto) on controller ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingLineController (ModularERP).
2025-10-22 14:00:24.306 +03:00 [INF] Creating stocktaking line for stocktaking "a0a90f3a-8c30-40fe-97eb-d6c4f3d64040"
2025-10-22 14:00:24.309 +03:00 [INF] Processing CreateStocktakingLineCommand for stocktaking "a0a90f3a-8c30-40fe-97eb-d6c4f3d64040"
2025-10-22 14:00:24.365 +03:00 [INF] Stocktaking line created successfully with ID "0319726a-4084-43e1-9ceb-d606b068881c"
2025-10-22 14:00:24.376 +03:00 [INF] Stocktaking line created successfully with ID "0319726a-4084-43e1-9ceb-d606b068881c"
2025-10-22 14:00:24.378 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_Line.StocktakingLineDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-22 14:00:24.379 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingLineController.CreateLine (ModularERP) in 73.3752ms
2025-10-22 14:00:24.381 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingLineController.CreateLine (ModularERP)'
2025-10-22 14:00:24.382 +03:00 [INF] Request completed successfully with status code 200
2025-10-22 14:00:24.384 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/stocktaking/{a0a90f3a-8c30-40fe-97eb-d6c4f3d64040}/lines - 200 null application/json; charset=utf-8 107.4374ms
2025-10-22 14:01:39.411 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/0319726a-4084-43e1-9ceb-d606b068881c/start?CompanyId=90137c92-382d-404c-bade-e5fefb1e8dbf - null 0
2025-10-22 14:01:39.416 +03:00 [INF] Request started
2025-10-22 14:01:39.417 +03:00 [INF] === Incoming Request ===
2025-10-22 14:01:39.418 +03:00 [INF] Path: /api/StocktakingWorkFlow/0319726a-4084-43e1-9ceb-d606b068881c/start
2025-10-22 14:01:39.420 +03:00 [INF] Method: POST
2025-10-22 14:01:39.421 +03:00 [INF] === Headers ===
2025-10-22 14:01:39.421 +03:00 [INF] Accept: ["*/*"]
2025-10-22 14:01:39.423 +03:00 [INF] Connection: ["keep-alive"]
2025-10-22 14:01:39.424 +03:00 [INF] Host: ["localhost:7168"]
2025-10-22 14:01:39.426 +03:00 [INF] User-Agent: ["PostmanRuntime/7.49.0"]
2025-10-22 14:01:39.428 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-22 14:01:39.430 +03:00 [INF] Content-Length: ["0"]
2025-10-22 14:01:39.432 +03:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-10-22 14:01:39.433 +03:00 [INF] Postman-Token: ["12c8d319-785e-41df-87c5-e7dd9bdcc851"]
2025-10-22 14:01:39.435 +03:00 [INF] üîç TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-10-22 14:01:39.435 +03:00 [INF] ‚úÖ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-10-22 14:01:39.436 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Start (ModularERP)'
2025-10-22 14:01:39.440 +03:00 [INF] Route matched with {action = "Start", controller = "StocktakingWorkFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_WorkFlow.StartStocktakingDto]]] Start(System.Guid, System.Guid, System.Threading.CancellationToken) on controller ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController (ModularERP).
2025-10-22 14:01:39.444 +03:00 [INF] POST: Start Stocktaking "0319726a-4084-43e1-9ceb-d606b068881c"
2025-10-22 14:01:39.449 +03:00 [INF] Starting stocktaking session "0319726a-4084-43e1-9ceb-d606b068881c"
2025-10-22 14:01:39.453 +03:00 [ERR] Error starting stocktaking "0319726a-4084-43e1-9ceb-d606b068881c"
ModularERP.Common.Exceptions.NotFoundException: Stocktaking not found
   at ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.StartStocktakingHandler.Handle(StartStocktakingCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Stocktaking\Handlers\Handlers_StockTraking_WorkFlow\StartStocktakingHandler.cs:line 40
2025-10-22 14:01:39.455 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Start (ModularERP) in 12.2824ms
2025-10-22 14:01:39.457 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Start (ModularERP)'
2025-10-22 14:01:39.458 +03:00 [ERR] Application exception occurred: Stocktaking not found
ModularERP.Common.Exceptions.NotFoundException: Stocktaking not found
   at ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.StartStocktakingHandler.Handle(StartStocktakingCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Stocktaking\Handlers\Handlers_StockTraking_WorkFlow\StartStocktakingHandler.cs:line 40
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Start(Guid id, Guid companyId, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Stocktaking\Controllers\StocktakingWorkFlowController.cs:line 137
   at lambda_method1087(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_7>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 352
--- End of stack trace from previous location ---
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 305
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-10-22 14:01:39.470 +03:00 [INF] Error response sent with status code 404
2025-10-22 14:01:39.471 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/0319726a-4084-43e1-9ceb-d606b068881c/start?CompanyId=90137c92-382d-404c-bade-e5fefb1e8dbf - 404 null application/json; charset=utf-8 59.3641ms
2025-10-22 14:02:09.223 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/a0a90f3a-8c30-40fe-97eb-d6c4f3d64040/start?CompanyId=90137c92-382d-404c-bade-e5fefb1e8dbf - null 0
2025-10-22 14:02:09.227 +03:00 [INF] Request started
2025-10-22 14:02:09.228 +03:00 [INF] === Incoming Request ===
2025-10-22 14:02:09.229 +03:00 [INF] Path: /api/StocktakingWorkFlow/a0a90f3a-8c30-40fe-97eb-d6c4f3d64040/start
2025-10-22 14:02:09.229 +03:00 [INF] Method: POST
2025-10-22 14:02:09.231 +03:00 [INF] === Headers ===
2025-10-22 14:02:09.231 +03:00 [INF] Accept: ["*/*"]
2025-10-22 14:02:09.233 +03:00 [INF] Connection: ["keep-alive"]
2025-10-22 14:02:09.235 +03:00 [INF] Host: ["localhost:7168"]
2025-10-22 14:02:09.237 +03:00 [INF] User-Agent: ["PostmanRuntime/7.49.0"]
2025-10-22 14:02:09.239 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-22 14:02:09.240 +03:00 [INF] Content-Length: ["0"]
2025-10-22 14:02:09.242 +03:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-10-22 14:02:09.243 +03:00 [INF] Postman-Token: ["869df5e8-5fcb-4d55-9353-9054f38f34e5"]
2025-10-22 14:02:09.245 +03:00 [INF] üîç TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-10-22 14:02:09.245 +03:00 [INF] ‚úÖ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-10-22 14:02:09.246 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Start (ModularERP)'
2025-10-22 14:02:09.248 +03:00 [INF] Route matched with {action = "Start", controller = "StocktakingWorkFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_WorkFlow.StartStocktakingDto]]] Start(System.Guid, System.Guid, System.Threading.CancellationToken) on controller ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController (ModularERP).
2025-10-22 14:02:09.252 +03:00 [INF] POST: Start Stocktaking "a0a90f3a-8c30-40fe-97eb-d6c4f3d64040"
2025-10-22 14:02:09.254 +03:00 [INF] Starting stocktaking session "a0a90f3a-8c30-40fe-97eb-d6c4f3d64040"
2025-10-22 14:02:09.256 +03:00 [ERR] Error starting stocktaking "a0a90f3a-8c30-40fe-97eb-d6c4f3d64040"
ModularERP.Common.Exceptions.BusinessLogicException: Cannot start stocktaking with status Counting
   at ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.StartStocktakingHandler.Handle(StartStocktakingCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Stocktaking\Handlers\Handlers_StockTraking_WorkFlow\StartStocktakingHandler.cs:line 46
2025-10-22 14:02:09.259 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Start (ModularERP) in 7.2361ms
2025-10-22 14:02:09.260 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Start (ModularERP)'
2025-10-22 14:02:09.261 +03:00 [WRN] Business logic exception occurred: Cannot start stocktaking with status Counting
ModularERP.Common.Exceptions.BusinessLogicException: Cannot start stocktaking with status Counting
   at ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockTraking_WorkFlow.StartStocktakingHandler.Handle(StartStocktakingCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Stocktaking\Handlers\Handlers_StockTraking_WorkFlow\StartStocktakingHandler.cs:line 46
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Start(Guid id, Guid companyId, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Stocktaking\Controllers\StocktakingWorkFlowController.cs:line 137
   at lambda_method1087(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_7>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 352
--- End of stack trace from previous location ---
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 305
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-10-22 14:02:09.273 +03:00 [INF] Error response sent with status code 400
2025-10-22 14:02:09.275 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/a0a90f3a-8c30-40fe-97eb-d6c4f3d64040/start?CompanyId=90137c92-382d-404c-bade-e5fefb1e8dbf - 400 null application/json; charset=utf-8 52.2894ms
2025-10-22 14:03:08.760 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/{a0a90f3a-8c30-40fe-97eb-d6c4f3d64040}/review?CompanyId=90137c92-382d-404c-bade-e5fefb1e8dbf - null 0
2025-10-22 14:03:08.763 +03:00 [INF] Request started
2025-10-22 14:03:08.764 +03:00 [INF] === Incoming Request ===
2025-10-22 14:03:08.765 +03:00 [INF] Path: /api/StocktakingWorkFlow/%7Ba0a90f3a-8c30-40fe-97eb-d6c4f3d64040%7D/review
2025-10-22 14:03:08.766 +03:00 [INF] Method: POST
2025-10-22 14:03:08.767 +03:00 [INF] === Headers ===
2025-10-22 14:03:08.768 +03:00 [INF] Accept: ["*/*"]
2025-10-22 14:03:08.770 +03:00 [INF] Connection: ["keep-alive"]
2025-10-22 14:03:08.771 +03:00 [INF] Host: ["localhost:7168"]
2025-10-22 14:03:08.773 +03:00 [INF] User-Agent: ["PostmanRuntime/7.49.0"]
2025-10-22 14:03:08.774 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-22 14:03:08.776 +03:00 [INF] Content-Length: ["0"]
2025-10-22 14:03:08.778 +03:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-10-22 14:03:08.780 +03:00 [INF] Postman-Token: ["a8668077-027c-41b4-b259-37d6b9f7c058"]
2025-10-22 14:03:08.782 +03:00 [INF] üîç TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-10-22 14:03:08.783 +03:00 [INF] ‚úÖ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-10-22 14:03:08.784 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Review (ModularERP)'
2025-10-22 14:03:08.786 +03:00 [INF] Route matched with {action = "Review", controller = "StocktakingWorkFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_WorkFlow.ReviewStocktakingDto]]] Review(System.Guid, System.Guid, System.Threading.CancellationToken) on controller ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController (ModularERP).
2025-10-22 14:03:08.789 +03:00 [INF] POST: Review Stocktaking "a0a90f3a-8c30-40fe-97eb-d6c4f3d64040"
2025-10-22 14:03:08.791 +03:00 [INF] Moving stocktaking "a0a90f3a-8c30-40fe-97eb-d6c4f3d64040" to review
2025-10-22 14:03:08.804 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_WorkFlow.ReviewStocktakingDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-22 14:03:08.806 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Review (ModularERP) in 17.6982ms
2025-10-22 14:03:08.808 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Review (ModularERP)'
2025-10-22 14:03:08.809 +03:00 [INF] Request completed successfully with status code 200
2025-10-22 14:03:08.811 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/{a0a90f3a-8c30-40fe-97eb-d6c4f3d64040}/review?CompanyId=90137c92-382d-404c-bade-e5fefb1e8dbf - 200 null application/json; charset=utf-8 50.9014ms
2025-10-22 14:03:31.556 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/{a0a90f3a-8c30-40fe-97eb-d6c4f3d64040}/post?CompanyId=90137c92-382d-404c-bade-e5fefb1e8dbf - null 0
2025-10-22 14:03:31.560 +03:00 [INF] Request started
2025-10-22 14:03:31.561 +03:00 [INF] === Incoming Request ===
2025-10-22 14:03:31.562 +03:00 [INF] Path: /api/StocktakingWorkFlow/%7Ba0a90f3a-8c30-40fe-97eb-d6c4f3d64040%7D/post
2025-10-22 14:03:31.563 +03:00 [INF] Method: POST
2025-10-22 14:03:31.565 +03:00 [INF] === Headers ===
2025-10-22 14:03:31.565 +03:00 [INF] Accept: ["*/*"]
2025-10-22 14:03:31.567 +03:00 [INF] Connection: ["keep-alive"]
2025-10-22 14:03:31.569 +03:00 [INF] Host: ["localhost:7168"]
2025-10-22 14:03:31.570 +03:00 [INF] User-Agent: ["PostmanRuntime/7.49.0"]
2025-10-22 14:03:31.572 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-22 14:03:31.574 +03:00 [INF] Content-Length: ["0"]
2025-10-22 14:03:31.575 +03:00 [INF] X-Tenant-ID: ["6f81c000-285c-4e6a-8125-bc36d14ac4ad"]
2025-10-22 14:03:31.576 +03:00 [INF] Postman-Token: ["5f0c0ef8-73c2-4d38-beb0-6ac4485a08e5"]
2025-10-22 14:03:31.588 +03:00 [INF] üîç TenantService returned: '6f81c000-285c-4e6a-8125-bc36d14ac4ad'
2025-10-22 14:03:31.589 +03:00 [INF] ‚úÖ Processing request for tenant: 6f81c000-285c-4e6a-8125-bc36d14ac4ad
2025-10-22 14:03:31.590 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Post (ModularERP)'
2025-10-22 14:03:31.591 +03:00 [INF] Route matched with {action = "Post", controller = "StocktakingWorkFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_WorkFlow.PostStocktakingDto]]] Post(System.Guid, System.Guid, Boolean, System.Threading.CancellationToken) on controller ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController (ModularERP).
2025-10-22 14:03:31.594 +03:00 [INF] POST: Post Stocktaking "a0a90f3a-8c30-40fe-97eb-d6c4f3d64040"
2025-10-22 14:03:31.598 +03:00 [INF] Posting stocktaking "a0a90f3a-8c30-40fe-97eb-d6c4f3d64040"
2025-10-22 14:03:31.610 +03:00 [INF] Write-on: Product "379e5c26-417b-4c1f-83e1-d44cd995b078" +40.000
2025-10-22 14:03:31.629 +03:00 [INF] Updated ProductStats for Product "379e5c26-417b-4c1f-83e1-d44cd995b078": OnHand=100.000, AvgCost=108.4167
2025-10-22 14:03:31.638 +03:00 [INF] Stocktaking "a0a90f3a-8c30-40fe-97eb-d6c4f3d64040" posted with 1 adjustments
2025-10-22 14:03:31.639 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockTaking_WorkFlow.PostStocktakingDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-22 14:03:31.641 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Post (ModularERP) in 47.2263ms
2025-10-22 14:03:31.643 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Stocktaking.Controllers.StocktakingWorkFlowController.Post (ModularERP)'
2025-10-22 14:03:31.644 +03:00 [INF] Request completed successfully with status code 200
2025-10-22 14:03:31.645 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/StocktakingWorkFlow/{a0a90f3a-8c30-40fe-97eb-d6c4f3d64040}/post?CompanyId=90137c92-382d-404c-bade-e5fefb1e8dbf - 200 null application/json; charset=utf-8 89.0419ms
2025-10-22 17:34:57.806 +03:00 [INF] Starting web host...
2025-10-22 17:34:59.435 +03:00 [FTL] Host terminated unexpectedly
System.AggregateException: Some services are not able to be constructed (Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[ModularERP.Modules.Inventory.Features.Stocktaking.Qeuries.Qeuries_StockSnapshot.CompareSnapshotQuery,ModularERP.Common.ViewModel.ResponseViewModel`1[System.Collections.Generic.List`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockSnapshot.SnapshotComparisonDto]]] Lifetime: Transient ImplementationType: ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockSnapshot.CompareSnapshotQueryHandler': Unable to resolve service for type 'Microsoft.Extensions.Logging.ILogger' while attempting to activate 'ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockSnapshot.CompareSnapshotQueryHandler'.) (Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[ModularERP.Modules.Inventory.Features.Stocktaking.Qeuries.Qeuries_StockSnapshot.GetStockSnapshotQuery,ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockSnapshot.SnapshotListDto]] Lifetime: Transient ImplementationType: ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockSnapshot.GetStockSnapshotQueryHandler': Unable to resolve service for type 'Microsoft.Extensions.Logging.ILogger' while attempting to activate 'ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockSnapshot.GetStockSnapshotQueryHandler'.) (Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[ModularERP.Modules.Inventory.Features.Stocktaking.Commends.Commends_StockSnapshot.RefreshSnapshotCommand,ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockSnapshot.RefreshSnapshotDto]] Lifetime: Transient ImplementationType: ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockSnapshot.RefreshSnapshotCommandHandler': Unable to resolve service for type 'Microsoft.Extensions.Logging.ILogger' while attempting to activate 'ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockSnapshot.RefreshSnapshotCommandHandler'.)
 ---> System.InvalidOperationException: Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[ModularERP.Modules.Inventory.Features.Stocktaking.Qeuries.Qeuries_StockSnapshot.CompareSnapshotQuery,ModularERP.Common.ViewModel.ResponseViewModel`1[System.Collections.Generic.List`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockSnapshot.SnapshotComparisonDto]]] Lifetime: Transient ImplementationType: ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockSnapshot.CompareSnapshotQueryHandler': Unable to resolve service for type 'Microsoft.Extensions.Logging.ILogger' while attempting to activate 'ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockSnapshot.CompareSnapshotQueryHandler'.
 ---> System.InvalidOperationException: Unable to resolve service for type 'Microsoft.Extensions.Logging.ILogger' while attempting to activate 'ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockSnapshot.CompareSnapshotQueryHandler'.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceDescriptor serviceDescriptor, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)
   at Microsoft.Extensions.DependencyInjection.ServiceCollectionContainerBuilderExtensions.BuildServiceProvider(IServiceCollection services, ServiceProviderOptions options)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at ModularERP.Program.Main(String[] args) in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 254
 ---> (Inner Exception #1) System.InvalidOperationException: Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[ModularERP.Modules.Inventory.Features.Stocktaking.Qeuries.Qeuries_StockSnapshot.GetStockSnapshotQuery,ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockSnapshot.SnapshotListDto]] Lifetime: Transient ImplementationType: ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockSnapshot.GetStockSnapshotQueryHandler': Unable to resolve service for type 'Microsoft.Extensions.Logging.ILogger' while attempting to activate 'ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockSnapshot.GetStockSnapshotQueryHandler'.
 ---> System.InvalidOperationException: Unable to resolve service for type 'Microsoft.Extensions.Logging.ILogger' while attempting to activate 'ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockSnapshot.GetStockSnapshotQueryHandler'.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceDescriptor serviceDescriptor, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)<---

 ---> (Inner Exception #2) System.InvalidOperationException: Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[ModularERP.Modules.Inventory.Features.Stocktaking.Commends.Commends_StockSnapshot.RefreshSnapshotCommand,ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Stocktaking.DTO.DTO_StockSnapshot.RefreshSnapshotDto]] Lifetime: Transient ImplementationType: ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockSnapshot.RefreshSnapshotCommandHandler': Unable to resolve service for type 'Microsoft.Extensions.Logging.ILogger' while attempting to activate 'ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockSnapshot.RefreshSnapshotCommandHandler'.
 ---> System.InvalidOperationException: Unable to resolve service for type 'Microsoft.Extensions.Logging.ILogger' while attempting to activate 'ModularERP.Modules.Inventory.Features.Stocktaking.Handlers.Handlers_StockSnapshot.RefreshSnapshotCommandHandler'.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceDescriptor serviceDescriptor, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)<---

2025-10-22 17:37:14.702 +03:00 [INF] Starting web host...
2025-10-22 17:37:15.219 +03:00 [FTL] Host terminated unexpectedly
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at ModularERP.Program.Main(String[] args) in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 254
2025-10-22 17:37:46.129 +03:00 [INF] Starting web host...
2025-10-22 17:37:46.623 +03:00 [FTL] Host terminated unexpectedly
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at ModularERP.Program.Main(String[] args) in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 254
2025-10-22 17:38:43.183 +03:00 [INF] Starting web host...
2025-10-22 17:38:43.727 +03:00 [FTL] Host terminated unexpectedly
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at ModularERP.Program.Main(String[] args) in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 254
2025-10-22 17:39:08.647 +03:00 [INF] Starting web host...
2025-10-22 17:39:09.840 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-22 17:39:09.910 +03:00 [INF] Executed DbCommand (54ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-10-22 17:39:09.982 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-22 17:39:09.988 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-22 17:39:10.001 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-22 17:39:10.060 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-22 17:39:10.075 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-22 17:39:10.078 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-22 17:39:10.085 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-22 17:39:10.096 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-10-22 17:39:10.100 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-22 17:39:10.269 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-22 17:39:10.276 +03:00 [INF] Master database initialized successfully
2025-10-22 17:39:11.959 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-22 17:39:12.122 +03:00 [INF] Now listening on: https://localhost:7168
2025-10-22 17:39:12.124 +03:00 [INF] Now listening on: http://localhost:5004
2025-10-22 17:39:12.230 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-22 17:39:12.231 +03:00 [INF] Hosting environment: Development
2025-10-22 17:39:12.233 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-10-22 17:39:12.735 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-22 17:39:12.926 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 193.5929ms
2025-10-22 17:39:12.930 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-22 17:39:12.930 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-22 17:39:12.945 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 14.769ms
2025-10-22 17:39:13.008 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 78.4368ms
2025-10-22 17:39:13.121 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-22 17:39:13.426 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 304.6425ms
