2025-10-14 12:24:29.715 +03:00 [INF] Starting web host...
2025-10-14 12:24:30.801 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 12:24:30.841 +03:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-10-14 12:24:30.927 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 12:24:30.933 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-14 12:24:30.936 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-14 12:24:30.991 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-14 12:24:31.007 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 12:24:31.013 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-14 12:24:31.020 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-14 12:24:31.033 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-10-14 12:24:31.037 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-14 12:24:31.204 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-14 12:24:31.212 +03:00 [INF] Master database initialized successfully
2025-10-14 12:24:32.883 +03:00 [FTL] Host terminated unexpectedly
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'AspNetUsers'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.InitializeReader(Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.<>c.<MoveNext>b__21_0(DbContext _, Enumerator enumerator)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.TryGetSingle[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method62(Closure, QueryContext)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at ModularERP.Modules.Finance.Finance.Infrastructure.Seeds.UserSeed.SeedUsers(FinanceDbContext context) in E:\ModelerERP\ModularERP\ModularERP\Modules\Finance\Finance.Infrastructure\Seeds\UserSeed.cs:line 13
   at ModularERP.Program.Main(String[] args) in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 231
ClientConnectionId:1b2bece4-0004-4b0b-8bf9-0d2fce7a08dc
Error Number:208,State:1,Class:16
2025-10-14 12:24:52.529 +03:00 [INF] Starting web host...
2025-10-14 12:24:52.884 +03:00 [FTL] Host terminated unexpectedly
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at ModularERP.Program.Main(String[] args) in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 219
2025-10-14 12:31:51.661 +03:00 [INF] Starting web host...
2025-10-14 12:31:52.618 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 12:31:52.649 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-10-14 12:31:52.724 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 12:31:52.730 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-14 12:31:52.734 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-14 12:31:52.787 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-14 12:31:52.803 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 12:31:52.807 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-14 12:31:52.813 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-14 12:31:52.823 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-10-14 12:31:52.826 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-14 12:31:52.980 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-14 12:31:53.098 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 3), @p3='?' (Size = 4000), @p4='?' (Size = 100), @p5='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [MasterCompanies] ([Id], [CreatedAt], [CurrencyCode], [DatabaseName], [Name], [Status])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-10-14 12:31:53.110 +03:00 [INF] Created default company: "2359d569-2304-4398-9d72-86e4b9545d46"
2025-10-14 12:31:53.163 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-10-14 12:31:53.182 +03:00 [INF] Database ModularERP_Default already exists, skipping creation
2025-10-14 12:31:53.184 +03:00 [INF] Master database initialized successfully
2025-10-14 12:31:54.775 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-14 12:31:54.884 +03:00 [INF] Now listening on: https://localhost:7168
2025-10-14 12:31:54.886 +03:00 [INF] Now listening on: http://localhost:5004
2025-10-14 12:31:54.960 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-14 12:31:54.962 +03:00 [INF] Hosting environment: Development
2025-10-14 12:31:54.963 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-10-14 12:31:55.606 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-14 12:31:55.796 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 192.0044ms
2025-10-14 12:31:55.803 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-14 12:31:55.808 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-14 12:31:55.816 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 13.2953ms
2025-10-14 12:31:55.856 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 48.2061ms
2025-10-14 12:31:55.944 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-14 12:31:56.177 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 233.1081ms
2025-10-14 12:32:01.185 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/Tenants/create - application/json 52
2025-10-14 12:32:01.204 +03:00 [INF] Request started
2025-10-14 12:32:01.208 +03:00 [INF] === Incoming Request ===
2025-10-14 12:32:01.210 +03:00 [INF] Path: /api/Tenants/create
2025-10-14 12:32:01.211 +03:00 [INF] Method: POST
2025-10-14 12:32:01.212 +03:00 [INF] === Headers ===
2025-10-14 12:32:01.215 +03:00 [INF] Accept: ["*/*"]
2025-10-14 12:32:01.219 +03:00 [INF] Connection: ["keep-alive"]
2025-10-14 12:32:01.220 +03:00 [INF] Host: ["localhost:7168"]
2025-10-14 12:32:01.222 +03:00 [INF] User-Agent: ["PostmanRuntime/7.48.0"]
2025-10-14 12:32:01.224 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-14 12:32:01.225 +03:00 [INF] Content-Type: ["application/json"]
2025-10-14 12:32:01.226 +03:00 [INF] Content-Length: ["52"]
2025-10-14 12:32:01.228 +03:00 [INF] X-Tenant-ID: ["31698c69-79da-4e72-acb0-ab19a56467ea"]
2025-10-14 12:32:01.230 +03:00 [INF] Postman-Token: ["7457163c-caef-49e9-afdf-1c86a809329c"]
2025-10-14 12:32:01.235 +03:00 [INF] Executing endpoint 'ModularERP.Common.Controller.TenantsController.CreateTenant (ModularERP)'
2025-10-14 12:32:01.249 +03:00 [INF] Route matched with {action = "CreateTenant", controller = "Tenants"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateTenant(ModularERP.Common.Controller.CreateTenantRequest) on controller ModularERP.Common.Controller.TenantsController (ModularERP).
2025-10-14 12:32:01.291 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime2), @p2='?' (Size = 3), @p3='?' (Size = 4000), @p4='?' (Size = 100), @p5='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [MasterCompanies] ([Id], [CreatedAt], [CurrencyCode], [DatabaseName], [Name], [Status])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-10-14 12:32:01.297 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-10-14 12:32:02.306 +03:00 [INF] Applied 1 migrations to database ModularERP_Tenant_f7eb410ec7a24a489ca924376e22ca08
2025-10-14 12:32:02.308 +03:00 [INF] Created tenant database for company "7e4a49eb-2e0e-4be8-8d60-c13d7db0f018": ModularERP_Tenant_f7eb410ec7a24a489ca924376e22ca08
2025-10-14 12:32:02.315 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`5[[System.Guid, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-14 12:32:02.329 +03:00 [INF] Executed action ModularERP.Common.Controller.TenantsController.CreateTenant (ModularERP) in 1073.95ms
2025-10-14 12:32:02.332 +03:00 [INF] Executed endpoint 'ModularERP.Common.Controller.TenantsController.CreateTenant (ModularERP)'
2025-10-14 12:32:02.334 +03:00 [INF] Request completed successfully with status code 200
2025-10-14 12:32:02.339 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/Tenants/create - 200 null application/json; charset=utf-8 1154.5223ms
2025-10-14 12:32:26.274 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/Companies - application/json 58
2025-10-14 12:32:26.282 +03:00 [INF] Request started
2025-10-14 12:32:26.283 +03:00 [INF] === Incoming Request ===
2025-10-14 12:32:26.284 +03:00 [INF] Path: /api/Companies
2025-10-14 12:32:26.286 +03:00 [INF] Method: POST
2025-10-14 12:32:26.287 +03:00 [INF] === Headers ===
2025-10-14 12:32:26.288 +03:00 [INF] Accept: ["*/*"]
2025-10-14 12:32:26.289 +03:00 [INF] Connection: ["keep-alive"]
2025-10-14 12:32:26.290 +03:00 [INF] Host: ["localhost:7168"]
2025-10-14 12:32:26.292 +03:00 [INF] User-Agent: ["PostmanRuntime/7.48.0"]
2025-10-14 12:32:26.293 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-14 12:32:26.295 +03:00 [INF] Content-Type: ["application/json"]
2025-10-14 12:32:26.297 +03:00 [INF] Content-Length: ["58"]
2025-10-14 12:32:26.298 +03:00 [INF] X-Tenant-ID: ["7e4a49eb-2e0e-4be8-8d60-c13d7db0f018"]
2025-10-14 12:32:26.299 +03:00 [INF] Postman-Token: ["2b1dc51c-7d6e-4d07-b033-9ce1b11b1b58"]
2025-10-14 12:32:26.303 +03:00 [INF] ðŸ” TenantService returned: '7e4a49eb-2e0e-4be8-8d60-c13d7db0f018'
2025-10-14 12:32:26.304 +03:00 [INF] âœ… Processing request for tenant: 7e4a49eb-2e0e-4be8-8d60-c13d7db0f018
2025-10-14 12:32:26.305 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Finance.Features.Companys.Controllers.CompaniesController.CreateCompany (ModularERP)'
2025-10-14 12:32:26.310 +03:00 [INF] Route matched with {action = "CreateCompany", controller = "Companies"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Finance.Features.Companys.DTO.CompanyResponseDto]]] CreateCompany(ModularERP.Modules.Finance.Features.Companys.DTO.CreateCompanyDto) on controller ModularERP.Modules.Finance.Features.Companys.Controllers.CompaniesController (ModularERP).
2025-10-14 12:32:26.315 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-14 12:32:26.396 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-10-14 12:32:26.778 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-14 12:32:26.782 +03:00 [INF] Creating new company with name: ITechProMaxFax
2025-10-14 12:32:26.859 +03:00 [INF] Successfully created company with ID: "92f798f0-ae62-41b4-aad5-80ae06f8cb1a"
2025-10-14 12:32:26.868 +03:00 [INF] Executing CreatedAtActionResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Finance.Features.Companys.DTO.CompanyResponseDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-14 12:32:26.890 +03:00 [INF] Executed action ModularERP.Modules.Finance.Features.Companys.Controllers.CompaniesController.CreateCompany (ModularERP) in 577.0212ms
2025-10-14 12:32:26.894 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Finance.Features.Companys.Controllers.CompaniesController.CreateCompany (ModularERP)'
2025-10-14 12:32:26.895 +03:00 [INF] Request completed successfully with status code 201
2025-10-14 12:32:26.896 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/Companies - 201 null application/json; charset=utf-8 622.6029ms
2025-10-14 12:32:49.728 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/Warehouses - application/json 166
2025-10-14 12:32:49.733 +03:00 [INF] Request started
2025-10-14 12:32:49.734 +03:00 [INF] === Incoming Request ===
2025-10-14 12:32:49.735 +03:00 [INF] Path: /api/Warehouses
2025-10-14 12:32:49.737 +03:00 [INF] Method: POST
2025-10-14 12:32:49.738 +03:00 [INF] === Headers ===
2025-10-14 12:32:49.739 +03:00 [INF] Accept: ["*/*"]
2025-10-14 12:32:49.741 +03:00 [INF] Connection: ["keep-alive"]
2025-10-14 12:32:49.743 +03:00 [INF] Host: ["localhost:7168"]
2025-10-14 12:32:49.745 +03:00 [INF] User-Agent: ["PostmanRuntime/7.48.0"]
2025-10-14 12:32:49.747 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-14 12:32:49.748 +03:00 [INF] Content-Type: ["application/json"]
2025-10-14 12:32:49.750 +03:00 [INF] Content-Length: ["166"]
2025-10-14 12:32:49.752 +03:00 [INF] X-Tenant-ID: ["31698c69-79da-4e72-acb0-ab19a56467ea","7e4a49eb-2e0e-4be8-8d60-c13d7db0f018"]
2025-10-14 12:32:49.753 +03:00 [INF] Postman-Token: ["0e975b99-daca-47c0-9d50-1d71903c22f2"]
2025-10-14 12:32:49.755 +03:00 [INF] ðŸ” TenantService returned: '31698c69-79da-4e72-acb0-ab19a56467ea'
2025-10-14 12:32:49.757 +03:00 [INF] âœ… Processing request for tenant: 31698c69-79da-4e72-acb0-ab19a56467ea
2025-10-14 12:32:49.758 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.CreateWarehouse (ModularERP)'
2025-10-14 12:32:49.761 +03:00 [INF] Route matched with {action = "CreateWarehouse", controller = "Warehouses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Warehouses.DTO.WarehouseDto]]] CreateWarehouse(ModularERP.Modules.Inventory.Features.Warehouses.DTO.CreateWarehouseDto) on controller ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController (ModularERP).
2025-10-14 12:32:49.781 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-10-14 12:32:49.787 +03:00 [INF] Creating new warehouse: Wahehouse2 for CompanyId: "92f798f0-ae62-41b4-aad5-80ae06f8cb1a"
2025-10-14 12:32:49.863 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.CreateWarehouse (ModularERP) in 98.9996ms
2025-10-14 12:32:49.865 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.CreateWarehouse (ModularERP)'
2025-10-14 12:32:49.867 +03:00 [ERR] Unexpected error occurred
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Warehouses_Companies_CompanyId". The conflict occurred in database "ModularERP_Default", table "dbo.Companies", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:05907395-3df0-47a5-b491-bcf04e51df9c
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at ModularERP.Modules.Finance.Finance.Infrastructure.Data.FinanceDbContext.SaveChangesAsync(CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Finance\Finance.Infrastructure\Data\FinanceDbContext.cs:line 1807
   at ModularERP.SharedKernel.Repository.GeneralRepository`1.SaveChanges() in E:\ModelerERP\ModularERP\ModularERP\Shared\Repository\GeneralRepository.cs:line 157
   at ModularERP.Modules.Inventory.Features.Warehouses.Handlers.CreateWarehouseCommandHandler.Handle(CreateWarehouseCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Warehouses\Handlers\CreateWarehouseCommandHandler.cs:line 69
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.CreateWarehouse(CreateWarehouseDto dto) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Warehouses\Controllers\WarehousesController.cs:line 96
   at lambda_method738(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 317
--- End of stack trace from previous location ---
   at ModularERP.Program.<>c.<<Main>b__0_5>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 270
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-10-14 12:32:49.916 +03:00 [INF] Error response sent with status code 500
2025-10-14 12:32:49.918 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/Warehouses - 500 null application/json; charset=utf-8 190.2549ms
2025-10-14 12:34:04.471 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/Warehouses - application/json 166
2025-10-14 12:34:04.479 +03:00 [INF] Request started
2025-10-14 12:34:04.480 +03:00 [INF] === Incoming Request ===
2025-10-14 12:34:04.482 +03:00 [INF] Path: /api/Warehouses
2025-10-14 12:34:04.483 +03:00 [INF] Method: POST
2025-10-14 12:34:04.485 +03:00 [INF] === Headers ===
2025-10-14 12:34:04.486 +03:00 [INF] Accept: ["*/*"]
2025-10-14 12:34:04.487 +03:00 [INF] Connection: ["keep-alive"]
2025-10-14 12:34:04.488 +03:00 [INF] Host: ["localhost:7168"]
2025-10-14 12:34:04.490 +03:00 [INF] User-Agent: ["PostmanRuntime/7.48.0"]
2025-10-14 12:34:04.492 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-14 12:34:04.495 +03:00 [INF] Content-Type: ["application/json"]
2025-10-14 12:34:04.497 +03:00 [INF] Content-Length: ["166"]
2025-10-14 12:34:04.499 +03:00 [INF] X-Tenant-ID: ["31698c69-79da-4e72-acb0-ab19a56467ea","7e4a49eb-2e0e-4be8-8d60-c13d7db0f018"]
2025-10-14 12:34:04.500 +03:00 [INF] Postman-Token: ["bd1fc2f7-0ef2-411c-a937-ac4cf0763fe8"]
2025-10-14 12:34:04.502 +03:00 [INF] ðŸ” TenantService returned: '31698c69-79da-4e72-acb0-ab19a56467ea'
2025-10-14 12:34:04.504 +03:00 [INF] âœ… Processing request for tenant: 31698c69-79da-4e72-acb0-ab19a56467ea
2025-10-14 12:34:04.505 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.CreateWarehouse (ModularERP)'
2025-10-14 12:34:04.507 +03:00 [INF] Route matched with {action = "CreateWarehouse", controller = "Warehouses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Warehouses.DTO.WarehouseDto]]] CreateWarehouse(ModularERP.Modules.Inventory.Features.Warehouses.DTO.CreateWarehouseDto) on controller ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController (ModularERP).
2025-10-14 12:34:04.520 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-10-14 12:34:04.527 +03:00 [INF] Creating new warehouse: Wahehouse2 for CompanyId: "92f798f0-ae62-41b4-aad5-80ae06f8cb1a"
2025-10-14 12:34:04.533 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.CreateWarehouse (ModularERP) in 22.8241ms
2025-10-14 12:34:04.536 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.CreateWarehouse (ModularERP)'
2025-10-14 12:34:04.538 +03:00 [ERR] Unexpected error occurred
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Warehouses_Companies_CompanyId". The conflict occurred in database "ModularERP_Default", table "dbo.Companies", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:05907395-3df0-47a5-b491-bcf04e51df9c
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at ModularERP.Modules.Finance.Finance.Infrastructure.Data.FinanceDbContext.SaveChangesAsync(CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Finance\Finance.Infrastructure\Data\FinanceDbContext.cs:line 1807
   at ModularERP.SharedKernel.Repository.GeneralRepository`1.SaveChanges() in E:\ModelerERP\ModularERP\ModularERP\Shared\Repository\GeneralRepository.cs:line 157
   at ModularERP.Modules.Inventory.Features.Warehouses.Handlers.CreateWarehouseCommandHandler.Handle(CreateWarehouseCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Warehouses\Handlers\CreateWarehouseCommandHandler.cs:line 69
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.CreateWarehouse(CreateWarehouseDto dto) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Warehouses\Controllers\WarehousesController.cs:line 96
   at lambda_method738(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 317
--- End of stack trace from previous location ---
   at ModularERP.Program.<>c.<<Main>b__0_5>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 270
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-10-14 12:34:04.589 +03:00 [INF] Error response sent with status code 500
2025-10-14 12:34:04.590 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/Warehouses - 500 null application/json; charset=utf-8 118.7511ms
2025-10-14 12:34:12.805 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/Warehouses - application/json 166
2025-10-14 12:34:12.810 +03:00 [INF] Request started
2025-10-14 12:34:12.811 +03:00 [INF] === Incoming Request ===
2025-10-14 12:34:12.812 +03:00 [INF] Path: /api/Warehouses
2025-10-14 12:34:12.814 +03:00 [INF] Method: POST
2025-10-14 12:34:12.817 +03:00 [INF] === Headers ===
2025-10-14 12:34:12.818 +03:00 [INF] Accept: ["*/*"]
2025-10-14 12:34:12.819 +03:00 [INF] Connection: ["keep-alive"]
2025-10-14 12:34:12.821 +03:00 [INF] Host: ["localhost:7168"]
2025-10-14 12:34:12.822 +03:00 [INF] User-Agent: ["PostmanRuntime/7.48.0"]
2025-10-14 12:34:12.824 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-14 12:34:12.828 +03:00 [INF] Content-Type: ["application/json"]
2025-10-14 12:34:12.830 +03:00 [INF] Content-Length: ["166"]
2025-10-14 12:34:12.832 +03:00 [INF] X-Tenant-ID: ["7e4a49eb-2e0e-4be8-8d60-c13d7db0f018"]
2025-10-14 12:34:12.834 +03:00 [INF] Postman-Token: ["41d3998a-e2c8-49e3-92e1-b145a502729e"]
2025-10-14 12:34:12.837 +03:00 [INF] ðŸ” TenantService returned: '7e4a49eb-2e0e-4be8-8d60-c13d7db0f018'
2025-10-14 12:34:12.838 +03:00 [INF] âœ… Processing request for tenant: 7e4a49eb-2e0e-4be8-8d60-c13d7db0f018
2025-10-14 12:34:12.839 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.CreateWarehouse (ModularERP)'
2025-10-14 12:34:12.841 +03:00 [INF] Route matched with {action = "CreateWarehouse", controller = "Warehouses"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Warehouses.DTO.WarehouseDto]]] CreateWarehouse(ModularERP.Modules.Inventory.Features.Warehouses.DTO.CreateWarehouseDto) on controller ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController (ModularERP).
2025-10-14 12:34:12.848 +03:00 [INF] Creating new warehouse: Wahehouse2 for CompanyId: "92f798f0-ae62-41b4-aad5-80ae06f8cb1a"
2025-10-14 12:34:12.861 +03:00 [INF] Warehouse created successfully: "ac97ee32-5d33-41e8-9a22-30e3162eaed3"
2025-10-14 12:34:12.866 +03:00 [INF] Executing CreatedAtActionResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.Warehouses.DTO.WarehouseDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-14 12:34:12.869 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.CreateWarehouse (ModularERP) in 22.9998ms
2025-10-14 12:34:12.872 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Warehouses.Controllers.WarehousesController.CreateWarehouse (ModularERP)'
2025-10-14 12:34:12.875 +03:00 [INF] Request completed successfully with status code 201
2025-10-14 12:34:12.876 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/Warehouses - 201 null application/json; charset=utf-8 70.5683ms
2025-10-14 12:46:45.688 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/Categories - multipart/form-data; boundary=--------------------------100459123683777908049214 56495
2025-10-14 12:46:45.693 +03:00 [INF] Request started
2025-10-14 12:46:45.694 +03:00 [INF] === Incoming Request ===
2025-10-14 12:46:45.696 +03:00 [INF] Path: /api/Categories
2025-10-14 12:46:45.699 +03:00 [INF] Method: POST
2025-10-14 12:46:45.701 +03:00 [INF] === Headers ===
2025-10-14 12:46:45.703 +03:00 [INF] Accept: ["*/*"]
2025-10-14 12:46:45.705 +03:00 [INF] Connection: ["keep-alive"]
2025-10-14 12:46:45.707 +03:00 [INF] Host: ["localhost:7168"]
2025-10-14 12:46:45.709 +03:00 [INF] User-Agent: ["PostmanRuntime/7.48.0"]
2025-10-14 12:46:45.711 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-14 12:46:45.713 +03:00 [INF] Content-Type: ["multipart/form-data; boundary=--------------------------100459123683777908049214"]
2025-10-14 12:46:45.716 +03:00 [INF] Content-Length: ["56495"]
2025-10-14 12:46:45.719 +03:00 [INF] X-Tenant-ID: ["7e4a49eb-2e0e-4be8-8d60-c13d7db0f018"]
2025-10-14 12:46:45.722 +03:00 [INF] Postman-Token: ["22c37d32-26a1-4115-bbda-f0604291ed84"]
2025-10-14 12:46:45.724 +03:00 [INF] ðŸ” TenantService returned: '7e4a49eb-2e0e-4be8-8d60-c13d7db0f018'
2025-10-14 12:46:45.725 +03:00 [INF] âœ… Processing request for tenant: 7e4a49eb-2e0e-4be8-8d60-c13d7db0f018
2025-10-14 12:46:45.728 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.ProductSettings.Controllers.CategoriesController.Create (ModularERP)'
2025-10-14 12:46:45.741 +03:00 [INF] Route matched with {action = "Create", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(ModularERP.Modules.Inventory.Features.ProductSettings.DTO.DTO_Category.CreateCategoryDto) on controller ModularERP.Modules.Inventory.Features.ProductSettings.Controllers.CategoriesController (ModularERP).
2025-10-14 12:46:45.853 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.ProductSettings.Controllers.CategoriesController.Create (ModularERP) in 109.4157ms
2025-10-14 12:46:45.856 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.ProductSettings.Controllers.CategoriesController.Create (ModularERP)'
2025-10-14 12:46:45.858 +03:00 [ERR] Unexpected error occurred
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_CategoryAttachments_AspNetUsers_UploadedBy". The conflict occurred in database "ModularERP_Tenant_f7eb410ec7a24a489ca924376e22ca08", table "dbo.AspNetUsers", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:f68befb9-963e-4c31-a76e-3dd872ce81b5
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at ModularERP.Modules.Finance.Finance.Infrastructure.Data.FinanceDbContext.SaveChangesAsync(CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Finance\Finance.Infrastructure\Data\FinanceDbContext.cs:line 1807
   at ModularERP.SharedKernel.Repository.GeneralRepository`1.SaveChanges() in E:\ModelerERP\ModularERP\ModularERP\Shared\Repository\GeneralRepository.cs:line 157
   at ModularERP.Modules.Inventory.Features.ProductSettings.Handlers.Handelrs_Category.CreateCategoryHandler.Handle(CreateCategoryCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\ProductSettings\Handlers\Handelrs_Category\CreateCategoryHandler.cs:line 52
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Modules.Inventory.Features.ProductSettings.Controllers.CategoriesController.Create(CreateCategoryDto dto) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\ProductSettings\Controllers\CategoriesController.cs:line 65
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 317
--- End of stack trace from previous location ---
   at ModularERP.Program.<>c.<<Main>b__0_5>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 270
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-10-14 12:46:45.911 +03:00 [INF] Error response sent with status code 500
2025-10-14 12:46:45.913 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/Categories - 500 null application/json; charset=utf-8 224.5436ms
2025-10-14 12:50:36.910 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/Categories - multipart/form-data; boundary=--------------------------578780660123471798015952 56495
2025-10-14 12:50:36.919 +03:00 [INF] Request started
2025-10-14 12:50:36.920 +03:00 [INF] === Incoming Request ===
2025-10-14 12:50:36.921 +03:00 [INF] Path: /api/Categories
2025-10-14 12:50:36.926 +03:00 [INF] Method: POST
2025-10-14 12:50:36.927 +03:00 [INF] === Headers ===
2025-10-14 12:50:36.928 +03:00 [INF] Accept: ["*/*"]
2025-10-14 12:50:36.929 +03:00 [INF] Connection: ["keep-alive"]
2025-10-14 12:50:36.931 +03:00 [INF] Host: ["localhost:7168"]
2025-10-14 12:50:36.932 +03:00 [INF] User-Agent: ["PostmanRuntime/7.48.0"]
2025-10-14 12:50:36.935 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-14 12:50:36.937 +03:00 [INF] Content-Type: ["multipart/form-data; boundary=--------------------------578780660123471798015952"]
2025-10-14 12:50:36.939 +03:00 [INF] Content-Length: ["56495"]
2025-10-14 12:50:36.940 +03:00 [INF] X-Tenant-ID: ["7e4a49eb-2e0e-4be8-8d60-c13d7db0f018"]
2025-10-14 12:50:36.944 +03:00 [INF] Postman-Token: ["653e2af5-b537-4f88-a553-98a50f64820e"]
2025-10-14 12:50:36.946 +03:00 [INF] ðŸ” TenantService returned: '7e4a49eb-2e0e-4be8-8d60-c13d7db0f018'
2025-10-14 12:50:36.946 +03:00 [INF] âœ… Processing request for tenant: 7e4a49eb-2e0e-4be8-8d60-c13d7db0f018
2025-10-14 12:50:36.948 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.ProductSettings.Controllers.CategoriesController.Create (ModularERP)'
2025-10-14 12:50:36.949 +03:00 [INF] Route matched with {action = "Create", controller = "Categories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(ModularERP.Modules.Inventory.Features.ProductSettings.DTO.DTO_Category.CreateCategoryDto) on controller ModularERP.Modules.Inventory.Features.ProductSettings.Controllers.CategoriesController (ModularERP).
2025-10-14 12:50:37.020 +03:00 [INF] Executing CreatedAtActionResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.ProductSettings.DTO.DTO_Category.CategoryResponseDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-14 12:50:37.031 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.ProductSettings.Controllers.CategoriesController.Create (ModularERP) in 79.4274ms
2025-10-14 12:50:37.035 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.ProductSettings.Controllers.CategoriesController.Create (ModularERP)'
2025-10-14 12:50:37.037 +03:00 [INF] Request completed successfully with status code 201
2025-10-14 12:50:37.040 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/Categories - 201 null application/json; charset=utf-8 129.3647ms
2025-10-14 13:06:51.920 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/Brands - application/json 584
2025-10-14 13:06:51.923 +03:00 [INF] Request started
2025-10-14 13:06:51.924 +03:00 [INF] === Incoming Request ===
2025-10-14 13:06:51.926 +03:00 [INF] Path: /api/Brands
2025-10-14 13:06:51.927 +03:00 [INF] Method: POST
2025-10-14 13:06:51.929 +03:00 [INF] === Headers ===
2025-10-14 13:06:51.931 +03:00 [INF] Accept: ["*/*"]
2025-10-14 13:06:51.933 +03:00 [INF] Connection: ["keep-alive"]
2025-10-14 13:06:51.936 +03:00 [INF] Host: ["localhost:7168"]
2025-10-14 13:06:51.938 +03:00 [INF] User-Agent: ["PostmanRuntime/7.48.0"]
2025-10-14 13:06:51.939 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-14 13:06:51.942 +03:00 [INF] Content-Type: ["application/json"]
2025-10-14 13:06:51.944 +03:00 [INF] Content-Length: ["584"]
2025-10-14 13:06:51.946 +03:00 [INF] X-Tenant-ID: ["7e4a49eb-2e0e-4be8-8d60-c13d7db0f018"]
2025-10-14 13:06:51.947 +03:00 [INF] Postman-Token: ["f58c69f6-31cc-423b-ae8e-3753f9f31d08"]
2025-10-14 13:06:51.950 +03:00 [INF] ðŸ” TenantService returned: '7e4a49eb-2e0e-4be8-8d60-c13d7db0f018'
2025-10-14 13:06:51.952 +03:00 [INF] âœ… Processing request for tenant: 7e4a49eb-2e0e-4be8-8d60-c13d7db0f018
2025-10-14 13:06:51.953 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.ProductSettings.Controllers.BrandsController.Create (ModularERP)'
2025-10-14 13:06:51.959 +03:00 [INF] Route matched with {action = "Create", controller = "Brands"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.ProductSettings.DTO.DTO_Brand.BrandDto]]] Create(ModularERP.Modules.Inventory.Features.ProductSettings.DTO.DTO_Brand.CreateBrandDto) on controller ModularERP.Modules.Inventory.Features.ProductSettings.Controllers.BrandsController (ModularERP).
2025-10-14 13:06:51.996 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.ProductSettings.Controllers.BrandsController.Create (ModularERP) in 31.4239ms
2025-10-14 13:06:51.999 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.ProductSettings.Controllers.BrandsController.Create (ModularERP)'
2025-10-14 13:06:52.000 +03:00 [ERR] Unexpected error occurred
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at ModularERP.SharedKernel.Repository.GeneralRepository`1.AnyAsync(Expression`1 predicate) in E:\ModelerERP\ModularERP\ModularERP\Shared\Repository\GeneralRepository.cs:line 162
   at ModularERP.Modules.Inventory.Features.ProductSettings.Validators.Validators_Brand.CreateBrandDtoValidator.BeUniqueName(String name, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\ProductSettings\Validators\Validators_Brand\CreateBrandDtoValidator.cs:line 32
   at FluentValidation.Internal.RuleComponent`2.ValidateAsync(ValidationContext`1 context, TProperty value, CancellationToken cancellation) in /_/src/FluentValidation/Internal/RuleComponent.cs:line 70
   at FluentValidation.Internal.PropertyRule`2.ValidateAsync(ValidationContext`1 context, CancellationToken cancellation) in /_/src/FluentValidation/Internal/PropertyRule.cs:line 122
   at FluentValidation.AbstractValidator`1.ValidateInternalAsync(ValidationContext`1 context, CancellationToken cancellation) in /_/src/FluentValidation/AbstractValidator.cs:line 164
   at FluentValidation.AbstractValidator`1.ValidateAsync(ValidationContext`1 context, CancellationToken cancellation) in /_/src/FluentValidation/AbstractValidator.cs:line 137
   at FluentValidation.Validators.ChildValidatorAdaptor`2.IsValidAsync(ValidationContext`1 context, TProperty value, CancellationToken cancellation) in /_/src/FluentValidation/Validators/ChildValidatorAdaptor.cs:line 81
   at FluentValidation.Internal.RuleComponent`2.ValidateAsync(ValidationContext`1 context, TProperty value, CancellationToken cancellation) in /_/src/FluentValidation/Internal/RuleComponent.cs:line 70
   at FluentValidation.Internal.PropertyRule`2.ValidateAsync(ValidationContext`1 context, CancellationToken cancellation) in /_/src/FluentValidation/Internal/PropertyRule.cs:line 122
   at FluentValidation.AbstractValidator`1.ValidateInternalAsync(ValidationContext`1 context, CancellationToken cancellation) in /_/src/FluentValidation/AbstractValidator.cs:line 164
   at FluentValidation.AbstractValidator`1.ValidateAsync(ValidationContext`1 context, CancellationToken cancellation) in /_/src/FluentValidation/AbstractValidator.cs:line 137
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 25
   at ModularERP.Modules.Inventory.Features.ProductSettings.Controllers.BrandsController.Create(CreateBrandDto dto) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\ProductSettings\Controllers\BrandsController.cs:line 39
   at lambda_method1217(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 317
--- End of stack trace from previous location ---
   at ModularERP.Program.<>c.<<Main>b__0_5>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 270
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-10-14 13:06:52.053 +03:00 [INF] Error response sent with status code 500
2025-10-14 13:06:52.054 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/Brands - 500 null application/json; charset=utf-8 134.3124ms
2025-10-14 13:16:21.504 +03:00 [INF] Starting web host...
2025-10-14 13:16:24.666 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 13:16:24.740 +03:00 [INF] Executed DbCommand (58ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-10-14 13:16:24.818 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 13:16:24.826 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-14 13:16:24.840 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-14 13:16:24.910 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-14 13:16:24.928 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 13:16:24.933 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-14 13:16:24.941 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-14 13:16:24.953 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-10-14 13:16:24.960 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-14 13:16:25.157 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-14 13:16:25.164 +03:00 [INF] Master database initialized successfully
2025-10-14 13:16:26.984 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-14 13:16:27.124 +03:00 [INF] Now listening on: https://localhost:7168
2025-10-14 13:16:27.125 +03:00 [INF] Now listening on: http://localhost:5004
2025-10-14 13:16:27.216 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-14 13:16:27.217 +03:00 [INF] Hosting environment: Development
2025-10-14 13:16:27.219 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-10-14 13:16:27.477 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-14 13:16:27.647 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 171.0381ms
2025-10-14 13:16:27.651 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-14 13:16:27.651 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-14 13:16:27.659 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 8.2485ms
2025-10-14 13:16:27.688 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 36.9541ms
2025-10-14 13:16:27.894 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-14 13:16:28.050 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 156.3716ms
2025-10-14 13:16:31.665 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/Brands - application/json 584
2025-10-14 13:16:31.683 +03:00 [INF] Request started
2025-10-14 13:16:31.686 +03:00 [INF] === Incoming Request ===
2025-10-14 13:16:31.689 +03:00 [INF] Path: /api/Brands
2025-10-14 13:16:31.690 +03:00 [INF] Method: POST
2025-10-14 13:16:31.691 +03:00 [INF] === Headers ===
2025-10-14 13:16:31.693 +03:00 [INF] Accept: ["*/*"]
2025-10-14 13:16:31.696 +03:00 [INF] Connection: ["keep-alive"]
2025-10-14 13:16:31.697 +03:00 [INF] Host: ["localhost:7168"]
2025-10-14 13:16:31.699 +03:00 [INF] User-Agent: ["PostmanRuntime/7.48.0"]
2025-10-14 13:16:31.702 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-14 13:16:31.703 +03:00 [INF] Content-Type: ["application/json"]
2025-10-14 13:16:31.705 +03:00 [INF] Content-Length: ["584"]
2025-10-14 13:16:31.707 +03:00 [INF] X-Tenant-ID: ["7e4a49eb-2e0e-4be8-8d60-c13d7db0f018"]
2025-10-14 13:16:31.708 +03:00 [INF] Postman-Token: ["fdc7be93-81c8-4b48-9b94-671f5a7d2bf7"]
2025-10-14 13:16:31.713 +03:00 [INF] ðŸ” TenantService returned: '7e4a49eb-2e0e-4be8-8d60-c13d7db0f018'
2025-10-14 13:16:31.715 +03:00 [INF] âœ… Processing request for tenant: 7e4a49eb-2e0e-4be8-8d60-c13d7db0f018
2025-10-14 13:16:31.717 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.ProductSettings.Controllers.BrandsController.Create (ModularERP)'
2025-10-14 13:16:31.731 +03:00 [INF] Route matched with {action = "Create", controller = "Brands"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.ProductSettings.DTO.DTO_Brand.BrandDto]]] Create(ModularERP.Modules.Inventory.Features.ProductSettings.DTO.DTO_Brand.CreateBrandDto) on controller ModularERP.Modules.Inventory.Features.ProductSettings.Controllers.BrandsController (ModularERP).
2025-10-14 13:16:31.738 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-14 13:16:31.820 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-10-14 13:16:31.923 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.ProductSettings.Controllers.BrandsController.Create (ModularERP) in 186.1166ms
2025-10-14 13:16:31.926 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.ProductSettings.Controllers.BrandsController.Create (ModularERP)'
2025-10-14 13:16:31.927 +03:00 [ERR] Unexpected error occurred
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at ModularERP.SharedKernel.Repository.GeneralRepository`1.AnyAsync(Expression`1 predicate) in E:\ModelerERP\ModularERP\ModularERP\Shared\Repository\GeneralRepository.cs:line 162
   at ModularERP.Modules.Inventory.Features.ProductSettings.Validators.Validators_Brand.CreateBrandDtoValidator.BeUniqueName(String name, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\ProductSettings\Validators\Validators_Brand\CreateBrandDtoValidator.cs:line 32
   at FluentValidation.Internal.RuleComponent`2.ValidateAsync(ValidationContext`1 context, TProperty value, CancellationToken cancellation) in /_/src/FluentValidation/Internal/RuleComponent.cs:line 70
   at FluentValidation.Internal.PropertyRule`2.ValidateAsync(ValidationContext`1 context, CancellationToken cancellation) in /_/src/FluentValidation/Internal/PropertyRule.cs:line 122
   at FluentValidation.AbstractValidator`1.ValidateInternalAsync(ValidationContext`1 context, CancellationToken cancellation) in /_/src/FluentValidation/AbstractValidator.cs:line 164
   at FluentValidation.AbstractValidator`1.ValidateAsync(ValidationContext`1 context, CancellationToken cancellation) in /_/src/FluentValidation/AbstractValidator.cs:line 137
   at FluentValidation.Validators.ChildValidatorAdaptor`2.IsValidAsync(ValidationContext`1 context, TProperty value, CancellationToken cancellation) in /_/src/FluentValidation/Validators/ChildValidatorAdaptor.cs:line 81
   at FluentValidation.Internal.RuleComponent`2.ValidateAsync(ValidationContext`1 context, TProperty value, CancellationToken cancellation) in /_/src/FluentValidation/Internal/RuleComponent.cs:line 70
   at FluentValidation.Internal.PropertyRule`2.ValidateAsync(ValidationContext`1 context, CancellationToken cancellation) in /_/src/FluentValidation/Internal/PropertyRule.cs:line 122
   at FluentValidation.AbstractValidator`1.ValidateInternalAsync(ValidationContext`1 context, CancellationToken cancellation) in /_/src/FluentValidation/AbstractValidator.cs:line 164
   at FluentValidation.AbstractValidator`1.ValidateAsync(ValidationContext`1 context, CancellationToken cancellation) in /_/src/FluentValidation/AbstractValidator.cs:line 137
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 25
   at ModularERP.Modules.Inventory.Features.ProductSettings.Controllers.BrandsController.Create(CreateBrandDto dto) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\ProductSettings\Controllers\BrandsController.cs:line 39
   at lambda_method95(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 317
--- End of stack trace from previous location ---
   at ModularERP.Program.<>c.<<Main>b__0_5>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 270
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-10-14 13:16:31.979 +03:00 [INF] Error response sent with status code 500
2025-10-14 13:16:31.986 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/Brands - 500 null application/json; charset=utf-8 320.8729ms
2025-10-14 13:20:28.591 +03:00 [INF] Starting web host...
2025-10-14 13:20:29.557 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 13:20:29.622 +03:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-10-14 13:20:29.696 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 13:20:29.703 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-14 13:20:29.719 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-14 13:20:29.780 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-14 13:20:29.795 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 13:20:29.799 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-14 13:20:29.805 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-14 13:20:29.817 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-10-14 13:20:29.824 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-14 13:20:29.989 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-14 13:20:29.996 +03:00 [INF] Master database initialized successfully
2025-10-14 13:20:31.431 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-14 13:20:31.529 +03:00 [INF] Now listening on: https://localhost:7168
2025-10-14 13:20:31.531 +03:00 [INF] Now listening on: http://localhost:5004
2025-10-14 13:20:31.602 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-14 13:20:31.604 +03:00 [INF] Hosting environment: Development
2025-10-14 13:20:31.605 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-10-14 13:20:31.967 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-14 13:20:32.087 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 120.1569ms
2025-10-14 13:20:32.157 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-14 13:20:32.157 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-14 13:20:32.165 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 7.6222ms
2025-10-14 13:20:32.187 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 29.6273ms
2025-10-14 13:20:32.210 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-14 13:20:32.362 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 151.8637ms
2025-10-14 13:20:41.238 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/Brands - application/json 584
2025-10-14 13:20:41.258 +03:00 [INF] Request started
2025-10-14 13:20:41.261 +03:00 [INF] === Incoming Request ===
2025-10-14 13:20:41.263 +03:00 [INF] Path: /api/Brands
2025-10-14 13:20:41.264 +03:00 [INF] Method: POST
2025-10-14 13:20:41.265 +03:00 [INF] === Headers ===
2025-10-14 13:20:41.268 +03:00 [INF] Accept: ["*/*"]
2025-10-14 13:20:41.273 +03:00 [INF] Connection: ["keep-alive"]
2025-10-14 13:20:41.275 +03:00 [INF] Host: ["localhost:7168"]
2025-10-14 13:20:41.279 +03:00 [INF] User-Agent: ["PostmanRuntime/7.48.0"]
2025-10-14 13:20:41.281 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-14 13:20:41.283 +03:00 [INF] Content-Type: ["application/json"]
2025-10-14 13:20:41.284 +03:00 [INF] Content-Length: ["584"]
2025-10-14 13:20:41.290 +03:00 [INF] X-Tenant-ID: ["7e4a49eb-2e0e-4be8-8d60-c13d7db0f018"]
2025-10-14 13:20:41.292 +03:00 [INF] Postman-Token: ["d718ce51-236f-4f73-9903-65c70360f48c"]
2025-10-14 13:20:41.297 +03:00 [INF] ðŸ” TenantService returned: '7e4a49eb-2e0e-4be8-8d60-c13d7db0f018'
2025-10-14 13:20:41.299 +03:00 [INF] âœ… Processing request for tenant: 7e4a49eb-2e0e-4be8-8d60-c13d7db0f018
2025-10-14 13:20:41.301 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.ProductSettings.Controllers.BrandsController.Create (ModularERP)'
2025-10-14 13:20:41.318 +03:00 [INF] Route matched with {action = "Create", controller = "Brands"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.ProductSettings.DTO.DTO_Brand.BrandDto]]] Create(ModularERP.Modules.Inventory.Features.ProductSettings.DTO.DTO_Brand.CreateBrandDto) on controller ModularERP.Modules.Inventory.Features.ProductSettings.Controllers.BrandsController (ModularERP).
2025-10-14 13:20:41.326 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-14 13:20:41.434 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-10-14 13:20:41.783 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-14 13:20:41.950 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.ProductSettings.DTO.DTO_Brand.BrandDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-14 13:20:41.974 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.ProductSettings.Controllers.BrandsController.Create (ModularERP) in 648.5166ms
2025-10-14 13:20:41.977 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.ProductSettings.Controllers.BrandsController.Create (ModularERP)'
2025-10-14 13:20:41.980 +03:00 [INF] Request completed successfully with status code 200
2025-10-14 13:20:41.986 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/Brands - 200 null application/json; charset=utf-8 748.5049ms
2025-10-14 13:28:44.126 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/ItemGroup - application/json 167
2025-10-14 13:28:44.135 +03:00 [INF] Request started
2025-10-14 13:28:44.137 +03:00 [INF] === Incoming Request ===
2025-10-14 13:28:44.139 +03:00 [INF] Path: /api/ItemGroup
2025-10-14 13:28:44.140 +03:00 [INF] Method: POST
2025-10-14 13:28:44.141 +03:00 [INF] === Headers ===
2025-10-14 13:28:44.142 +03:00 [INF] Accept: ["*/*"]
2025-10-14 13:28:44.143 +03:00 [INF] Connection: ["keep-alive"]
2025-10-14 13:28:44.148 +03:00 [INF] Host: ["localhost:7168"]
2025-10-14 13:28:44.150 +03:00 [INF] User-Agent: ["PostmanRuntime/7.48.0"]
2025-10-14 13:28:44.152 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-14 13:28:44.153 +03:00 [INF] Content-Type: ["application/json"]
2025-10-14 13:28:44.156 +03:00 [INF] Content-Length: ["167"]
2025-10-14 13:28:44.158 +03:00 [INF] X-Tenant-ID: ["7e4a49eb-2e0e-4be8-8d60-c13d7db0f018"]
2025-10-14 13:28:44.159 +03:00 [INF] Postman-Token: ["d970385d-2c49-43fe-a0dd-c2d09b5dd289"]
2025-10-14 13:28:44.163 +03:00 [INF] ðŸ” TenantService returned: '7e4a49eb-2e0e-4be8-8d60-c13d7db0f018'
2025-10-14 13:28:44.166 +03:00 [INF] âœ… Processing request for tenant: 7e4a49eb-2e0e-4be8-8d60-c13d7db0f018
2025-10-14 13:28:44.168 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Products.Controllers.ItemGroupController.Create (ModularERP)'
2025-10-14 13:28:44.172 +03:00 [INF] Route matched with {action = "Create", controller = "ItemGroup"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Products.DTO.DTO_ItemGroup.ItemGroupDto]]] Create(ModularERP.Modules.Inventory.Features.Products.Commends.Commands_ItemGroup.CreateItemGroupCommand) on controller ModularERP.Modules.Inventory.Features.Products.Controllers.ItemGroupController (ModularERP).
2025-10-14 13:28:44.298 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.Products.DTO.DTO_ItemGroup.ItemGroupDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-14 13:28:44.305 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Products.Controllers.ItemGroupController.Create (ModularERP) in 127.9301ms
2025-10-14 13:28:44.309 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Products.Controllers.ItemGroupController.Create (ModularERP)'
2025-10-14 13:28:44.310 +03:00 [INF] Request completed successfully with status code 200
2025-10-14 13:28:44.312 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/ItemGroup - 200 null application/json; charset=utf-8 185.8082ms
2025-10-14 13:29:03.910 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/Products - application/json 925
2025-10-14 13:29:03.915 +03:00 [INF] Request started
2025-10-14 13:29:03.915 +03:00 [INF] === Incoming Request ===
2025-10-14 13:29:03.916 +03:00 [INF] Path: /api/Products
2025-10-14 13:29:03.917 +03:00 [INF] Method: POST
2025-10-14 13:29:03.920 +03:00 [INF] === Headers ===
2025-10-14 13:29:03.922 +03:00 [INF] Accept: ["*/*"]
2025-10-14 13:29:03.924 +03:00 [INF] Connection: ["keep-alive"]
2025-10-14 13:29:03.925 +03:00 [INF] Host: ["localhost:7168"]
2025-10-14 13:29:03.928 +03:00 [INF] User-Agent: ["PostmanRuntime/7.48.0"]
2025-10-14 13:29:03.931 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-14 13:29:03.933 +03:00 [INF] Content-Type: ["application/json"]
2025-10-14 13:29:03.935 +03:00 [INF] Content-Length: ["925"]
2025-10-14 13:29:03.937 +03:00 [INF] X-Tenant-ID: ["7e4a49eb-2e0e-4be8-8d60-c13d7db0f018"]
2025-10-14 13:29:03.940 +03:00 [INF] Postman-Token: ["b628b721-58a9-4250-97cb-f6dea0b9276a"]
2025-10-14 13:29:03.943 +03:00 [INF] ðŸ” TenantService returned: '7e4a49eb-2e0e-4be8-8d60-c13d7db0f018'
2025-10-14 13:29:03.944 +03:00 [INF] âœ… Processing request for tenant: 7e4a49eb-2e0e-4be8-8d60-c13d7db0f018
2025-10-14 13:29:03.946 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Products.Controllers.ProductsController.CreateProduct (ModularERP)'
2025-10-14 13:29:03.950 +03:00 [INF] Route matched with {action = "CreateProduct", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateProduct(ModularERP.Modules.Inventory.Features.Products.DTO.CreateProductDto) on controller ModularERP.Modules.Inventory.Features.Products.Controllers.ProductsController (ModularERP).
2025-10-14 13:29:03.980 +03:00 [INF] Creating new product with SKU SKU-102 for company "92f798f0-ae62-41b4-aad5-80ae06f8cb1a"
2025-10-14 13:29:04.225 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Products.Controllers.ProductsController.CreateProduct (ModularERP) in 272.7335ms
2025-10-14 13:29:04.228 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Products.Controllers.ProductsController.CreateProduct (ModularERP)'
2025-10-14 13:29:04.230 +03:00 [ERR] Unexpected error occurred
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_ProductTaxProfiles_TaxProfiles_TaxProfileId". The conflict occurred in database "ModularERP_Tenant_f7eb410ec7a24a489ca924376e22ca08", table "dbo.TaxProfiles", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:588feecd-8f70-45ec-8c71-2481d8e86595
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at ModularERP.Modules.Finance.Finance.Infrastructure.Data.FinanceDbContext.SaveChangesAsync(CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Finance\Finance.Infrastructure\Data\FinanceDbContext.cs:line 1807
   at ModularERP.Shared.Repository.JoinTableRepository`1.SaveChangesAsync() in E:\ModelerERP\ModularERP\ModularERP\Shared\Repository\JoinTableRepository.cs:line 176
   at ModularERP.Modules.Inventory.Features.Products.Handlers.Handlers_Product.CreateProductCommandHandler.Handle(CreateProductCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Products\Handlers\Handlers_Product\CreateProductCommandHandler.cs:line 114
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Modules.Inventory.Features.Products.Controllers.ProductsController.CreateProduct(CreateProductDto dto) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Products\Controllers\ProductsController.cs:line 74
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 317
--- End of stack trace from previous location ---
   at ModularERP.Program.<>c.<<Main>b__0_5>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 270
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-10-14 13:29:04.300 +03:00 [INF] Error response sent with status code 500
2025-10-14 13:29:04.302 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/Products - 500 null application/json; charset=utf-8 392.61ms
2025-10-14 13:29:35.905 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/TaxComponent - application/json 133
2025-10-14 13:29:35.910 +03:00 [INF] Request started
2025-10-14 13:29:35.912 +03:00 [INF] === Incoming Request ===
2025-10-14 13:29:35.913 +03:00 [INF] Path: /api/TaxComponent
2025-10-14 13:29:35.914 +03:00 [INF] Method: POST
2025-10-14 13:29:35.916 +03:00 [INF] === Headers ===
2025-10-14 13:29:35.917 +03:00 [INF] Accept: ["*/*"]
2025-10-14 13:29:35.919 +03:00 [INF] Connection: ["keep-alive"]
2025-10-14 13:29:35.920 +03:00 [INF] Host: ["localhost:7168"]
2025-10-14 13:29:35.922 +03:00 [INF] User-Agent: ["PostmanRuntime/7.48.0"]
2025-10-14 13:29:35.925 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-14 13:29:35.926 +03:00 [INF] Content-Type: ["application/json"]
2025-10-14 13:29:35.928 +03:00 [INF] Content-Length: ["133"]
2025-10-14 13:29:35.930 +03:00 [INF] X-Tenant-ID: ["7e4a49eb-2e0e-4be8-8d60-c13d7db0f018"]
2025-10-14 13:29:35.932 +03:00 [INF] Postman-Token: ["80c8a643-f8e3-48cb-88d9-972c073e2086"]
2025-10-14 13:29:35.937 +03:00 [INF] ðŸ” TenantService returned: '7e4a49eb-2e0e-4be8-8d60-c13d7db0f018'
2025-10-14 13:29:35.939 +03:00 [INF] âœ… Processing request for tenant: 7e4a49eb-2e0e-4be8-8d60-c13d7db0f018
2025-10-14 13:29:35.940 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.TaxManagement.Controllers.TaxComponentController.Create (ModularERP)'
2025-10-14 13:29:35.944 +03:00 [INF] Route matched with {action = "Create", controller = "TaxComponent"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.TaxManagement.DTO.TaxComponentDto]]] Create(ModularERP.Modules.Inventory.Features.TaxManagement.Commends.CreateTaxComponentCommand) on controller ModularERP.Modules.Inventory.Features.TaxManagement.Controllers.TaxComponentController (ModularERP).
2025-10-14 13:29:36.277 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.TaxManagement.DTO.TaxComponentDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-14 13:29:36.339 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.TaxManagement.Controllers.TaxComponentController.Create (ModularERP) in 388.0828ms
2025-10-14 13:29:36.341 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.TaxManagement.Controllers.TaxComponentController.Create (ModularERP)'
2025-10-14 13:29:36.343 +03:00 [INF] Request completed successfully with status code 200
2025-10-14 13:29:36.345 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/TaxComponent - 200 null application/json; charset=utf-8 439.2538ms
2025-10-14 13:29:58.066 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/TaxProfile - application/json 254
2025-10-14 13:29:58.069 +03:00 [INF] Request started
2025-10-14 13:29:58.070 +03:00 [INF] === Incoming Request ===
2025-10-14 13:29:58.073 +03:00 [INF] Path: /api/TaxProfile
2025-10-14 13:29:58.075 +03:00 [INF] Method: POST
2025-10-14 13:29:58.079 +03:00 [INF] === Headers ===
2025-10-14 13:29:58.080 +03:00 [INF] Accept: ["*/*"]
2025-10-14 13:29:58.082 +03:00 [INF] Connection: ["keep-alive"]
2025-10-14 13:29:58.084 +03:00 [INF] Host: ["localhost:7168"]
2025-10-14 13:29:58.087 +03:00 [INF] User-Agent: ["PostmanRuntime/7.48.0"]
2025-10-14 13:29:58.093 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-14 13:29:58.096 +03:00 [INF] Content-Type: ["application/json"]
2025-10-14 13:29:58.097 +03:00 [INF] Content-Length: ["254"]
2025-10-14 13:29:58.099 +03:00 [INF] X-Tenant-ID: ["7e4a49eb-2e0e-4be8-8d60-c13d7db0f018"]
2025-10-14 13:29:58.101 +03:00 [INF] Postman-Token: ["f5f94384-7a62-46f9-abb1-0c819644aea6"]
2025-10-14 13:29:58.102 +03:00 [INF] ðŸ” TenantService returned: '7e4a49eb-2e0e-4be8-8d60-c13d7db0f018'
2025-10-14 13:29:58.103 +03:00 [INF] âœ… Processing request for tenant: 7e4a49eb-2e0e-4be8-8d60-c13d7db0f018
2025-10-14 13:29:58.107 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.TaxManagement.Controllers.TaxProfileController.Create (ModularERP)'
2025-10-14 13:29:58.111 +03:00 [INF] Route matched with {action = "Create", controller = "TaxProfile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.TaxManagement.DTO.TaxProfileDto]]] Create(ModularERP.Modules.Inventory.Features.TaxManagement.Commends.CreateTaxProfileCommand) on controller ModularERP.Modules.Inventory.Features.TaxManagement.Controllers.TaxProfileController (ModularERP).
2025-10-14 13:29:58.256 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.TaxManagement.DTO.TaxProfileDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-14 13:29:58.261 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.TaxManagement.Controllers.TaxProfileController.Create (ModularERP) in 144.9035ms
2025-10-14 13:29:58.263 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.TaxManagement.Controllers.TaxProfileController.Create (ModularERP)'
2025-10-14 13:29:58.265 +03:00 [INF] Request completed successfully with status code 200
2025-10-14 13:29:58.268 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/TaxProfile - 200 null application/json; charset=utf-8 201.722ms
2025-10-14 13:30:16.423 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/Products - application/json 925
2025-10-14 13:30:16.427 +03:00 [INF] Request started
2025-10-14 13:30:16.428 +03:00 [INF] === Incoming Request ===
2025-10-14 13:30:16.429 +03:00 [INF] Path: /api/Products
2025-10-14 13:30:16.430 +03:00 [INF] Method: POST
2025-10-14 13:30:16.431 +03:00 [INF] === Headers ===
2025-10-14 13:30:16.432 +03:00 [INF] Accept: ["*/*"]
2025-10-14 13:30:16.437 +03:00 [INF] Connection: ["keep-alive"]
2025-10-14 13:30:16.438 +03:00 [INF] Host: ["localhost:7168"]
2025-10-14 13:30:16.440 +03:00 [INF] User-Agent: ["PostmanRuntime/7.48.0"]
2025-10-14 13:30:16.441 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-14 13:30:16.444 +03:00 [INF] Content-Type: ["application/json"]
2025-10-14 13:30:16.445 +03:00 [INF] Content-Length: ["925"]
2025-10-14 13:30:16.447 +03:00 [INF] X-Tenant-ID: ["7e4a49eb-2e0e-4be8-8d60-c13d7db0f018"]
2025-10-14 13:30:16.449 +03:00 [INF] Postman-Token: ["7bbf37ec-8070-4188-94fb-6a6d6af2d65f"]
2025-10-14 13:30:16.451 +03:00 [INF] ðŸ” TenantService returned: '7e4a49eb-2e0e-4be8-8d60-c13d7db0f018'
2025-10-14 13:30:16.454 +03:00 [INF] âœ… Processing request for tenant: 7e4a49eb-2e0e-4be8-8d60-c13d7db0f018
2025-10-14 13:30:16.455 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Products.Controllers.ProductsController.CreateProduct (ModularERP)'
2025-10-14 13:30:16.457 +03:00 [INF] Route matched with {action = "CreateProduct", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateProduct(ModularERP.Modules.Inventory.Features.Products.DTO.CreateProductDto) on controller ModularERP.Modules.Inventory.Features.Products.Controllers.ProductsController (ModularERP).
2025-10-14 13:30:16.460 +03:00 [INF] Creating new product with SKU SKU-102 for company "92f798f0-ae62-41b4-aad5-80ae06f8cb1a"
2025-10-14 13:30:16.505 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Products.Controllers.ProductsController.CreateProduct (ModularERP) in 45.9449ms
2025-10-14 13:30:16.508 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Products.Controllers.ProductsController.CreateProduct (ModularERP)'
2025-10-14 13:30:16.512 +03:00 [WRN] Validation exception occurred: Product validation failed. Validation errors: {"SKU":["SKU already exists for this company"],"Barcode":["Barcode already exists for this company"]}
ModularERP.Common.Exceptions.ValidationException: Product validation failed
   at ModularERP.Modules.Inventory.Features.Products.Handlers.Handlers_Product.CreateProductCommandHandler.ValidateProduct(CreateProductDto dto) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Products\Handlers\Handlers_Product\CreateProductCommandHandler.cs:line 159
   at ModularERP.Modules.Inventory.Features.Products.Handlers.Handlers_Product.CreateProductCommandHandler.Handle(CreateProductCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Products\Handlers\Handlers_Product\CreateProductCommandHandler.cs:line 58
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Modules.Inventory.Features.Products.Controllers.ProductsController.CreateProduct(CreateProductDto dto) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Products\Controllers\ProductsController.cs:line 74
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 317
--- End of stack trace from previous location ---
   at ModularERP.Program.<>c.<<Main>b__0_5>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 270
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-10-14 13:30:16.543 +03:00 [INF] Error response sent with status code 400
2025-10-14 13:30:16.545 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/Products - 400 null application/json; charset=utf-8 121.9591ms
2025-10-14 13:30:29.221 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/Products - application/json 925
2025-10-14 13:30:29.225 +03:00 [INF] Request started
2025-10-14 13:30:29.226 +03:00 [INF] === Incoming Request ===
2025-10-14 13:30:29.228 +03:00 [INF] Path: /api/Products
2025-10-14 13:30:29.229 +03:00 [INF] Method: POST
2025-10-14 13:30:29.231 +03:00 [INF] === Headers ===
2025-10-14 13:30:29.232 +03:00 [INF] Accept: ["*/*"]
2025-10-14 13:30:29.235 +03:00 [INF] Connection: ["keep-alive"]
2025-10-14 13:30:29.237 +03:00 [INF] Host: ["localhost:7168"]
2025-10-14 13:30:29.238 +03:00 [INF] User-Agent: ["PostmanRuntime/7.48.0"]
2025-10-14 13:30:29.239 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-14 13:30:29.242 +03:00 [INF] Content-Type: ["application/json"]
2025-10-14 13:30:29.245 +03:00 [INF] Content-Length: ["925"]
2025-10-14 13:30:29.246 +03:00 [INF] X-Tenant-ID: ["7e4a49eb-2e0e-4be8-8d60-c13d7db0f018"]
2025-10-14 13:30:29.248 +03:00 [INF] Postman-Token: ["d3d17753-cbff-46c7-a903-842855b05120"]
2025-10-14 13:30:29.251 +03:00 [INF] ðŸ” TenantService returned: '7e4a49eb-2e0e-4be8-8d60-c13d7db0f018'
2025-10-14 13:30:29.252 +03:00 [INF] âœ… Processing request for tenant: 7e4a49eb-2e0e-4be8-8d60-c13d7db0f018
2025-10-14 13:30:29.253 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Products.Controllers.ProductsController.CreateProduct (ModularERP)'
2025-10-14 13:30:29.255 +03:00 [INF] Route matched with {action = "CreateProduct", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateProduct(ModularERP.Modules.Inventory.Features.Products.DTO.CreateProductDto) on controller ModularERP.Modules.Inventory.Features.Products.Controllers.ProductsController (ModularERP).
2025-10-14 13:30:29.258 +03:00 [INF] Creating new product with SKU SKU-100 for company "92f798f0-ae62-41b4-aad5-80ae06f8cb1a"
2025-10-14 13:30:29.459 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.Products.DTO.ProductDetailsDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-14 13:30:29.468 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Products.Controllers.ProductsController.CreateProduct (ModularERP) in 210.4455ms
2025-10-14 13:30:29.472 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Products.Controllers.ProductsController.CreateProduct (ModularERP)'
2025-10-14 13:30:29.473 +03:00 [INF] Request completed successfully with status code 200
2025-10-14 13:30:29.475 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/Products - 200 null application/json; charset=utf-8 254.1332ms
2025-10-14 13:31:05.777 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/Requisitions - multipart/form-data; boundary=--------------------------494606832831556731252921 18834
2025-10-14 13:31:05.781 +03:00 [INF] Request started
2025-10-14 13:31:05.782 +03:00 [INF] === Incoming Request ===
2025-10-14 13:31:05.783 +03:00 [INF] Path: /api/Requisitions
2025-10-14 13:31:05.785 +03:00 [INF] Method: POST
2025-10-14 13:31:05.788 +03:00 [INF] === Headers ===
2025-10-14 13:31:05.790 +03:00 [INF] Accept: ["*/*"]
2025-10-14 13:31:05.792 +03:00 [INF] Connection: ["keep-alive"]
2025-10-14 13:31:05.793 +03:00 [INF] Host: ["localhost:7168"]
2025-10-14 13:31:05.795 +03:00 [INF] User-Agent: ["PostmanRuntime/7.48.0"]
2025-10-14 13:31:05.798 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-14 13:31:05.802 +03:00 [INF] Content-Type: ["multipart/form-data; boundary=--------------------------494606832831556731252921"]
2025-10-14 13:31:05.804 +03:00 [INF] Content-Length: ["18834"]
2025-10-14 13:31:05.805 +03:00 [INF] X-Tenant-ID: ["7e4a49eb-2e0e-4be8-8d60-c13d7db0f018"]
2025-10-14 13:31:05.809 +03:00 [INF] Postman-Token: ["77a70cce-d2c8-45d4-a415-66b1a8a6e431"]
2025-10-14 13:31:05.811 +03:00 [INF] ðŸ” TenantService returned: '7e4a49eb-2e0e-4be8-8d60-c13d7db0f018'
2025-10-14 13:31:05.812 +03:00 [INF] âœ… Processing request for tenant: 7e4a49eb-2e0e-4be8-8d60-c13d7db0f018
2025-10-14 13:31:05.813 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionsController.CreateRequisition (ModularERP)'
2025-10-14 13:31:05.821 +03:00 [INF] Route matched with {action = "CreateRequisition", controller = "Requisitions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Requisitions.DTO.DTO_Requisition.RequisitionResponseDto]]] CreateRequisition(ModularERP.Modules.Inventory.Features.Requisitions.Commends.Commends_Requisition.CreateRequisitionCommand) on controller ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionsController (ModularERP).
2025-10-14 13:31:05.914 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionsController.CreateRequisition (ModularERP) in 89.3688ms
2025-10-14 13:31:05.918 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionsController.CreateRequisition (ModularERP)'
2025-10-14 13:31:05.920 +03:00 [WRN] Business logic exception occurred: File validation failed for 'Finance.postman_collection.json': File extension .json is not allowed
ModularERP.Common.Exceptions.BusinessLogicException: File validation failed for 'Finance.postman_collection.json': File extension .json is not allowed
   at ModularERP.Modules.Inventory.Features.Requisitions.Handlers.Handlers_Requisition.CreateRequisitionHandler.Handle(CreateRequisitionCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Requisitions\Handlers\Handlers_Requisition\CreateRequisitionHandler.cs:line 65
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionsController.CreateRequisition(CreateRequisitionCommand command) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Requisitions\Controllers\RequisitionsController.cs:line 52
   at lambda_method1824(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 317
--- End of stack trace from previous location ---
   at ModularERP.Program.<>c.<<Main>b__0_5>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 270
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-10-14 13:31:05.943 +03:00 [INF] Error response sent with status code 400
2025-10-14 13:31:05.945 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/Requisitions - 400 null application/json; charset=utf-8 167.519ms
2025-10-14 13:31:47.927 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/Requisitions - multipart/form-data; boundary=--------------------------368729030748041758600207 47769
2025-10-14 13:31:47.936 +03:00 [INF] Request started
2025-10-14 13:31:47.937 +03:00 [INF] === Incoming Request ===
2025-10-14 13:31:47.938 +03:00 [INF] Path: /api/Requisitions
2025-10-14 13:31:47.941 +03:00 [INF] Method: POST
2025-10-14 13:31:47.942 +03:00 [INF] === Headers ===
2025-10-14 13:31:47.943 +03:00 [INF] Accept: ["*/*"]
2025-10-14 13:31:47.945 +03:00 [INF] Connection: ["keep-alive"]
2025-10-14 13:31:47.946 +03:00 [INF] Host: ["localhost:7168"]
2025-10-14 13:31:47.947 +03:00 [INF] User-Agent: ["PostmanRuntime/7.48.0"]
2025-10-14 13:31:47.950 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-14 13:31:47.952 +03:00 [INF] Content-Type: ["multipart/form-data; boundary=--------------------------368729030748041758600207"]
2025-10-14 13:31:47.954 +03:00 [INF] Content-Length: ["47769"]
2025-10-14 13:31:47.956 +03:00 [INF] X-Tenant-ID: ["7e4a49eb-2e0e-4be8-8d60-c13d7db0f018"]
2025-10-14 13:31:47.957 +03:00 [INF] Postman-Token: ["f3c57fd1-bf8a-4815-be94-9dbd2c054b95"]
2025-10-14 13:31:47.960 +03:00 [INF] ðŸ” TenantService returned: '7e4a49eb-2e0e-4be8-8d60-c13d7db0f018'
2025-10-14 13:31:47.961 +03:00 [INF] âœ… Processing request for tenant: 7e4a49eb-2e0e-4be8-8d60-c13d7db0f018
2025-10-14 13:31:47.962 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionsController.CreateRequisition (ModularERP)'
2025-10-14 13:31:47.964 +03:00 [INF] Route matched with {action = "CreateRequisition", controller = "Requisitions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Requisitions.DTO.DTO_Requisition.RequisitionResponseDto]]] CreateRequisition(ModularERP.Modules.Inventory.Features.Requisitions.Commends.Commends_Requisition.CreateRequisitionCommand) on controller ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionsController (ModularERP).
2025-10-14 13:31:48.427 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.Requisitions.DTO.DTO_Requisition.RequisitionResponseDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-14 13:31:48.442 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionsController.CreateRequisition (ModularERP) in 475.0667ms
2025-10-14 13:31:48.446 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionsController.CreateRequisition (ModularERP)'
2025-10-14 13:31:48.448 +03:00 [INF] Request completed successfully with status code 200
2025-10-14 13:31:48.450 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/Requisitions - 200 null application/json; charset=utf-8 522.4155ms
2025-10-14 13:51:50.799 +03:00 [INF] Starting web host...
2025-10-14 13:51:52.183 +03:00 [FTL] Host terminated unexpectedly
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at ModularERP.Program.Main(String[] args) in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 219
2025-10-14 13:52:14.475 +03:00 [INF] Starting web host...
2025-10-14 13:52:14.882 +03:00 [FTL] Host terminated unexpectedly
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at ModularERP.Program.Main(String[] args) in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 219
2025-10-14 13:54:38.196 +03:00 [INF] Starting web host...
2025-10-14 13:54:38.548 +03:00 [FTL] Host terminated unexpectedly
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at ModularERP.Program.Main(String[] args) in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 219
2025-10-14 13:55:53.479 +03:00 [INF] Starting web host...
2025-10-14 13:55:54.714 +03:00 [FTL] Host terminated unexpectedly
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at ModularERP.Program.Main(String[] args) in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 219
2025-10-14 13:57:49.845 +03:00 [INF] Starting web host...
2025-10-14 13:57:50.202 +03:00 [FTL] Host terminated unexpectedly
System.AggregateException: Some services are not able to be constructed (Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[ModularERP.Modules.Inventory.Features.Requisitions.Commends.Commends_Requisition.CreateRequisitionCommand,ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Requisitions.DTO.DTO_Requisition.RequisitionResponseDto]] Lifetime: Transient ImplementationType: ModularERP.Modules.Inventory.Features.Requisitions.Handlers.Handlers_Requisition.CreateRequisitionHandler': Unable to resolve service for type 'Microsoft.EntityFrameworkCore.DbContext' while attempting to activate 'ModularERP.Modules.Inventory.Features.Requisitions.Handlers.Handlers_Requisition.CreateRequisitionHandler'.)
 ---> System.InvalidOperationException: Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[ModularERP.Modules.Inventory.Features.Requisitions.Commends.Commends_Requisition.CreateRequisitionCommand,ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Requisitions.DTO.DTO_Requisition.RequisitionResponseDto]] Lifetime: Transient ImplementationType: ModularERP.Modules.Inventory.Features.Requisitions.Handlers.Handlers_Requisition.CreateRequisitionHandler': Unable to resolve service for type 'Microsoft.EntityFrameworkCore.DbContext' while attempting to activate 'ModularERP.Modules.Inventory.Features.Requisitions.Handlers.Handlers_Requisition.CreateRequisitionHandler'.
 ---> System.InvalidOperationException: Unable to resolve service for type 'Microsoft.EntityFrameworkCore.DbContext' while attempting to activate 'ModularERP.Modules.Inventory.Features.Requisitions.Handlers.Handlers_Requisition.CreateRequisitionHandler'.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceDescriptor serviceDescriptor, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)
   at Microsoft.Extensions.DependencyInjection.ServiceCollectionContainerBuilderExtensions.BuildServiceProvider(IServiceCollection services, ServiceProviderOptions options)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at ModularERP.Program.Main(String[] args) in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 219
2025-10-14 13:58:36.694 +03:00 [INF] Starting web host...
2025-10-14 13:58:37.618 +03:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 13:58:37.699 +03:00 [INF] Executed DbCommand (57ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-10-14 13:58:37.770 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 13:58:37.775 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-14 13:58:37.791 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-14 13:58:37.859 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-14 13:58:37.875 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 13:58:37.881 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-14 13:58:37.889 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-14 13:58:37.900 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-10-14 13:58:37.906 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-14 13:58:38.071 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-14 13:58:38.079 +03:00 [INF] Master database initialized successfully
2025-10-14 13:58:39.453 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-14 13:58:39.558 +03:00 [INF] Now listening on: https://localhost:7168
2025-10-14 13:58:39.560 +03:00 [INF] Now listening on: http://localhost:5004
2025-10-14 13:58:39.639 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-14 13:58:39.641 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-14 13:58:39.645 +03:00 [INF] Hosting environment: Development
2025-10-14 13:58:39.647 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-10-14 13:58:39.781 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 143.2262ms
2025-10-14 13:58:39.938 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-14 13:58:39.938 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-14 13:58:39.943 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 5.6855ms
2025-10-14 13:58:39.968 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 29.9972ms
2025-10-14 13:58:40.023 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-14 13:58:40.181 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 158.2289ms
2025-10-14 13:58:43.597 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/Requisitions - multipart/form-data; boundary=--------------------------031832970141440863026855 47769
2025-10-14 13:58:43.614 +03:00 [INF] Request started
2025-10-14 13:58:43.617 +03:00 [INF] === Incoming Request ===
2025-10-14 13:58:43.619 +03:00 [INF] Path: /api/Requisitions
2025-10-14 13:58:43.620 +03:00 [INF] Method: POST
2025-10-14 13:58:43.621 +03:00 [INF] === Headers ===
2025-10-14 13:58:43.623 +03:00 [INF] Accept: ["*/*"]
2025-10-14 13:58:43.627 +03:00 [INF] Connection: ["keep-alive"]
2025-10-14 13:58:43.630 +03:00 [INF] Host: ["localhost:7168"]
2025-10-14 13:58:43.632 +03:00 [INF] User-Agent: ["PostmanRuntime/7.48.0"]
2025-10-14 13:58:43.634 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-14 13:58:43.636 +03:00 [INF] Content-Type: ["multipart/form-data; boundary=--------------------------031832970141440863026855"]
2025-10-14 13:58:43.638 +03:00 [INF] Content-Length: ["47769"]
2025-10-14 13:58:43.640 +03:00 [INF] X-Tenant-ID: ["7e4a49eb-2e0e-4be8-8d60-c13d7db0f018"]
2025-10-14 13:58:43.642 +03:00 [INF] Postman-Token: ["ef27ff05-cbd8-4488-958a-ac24be1f5e7f"]
2025-10-14 13:58:43.648 +03:00 [INF] ðŸ” TenantService returned: '7e4a49eb-2e0e-4be8-8d60-c13d7db0f018'
2025-10-14 13:58:43.650 +03:00 [INF] âœ… Processing request for tenant: 7e4a49eb-2e0e-4be8-8d60-c13d7db0f018
2025-10-14 13:58:43.652 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionsController.CreateRequisition (ModularERP)'
2025-10-14 13:58:43.671 +03:00 [INF] Route matched with {action = "CreateRequisition", controller = "Requisitions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Requisitions.DTO.DTO_Requisition.RequisitionResponseDto]]] CreateRequisition(ModularERP.Modules.Inventory.Features.Requisitions.Commends.Commends_Requisition.CreateRequisitionCommand) on controller ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionsController (ModularERP).
2025-10-14 13:58:43.678 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-14 13:58:43.772 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-10-14 13:58:44.364 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-14 13:58:45.046 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.Requisitions.DTO.DTO_Requisition.RequisitionResponseDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-14 13:58:45.084 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionsController.CreateRequisition (ModularERP) in 1406.2043ms
2025-10-14 13:58:45.087 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionsController.CreateRequisition (ModularERP)'
2025-10-14 13:58:45.091 +03:00 [INF] Request completed successfully with status code 200
2025-10-14 13:58:45.100 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/Requisitions - 200 null application/json; charset=utf-8 1503.095ms
2025-10-14 14:00:45.799 +03:00 [INF] Starting web host...
2025-10-14 14:00:46.720 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 14:00:46.801 +03:00 [INF] Executed DbCommand (65ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-10-14 14:00:46.868 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 14:00:46.874 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-14 14:00:46.891 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-14 14:00:46.953 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-14 14:00:46.969 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 14:00:46.974 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-14 14:00:46.981 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-14 14:00:46.993 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-10-14 14:00:47.000 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-14 14:00:47.172 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-14 14:00:47.179 +03:00 [INF] Master database initialized successfully
2025-10-14 14:00:48.551 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-14 14:00:48.677 +03:00 [INF] Now listening on: https://localhost:7168
2025-10-14 14:00:48.679 +03:00 [INF] Now listening on: http://localhost:5004
2025-10-14 14:00:48.771 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-14 14:00:48.773 +03:00 [INF] Hosting environment: Development
2025-10-14 14:00:48.775 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-10-14 14:00:48.787 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-14 14:00:48.963 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 176.9756ms
2025-10-14 14:00:48.965 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-14 14:00:48.965 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-14 14:00:48.978 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 12.832ms
2025-10-14 14:00:49.003 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 37.8373ms
2025-10-14 14:00:49.171 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-14 14:00:49.282 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 111.8061ms
2025-10-14 14:06:01.262 +03:00 [INF] Starting web host...
2025-10-14 14:06:02.169 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 14:06:02.240 +03:00 [INF] Executed DbCommand (55ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-10-14 14:06:02.310 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 14:06:02.316 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-14 14:06:02.332 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-14 14:06:02.387 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-14 14:06:02.402 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 14:06:02.407 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-14 14:06:02.414 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-14 14:06:02.426 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-10-14 14:06:02.433 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-14 14:06:02.595 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-14 14:06:02.602 +03:00 [INF] Master database initialized successfully
2025-10-14 14:06:04.043 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-14 14:06:04.140 +03:00 [INF] Now listening on: https://localhost:7168
2025-10-14 14:06:04.142 +03:00 [INF] Now listening on: http://localhost:5004
2025-10-14 14:06:04.214 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-14 14:06:04.217 +03:00 [INF] Hosting environment: Development
2025-10-14 14:06:04.219 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-10-14 14:06:04.716 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-14 14:06:04.836 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 121.2284ms
2025-10-14 14:06:04.902 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-14 14:06:04.902 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-14 14:06:04.912 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 10.4507ms
2025-10-14 14:06:04.930 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 28.0814ms
2025-10-14 14:06:04.962 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-14 14:06:05.099 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 136.62ms
2025-10-14 14:06:08.334 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/Requisitions - multipart/form-data; boundary=--------------------------039155253494270484458743 47769
2025-10-14 14:06:08.350 +03:00 [INF] Request started
2025-10-14 14:06:08.353 +03:00 [INF] === Incoming Request ===
2025-10-14 14:06:08.355 +03:00 [INF] Path: /api/Requisitions
2025-10-14 14:06:08.357 +03:00 [INF] Method: POST
2025-10-14 14:06:08.358 +03:00 [INF] === Headers ===
2025-10-14 14:06:08.362 +03:00 [INF] Accept: ["*/*"]
2025-10-14 14:06:08.367 +03:00 [INF] Connection: ["keep-alive"]
2025-10-14 14:06:08.369 +03:00 [INF] Host: ["localhost:7168"]
2025-10-14 14:06:08.371 +03:00 [INF] User-Agent: ["PostmanRuntime/7.48.0"]
2025-10-14 14:06:08.374 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-14 14:06:08.375 +03:00 [INF] Content-Type: ["multipart/form-data; boundary=--------------------------039155253494270484458743"]
2025-10-14 14:06:08.377 +03:00 [INF] Content-Length: ["47769"]
2025-10-14 14:06:08.378 +03:00 [INF] X-Tenant-ID: ["7e4a49eb-2e0e-4be8-8d60-c13d7db0f018"]
2025-10-14 14:06:08.380 +03:00 [INF] Postman-Token: ["ed903e5b-613f-4fc0-813d-2b8421e056f3"]
2025-10-14 14:06:08.386 +03:00 [INF] ðŸ” TenantService returned: '7e4a49eb-2e0e-4be8-8d60-c13d7db0f018'
2025-10-14 14:06:08.388 +03:00 [INF] âœ… Processing request for tenant: 7e4a49eb-2e0e-4be8-8d60-c13d7db0f018
2025-10-14 14:06:08.390 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionsController.CreateRequisition (ModularERP)'
2025-10-14 14:06:08.410 +03:00 [INF] Route matched with {action = "CreateRequisition", controller = "Requisitions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Requisitions.DTO.DTO_Requisition.RequisitionResponseDto]]] CreateRequisition(ModularERP.Modules.Inventory.Features.Requisitions.Commends.Commends_Requisition.CreateRequisitionCommand) on controller ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionsController (ModularERP).
2025-10-14 14:06:08.416 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-14 14:06:08.512 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-10-14 14:06:09.021 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-14 14:06:09.824 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.Requisitions.DTO.DTO_Requisition.RequisitionResponseDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-14 14:06:09.870 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionsController.CreateRequisition (ModularERP) in 1453.5032ms
2025-10-14 14:06:09.878 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionsController.CreateRequisition (ModularERP)'
2025-10-14 14:06:09.882 +03:00 [INF] Request completed successfully with status code 200
2025-10-14 14:06:09.891 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/Requisitions - 200 null application/json; charset=utf-8 1557.769ms
2025-10-14 14:06:46.805 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/Requisitions - multipart/form-data; boundary=--------------------------735961602789538899625920 47769
2025-10-14 14:06:46.814 +03:00 [INF] Request started
2025-10-14 14:06:46.816 +03:00 [INF] === Incoming Request ===
2025-10-14 14:06:46.818 +03:00 [INF] Path: /api/Requisitions
2025-10-14 14:06:46.819 +03:00 [INF] Method: POST
2025-10-14 14:06:46.821 +03:00 [INF] === Headers ===
2025-10-14 14:06:46.822 +03:00 [INF] Accept: ["*/*"]
2025-10-14 14:06:46.823 +03:00 [INF] Connection: ["keep-alive"]
2025-10-14 14:06:46.826 +03:00 [INF] Host: ["localhost:7168"]
2025-10-14 14:06:46.828 +03:00 [INF] User-Agent: ["PostmanRuntime/7.48.0"]
2025-10-14 14:06:46.830 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-14 14:06:46.831 +03:00 [INF] Content-Type: ["multipart/form-data; boundary=--------------------------735961602789538899625920"]
2025-10-14 14:06:46.833 +03:00 [INF] Content-Length: ["47769"]
2025-10-14 14:06:46.837 +03:00 [INF] X-Tenant-ID: ["7e4a49eb-2e0e-4be8-8d60-c13d7db0f018"]
2025-10-14 14:06:46.840 +03:00 [INF] Postman-Token: ["8106acb2-0db0-447b-aeba-7ad3c7480c6c"]
2025-10-14 14:06:46.843 +03:00 [INF] ðŸ” TenantService returned: '7e4a49eb-2e0e-4be8-8d60-c13d7db0f018'
2025-10-14 14:06:46.844 +03:00 [INF] âœ… Processing request for tenant: 7e4a49eb-2e0e-4be8-8d60-c13d7db0f018
2025-10-14 14:06:46.846 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionsController.CreateRequisition (ModularERP)'
2025-10-14 14:06:46.848 +03:00 [INF] Route matched with {action = "CreateRequisition", controller = "Requisitions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Requisitions.DTO.DTO_Requisition.RequisitionResponseDto]]] CreateRequisition(ModularERP.Modules.Inventory.Features.Requisitions.Commends.Commends_Requisition.CreateRequisitionCommand) on controller ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionsController (ModularERP).
2025-10-14 14:06:47.123 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.Requisitions.DTO.DTO_Requisition.RequisitionResponseDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-14 14:06:47.140 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionsController.CreateRequisition (ModularERP) in 288.6953ms
2025-10-14 14:06:47.142 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionsController.CreateRequisition (ModularERP)'
2025-10-14 14:06:47.144 +03:00 [INF] Request completed successfully with status code 200
2025-10-14 14:06:47.147 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/Requisitions - 200 null application/json; charset=utf-8 341.5531ms
2025-10-14 14:11:40.793 +03:00 [INF] Starting web host...
2025-10-14 14:11:41.760 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 14:11:41.831 +03:00 [INF] Executed DbCommand (55ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-10-14 14:11:41.928 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 14:11:41.934 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-14 14:11:41.943 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-14 14:11:42.000 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-14 14:11:42.017 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 14:11:42.021 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-14 14:11:42.029 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-14 14:11:42.040 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-10-14 14:11:42.049 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-14 14:11:42.219 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-14 14:11:42.226 +03:00 [INF] Master database initialized successfully
2025-10-14 14:11:43.727 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-14 14:11:43.827 +03:00 [INF] Now listening on: https://localhost:7168
2025-10-14 14:11:43.829 +03:00 [INF] Now listening on: http://localhost:5004
2025-10-14 14:11:43.904 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-14 14:11:43.906 +03:00 [INF] Hosting environment: Development
2025-10-14 14:11:43.908 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-10-14 14:11:44.233 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-14 14:11:44.351 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 119.6917ms
2025-10-14 14:11:44.396 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-14 14:11:44.396 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-14 14:11:44.401 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 5.5283ms
2025-10-14 14:11:44.422 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 26.476ms
2025-10-14 14:11:44.454 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-14 14:11:44.594 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 139.6882ms
2025-10-14 14:11:47.692 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/Requisitions - multipart/form-data; boundary=--------------------------309605937912669008968838 47769
2025-10-14 14:11:47.709 +03:00 [INF] Request started
2025-10-14 14:11:47.713 +03:00 [INF] === Incoming Request ===
2025-10-14 14:11:47.714 +03:00 [INF] Path: /api/Requisitions
2025-10-14 14:11:47.716 +03:00 [INF] Method: POST
2025-10-14 14:11:47.718 +03:00 [INF] === Headers ===
2025-10-14 14:11:47.720 +03:00 [INF] Accept: ["*/*"]
2025-10-14 14:11:47.723 +03:00 [INF] Connection: ["keep-alive"]
2025-10-14 14:11:47.725 +03:00 [INF] Host: ["localhost:7168"]
2025-10-14 14:11:47.727 +03:00 [INF] User-Agent: ["PostmanRuntime/7.48.0"]
2025-10-14 14:11:47.730 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-14 14:11:47.732 +03:00 [INF] Content-Type: ["multipart/form-data; boundary=--------------------------309605937912669008968838"]
2025-10-14 14:11:47.734 +03:00 [INF] Content-Length: ["47769"]
2025-10-14 14:11:47.736 +03:00 [INF] X-Tenant-ID: ["7e4a49eb-2e0e-4be8-8d60-c13d7db0f018"]
2025-10-14 14:11:47.737 +03:00 [INF] Postman-Token: ["e15c4a7e-30cb-4394-b94f-9c338ab20d55"]
2025-10-14 14:11:47.744 +03:00 [INF] ðŸ” TenantService returned: '7e4a49eb-2e0e-4be8-8d60-c13d7db0f018'
2025-10-14 14:11:47.746 +03:00 [INF] âœ… Processing request for tenant: 7e4a49eb-2e0e-4be8-8d60-c13d7db0f018
2025-10-14 14:11:47.749 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionsController.CreateRequisition (ModularERP)'
2025-10-14 14:11:47.770 +03:00 [INF] Route matched with {action = "CreateRequisition", controller = "Requisitions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Requisitions.DTO.DTO_Requisition.RequisitionResponseDto]]] CreateRequisition(ModularERP.Modules.Inventory.Features.Requisitions.Commends.Commends_Requisition.CreateRequisitionCommand) on controller ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionsController (ModularERP).
2025-10-14 14:11:47.780 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-14 14:11:47.876 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-10-14 14:11:48.548 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-14 14:11:49.318 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.Requisitions.DTO.DTO_Requisition.RequisitionResponseDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-14 14:11:49.374 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionsController.CreateRequisition (ModularERP) in 1593.9034ms
2025-10-14 14:11:49.376 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionsController.CreateRequisition (ModularERP)'
2025-10-14 14:11:49.379 +03:00 [INF] Request completed successfully with status code 200
2025-10-14 14:11:49.386 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/Requisitions - 200 null application/json; charset=utf-8 1694.2728ms
2025-10-14 14:12:39.210 +03:00 [INF] Starting web host...
2025-10-14 14:12:40.158 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 14:12:40.224 +03:00 [INF] Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-10-14 14:12:40.296 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 14:12:40.304 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-14 14:12:40.320 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-14 14:12:40.384 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-14 14:12:40.402 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 14:12:40.408 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-14 14:12:40.416 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-14 14:12:40.429 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-10-14 14:12:40.436 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-14 14:12:40.622 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-14 14:12:40.631 +03:00 [INF] Master database initialized successfully
2025-10-14 14:12:42.199 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-14 14:12:42.315 +03:00 [INF] Now listening on: https://localhost:7168
2025-10-14 14:12:42.317 +03:00 [INF] Now listening on: http://localhost:5004
2025-10-14 14:12:42.399 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-14 14:12:42.401 +03:00 [INF] Hosting environment: Development
2025-10-14 14:12:42.402 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-10-14 14:12:42.651 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/Requisitions - multipart/form-data; boundary=--------------------------611941791778019065244300 47769
2025-10-14 14:12:42.651 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-14 14:12:42.713 +03:00 [INF] Request started
2025-10-14 14:12:42.716 +03:00 [INF] === Incoming Request ===
2025-10-14 14:12:42.718 +03:00 [INF] Path: /api/Requisitions
2025-10-14 14:12:42.719 +03:00 [INF] Method: POST
2025-10-14 14:12:42.720 +03:00 [INF] === Headers ===
2025-10-14 14:12:42.724 +03:00 [INF] Accept: ["*/*"]
2025-10-14 14:12:42.727 +03:00 [INF] Connection: ["keep-alive"]
2025-10-14 14:12:42.728 +03:00 [INF] Host: ["localhost:7168"]
2025-10-14 14:12:42.730 +03:00 [INF] User-Agent: ["PostmanRuntime/7.48.0"]
2025-10-14 14:12:42.732 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-14 14:12:42.734 +03:00 [INF] Content-Type: ["multipart/form-data; boundary=--------------------------611941791778019065244300"]
2025-10-14 14:12:42.736 +03:00 [INF] Content-Length: ["47769"]
2025-10-14 14:12:42.739 +03:00 [INF] X-Tenant-ID: ["7e4a49eb-2e0e-4be8-8d60-c13d7db0f018"]
2025-10-14 14:12:42.741 +03:00 [INF] Postman-Token: ["70018555-8195-4bf9-93d5-df0bc84f6a33"]
2025-10-14 14:12:42.745 +03:00 [INF] ðŸ” TenantService returned: '7e4a49eb-2e0e-4be8-8d60-c13d7db0f018'
2025-10-14 14:12:42.746 +03:00 [INF] âœ… Processing request for tenant: 7e4a49eb-2e0e-4be8-8d60-c13d7db0f018
2025-10-14 14:12:42.748 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionsController.CreateRequisition (ModularERP)'
2025-10-14 14:12:42.767 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 116.8431ms
2025-10-14 14:12:42.770 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-14 14:12:42.770 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-14 14:12:42.771 +03:00 [INF] Route matched with {action = "CreateRequisition", controller = "Requisitions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Requisitions.DTO.DTO_Requisition.RequisitionResponseDto]]] CreateRequisition(ModularERP.Modules.Inventory.Features.Requisitions.Commends.Commends_Requisition.CreateRequisitionCommand) on controller ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionsController (ModularERP).
2025-10-14 14:12:42.783 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 12.9118ms
2025-10-14 14:12:42.791 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-14 14:12:42.809 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 39.2035ms
2025-10-14 14:12:42.881 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-14 14:12:42.929 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-10-14 14:12:43.054 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 172.3461ms
2025-10-14 14:12:43.433 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-14 14:12:44.036 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.Requisitions.DTO.DTO_Requisition.RequisitionResponseDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-14 14:12:44.086 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionsController.CreateRequisition (ModularERP) in 1299.1803ms
2025-10-14 14:12:44.092 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionsController.CreateRequisition (ModularERP)'
2025-10-14 14:12:44.095 +03:00 [INF] Request completed successfully with status code 200
2025-10-14 14:12:44.101 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/Requisitions - 200 null application/json; charset=utf-8 1451.5918ms
2025-10-14 14:14:49.474 +03:00 [INF] Starting web host...
2025-10-14 14:14:50.388 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 14:14:50.455 +03:00 [INF] Executed DbCommand (51ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-10-14 14:14:50.521 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 14:14:50.527 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-14 14:14:50.534 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-14 14:14:50.588 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-14 14:14:50.604 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 14:14:50.610 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-14 14:14:50.616 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-14 14:14:50.627 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-10-14 14:14:50.640 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-14 14:14:50.815 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-14 14:14:50.822 +03:00 [INF] Master database initialized successfully
2025-10-14 14:14:52.187 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-14 14:14:52.284 +03:00 [INF] Now listening on: https://localhost:7168
2025-10-14 14:14:52.286 +03:00 [INF] Now listening on: http://localhost:5004
2025-10-14 14:14:52.355 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-14 14:14:52.357 +03:00 [INF] Hosting environment: Development
2025-10-14 14:14:52.359 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-10-14 14:14:52.404 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-14 14:14:52.563 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 158.9381ms
2025-10-14 14:14:52.601 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-14 14:14:52.601 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-14 14:14:52.607 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 5.837ms
2025-10-14 14:14:52.627 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 26.0623ms
2025-10-14 14:14:52.662 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-14 14:14:52.780 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 118.8028ms
2025-10-14 14:14:55.220 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/Requisitions - multipart/form-data; boundary=--------------------------666357167858063240408238 47769
2025-10-14 14:14:55.237 +03:00 [INF] Request started
2025-10-14 14:14:55.239 +03:00 [INF] === Incoming Request ===
2025-10-14 14:14:55.241 +03:00 [INF] Path: /api/Requisitions
2025-10-14 14:14:55.242 +03:00 [INF] Method: POST
2025-10-14 14:14:55.243 +03:00 [INF] === Headers ===
2025-10-14 14:14:55.247 +03:00 [INF] Accept: ["*/*"]
2025-10-14 14:14:55.251 +03:00 [INF] Connection: ["keep-alive"]
2025-10-14 14:14:55.253 +03:00 [INF] Host: ["localhost:7168"]
2025-10-14 14:14:55.254 +03:00 [INF] User-Agent: ["PostmanRuntime/7.48.0"]
2025-10-14 14:14:55.256 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-14 14:14:55.258 +03:00 [INF] Content-Type: ["multipart/form-data; boundary=--------------------------666357167858063240408238"]
2025-10-14 14:14:55.260 +03:00 [INF] Content-Length: ["47769"]
2025-10-14 14:14:55.263 +03:00 [INF] X-Tenant-ID: ["7e4a49eb-2e0e-4be8-8d60-c13d7db0f018"]
2025-10-14 14:14:55.265 +03:00 [INF] Postman-Token: ["f6a8f924-7114-4797-9c71-97a3da9ff991"]
2025-10-14 14:14:55.272 +03:00 [INF] ðŸ” TenantService returned: '7e4a49eb-2e0e-4be8-8d60-c13d7db0f018'
2025-10-14 14:14:55.274 +03:00 [INF] âœ… Processing request for tenant: 7e4a49eb-2e0e-4be8-8d60-c13d7db0f018
2025-10-14 14:14:55.276 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionsController.CreateRequisition (ModularERP)'
2025-10-14 14:14:55.298 +03:00 [INF] Route matched with {action = "CreateRequisition", controller = "Requisitions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Requisitions.DTO.DTO_Requisition.RequisitionResponseDto]]] CreateRequisition(ModularERP.Modules.Inventory.Features.Requisitions.Commends.Commends_Requisition.CreateRequisitionCommand) on controller ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionsController (ModularERP).
2025-10-14 14:14:55.305 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-14 14:14:55.394 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-10-14 14:14:55.822 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-14 14:14:56.322 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionsController.CreateRequisition (ModularERP) in 1016.6013ms
2025-10-14 14:14:56.324 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionsController.CreateRequisition (ModularERP)'
2025-10-14 14:14:56.329 +03:00 [WRN] Business logic exception occurred: Error creating requisition: Unable to create a map expression from . (System.String) to Guid.CreatedBy (System.Guid)

Mapping types:
Requisition -> RequisitionResponseDto
ModularERP.Modules.Inventory.Features.Requisitions.Models.Requisition -> ModularERP.Modules.Inventory.Features.Requisitions.DTO.DTO_Requisition.RequisitionResponseDto

Type Map configuration:
Requisition -> RequisitionResponseDto
ModularERP.Modules.Inventory.Features.Requisitions.Models.Requisition -> ModularERP.Modules.Inventory.Features.Requisitions.DTO.DTO_Requisition.RequisitionResponseDto

Destination Member:
CreatedBy

ModularERP.Common.Exceptions.BusinessLogicException: Error creating requisition: Unable to create a map expression from . (System.String) to Guid.CreatedBy (System.Guid)

Mapping types:
Requisition -> RequisitionResponseDto
ModularERP.Modules.Inventory.Features.Requisitions.Models.Requisition -> ModularERP.Modules.Inventory.Features.Requisitions.DTO.DTO_Requisition.RequisitionResponseDto

Type Map configuration:
Requisition -> RequisitionResponseDto
ModularERP.Modules.Inventory.Features.Requisitions.Models.Requisition -> ModularERP.Modules.Inventory.Features.Requisitions.DTO.DTO_Requisition.RequisitionResponseDto

Destination Member:
CreatedBy

 ---> AutoMapper.AutoMapperMappingException: Unable to create a map expression from . (System.String) to Guid.CreatedBy (System.Guid)

Mapping types:
Requisition -> RequisitionResponseDto
ModularERP.Modules.Inventory.Features.Requisitions.Models.Requisition -> ModularERP.Modules.Inventory.Features.Requisitions.DTO.DTO_Requisition.RequisitionResponseDto

Type Map configuration:
Requisition -> RequisitionResponseDto
ModularERP.Modules.Inventory.Features.Requisitions.Models.Requisition -> ModularERP.Modules.Inventory.Features.Requisitions.DTO.DTO_Requisition.RequisitionResponseDto

Destination Member:
CreatedBy

   at System.Lazy`1.ViaFactory(LazyThreadSafetyMode mode)
   at System.Lazy`1.ExecutionAndPublication(LazyHelper executionAndPublication, Boolean useDefaultConstructor)
   at System.Lazy`1.CreateValue()
   at System.Lazy`1.get_Value()
   at ModularERP.Modules.Inventory.Features.Requisitions.Handlers.Handlers_Requisition.CreateRequisitionHandler.Handle(CreateRequisitionCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Requisitions\Handlers\Handlers_Requisition\CreateRequisitionHandler.cs:line 141
   --- End of inner exception stack trace ---
   at ModularERP.Modules.Inventory.Features.Requisitions.Handlers.Handlers_Requisition.CreateRequisitionHandler.Handle(CreateRequisitionCommand request, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Requisitions\Handlers\Handlers_Requisition\CreateRequisitionHandler.cs:line 162
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in E:\ModelerERP\ModularERP\ModularERP\Common\Behaviors\ValidationBehavior.cs:line 48
   at ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionsController.CreateRequisition(CreateRequisitionCommand command) in E:\ModelerERP\ModularERP\ModularERP\Modules\Inventory\Features\Requisitions\Controllers\RequisitionsController.cs:line 52
   at lambda_method95(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Program.<>c.<<Main>b__0_6>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 317
--- End of stack trace from previous location ---
   at ModularERP.Program.<>c.<<Main>b__0_5>d.MoveNext() in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 270
--- End of stack trace from previous location ---
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in E:\ModelerERP\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-10-14 14:14:56.411 +03:00 [INF] Error response sent with status code 400
2025-10-14 14:14:56.419 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/Requisitions - 400 null application/json; charset=utf-8 1198.9784ms
2025-10-14 14:16:32.210 +03:00 [INF] Starting web host...
2025-10-14 14:16:33.176 +03:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 14:16:33.235 +03:00 [INF] Executed DbCommand (41ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-10-14 14:16:33.316 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 14:16:33.321 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-14 14:16:33.334 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-14 14:16:33.396 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-14 14:16:33.415 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 14:16:33.420 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-14 14:16:33.428 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-14 14:16:33.440 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-10-14 14:16:33.452 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-14 14:16:33.629 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-14 14:16:33.640 +03:00 [INF] Master database initialized successfully
2025-10-14 14:16:35.479 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-14 14:16:35.580 +03:00 [INF] Now listening on: https://localhost:7168
2025-10-14 14:16:35.582 +03:00 [INF] Now listening on: http://localhost:5004
2025-10-14 14:16:35.681 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-14 14:16:35.683 +03:00 [INF] Hosting environment: Development
2025-10-14 14:16:35.685 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-10-14 14:16:36.062 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-14 14:16:36.206 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 144.8127ms
2025-10-14 14:16:36.371 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-14 14:16:36.371 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-14 14:16:36.378 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 6.0643ms
2025-10-14 14:16:36.404 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 32.4277ms
2025-10-14 14:16:36.477 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-14 14:16:36.688 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 210.4002ms
2025-10-14 14:16:43.530 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/Requisitions - multipart/form-data; boundary=--------------------------604110031193932291805879 47769
2025-10-14 14:16:43.548 +03:00 [INF] Request started
2025-10-14 14:16:43.551 +03:00 [INF] === Incoming Request ===
2025-10-14 14:16:43.553 +03:00 [INF] Path: /api/Requisitions
2025-10-14 14:16:43.554 +03:00 [INF] Method: POST
2025-10-14 14:16:43.555 +03:00 [INF] === Headers ===
2025-10-14 14:16:43.558 +03:00 [INF] Accept: ["*/*"]
2025-10-14 14:16:43.562 +03:00 [INF] Connection: ["keep-alive"]
2025-10-14 14:16:43.564 +03:00 [INF] Host: ["localhost:7168"]
2025-10-14 14:16:43.566 +03:00 [INF] User-Agent: ["PostmanRuntime/7.48.0"]
2025-10-14 14:16:43.567 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-14 14:16:43.570 +03:00 [INF] Content-Type: ["multipart/form-data; boundary=--------------------------604110031193932291805879"]
2025-10-14 14:16:43.572 +03:00 [INF] Content-Length: ["47769"]
2025-10-14 14:16:43.573 +03:00 [INF] X-Tenant-ID: ["7e4a49eb-2e0e-4be8-8d60-c13d7db0f018"]
2025-10-14 14:16:43.575 +03:00 [INF] Postman-Token: ["11f70fb8-b339-4536-a2ee-086f71747c29"]
2025-10-14 14:16:43.582 +03:00 [INF] ðŸ” TenantService returned: '7e4a49eb-2e0e-4be8-8d60-c13d7db0f018'
2025-10-14 14:16:43.583 +03:00 [INF] âœ… Processing request for tenant: 7e4a49eb-2e0e-4be8-8d60-c13d7db0f018
2025-10-14 14:16:43.585 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionsController.CreateRequisition (ModularERP)'
2025-10-14 14:16:43.607 +03:00 [INF] Route matched with {action = "CreateRequisition", controller = "Requisitions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Requisitions.DTO.DTO_Requisition.RequisitionResponseDto]]] CreateRequisition(ModularERP.Modules.Inventory.Features.Requisitions.Commends.Commends_Requisition.CreateRequisitionCommand) on controller ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionsController (ModularERP).
2025-10-14 14:16:43.615 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-14 14:16:43.727 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-10-14 14:16:44.256 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-14 14:16:45.020 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.Requisitions.DTO.DTO_Requisition.RequisitionResponseDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-14 14:16:45.064 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionsController.CreateRequisition (ModularERP) in 1449.1267ms
2025-10-14 14:16:45.068 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionsController.CreateRequisition (ModularERP)'
2025-10-14 14:16:45.072 +03:00 [INF] Request completed successfully with status code 200
2025-10-14 14:16:45.080 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/Requisitions - 200 null application/json; charset=utf-8 1550.2808ms
2025-10-14 14:17:04.613 +03:00 [INF] Starting web host...
2025-10-14 14:17:05.529 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 14:17:05.573 +03:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-10-14 14:17:05.641 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 14:17:05.646 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-14 14:17:05.651 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-14 14:17:05.711 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-14 14:17:05.727 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 14:17:05.732 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-14 14:17:05.740 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-14 14:17:05.751 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-10-14 14:17:05.756 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-14 14:17:05.922 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-14 14:17:05.930 +03:00 [INF] Master database initialized successfully
2025-10-14 14:17:07.438 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-14 14:17:07.538 +03:00 [INF] Now listening on: https://localhost:7168
2025-10-14 14:17:07.540 +03:00 [INF] Now listening on: http://localhost:5004
2025-10-14 14:17:07.611 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-14 14:17:07.613 +03:00 [INF] Hosting environment: Development
2025-10-14 14:17:07.615 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-10-14 14:17:08.031 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-14 14:17:08.145 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 114.971ms
2025-10-14 14:17:08.212 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-14 14:17:08.212 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-14 14:17:08.219 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 7.2814ms
2025-10-14 14:17:08.238 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 26.8238ms
2025-10-14 14:17:08.267 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-14 14:17:08.404 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 137.3973ms
2025-10-14 14:19:00.898 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/Requisitions - multipart/form-data; boundary=--------------------------378697670629963929692355 47769
2025-10-14 14:19:00.922 +03:00 [INF] Request started
2025-10-14 14:19:00.924 +03:00 [INF] === Incoming Request ===
2025-10-14 14:19:00.926 +03:00 [INF] Path: /api/Requisitions
2025-10-14 14:19:00.927 +03:00 [INF] Method: POST
2025-10-14 14:19:00.928 +03:00 [INF] === Headers ===
2025-10-14 14:19:00.931 +03:00 [INF] Accept: ["*/*"]
2025-10-14 14:19:00.936 +03:00 [INF] Connection: ["keep-alive"]
2025-10-14 14:19:00.938 +03:00 [INF] Host: ["localhost:7168"]
2025-10-14 14:19:00.940 +03:00 [INF] User-Agent: ["PostmanRuntime/7.48.0"]
2025-10-14 14:19:00.942 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-14 14:19:00.944 +03:00 [INF] Content-Type: ["multipart/form-data; boundary=--------------------------378697670629963929692355"]
2025-10-14 14:19:00.945 +03:00 [INF] Content-Length: ["47769"]
2025-10-14 14:19:00.947 +03:00 [INF] X-Tenant-ID: ["7e4a49eb-2e0e-4be8-8d60-c13d7db0f018"]
2025-10-14 14:19:00.948 +03:00 [INF] Postman-Token: ["1e79b3ab-0dd6-4f35-a7df-2f4953eacebf"]
2025-10-14 14:19:00.954 +03:00 [INF] ðŸ” TenantService returned: '7e4a49eb-2e0e-4be8-8d60-c13d7db0f018'
2025-10-14 14:19:00.956 +03:00 [INF] âœ… Processing request for tenant: 7e4a49eb-2e0e-4be8-8d60-c13d7db0f018
2025-10-14 14:19:00.958 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionsController.CreateRequisition (ModularERP)'
2025-10-14 14:19:00.976 +03:00 [INF] Route matched with {action = "CreateRequisition", controller = "Requisitions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Requisitions.DTO.DTO_Requisition.RequisitionResponseDto]]] CreateRequisition(ModularERP.Modules.Inventory.Features.Requisitions.Commends.Commends_Requisition.CreateRequisitionCommand) on controller ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionsController (ModularERP).
2025-10-14 14:19:00.983 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-14 14:19:01.093 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-10-14 14:19:01.625 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-14 14:19:02.273 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.Requisitions.DTO.DTO_Requisition.RequisitionResponseDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-14 14:19:02.313 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionsController.CreateRequisition (ModularERP) in 1331.1214ms
2025-10-14 14:19:02.318 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionsController.CreateRequisition (ModularERP)'
2025-10-14 14:19:02.322 +03:00 [INF] Request completed successfully with status code 200
2025-10-14 14:19:02.329 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/Requisitions - 200 null application/json; charset=utf-8 1430.5584ms
2025-10-14 14:21:55.752 +03:00 [INF] Starting web host...
2025-10-14 14:21:56.715 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 14:21:56.780 +03:00 [INF] Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-10-14 14:21:56.877 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 14:21:56.883 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-14 14:21:56.899 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-14 14:21:56.959 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-14 14:21:56.975 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 14:21:56.979 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-14 14:21:56.986 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-14 14:21:56.998 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-10-14 14:21:57.006 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-14 14:21:57.177 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-14 14:21:57.184 +03:00 [INF] Master database initialized successfully
2025-10-14 14:21:58.644 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-14 14:21:58.743 +03:00 [INF] Now listening on: https://localhost:7168
2025-10-14 14:21:58.745 +03:00 [INF] Now listening on: http://localhost:5004
2025-10-14 14:21:58.822 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-14 14:21:58.824 +03:00 [INF] Hosting environment: Development
2025-10-14 14:21:58.826 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-10-14 14:21:59.134 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-14 14:21:59.254 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 121.3674ms
2025-10-14 14:21:59.297 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-14 14:21:59.297 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-14 14:21:59.306 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 8.4521ms
2025-10-14 14:21:59.321 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 23.6831ms
2025-10-14 14:21:59.353 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-14 14:21:59.484 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 131.1205ms
2025-10-14 14:22:05.279 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/Requisitions - multipart/form-data; boundary=--------------------------217108504660884151750295 47769
2025-10-14 14:22:05.300 +03:00 [INF] Request started
2025-10-14 14:22:05.302 +03:00 [INF] === Incoming Request ===
2025-10-14 14:22:05.305 +03:00 [INF] Path: /api/Requisitions
2025-10-14 14:22:05.308 +03:00 [INF] Method: POST
2025-10-14 14:22:05.309 +03:00 [INF] === Headers ===
2025-10-14 14:22:05.314 +03:00 [INF] Accept: ["*/*"]
2025-10-14 14:22:05.319 +03:00 [INF] Connection: ["keep-alive"]
2025-10-14 14:22:05.321 +03:00 [INF] Host: ["localhost:7168"]
2025-10-14 14:22:05.324 +03:00 [INF] User-Agent: ["PostmanRuntime/7.48.0"]
2025-10-14 14:22:05.328 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-14 14:22:05.330 +03:00 [INF] Content-Type: ["multipart/form-data; boundary=--------------------------217108504660884151750295"]
2025-10-14 14:22:05.332 +03:00 [INF] Content-Length: ["47769"]
2025-10-14 14:22:05.334 +03:00 [INF] X-Tenant-ID: ["7e4a49eb-2e0e-4be8-8d60-c13d7db0f018"]
2025-10-14 14:22:05.336 +03:00 [INF] Postman-Token: ["7c1fa608-b69e-4f7b-9bbd-0d4e5ad0fa9b"]
2025-10-14 14:22:05.344 +03:00 [INF] ðŸ” TenantService returned: '7e4a49eb-2e0e-4be8-8d60-c13d7db0f018'
2025-10-14 14:22:05.346 +03:00 [INF] âœ… Processing request for tenant: 7e4a49eb-2e0e-4be8-8d60-c13d7db0f018
2025-10-14 14:22:05.348 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionsController.CreateRequisition (ModularERP)'
2025-10-14 14:22:05.371 +03:00 [INF] Route matched with {action = "CreateRequisition", controller = "Requisitions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Requisitions.DTO.DTO_Requisition.RequisitionResponseDto]]] CreateRequisition(ModularERP.Modules.Inventory.Features.Requisitions.Commends.Commends_Requisition.CreateRequisitionCommand) on controller ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionsController (ModularERP).
2025-10-14 14:22:05.380 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-14 14:22:05.515 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-10-14 14:22:06.208 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-14 14:22:06.974 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.Requisitions.DTO.DTO_Requisition.RequisitionResponseDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-14 14:22:07.025 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionsController.CreateRequisition (ModularERP) in 1645.1874ms
2025-10-14 14:22:07.028 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionsController.CreateRequisition (ModularERP)'
2025-10-14 14:22:07.030 +03:00 [INF] Request completed successfully with status code 200
2025-10-14 14:22:07.037 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/Requisitions - 200 null application/json; charset=utf-8 1758.1684ms
2025-10-14 14:22:12.624 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-14 14:22:12.632 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 8.6408ms
2025-10-14 14:22:12.646 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-14 14:22:12.646 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-14 14:22:12.651 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 4.3345ms
2025-10-14 14:22:12.666 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 20.053ms
2025-10-14 14:22:12.718 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-14 14:22:12.956 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 237.5815ms
2025-10-14 14:22:18.023 +03:00 [INF] Starting web host...
2025-10-14 14:22:18.970 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 14:22:19.021 +03:00 [INF] Executed DbCommand (35ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-10-14 14:22:19.089 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 14:22:19.095 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-14 14:22:19.110 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-14 14:22:19.165 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-14 14:22:19.181 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 14:22:19.186 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-14 14:22:19.193 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-14 14:22:19.204 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-10-14 14:22:19.211 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-14 14:22:19.418 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-14 14:22:19.425 +03:00 [INF] Master database initialized successfully
2025-10-14 14:22:20.942 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-14 14:22:21.043 +03:00 [INF] Now listening on: https://localhost:7168
2025-10-14 14:22:21.045 +03:00 [INF] Now listening on: http://localhost:5004
2025-10-14 14:22:21.122 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-14 14:22:21.134 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-14 14:22:21.136 +03:00 [INF] Hosting environment: Development
2025-10-14 14:22:21.137 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-10-14 14:22:21.245 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 124.3832ms
2025-10-14 14:22:21.290 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-14 14:22:21.290 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-14 14:22:21.297 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 6.5991ms
2025-10-14 14:22:21.326 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 36.1558ms
2025-10-14 14:22:21.355 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-14 14:22:21.541 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 185.6083ms
2025-10-14 14:22:25.633 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/Requisitions - multipart/form-data; boundary=--------------------------907299099696054627020827 47769
2025-10-14 14:22:25.651 +03:00 [INF] Request started
2025-10-14 14:22:25.653 +03:00 [INF] === Incoming Request ===
2025-10-14 14:22:25.656 +03:00 [INF] Path: /api/Requisitions
2025-10-14 14:22:25.657 +03:00 [INF] Method: POST
2025-10-14 14:22:25.658 +03:00 [INF] === Headers ===
2025-10-14 14:22:25.660 +03:00 [INF] Accept: ["*/*"]
2025-10-14 14:22:25.665 +03:00 [INF] Connection: ["keep-alive"]
2025-10-14 14:22:25.668 +03:00 [INF] Host: ["localhost:7168"]
2025-10-14 14:22:25.670 +03:00 [INF] User-Agent: ["PostmanRuntime/7.48.0"]
2025-10-14 14:22:25.673 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-14 14:22:25.675 +03:00 [INF] Content-Type: ["multipart/form-data; boundary=--------------------------907299099696054627020827"]
2025-10-14 14:22:25.676 +03:00 [INF] Content-Length: ["47769"]
2025-10-14 14:22:25.679 +03:00 [INF] X-Tenant-ID: ["7e4a49eb-2e0e-4be8-8d60-c13d7db0f018"]
2025-10-14 14:22:25.683 +03:00 [INF] Postman-Token: ["7dc21d5e-2d2d-423b-820c-0cbd64962b86"]
2025-10-14 14:22:25.691 +03:00 [INF] ðŸ” TenantService returned: '7e4a49eb-2e0e-4be8-8d60-c13d7db0f018'
2025-10-14 14:22:25.693 +03:00 [INF] âœ… Processing request for tenant: 7e4a49eb-2e0e-4be8-8d60-c13d7db0f018
2025-10-14 14:22:25.695 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionsController.CreateRequisition (ModularERP)'
2025-10-14 14:22:25.719 +03:00 [INF] Route matched with {action = "CreateRequisition", controller = "Requisitions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Requisitions.DTO.DTO_Requisition.RequisitionResponseDto]]] CreateRequisition(ModularERP.Modules.Inventory.Features.Requisitions.Commends.Commends_Requisition.CreateRequisitionCommand) on controller ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionsController (ModularERP).
2025-10-14 14:22:25.726 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-14 14:22:25.844 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-10-14 14:22:26.399 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-14 14:22:27.200 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.Requisitions.DTO.DTO_Requisition.RequisitionResponseDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-14 14:22:27.246 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionsController.CreateRequisition (ModularERP) in 1519.314ms
2025-10-14 14:22:27.250 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionsController.CreateRequisition (ModularERP)'
2025-10-14 14:22:27.252 +03:00 [INF] Request completed successfully with status code 200
2025-10-14 14:22:27.258 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/Requisitions - 200 null application/json; charset=utf-8 1625.8596ms
2025-10-14 14:27:34.013 +03:00 [INF] Starting web host...
2025-10-14 14:27:34.956 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 14:27:35.022 +03:00 [INF] Executed DbCommand (49ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-10-14 14:27:35.092 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 14:27:35.097 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-14 14:27:35.111 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-14 14:27:35.167 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-14 14:27:35.181 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 14:27:35.186 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-14 14:27:35.193 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-14 14:27:35.204 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-10-14 14:27:35.210 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-14 14:27:35.383 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-14 14:27:35.390 +03:00 [INF] Master database initialized successfully
2025-10-14 14:27:36.836 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-14 14:27:36.937 +03:00 [INF] Now listening on: https://localhost:7168
2025-10-14 14:27:36.940 +03:00 [INF] Now listening on: http://localhost:5004
2025-10-14 14:27:37.010 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-14 14:27:37.012 +03:00 [INF] Hosting environment: Development
2025-10-14 14:27:37.013 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-10-14 14:27:37.433 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-14 14:27:37.555 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 123.5114ms
2025-10-14 14:27:37.607 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-14 14:27:37.607 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-14 14:27:37.618 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 10.461ms
2025-10-14 14:27:37.634 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 26.4979ms
2025-10-14 14:27:37.668 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-14 14:27:37.800 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 131.3278ms
2025-10-14 14:28:02.902 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/Requisitions - multipart/form-data; boundary=--------------------------116612950901536170226842 47769
2025-10-14 14:28:02.919 +03:00 [INF] Request started
2025-10-14 14:28:02.922 +03:00 [INF] === Incoming Request ===
2025-10-14 14:28:02.924 +03:00 [INF] Path: /api/Requisitions
2025-10-14 14:28:02.925 +03:00 [INF] Method: POST
2025-10-14 14:28:02.926 +03:00 [INF] === Headers ===
2025-10-14 14:28:02.929 +03:00 [INF] Accept: ["*/*"]
2025-10-14 14:28:02.932 +03:00 [INF] Connection: ["keep-alive"]
2025-10-14 14:28:02.933 +03:00 [INF] Host: ["localhost:7168"]
2025-10-14 14:28:02.935 +03:00 [INF] User-Agent: ["PostmanRuntime/7.48.0"]
2025-10-14 14:28:02.937 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-14 14:28:02.939 +03:00 [INF] Content-Type: ["multipart/form-data; boundary=--------------------------116612950901536170226842"]
2025-10-14 14:28:02.941 +03:00 [INF] Content-Length: ["47769"]
2025-10-14 14:28:02.944 +03:00 [INF] X-Tenant-ID: ["7e4a49eb-2e0e-4be8-8d60-c13d7db0f018"]
2025-10-14 14:28:02.946 +03:00 [INF] Postman-Token: ["5babf875-075d-4f36-8a67-5e3de4c30450"]
2025-10-14 14:28:02.950 +03:00 [INF] ðŸ” TenantService returned: '7e4a49eb-2e0e-4be8-8d60-c13d7db0f018'
2025-10-14 14:28:02.951 +03:00 [INF] âœ… Processing request for tenant: 7e4a49eb-2e0e-4be8-8d60-c13d7db0f018
2025-10-14 14:28:02.953 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionsController.CreateRequisition (ModularERP)'
2025-10-14 14:28:02.970 +03:00 [INF] Route matched with {action = "CreateRequisition", controller = "Requisitions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Requisitions.DTO.DTO_Requisition.RequisitionResponseDto]]] CreateRequisition(ModularERP.Modules.Inventory.Features.Requisitions.Commends.Commends_Requisition.CreateRequisitionCommand) on controller ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionsController (ModularERP).
2025-10-14 14:28:02.976 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-14 14:28:03.063 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-10-14 14:28:03.509 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-14 14:28:04.153 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.Requisitions.DTO.DTO_Requisition.RequisitionResponseDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-14 14:28:04.196 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionsController.CreateRequisition (ModularERP) in 1219.4481ms
2025-10-14 14:28:04.200 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionsController.CreateRequisition (ModularERP)'
2025-10-14 14:28:04.205 +03:00 [INF] Request completed successfully with status code 200
2025-10-14 14:28:04.212 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/Requisitions - 200 null application/json; charset=utf-8 1309.3553ms
2025-10-14 14:28:18.543 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/Requisitions - multipart/form-data; boundary=--------------------------013855021780721736141542 47769
2025-10-14 14:28:18.551 +03:00 [INF] Request started
2025-10-14 14:28:18.553 +03:00 [INF] === Incoming Request ===
2025-10-14 14:28:18.554 +03:00 [INF] Path: /api/Requisitions
2025-10-14 14:28:18.556 +03:00 [INF] Method: POST
2025-10-14 14:28:18.557 +03:00 [INF] === Headers ===
2025-10-14 14:28:18.558 +03:00 [INF] Accept: ["*/*"]
2025-10-14 14:28:18.559 +03:00 [INF] Connection: ["keep-alive"]
2025-10-14 14:28:18.561 +03:00 [INF] Host: ["localhost:7168"]
2025-10-14 14:28:18.562 +03:00 [INF] User-Agent: ["PostmanRuntime/7.48.0"]
2025-10-14 14:28:18.564 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-14 14:28:18.565 +03:00 [INF] Content-Type: ["multipart/form-data; boundary=--------------------------013855021780721736141542"]
2025-10-14 14:28:18.567 +03:00 [INF] Content-Length: ["47769"]
2025-10-14 14:28:18.569 +03:00 [INF] X-Tenant-ID: ["7e4a49eb-2e0e-4be8-8d60-c13d7db0f018"]
2025-10-14 14:28:18.570 +03:00 [INF] Postman-Token: ["1ba245ac-2b11-44fc-8877-11382415f05f"]
2025-10-14 14:28:18.573 +03:00 [INF] ðŸ” TenantService returned: '7e4a49eb-2e0e-4be8-8d60-c13d7db0f018'
2025-10-14 14:28:18.576 +03:00 [INF] âœ… Processing request for tenant: 7e4a49eb-2e0e-4be8-8d60-c13d7db0f018
2025-10-14 14:28:18.577 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionsController.CreateRequisition (ModularERP)'
2025-10-14 14:28:18.578 +03:00 [INF] Route matched with {action = "CreateRequisition", controller = "Requisitions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Requisitions.DTO.DTO_Requisition.RequisitionResponseDto]]] CreateRequisition(ModularERP.Modules.Inventory.Features.Requisitions.Commends.Commends_Requisition.CreateRequisitionCommand) on controller ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionsController (ModularERP).
2025-10-14 14:28:18.664 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.Requisitions.DTO.DTO_Requisition.RequisitionResponseDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-14 14:28:18.667 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionsController.CreateRequisition (ModularERP) in 86.3294ms
2025-10-14 14:28:18.669 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionsController.CreateRequisition (ModularERP)'
2025-10-14 14:28:18.671 +03:00 [INF] Request completed successfully with status code 200
2025-10-14 14:28:18.673 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/Requisitions - 200 null application/json; charset=utf-8 129.5021ms
2025-10-14 14:33:11.410 +03:00 [INF] Starting web host...
2025-10-14 14:33:12.782 +03:00 [FTL] Host terminated unexpectedly
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at ModularERP.Program.Main(String[] args) in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 219
2025-10-14 14:33:34.306 +03:00 [INF] Starting web host...
2025-10-14 14:33:34.634 +03:00 [FTL] Host terminated unexpectedly
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at ModularERP.Program.Main(String[] args) in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 219
2025-10-14 14:34:08.796 +03:00 [INF] Starting web host...
2025-10-14 14:34:09.126 +03:00 [FTL] Host terminated unexpectedly
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at ModularERP.Program.Main(String[] args) in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 219
2025-10-14 14:34:27.273 +03:00 [INF] Starting web host...
2025-10-14 14:34:27.697 +03:00 [FTL] Host terminated unexpectedly
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at ModularERP.Program.Main(String[] args) in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 219
2025-10-14 14:34:41.098 +03:00 [INF] Starting web host...
2025-10-14 14:34:41.482 +03:00 [FTL] Host terminated unexpectedly
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at ModularERP.Program.Main(String[] args) in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 219
2025-10-14 14:36:18.953 +03:00 [INF] Starting web host...
2025-10-14 14:36:19.389 +03:00 [FTL] Host terminated unexpectedly
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at ModularERP.Program.Main(String[] args) in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 219
2025-10-14 14:36:32.970 +03:00 [INF] Starting web host...
2025-10-14 14:36:33.421 +03:00 [FTL] Host terminated unexpectedly
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at ModularERP.Program.Main(String[] args) in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 219
2025-10-14 14:37:02.325 +03:00 [INF] Starting web host...
2025-10-14 14:37:03.264 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 14:37:03.324 +03:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-10-14 14:37:03.395 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 14:37:03.402 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-10-14 14:37:03.416 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-10-14 14:37:03.473 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-10-14 14:37:03.490 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-14 14:37:03.494 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-14 14:37:03.501 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-14 14:37:03.512 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-10-14 14:37:03.520 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-10-14 14:37:03.698 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [MasterCompanies] AS [m]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-14 14:37:03.706 +03:00 [INF] Master database initialized successfully
2025-10-14 14:37:05.523 +03:00 [INF] User profile is available. Using 'C:\Users\hossny D. monkey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-14 14:37:05.638 +03:00 [INF] Now listening on: https://localhost:7168
2025-10-14 14:37:05.639 +03:00 [INF] Now listening on: http://localhost:5004
2025-10-14 14:37:05.729 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-14 14:37:05.731 +03:00 [INF] Hosting environment: Development
2025-10-14 14:37:05.733 +03:00 [INF] Content root path: E:\ModelerERP\ModularERP\ModularERP
2025-10-14 14:37:05.731 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-14 14:37:05.887 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 158.5522ms
2025-10-14 14:37:06.039 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-14 14:37:06.039 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-14 14:37:06.050 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 10.5033ms
2025-10-14 14:37:06.068 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 28.3676ms
2025-10-14 14:37:06.122 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-14 14:37:06.258 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 135.9047ms
2025-10-14 14:37:08.983 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7168/api/Requisitions - multipart/form-data; boundary=--------------------------908249154759101279706079 47769
2025-10-14 14:37:09.001 +03:00 [INF] Request started
2025-10-14 14:37:09.004 +03:00 [INF] === Incoming Request ===
2025-10-14 14:37:09.006 +03:00 [INF] Path: /api/Requisitions
2025-10-14 14:37:09.007 +03:00 [INF] Method: POST
2025-10-14 14:37:09.008 +03:00 [INF] === Headers ===
2025-10-14 14:37:09.010 +03:00 [INF] Accept: ["*/*"]
2025-10-14 14:37:09.015 +03:00 [INF] Connection: ["keep-alive"]
2025-10-14 14:37:09.017 +03:00 [INF] Host: ["localhost:7168"]
2025-10-14 14:37:09.018 +03:00 [INF] User-Agent: ["PostmanRuntime/7.48.0"]
2025-10-14 14:37:09.020 +03:00 [INF] Accept-Encoding: ["gzip, deflate, br"]
2025-10-14 14:37:09.021 +03:00 [INF] Content-Type: ["multipart/form-data; boundary=--------------------------908249154759101279706079"]
2025-10-14 14:37:09.023 +03:00 [INF] Content-Length: ["47769"]
2025-10-14 14:37:09.024 +03:00 [INF] X-Tenant-ID: ["7e4a49eb-2e0e-4be8-8d60-c13d7db0f018"]
2025-10-14 14:37:09.026 +03:00 [INF] Postman-Token: ["55896370-5551-4564-9ba0-25519e6de74c"]
2025-10-14 14:37:09.031 +03:00 [INF] ðŸ” TenantService returned: '7e4a49eb-2e0e-4be8-8d60-c13d7db0f018'
2025-10-14 14:37:09.033 +03:00 [INF] âœ… Processing request for tenant: 7e4a49eb-2e0e-4be8-8d60-c13d7db0f018
2025-10-14 14:37:09.035 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionsController.CreateRequisition (ModularERP)'
2025-10-14 14:37:09.052 +03:00 [INF] Route matched with {action = "CreateRequisition", controller = "Requisitions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Inventory.Features.Requisitions.DTO.DTO_Requisition.RequisitionResponseDto]]] CreateRequisition(ModularERP.Modules.Inventory.Features.Requisitions.Commends.Commends_Requisition.CreateRequisitionCommand) on controller ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionsController (ModularERP).
2025-10-14 14:37:09.058 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-14 14:37:09.149 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__companyId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[CreatedAt], [m].[CurrencyCode], [m].[DatabaseName], [m].[Name], [m].[Status]
FROM [MasterCompanies] AS [m]
WHERE [m].[Id] = @__companyId_0 AND [m].[Status] = N'Active'
2025-10-14 14:37:09.597 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-14 14:37:10.305 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Inventory.Features.Requisitions.DTO.DTO_Requisition.RequisitionResponseDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-14 14:37:10.348 +03:00 [INF] Executed action ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionsController.CreateRequisition (ModularERP) in 1290.4186ms
2025-10-14 14:37:10.351 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Inventory.Features.Requisitions.Controllers.RequisitionsController.CreateRequisition (ModularERP)'
2025-10-14 14:37:10.354 +03:00 [INF] Request completed successfully with status code 200
2025-10-14 14:37:10.360 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7168/api/Requisitions - 200 null application/json; charset=utf-8 1376.4336ms
2025-10-14 14:38:42.201 +03:00 [INF] Starting web host...
2025-10-14 14:38:42.571 +03:00 [FTL] Host terminated unexpectedly
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at ModularERP.Program.Main(String[] args) in E:\ModelerERP\ModularERP\ModularERP\Program.cs:line 219
