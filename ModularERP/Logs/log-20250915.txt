2025-09-15 01:32:23.906 +03:00 [INF] Starting web host...
2025-09-15 01:32:24.070 +03:00 [FTL] Host terminated unexpectedly
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at ModularERP.Program.Main(String[] args) in C:\Users\hossny D. monkey\source\repos\ModularERP\ModularERP\Program.cs:line 46
2025-09-15 01:32:26.878 +03:00 [INF] Starting web host...
2025-09-15 01:32:27.005 +03:00 [FTL] Host terminated unexpectedly
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at ModularERP.Program.Main(String[] args) in C:\Users\hossny D. monkey\source\repos\ModularERP\ModularERP\Program.cs:line 46
2025-09-15 01:38:21.480 +03:00 [INF] Starting web host...
2025-09-15 01:38:21.638 +03:00 [FTL] Host terminated unexpectedly
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at ModularERP.Program.Main(String[] args) in C:\Users\hossny D. monkey\source\repos\ModularERP\ModularERP\Program.cs:line 46
2025-09-15 01:38:33.550 +03:00 [INF] Starting web host...
2025-09-15 01:38:33.699 +03:00 [FTL] Host terminated unexpectedly
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at ModularERP.Program.Main(String[] args) in C:\Users\hossny D. monkey\source\repos\ModularERP\ModularERP\Program.cs:line 46
2025-09-15 01:55:21.330 +03:00 [INF] Starting web host...
2025-09-15 01:55:21.855 +03:00 [INF] Now listening on: https://localhost:7168
2025-09-15 01:55:21.858 +03:00 [INF] Now listening on: http://localhost:5004
2025-09-15 01:55:21.929 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-15 01:55:21.930 +03:00 [INF] Hosting environment: Development
2025-09-15 01:55:21.932 +03:00 [INF] Content root path: C:\Users\hossny D. monkey\source\repos\ModularERP\ModularERP
2025-09-15 01:55:41.937 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5004/index.html - null null
2025-09-15 01:55:42.085 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5004/index.html - 307 0 null 150.4995ms
2025-09-15 01:55:42.130 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/index.html - null null
2025-09-15 01:55:42.145 +03:00 [INF] Request started
2025-09-15 01:55:42.146 +03:00 [INF] Request completed successfully with status code 404
2025-09-15 01:55:42.148 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/index.html - 404 0 null 17.977ms
2025-09-15 01:55:42.155 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7168/index.html, Response status code: 404
2025-09-15 01:57:55.352 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5004/swagger - null null
2025-09-15 01:57:55.363 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5004/swagger - 307 0 null 10.5428ms
2025-09-15 01:57:55.382 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger - null null
2025-09-15 01:57:55.389 +03:00 [INF] Request started
2025-09-15 01:57:55.393 +03:00 [INF] Request completed successfully with status code 404
2025-09-15 01:57:55.397 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger - 404 0 null 14.3841ms
2025-09-15 01:57:55.412 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7168/swagger, Response status code: 404
2025-09-15 01:58:05.812 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger - null null
2025-09-15 01:58:05.821 +03:00 [INF] Request started
2025-09-15 01:58:05.823 +03:00 [INF] Request completed successfully with status code 404
2025-09-15 01:58:05.824 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger - 404 0 null 11.9563ms
2025-09-15 01:58:05.828 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7168/swagger, Response status code: 404
2025-09-15 01:58:22.554 +03:00 [INF] Starting web host...
2025-09-15 01:58:22.863 +03:00 [INF] Now listening on: https://localhost:7168
2025-09-15 01:58:22.866 +03:00 [INF] Now listening on: http://localhost:5004
2025-09-15 01:58:22.937 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-15 01:58:22.939 +03:00 [INF] Hosting environment: Development
2025-09-15 01:58:22.940 +03:00 [INF] Content root path: C:\Users\hossny D. monkey\source\repos\ModularERP\ModularERP
2025-09-15 01:58:48.075 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5004/swagger - null null
2025-09-15 01:58:48.194 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5004/swagger - 301 0 null 121.1055ms
2025-09-15 01:58:48.215 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5004/swagger/index.html - null null
2025-09-15 01:58:48.276 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5004/swagger/index.html - 200 null text/html;charset=utf-8 60.7135ms
2025-09-15 01:58:48.316 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5004/swagger/swagger-ui.css - null null
2025-09-15 01:58:48.324 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5004/swagger/swagger-ui-bundle.js - null null
2025-09-15 01:58:48.324 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5004/swagger/swagger-ui-standalone-preset.js - null null
2025-09-15 01:58:48.329 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5004/_framework/aspnetcore-browser-refresh.js - null null
2025-09-15 01:58:48.363 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5004/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 33.9694ms
2025-09-15 01:58:48.366 +03:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2025-09-15 01:58:48.366 +03:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2025-09-15 01:58:48.367 +03:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2025-09-15 01:58:48.378 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5004/swagger/swagger-ui.css - 200 152034 text/css 61.864ms
2025-09-15 01:58:48.378 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5004/swagger/swagger-ui-standalone-preset.js - 200 230280 text/javascript 53.8266ms
2025-09-15 01:58:48.381 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5004/swagger/swagger-ui-bundle.js - 200 1456926 text/javascript 57.494ms
2025-09-15 01:58:49.950 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5004/_vs/browserLink - null null
2025-09-15 01:58:50.094 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5004/_vs/browserLink - 200 null text/javascript; charset=UTF-8 144.7376ms
2025-09-15 01:58:50.111 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5004/swagger/favicon-32x32.png - null null
2025-09-15 01:58:50.114 +03:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2025-09-15 01:58:50.116 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5004/swagger/favicon-32x32.png - 200 628 image/png 4.9464ms
2025-09-15 01:58:50.577 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5004/swagger/v1/swagger.json - null null
2025-09-15 01:58:50.598 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5004/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 21.0608ms
2025-09-15 02:01:51.481 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5004/api/Treasury/statistics?companyId=3fa85f64-5717-4562-b3fc-2c963f66afa6 - null null
2025-09-15 02:01:51.514 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5004/api/Treasury/statistics?companyId=3fa85f64-5717-4562-b3fc-2c963f66afa6 - 307 0 null 33.1981ms
2025-09-15 02:01:51.550 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/api/Treasury/statistics?companyId=3fa85f64-5717-4562-b3fc-2c963f66afa6 - null null
2025-09-15 02:01:51.574 +03:00 [INF] Request started
2025-09-15 02:01:51.578 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController.GetTreasuryStatistics (ModularERP)'
2025-09-15 02:01:51.601 +03:00 [INF] Route matched with {action = "GetTreasuryStatistics", controller = "Treasury"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[System.Object]]] GetTreasuryStatistics(System.Nullable`1[System.Guid]) on controller ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController (ModularERP).
2025-09-15 02:01:51.609 +03:00 [INF] Executed action ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController.GetTreasuryStatistics (ModularERP) in 2.7213ms
2025-09-15 02:01:51.614 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController.GetTreasuryStatistics (ModularERP)'
2025-09-15 02:01:51.616 +03:00 [ERR] Unexpected error occurred
System.InvalidOperationException: Unable to resolve service for type 'MediatR.IMediator' while attempting to activate 'ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method9(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in C:\Users\hossny D. monkey\source\repos\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-09-15 02:01:51.646 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: An item with the same key has already been added. Key: X-Correlation-Id
   at System.Collections.Generic.Dictionary`2.TryInsert(TKey key, TValue value, InsertionBehavior behavior)
   at System.Collections.Generic.Dictionary`2.Add(TKey key, TValue value)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpResponseHeaders.AddValueUnknown(String key, StringValues value)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpResponseHeaders.AddValueFast(String key, StringValues value)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.System.Collections.Generic.IDictionary<System.String,Microsoft.Extensions.Primitives.StringValues>.Add(String key, StringValues value)
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.WriteErrorResponseAsync(HttpContext context, Object response, Int32 statusCode, String traceId, String correlationId) in C:\Users\hossny D. monkey\source\repos\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 133
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.HandleUnexpectedExceptionAsync(HttpContext context, Exception exception, String traceId, String correlationId) in C:\Users\hossny D. monkey\source\repos\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 124
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in C:\Users\hossny D. monkey\source\repos\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 55
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.InterfaceMiddlewareBinder.<>c__DisplayClass2_0.<<CreateMiddleware>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-15 02:01:51.660 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/api/Treasury/statistics?companyId=3fa85f64-5717-4562-b3fc-2c963f66afa6 - 500 null text/plain; charset=utf-8 109.9149ms
2025-09-15 02:02:01.494 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5004/api/Treasury/statistics?companyId=3fa85f64-5717-4562-b3fc-2c963f66afa6 - null null
2025-09-15 02:02:01.507 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5004/api/Treasury/statistics?companyId=3fa85f64-5717-4562-b3fc-2c963f66afa6 - 307 0 null 13.4008ms
2025-09-15 02:02:01.532 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/api/Treasury/statistics?companyId=3fa85f64-5717-4562-b3fc-2c963f66afa6 - null null
2025-09-15 02:02:01.536 +03:00 [INF] Request started
2025-09-15 02:02:01.537 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController.GetTreasuryStatistics (ModularERP)'
2025-09-15 02:02:01.538 +03:00 [INF] Route matched with {action = "GetTreasuryStatistics", controller = "Treasury"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[System.Object]]] GetTreasuryStatistics(System.Nullable`1[System.Guid]) on controller ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController (ModularERP).
2025-09-15 02:02:01.541 +03:00 [INF] Executed action ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController.GetTreasuryStatistics (ModularERP) in 0.1779ms
2025-09-15 02:02:01.544 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController.GetTreasuryStatistics (ModularERP)'
2025-09-15 02:02:01.545 +03:00 [ERR] Unexpected error occurred
System.InvalidOperationException: Unable to resolve service for type 'MediatR.IMediator' while attempting to activate 'ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method9(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in C:\Users\hossny D. monkey\source\repos\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-09-15 02:02:01.550 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: An item with the same key has already been added. Key: X-Correlation-Id
   at System.Collections.Generic.Dictionary`2.TryInsert(TKey key, TValue value, InsertionBehavior behavior)
   at System.Collections.Generic.Dictionary`2.Add(TKey key, TValue value)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpResponseHeaders.AddValueUnknown(String key, StringValues value)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpResponseHeaders.AddValueFast(String key, StringValues value)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.System.Collections.Generic.IDictionary<System.String,Microsoft.Extensions.Primitives.StringValues>.Add(String key, StringValues value)
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.WriteErrorResponseAsync(HttpContext context, Object response, Int32 statusCode, String traceId, String correlationId) in C:\Users\hossny D. monkey\source\repos\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 133
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.HandleUnexpectedExceptionAsync(HttpContext context, Exception exception, String traceId, String correlationId) in C:\Users\hossny D. monkey\source\repos\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 124
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in C:\Users\hossny D. monkey\source\repos\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 55
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.InterfaceMiddlewareBinder.<>c__DisplayClass2_0.<<CreateMiddleware>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-15 02:02:01.557 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/api/Treasury/statistics?companyId=3fa85f64-5717-4562-b3fc-2c963f66afa6 - 500 null text/plain; charset=utf-8 24.8488ms
2025-09-15 02:02:52.166 +03:00 [INF] Starting web host...
2025-09-15 02:02:52.699 +03:00 [INF] Now listening on: https://localhost:7168
2025-09-15 02:02:52.703 +03:00 [INF] Now listening on: http://localhost:5004
2025-09-15 02:02:52.919 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-15 02:02:52.921 +03:00 [INF] Hosting environment: Development
2025-09-15 02:02:52.923 +03:00 [INF] Content root path: C:\Users\hossny D. monkey\source\repos\ModularERP\ModularERP
2025-09-15 02:03:00.108 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5004/swagger/index.html - null null
2025-09-15 02:03:00.244 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5004/swagger/index.html - 200 null text/html;charset=utf-8 137.5562ms
2025-09-15 02:03:00.283 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5004/_framework/aspnetcore-browser-refresh.js - null null
2025-09-15 02:03:00.292 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5004/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 9.1906ms
2025-09-15 02:03:01.445 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5004/_vs/browserLink - null null
2025-09-15 02:03:01.477 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5004/_vs/browserLink - 200 null text/javascript; charset=UTF-8 32.3311ms
2025-09-15 02:03:01.726 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5004/swagger/v1/swagger.json - null null
2025-09-15 02:03:01.767 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5004/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 41.1004ms
2025-09-15 02:03:12.345 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5004/api/Treasury/statistics?companyId=3fa85f64-5717-4562-b3fc-2c963f66afa6 - null null
2025-09-15 02:03:12.353 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5004/api/Treasury/statistics?companyId=3fa85f64-5717-4562-b3fc-2c963f66afa6 - 307 0 null 8.3145ms
2025-09-15 02:03:12.388 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/api/Treasury/statistics?companyId=3fa85f64-5717-4562-b3fc-2c963f66afa6 - null null
2025-09-15 02:03:12.394 +03:00 [INF] CORS policy execution successful.
2025-09-15 02:03:12.410 +03:00 [INF] Request started
2025-09-15 02:03:12.413 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController.GetTreasuryStatistics (ModularERP)'
2025-09-15 02:03:12.431 +03:00 [INF] Route matched with {action = "GetTreasuryStatistics", controller = "Treasury"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[System.Object]]] GetTreasuryStatistics(System.Nullable`1[System.Guid]) on controller ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController (ModularERP).
2025-09-15 02:03:12.439 +03:00 [INF] Executed action ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController.GetTreasuryStatistics (ModularERP) in 1.3421ms
2025-09-15 02:03:12.443 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController.GetTreasuryStatistics (ModularERP)'
2025-09-15 02:03:12.445 +03:00 [ERR] Unexpected error occurred
System.InvalidOperationException: Unable to resolve service for type 'MediatR.IMediator' while attempting to activate 'ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method10(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in C:\Users\hossny D. monkey\source\repos\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-09-15 02:03:12.477 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: An item with the same key has already been added. Key: X-Correlation-Id
   at System.Collections.Generic.Dictionary`2.TryInsert(TKey key, TValue value, InsertionBehavior behavior)
   at System.Collections.Generic.Dictionary`2.Add(TKey key, TValue value)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpResponseHeaders.AddValueUnknown(String key, StringValues value)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpResponseHeaders.AddValueFast(String key, StringValues value)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpHeaders.System.Collections.Generic.IDictionary<System.String,Microsoft.Extensions.Primitives.StringValues>.Add(String key, StringValues value)
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.WriteErrorResponseAsync(HttpContext context, Object response, Int32 statusCode, String traceId, String correlationId) in C:\Users\hossny D. monkey\source\repos\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 133
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.HandleUnexpectedExceptionAsync(HttpContext context, Exception exception, String traceId, String correlationId) in C:\Users\hossny D. monkey\source\repos\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 124
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in C:\Users\hossny D. monkey\source\repos\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 55
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.InterfaceMiddlewareBinder.<>c__DisplayClass2_0.<<CreateMiddleware>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-09-15 02:03:12.502 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/api/Treasury/statistics?companyId=3fa85f64-5717-4562-b3fc-2c963f66afa6 - 500 null text/plain; charset=utf-8 114.1079ms
2025-09-15 02:04:22.419 +03:00 [INF] Starting web host...
2025-09-15 02:04:22.798 +03:00 [INF] Now listening on: https://localhost:7168
2025-09-15 02:04:22.801 +03:00 [INF] Now listening on: http://localhost:5004
2025-09-15 02:04:23.034 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-15 02:04:23.037 +03:00 [INF] Hosting environment: Development
2025-09-15 02:04:23.039 +03:00 [INF] Content root path: C:\Users\hossny D. monkey\source\repos\ModularERP\ModularERP
2025-09-15 02:04:26.451 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5004/swagger/index.html - null null
2025-09-15 02:04:26.583 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5004/swagger/index.html - 200 null text/html;charset=utf-8 133.0235ms
2025-09-15 02:04:26.602 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5004/_framework/aspnetcore-browser-refresh.js - null null
2025-09-15 02:04:26.605 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5004/_vs/browserLink - null null
2025-09-15 02:04:26.610 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5004/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 7.2173ms
2025-09-15 02:04:26.628 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5004/_vs/browserLink - 200 null text/javascript; charset=UTF-8 23.4254ms
2025-09-15 02:04:27.250 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5004/swagger/v1/swagger.json - null null
2025-09-15 02:04:27.296 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5004/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 46.0015ms
2025-09-15 02:04:35.309 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5004/api/Treasury/statistics?companyId=3fa85f64-5717-4562-b3fc-2c963f66afa6 - null null
2025-09-15 02:04:35.345 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5004/api/Treasury/statistics?companyId=3fa85f64-5717-4562-b3fc-2c963f66afa6 - 307 0 null 36.8417ms
2025-09-15 02:04:35.394 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/api/Treasury/statistics?companyId=3fa85f64-5717-4562-b3fc-2c963f66afa6 - null null
2025-09-15 02:04:35.401 +03:00 [INF] CORS policy execution successful.
2025-09-15 02:04:35.411 +03:00 [INF] Request started
2025-09-15 02:04:35.417 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController.GetTreasuryStatistics (ModularERP)'
2025-09-15 02:04:35.439 +03:00 [INF] Route matched with {action = "GetTreasuryStatistics", controller = "Treasury"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[System.Object]]] GetTreasuryStatistics(System.Nullable`1[System.Guid]) on controller ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController (ModularERP).
2025-09-15 02:04:35.449 +03:00 [INF] Executed action ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController.GetTreasuryStatistics (ModularERP) in 2.0773ms
2025-09-15 02:04:35.452 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController.GetTreasuryStatistics (ModularERP)'
2025-09-15 02:04:35.455 +03:00 [ERR] Unexpected error occurred
System.InvalidOperationException: Unable to resolve service for type 'MediatR.IMediator' while attempting to activate 'ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method10(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at ModularERP.Common.Middleware.GlobalErrorHandlerMiddleware.InvokeAsync(HttpContext context, RequestDelegate next) in C:\Users\hossny D. monkey\source\repos\ModularERP\ModularERP\Common\Middleware\GlobalErrorHandlerMiddleware.cs:line 40
2025-09-15 02:04:35.510 +03:00 [INF] Error response sent with status code 500
2025-09-15 02:04:35.512 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/api/Treasury/statistics?companyId=3fa85f64-5717-4562-b3fc-2c963f66afa6 - 500 null application/json; charset=utf-8 117.6787ms
2025-09-15 02:11:05.632 +03:00 [INF] Starting web host...
2025-09-15 02:11:05.875 +03:00 [FTL] Host terminated unexpectedly
System.AggregateException: Some services are not able to be constructed (Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[ModularERP.Modules.Finance.Features.Treasuries.Commands.DeleteTreasuryCommand,ModularERP.Common.ViewModel.ResponseViewModel`1[System.Boolean]] Lifetime: Transient ImplementationType: DeleteTreasuryHandler': Unable to resolve service for type 'Microsoft.EntityFrameworkCore.DbContext' while attempting to activate 'ModularERP.SharedKernel.Repository.GeneralRepository`1[ModularERP.Modules.Finance.Features.Treasuries.Models.Treasury]'.) (Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[ModularERP.Modules.Finance.Features.Treasuries.Commands.CreateTreasuryCommand,ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Finance.Features.Treasuries.DTO.TreasuryCreatedDto]] Lifetime: Transient ImplementationType: ModularERP.Modules.Finance.Features.Treasuries.Handlers.CreateTreasuryHandler': Unable to resolve service for type 'Microsoft.EntityFrameworkCore.DbContext' while attempting to activate 'ModularERP.SharedKernel.Repository.GeneralRepository`1[ModularERP.Modules.Finance.Features.Treasuries.Models.Treasury]'.) (Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[ModularERP.Modules.Finance.Features.Treasuries.Queries.GetAllTreasuriesQuery,ModularERP.Common.ViewModel.ResponseViewModel`1[System.Collections.Generic.IEnumerable`1[ModularERP.Modules.Finance.Features.Treasuries.DTO.TreasuryListDto]]] Lifetime: Transient ImplementationType: ModularERP.Modules.Finance.Features.Treasuries.Handlers.GetAllTreasuriesHandler': Unable to resolve service for type 'Microsoft.EntityFrameworkCore.DbContext' while attempting to activate 'ModularERP.SharedKernel.Repository.GeneralRepository`1[ModularERP.Modules.Finance.Features.Treasuries.Models.Treasury]'.) (Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[ModularERP.Modules.Finance.Features.Treasuries.Queries.GetTreasuryByIdQuery,ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Finance.Features.Treasuries.DTO.TreasuryDto]] Lifetime: Transient ImplementationType: ModularERP.Modules.Finance.Features.Treasuries.Handlers.GetTreasuryByIdHandler': Unable to resolve service for type 'Microsoft.EntityFrameworkCore.DbContext' while attempting to activate 'ModularERP.SharedKernel.Repository.GeneralRepository`1[ModularERP.Modules.Finance.Features.Treasuries.Models.Treasury]'.) (Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[ModularERP.Modules.Finance.Features.Treasuries.Commands.UpdateTreasuryCommand,ModularERP.Common.ViewModel.ResponseViewModel`1[System.Boolean]] Lifetime: Transient ImplementationType: ModularERP.Modules.Finance.Features.Treasuries.Handlers.UpdateTreasuryHandler': Unable to resolve service for type 'Microsoft.EntityFrameworkCore.DbContext' while attempting to activate 'ModularERP.SharedKernel.Repository.GeneralRepository`1[ModularERP.Modules.Finance.Features.Treasuries.Models.Treasury]'.)
 ---> System.InvalidOperationException: Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[ModularERP.Modules.Finance.Features.Treasuries.Commands.DeleteTreasuryCommand,ModularERP.Common.ViewModel.ResponseViewModel`1[System.Boolean]] Lifetime: Transient ImplementationType: DeleteTreasuryHandler': Unable to resolve service for type 'Microsoft.EntityFrameworkCore.DbContext' while attempting to activate 'ModularERP.SharedKernel.Repository.GeneralRepository`1[ModularERP.Modules.Finance.Features.Treasuries.Models.Treasury]'.
 ---> System.InvalidOperationException: Unable to resolve service for type 'Microsoft.EntityFrameworkCore.DbContext' while attempting to activate 'ModularERP.SharedKernel.Repository.GeneralRepository`1[ModularERP.Modules.Finance.Features.Treasuries.Models.Treasury]'.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateOpenGeneric(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot, Boolean throwOnConstraintViolation)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateOpenGeneric(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceDescriptor serviceDescriptor, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)
   at Microsoft.Extensions.DependencyInjection.ServiceCollectionContainerBuilderExtensions.BuildServiceProvider(IServiceCollection services, ServiceProviderOptions options)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at ModularERP.Program.Main(String[] args) in C:\Users\hossny D. monkey\source\repos\ModularERP\ModularERP\Program.cs:line 75
 ---> (Inner Exception #1) System.InvalidOperationException: Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[ModularERP.Modules.Finance.Features.Treasuries.Commands.CreateTreasuryCommand,ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Finance.Features.Treasuries.DTO.TreasuryCreatedDto]] Lifetime: Transient ImplementationType: ModularERP.Modules.Finance.Features.Treasuries.Handlers.CreateTreasuryHandler': Unable to resolve service for type 'Microsoft.EntityFrameworkCore.DbContext' while attempting to activate 'ModularERP.SharedKernel.Repository.GeneralRepository`1[ModularERP.Modules.Finance.Features.Treasuries.Models.Treasury]'.
 ---> System.InvalidOperationException: Unable to resolve service for type 'Microsoft.EntityFrameworkCore.DbContext' while attempting to activate 'ModularERP.SharedKernel.Repository.GeneralRepository`1[ModularERP.Modules.Finance.Features.Treasuries.Models.Treasury]'.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateOpenGeneric(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot, Boolean throwOnConstraintViolation)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateOpenGeneric(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceDescriptor serviceDescriptor, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)<---

 ---> (Inner Exception #2) System.InvalidOperationException: Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[ModularERP.Modules.Finance.Features.Treasuries.Queries.GetAllTreasuriesQuery,ModularERP.Common.ViewModel.ResponseViewModel`1[System.Collections.Generic.IEnumerable`1[ModularERP.Modules.Finance.Features.Treasuries.DTO.TreasuryListDto]]] Lifetime: Transient ImplementationType: ModularERP.Modules.Finance.Features.Treasuries.Handlers.GetAllTreasuriesHandler': Unable to resolve service for type 'Microsoft.EntityFrameworkCore.DbContext' while attempting to activate 'ModularERP.SharedKernel.Repository.GeneralRepository`1[ModularERP.Modules.Finance.Features.Treasuries.Models.Treasury]'.
 ---> System.InvalidOperationException: Unable to resolve service for type 'Microsoft.EntityFrameworkCore.DbContext' while attempting to activate 'ModularERP.SharedKernel.Repository.GeneralRepository`1[ModularERP.Modules.Finance.Features.Treasuries.Models.Treasury]'.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateOpenGeneric(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot, Boolean throwOnConstraintViolation)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateOpenGeneric(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceDescriptor serviceDescriptor, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)<---

 ---> (Inner Exception #3) System.InvalidOperationException: Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[ModularERP.Modules.Finance.Features.Treasuries.Queries.GetTreasuryByIdQuery,ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Finance.Features.Treasuries.DTO.TreasuryDto]] Lifetime: Transient ImplementationType: ModularERP.Modules.Finance.Features.Treasuries.Handlers.GetTreasuryByIdHandler': Unable to resolve service for type 'Microsoft.EntityFrameworkCore.DbContext' while attempting to activate 'ModularERP.SharedKernel.Repository.GeneralRepository`1[ModularERP.Modules.Finance.Features.Treasuries.Models.Treasury]'.
 ---> System.InvalidOperationException: Unable to resolve service for type 'Microsoft.EntityFrameworkCore.DbContext' while attempting to activate 'ModularERP.SharedKernel.Repository.GeneralRepository`1[ModularERP.Modules.Finance.Features.Treasuries.Models.Treasury]'.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateOpenGeneric(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot, Boolean throwOnConstraintViolation)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateOpenGeneric(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceDescriptor serviceDescriptor, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)<---

 ---> (Inner Exception #4) System.InvalidOperationException: Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[ModularERP.Modules.Finance.Features.Treasuries.Commands.UpdateTreasuryCommand,ModularERP.Common.ViewModel.ResponseViewModel`1[System.Boolean]] Lifetime: Transient ImplementationType: ModularERP.Modules.Finance.Features.Treasuries.Handlers.UpdateTreasuryHandler': Unable to resolve service for type 'Microsoft.EntityFrameworkCore.DbContext' while attempting to activate 'ModularERP.SharedKernel.Repository.GeneralRepository`1[ModularERP.Modules.Finance.Features.Treasuries.Models.Treasury]'.
 ---> System.InvalidOperationException: Unable to resolve service for type 'Microsoft.EntityFrameworkCore.DbContext' while attempting to activate 'ModularERP.SharedKernel.Repository.GeneralRepository`1[ModularERP.Modules.Finance.Features.Treasuries.Models.Treasury]'.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateOpenGeneric(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot, Boolean throwOnConstraintViolation)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateOpenGeneric(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceDescriptor serviceDescriptor, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)<---

2025-09-15 02:11:16.221 +03:00 [INF] Starting web host...
2025-09-15 02:11:16.377 +03:00 [FTL] Host terminated unexpectedly
System.AggregateException: Some services are not able to be constructed (Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[ModularERP.Modules.Finance.Features.Treasuries.Commands.DeleteTreasuryCommand,ModularERP.Common.ViewModel.ResponseViewModel`1[System.Boolean]] Lifetime: Transient ImplementationType: DeleteTreasuryHandler': Unable to resolve service for type 'Microsoft.EntityFrameworkCore.DbContext' while attempting to activate 'ModularERP.SharedKernel.Repository.GeneralRepository`1[ModularERP.Modules.Finance.Features.Treasuries.Models.Treasury]'.) (Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[ModularERP.Modules.Finance.Features.Treasuries.Commands.CreateTreasuryCommand,ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Finance.Features.Treasuries.DTO.TreasuryCreatedDto]] Lifetime: Transient ImplementationType: ModularERP.Modules.Finance.Features.Treasuries.Handlers.CreateTreasuryHandler': Unable to resolve service for type 'Microsoft.EntityFrameworkCore.DbContext' while attempting to activate 'ModularERP.SharedKernel.Repository.GeneralRepository`1[ModularERP.Modules.Finance.Features.Treasuries.Models.Treasury]'.) (Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[ModularERP.Modules.Finance.Features.Treasuries.Queries.GetAllTreasuriesQuery,ModularERP.Common.ViewModel.ResponseViewModel`1[System.Collections.Generic.IEnumerable`1[ModularERP.Modules.Finance.Features.Treasuries.DTO.TreasuryListDto]]] Lifetime: Transient ImplementationType: ModularERP.Modules.Finance.Features.Treasuries.Handlers.GetAllTreasuriesHandler': Unable to resolve service for type 'Microsoft.EntityFrameworkCore.DbContext' while attempting to activate 'ModularERP.SharedKernel.Repository.GeneralRepository`1[ModularERP.Modules.Finance.Features.Treasuries.Models.Treasury]'.) (Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[ModularERP.Modules.Finance.Features.Treasuries.Queries.GetTreasuryByIdQuery,ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Finance.Features.Treasuries.DTO.TreasuryDto]] Lifetime: Transient ImplementationType: ModularERP.Modules.Finance.Features.Treasuries.Handlers.GetTreasuryByIdHandler': Unable to resolve service for type 'Microsoft.EntityFrameworkCore.DbContext' while attempting to activate 'ModularERP.SharedKernel.Repository.GeneralRepository`1[ModularERP.Modules.Finance.Features.Treasuries.Models.Treasury]'.) (Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[ModularERP.Modules.Finance.Features.Treasuries.Commands.UpdateTreasuryCommand,ModularERP.Common.ViewModel.ResponseViewModel`1[System.Boolean]] Lifetime: Transient ImplementationType: ModularERP.Modules.Finance.Features.Treasuries.Handlers.UpdateTreasuryHandler': Unable to resolve service for type 'Microsoft.EntityFrameworkCore.DbContext' while attempting to activate 'ModularERP.SharedKernel.Repository.GeneralRepository`1[ModularERP.Modules.Finance.Features.Treasuries.Models.Treasury]'.)
 ---> System.InvalidOperationException: Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[ModularERP.Modules.Finance.Features.Treasuries.Commands.DeleteTreasuryCommand,ModularERP.Common.ViewModel.ResponseViewModel`1[System.Boolean]] Lifetime: Transient ImplementationType: DeleteTreasuryHandler': Unable to resolve service for type 'Microsoft.EntityFrameworkCore.DbContext' while attempting to activate 'ModularERP.SharedKernel.Repository.GeneralRepository`1[ModularERP.Modules.Finance.Features.Treasuries.Models.Treasury]'.
 ---> System.InvalidOperationException: Unable to resolve service for type 'Microsoft.EntityFrameworkCore.DbContext' while attempting to activate 'ModularERP.SharedKernel.Repository.GeneralRepository`1[ModularERP.Modules.Finance.Features.Treasuries.Models.Treasury]'.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateOpenGeneric(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot, Boolean throwOnConstraintViolation)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateOpenGeneric(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceDescriptor serviceDescriptor, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)
   at Microsoft.Extensions.DependencyInjection.ServiceCollectionContainerBuilderExtensions.BuildServiceProvider(IServiceCollection services, ServiceProviderOptions options)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at ModularERP.Program.Main(String[] args) in C:\Users\hossny D. monkey\source\repos\ModularERP\ModularERP\Program.cs:line 75
 ---> (Inner Exception #1) System.InvalidOperationException: Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[ModularERP.Modules.Finance.Features.Treasuries.Commands.CreateTreasuryCommand,ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Finance.Features.Treasuries.DTO.TreasuryCreatedDto]] Lifetime: Transient ImplementationType: ModularERP.Modules.Finance.Features.Treasuries.Handlers.CreateTreasuryHandler': Unable to resolve service for type 'Microsoft.EntityFrameworkCore.DbContext' while attempting to activate 'ModularERP.SharedKernel.Repository.GeneralRepository`1[ModularERP.Modules.Finance.Features.Treasuries.Models.Treasury]'.
 ---> System.InvalidOperationException: Unable to resolve service for type 'Microsoft.EntityFrameworkCore.DbContext' while attempting to activate 'ModularERP.SharedKernel.Repository.GeneralRepository`1[ModularERP.Modules.Finance.Features.Treasuries.Models.Treasury]'.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateOpenGeneric(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot, Boolean throwOnConstraintViolation)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateOpenGeneric(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceDescriptor serviceDescriptor, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)<---

 ---> (Inner Exception #2) System.InvalidOperationException: Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[ModularERP.Modules.Finance.Features.Treasuries.Queries.GetAllTreasuriesQuery,ModularERP.Common.ViewModel.ResponseViewModel`1[System.Collections.Generic.IEnumerable`1[ModularERP.Modules.Finance.Features.Treasuries.DTO.TreasuryListDto]]] Lifetime: Transient ImplementationType: ModularERP.Modules.Finance.Features.Treasuries.Handlers.GetAllTreasuriesHandler': Unable to resolve service for type 'Microsoft.EntityFrameworkCore.DbContext' while attempting to activate 'ModularERP.SharedKernel.Repository.GeneralRepository`1[ModularERP.Modules.Finance.Features.Treasuries.Models.Treasury]'.
 ---> System.InvalidOperationException: Unable to resolve service for type 'Microsoft.EntityFrameworkCore.DbContext' while attempting to activate 'ModularERP.SharedKernel.Repository.GeneralRepository`1[ModularERP.Modules.Finance.Features.Treasuries.Models.Treasury]'.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateOpenGeneric(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot, Boolean throwOnConstraintViolation)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateOpenGeneric(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceDescriptor serviceDescriptor, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)<---

 ---> (Inner Exception #3) System.InvalidOperationException: Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[ModularERP.Modules.Finance.Features.Treasuries.Queries.GetTreasuryByIdQuery,ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Finance.Features.Treasuries.DTO.TreasuryDto]] Lifetime: Transient ImplementationType: ModularERP.Modules.Finance.Features.Treasuries.Handlers.GetTreasuryByIdHandler': Unable to resolve service for type 'Microsoft.EntityFrameworkCore.DbContext' while attempting to activate 'ModularERP.SharedKernel.Repository.GeneralRepository`1[ModularERP.Modules.Finance.Features.Treasuries.Models.Treasury]'.
 ---> System.InvalidOperationException: Unable to resolve service for type 'Microsoft.EntityFrameworkCore.DbContext' while attempting to activate 'ModularERP.SharedKernel.Repository.GeneralRepository`1[ModularERP.Modules.Finance.Features.Treasuries.Models.Treasury]'.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateOpenGeneric(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot, Boolean throwOnConstraintViolation)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateOpenGeneric(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceDescriptor serviceDescriptor, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)<---

 ---> (Inner Exception #4) System.InvalidOperationException: Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[ModularERP.Modules.Finance.Features.Treasuries.Commands.UpdateTreasuryCommand,ModularERP.Common.ViewModel.ResponseViewModel`1[System.Boolean]] Lifetime: Transient ImplementationType: ModularERP.Modules.Finance.Features.Treasuries.Handlers.UpdateTreasuryHandler': Unable to resolve service for type 'Microsoft.EntityFrameworkCore.DbContext' while attempting to activate 'ModularERP.SharedKernel.Repository.GeneralRepository`1[ModularERP.Modules.Finance.Features.Treasuries.Models.Treasury]'.
 ---> System.InvalidOperationException: Unable to resolve service for type 'Microsoft.EntityFrameworkCore.DbContext' while attempting to activate 'ModularERP.SharedKernel.Repository.GeneralRepository`1[ModularERP.Modules.Finance.Features.Treasuries.Models.Treasury]'.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateOpenGeneric(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot, Boolean throwOnConstraintViolation)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateOpenGeneric(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceDescriptor serviceDescriptor, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)<---

2025-09-15 02:11:25.527 +03:00 [INF] Starting web host...
2025-09-15 02:11:25.686 +03:00 [FTL] Host terminated unexpectedly
System.AggregateException: Some services are not able to be constructed (Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[ModularERP.Modules.Finance.Features.Treasuries.Commands.DeleteTreasuryCommand,ModularERP.Common.ViewModel.ResponseViewModel`1[System.Boolean]] Lifetime: Transient ImplementationType: DeleteTreasuryHandler': Unable to resolve service for type 'Microsoft.EntityFrameworkCore.DbContext' while attempting to activate 'ModularERP.SharedKernel.Repository.GeneralRepository`1[ModularERP.Modules.Finance.Features.Treasuries.Models.Treasury]'.) (Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[ModularERP.Modules.Finance.Features.Treasuries.Commands.CreateTreasuryCommand,ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Finance.Features.Treasuries.DTO.TreasuryCreatedDto]] Lifetime: Transient ImplementationType: ModularERP.Modules.Finance.Features.Treasuries.Handlers.CreateTreasuryHandler': Unable to resolve service for type 'Microsoft.EntityFrameworkCore.DbContext' while attempting to activate 'ModularERP.SharedKernel.Repository.GeneralRepository`1[ModularERP.Modules.Finance.Features.Treasuries.Models.Treasury]'.) (Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[ModularERP.Modules.Finance.Features.Treasuries.Queries.GetAllTreasuriesQuery,ModularERP.Common.ViewModel.ResponseViewModel`1[System.Collections.Generic.IEnumerable`1[ModularERP.Modules.Finance.Features.Treasuries.DTO.TreasuryListDto]]] Lifetime: Transient ImplementationType: ModularERP.Modules.Finance.Features.Treasuries.Handlers.GetAllTreasuriesHandler': Unable to resolve service for type 'Microsoft.EntityFrameworkCore.DbContext' while attempting to activate 'ModularERP.SharedKernel.Repository.GeneralRepository`1[ModularERP.Modules.Finance.Features.Treasuries.Models.Treasury]'.) (Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[ModularERP.Modules.Finance.Features.Treasuries.Queries.GetTreasuryByIdQuery,ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Finance.Features.Treasuries.DTO.TreasuryDto]] Lifetime: Transient ImplementationType: ModularERP.Modules.Finance.Features.Treasuries.Handlers.GetTreasuryByIdHandler': Unable to resolve service for type 'Microsoft.EntityFrameworkCore.DbContext' while attempting to activate 'ModularERP.SharedKernel.Repository.GeneralRepository`1[ModularERP.Modules.Finance.Features.Treasuries.Models.Treasury]'.) (Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[ModularERP.Modules.Finance.Features.Treasuries.Commands.UpdateTreasuryCommand,ModularERP.Common.ViewModel.ResponseViewModel`1[System.Boolean]] Lifetime: Transient ImplementationType: ModularERP.Modules.Finance.Features.Treasuries.Handlers.UpdateTreasuryHandler': Unable to resolve service for type 'Microsoft.EntityFrameworkCore.DbContext' while attempting to activate 'ModularERP.SharedKernel.Repository.GeneralRepository`1[ModularERP.Modules.Finance.Features.Treasuries.Models.Treasury]'.)
 ---> System.InvalidOperationException: Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[ModularERP.Modules.Finance.Features.Treasuries.Commands.DeleteTreasuryCommand,ModularERP.Common.ViewModel.ResponseViewModel`1[System.Boolean]] Lifetime: Transient ImplementationType: DeleteTreasuryHandler': Unable to resolve service for type 'Microsoft.EntityFrameworkCore.DbContext' while attempting to activate 'ModularERP.SharedKernel.Repository.GeneralRepository`1[ModularERP.Modules.Finance.Features.Treasuries.Models.Treasury]'.
 ---> System.InvalidOperationException: Unable to resolve service for type 'Microsoft.EntityFrameworkCore.DbContext' while attempting to activate 'ModularERP.SharedKernel.Repository.GeneralRepository`1[ModularERP.Modules.Finance.Features.Treasuries.Models.Treasury]'.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateOpenGeneric(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot, Boolean throwOnConstraintViolation)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateOpenGeneric(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceDescriptor serviceDescriptor, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)
   at Microsoft.Extensions.DependencyInjection.ServiceCollectionContainerBuilderExtensions.BuildServiceProvider(IServiceCollection services, ServiceProviderOptions options)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at ModularERP.Program.Main(String[] args) in C:\Users\hossny D. monkey\source\repos\ModularERP\ModularERP\Program.cs:line 75
 ---> (Inner Exception #1) System.InvalidOperationException: Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[ModularERP.Modules.Finance.Features.Treasuries.Commands.CreateTreasuryCommand,ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Finance.Features.Treasuries.DTO.TreasuryCreatedDto]] Lifetime: Transient ImplementationType: ModularERP.Modules.Finance.Features.Treasuries.Handlers.CreateTreasuryHandler': Unable to resolve service for type 'Microsoft.EntityFrameworkCore.DbContext' while attempting to activate 'ModularERP.SharedKernel.Repository.GeneralRepository`1[ModularERP.Modules.Finance.Features.Treasuries.Models.Treasury]'.
 ---> System.InvalidOperationException: Unable to resolve service for type 'Microsoft.EntityFrameworkCore.DbContext' while attempting to activate 'ModularERP.SharedKernel.Repository.GeneralRepository`1[ModularERP.Modules.Finance.Features.Treasuries.Models.Treasury]'.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateOpenGeneric(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot, Boolean throwOnConstraintViolation)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateOpenGeneric(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceDescriptor serviceDescriptor, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)<---

 ---> (Inner Exception #2) System.InvalidOperationException: Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[ModularERP.Modules.Finance.Features.Treasuries.Queries.GetAllTreasuriesQuery,ModularERP.Common.ViewModel.ResponseViewModel`1[System.Collections.Generic.IEnumerable`1[ModularERP.Modules.Finance.Features.Treasuries.DTO.TreasuryListDto]]] Lifetime: Transient ImplementationType: ModularERP.Modules.Finance.Features.Treasuries.Handlers.GetAllTreasuriesHandler': Unable to resolve service for type 'Microsoft.EntityFrameworkCore.DbContext' while attempting to activate 'ModularERP.SharedKernel.Repository.GeneralRepository`1[ModularERP.Modules.Finance.Features.Treasuries.Models.Treasury]'.
 ---> System.InvalidOperationException: Unable to resolve service for type 'Microsoft.EntityFrameworkCore.DbContext' while attempting to activate 'ModularERP.SharedKernel.Repository.GeneralRepository`1[ModularERP.Modules.Finance.Features.Treasuries.Models.Treasury]'.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateOpenGeneric(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot, Boolean throwOnConstraintViolation)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateOpenGeneric(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceDescriptor serviceDescriptor, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)<---

 ---> (Inner Exception #3) System.InvalidOperationException: Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[ModularERP.Modules.Finance.Features.Treasuries.Queries.GetTreasuryByIdQuery,ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Finance.Features.Treasuries.DTO.TreasuryDto]] Lifetime: Transient ImplementationType: ModularERP.Modules.Finance.Features.Treasuries.Handlers.GetTreasuryByIdHandler': Unable to resolve service for type 'Microsoft.EntityFrameworkCore.DbContext' while attempting to activate 'ModularERP.SharedKernel.Repository.GeneralRepository`1[ModularERP.Modules.Finance.Features.Treasuries.Models.Treasury]'.
 ---> System.InvalidOperationException: Unable to resolve service for type 'Microsoft.EntityFrameworkCore.DbContext' while attempting to activate 'ModularERP.SharedKernel.Repository.GeneralRepository`1[ModularERP.Modules.Finance.Features.Treasuries.Models.Treasury]'.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateOpenGeneric(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot, Boolean throwOnConstraintViolation)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateOpenGeneric(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceDescriptor serviceDescriptor, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)<---

 ---> (Inner Exception #4) System.InvalidOperationException: Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[ModularERP.Modules.Finance.Features.Treasuries.Commands.UpdateTreasuryCommand,ModularERP.Common.ViewModel.ResponseViewModel`1[System.Boolean]] Lifetime: Transient ImplementationType: ModularERP.Modules.Finance.Features.Treasuries.Handlers.UpdateTreasuryHandler': Unable to resolve service for type 'Microsoft.EntityFrameworkCore.DbContext' while attempting to activate 'ModularERP.SharedKernel.Repository.GeneralRepository`1[ModularERP.Modules.Finance.Features.Treasuries.Models.Treasury]'.
 ---> System.InvalidOperationException: Unable to resolve service for type 'Microsoft.EntityFrameworkCore.DbContext' while attempting to activate 'ModularERP.SharedKernel.Repository.GeneralRepository`1[ModularERP.Modules.Finance.Features.Treasuries.Models.Treasury]'.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateOpenGeneric(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot, Boolean throwOnConstraintViolation)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateOpenGeneric(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceDescriptor serviceDescriptor, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)<---

2025-09-15 02:12:33.802 +03:00 [INF] Starting web host...
2025-09-15 02:12:33.962 +03:00 [FTL] Host terminated unexpectedly
System.AggregateException: Some services are not able to be constructed (Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[ModularERP.Modules.Finance.Features.Treasuries.Commands.CreateTreasuryCommand,ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Finance.Features.Treasuries.DTO.TreasuryCreatedDto]] Lifetime: Transient ImplementationType: ModularERP.Modules.Finance.Features.Treasuries.Handlers.CreateTreasuryHandler': Unable to resolve service for type 'AutoMapper.IMapper' while attempting to activate 'ModularERP.Modules.Finance.Features.Treasuries.Handlers.CreateTreasuryHandler'.) (Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[ModularERP.Modules.Finance.Features.Treasuries.Queries.GetAllTreasuriesQuery,ModularERP.Common.ViewModel.ResponseViewModel`1[System.Collections.Generic.IEnumerable`1[ModularERP.Modules.Finance.Features.Treasuries.DTO.TreasuryListDto]]] Lifetime: Transient ImplementationType: ModularERP.Modules.Finance.Features.Treasuries.Handlers.GetAllTreasuriesHandler': GenericArguments[0], 'ModularERP.Modules.Finance.Features.Currencies.Models.Currency', on 'ModularERP.SharedKernel.Repository.GeneralRepository`1[T]' violates the constraint of type 'T'.) (Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[ModularERP.Modules.Finance.Features.Treasuries.Queries.GetTreasuryByIdQuery,ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Finance.Features.Treasuries.DTO.TreasuryDto]] Lifetime: Transient ImplementationType: ModularERP.Modules.Finance.Features.Treasuries.Handlers.GetTreasuryByIdHandler': GenericArguments[0], 'ModularERP.Modules.Finance.Features.Currencies.Models.Currency', on 'ModularERP.SharedKernel.Repository.GeneralRepository`1[T]' violates the constraint of type 'T'.) (Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[ModularERP.Modules.Finance.Features.Treasuries.Commands.UpdateTreasuryCommand,ModularERP.Common.ViewModel.ResponseViewModel`1[System.Boolean]] Lifetime: Transient ImplementationType: ModularERP.Modules.Finance.Features.Treasuries.Handlers.UpdateTreasuryHandler': Unable to resolve service for type 'AutoMapper.IMapper' while attempting to activate 'ModularERP.Modules.Finance.Features.Treasuries.Handlers.UpdateTreasuryHandler'.)
 ---> System.InvalidOperationException: Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[ModularERP.Modules.Finance.Features.Treasuries.Commands.CreateTreasuryCommand,ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Finance.Features.Treasuries.DTO.TreasuryCreatedDto]] Lifetime: Transient ImplementationType: ModularERP.Modules.Finance.Features.Treasuries.Handlers.CreateTreasuryHandler': Unable to resolve service for type 'AutoMapper.IMapper' while attempting to activate 'ModularERP.Modules.Finance.Features.Treasuries.Handlers.CreateTreasuryHandler'.
 ---> System.InvalidOperationException: Unable to resolve service for type 'AutoMapper.IMapper' while attempting to activate 'ModularERP.Modules.Finance.Features.Treasuries.Handlers.CreateTreasuryHandler'.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceDescriptor serviceDescriptor, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)
   at Microsoft.Extensions.DependencyInjection.ServiceCollectionContainerBuilderExtensions.BuildServiceProvider(IServiceCollection services, ServiceProviderOptions options)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at ModularERP.Program.Main(String[] args) in C:\Users\hossny D. monkey\source\repos\ModularERP\ModularERP\Program.cs:line 75
 ---> (Inner Exception #1) System.InvalidOperationException: Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[ModularERP.Modules.Finance.Features.Treasuries.Queries.GetAllTreasuriesQuery,ModularERP.Common.ViewModel.ResponseViewModel`1[System.Collections.Generic.IEnumerable`1[ModularERP.Modules.Finance.Features.Treasuries.DTO.TreasuryListDto]]] Lifetime: Transient ImplementationType: ModularERP.Modules.Finance.Features.Treasuries.Handlers.GetAllTreasuriesHandler': GenericArguments[0], 'ModularERP.Modules.Finance.Features.Currencies.Models.Currency', on 'ModularERP.SharedKernel.Repository.GeneralRepository`1[T]' violates the constraint of type 'T'.
 ---> System.ArgumentException: GenericArguments[0], 'ModularERP.Modules.Finance.Features.Currencies.Models.Currency', on 'ModularERP.SharedKernel.Repository.GeneralRepository`1[T]' violates the constraint of type 'T'.
 ---> System.TypeLoadException: GenericArguments[0], 'ModularERP.Modules.Finance.Features.Currencies.Models.Currency', on 'ModularERP.SharedKernel.Repository.GeneralRepository`1[T]' violates the constraint of type parameter 'T'.
   at System.RuntimeTypeHandle.Instantiate(RuntimeType inst)
   at System.RuntimeType.MakeGenericType(Type[] instantiation)
   --- End of inner exception stack trace ---
   at System.RuntimeType.ValidateGenericArguments(MemberInfo definition, RuntimeType[] genericArguments, Exception e)
   at System.RuntimeType.MakeGenericType(Type[] instantiation)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateOpenGeneric(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot, Boolean throwOnConstraintViolation)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateOpenGeneric(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceDescriptor serviceDescriptor, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)<---

 ---> (Inner Exception #2) System.InvalidOperationException: Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[ModularERP.Modules.Finance.Features.Treasuries.Queries.GetTreasuryByIdQuery,ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Finance.Features.Treasuries.DTO.TreasuryDto]] Lifetime: Transient ImplementationType: ModularERP.Modules.Finance.Features.Treasuries.Handlers.GetTreasuryByIdHandler': GenericArguments[0], 'ModularERP.Modules.Finance.Features.Currencies.Models.Currency', on 'ModularERP.SharedKernel.Repository.GeneralRepository`1[T]' violates the constraint of type 'T'.
 ---> System.ArgumentException: GenericArguments[0], 'ModularERP.Modules.Finance.Features.Currencies.Models.Currency', on 'ModularERP.SharedKernel.Repository.GeneralRepository`1[T]' violates the constraint of type 'T'.
 ---> System.TypeLoadException: GenericArguments[0], 'ModularERP.Modules.Finance.Features.Currencies.Models.Currency', on 'ModularERP.SharedKernel.Repository.GeneralRepository`1[T]' violates the constraint of type parameter 'T'.
   at System.RuntimeTypeHandle.Instantiate(RuntimeType inst)
   at System.RuntimeType.MakeGenericType(Type[] instantiation)
   --- End of inner exception stack trace ---
   at System.RuntimeType.ValidateGenericArguments(MemberInfo definition, RuntimeType[] genericArguments, Exception e)
   at System.RuntimeType.MakeGenericType(Type[] instantiation)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateOpenGeneric(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot, Boolean throwOnConstraintViolation)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateOpenGeneric(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceDescriptor serviceDescriptor, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)<---

 ---> (Inner Exception #3) System.InvalidOperationException: Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[ModularERP.Modules.Finance.Features.Treasuries.Commands.UpdateTreasuryCommand,ModularERP.Common.ViewModel.ResponseViewModel`1[System.Boolean]] Lifetime: Transient ImplementationType: ModularERP.Modules.Finance.Features.Treasuries.Handlers.UpdateTreasuryHandler': Unable to resolve service for type 'AutoMapper.IMapper' while attempting to activate 'ModularERP.Modules.Finance.Features.Treasuries.Handlers.UpdateTreasuryHandler'.
 ---> System.InvalidOperationException: Unable to resolve service for type 'AutoMapper.IMapper' while attempting to activate 'ModularERP.Modules.Finance.Features.Treasuries.Handlers.UpdateTreasuryHandler'.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceDescriptor serviceDescriptor, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)<---

2025-09-15 02:24:19.776 +03:00 [INF] Starting web host...
2025-09-15 02:24:19.971 +03:00 [FTL] Host terminated unexpectedly
System.AggregateException: Some services are not able to be constructed (Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[ModularERP.Modules.Finance.Features.Treasuries.Queries.GetAllTreasuriesQuery,ModularERP.Common.ViewModel.ResponseViewModel`1[System.Collections.Generic.IEnumerable`1[ModularERP.Modules.Finance.Features.Treasuries.DTO.TreasuryListDto]]] Lifetime: Transient ImplementationType: ModularERP.Modules.Finance.Features.Treasuries.Handlers.GetAllTreasuriesHandler': GenericArguments[0], 'ModularERP.Modules.Finance.Features.Currencies.Models.Currency', on 'ModularERP.SharedKernel.Repository.GeneralRepository`1[T]' violates the constraint of type 'T'.) (Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[ModularERP.Modules.Finance.Features.Treasuries.Queries.GetTreasuryByIdQuery,ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Finance.Features.Treasuries.DTO.TreasuryDto]] Lifetime: Transient ImplementationType: ModularERP.Modules.Finance.Features.Treasuries.Handlers.GetTreasuryByIdHandler': GenericArguments[0], 'ModularERP.Modules.Finance.Features.Currencies.Models.Currency', on 'ModularERP.SharedKernel.Repository.GeneralRepository`1[T]' violates the constraint of type 'T'.)
 ---> System.InvalidOperationException: Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[ModularERP.Modules.Finance.Features.Treasuries.Queries.GetAllTreasuriesQuery,ModularERP.Common.ViewModel.ResponseViewModel`1[System.Collections.Generic.IEnumerable`1[ModularERP.Modules.Finance.Features.Treasuries.DTO.TreasuryListDto]]] Lifetime: Transient ImplementationType: ModularERP.Modules.Finance.Features.Treasuries.Handlers.GetAllTreasuriesHandler': GenericArguments[0], 'ModularERP.Modules.Finance.Features.Currencies.Models.Currency', on 'ModularERP.SharedKernel.Repository.GeneralRepository`1[T]' violates the constraint of type 'T'.
 ---> System.ArgumentException: GenericArguments[0], 'ModularERP.Modules.Finance.Features.Currencies.Models.Currency', on 'ModularERP.SharedKernel.Repository.GeneralRepository`1[T]' violates the constraint of type 'T'.
 ---> System.TypeLoadException: GenericArguments[0], 'ModularERP.Modules.Finance.Features.Currencies.Models.Currency', on 'ModularERP.SharedKernel.Repository.GeneralRepository`1[T]' violates the constraint of type parameter 'T'.
   at System.RuntimeTypeHandle.Instantiate(RuntimeType inst)
   at System.RuntimeType.MakeGenericType(Type[] instantiation)
   --- End of inner exception stack trace ---
   at System.RuntimeType.ValidateGenericArguments(MemberInfo definition, RuntimeType[] genericArguments, Exception e)
   at System.RuntimeType.MakeGenericType(Type[] instantiation)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateOpenGeneric(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot, Boolean throwOnConstraintViolation)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateOpenGeneric(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceDescriptor serviceDescriptor, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)
   at Microsoft.Extensions.DependencyInjection.ServiceCollectionContainerBuilderExtensions.BuildServiceProvider(IServiceCollection services, ServiceProviderOptions options)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at ModularERP.Program.Main(String[] args) in C:\Users\hossny D. monkey\source\repos\ModularERP\ModularERP\Program.cs:line 97
 ---> (Inner Exception #1) System.InvalidOperationException: Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[ModularERP.Modules.Finance.Features.Treasuries.Queries.GetTreasuryByIdQuery,ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Finance.Features.Treasuries.DTO.TreasuryDto]] Lifetime: Transient ImplementationType: ModularERP.Modules.Finance.Features.Treasuries.Handlers.GetTreasuryByIdHandler': GenericArguments[0], 'ModularERP.Modules.Finance.Features.Currencies.Models.Currency', on 'ModularERP.SharedKernel.Repository.GeneralRepository`1[T]' violates the constraint of type 'T'.
 ---> System.ArgumentException: GenericArguments[0], 'ModularERP.Modules.Finance.Features.Currencies.Models.Currency', on 'ModularERP.SharedKernel.Repository.GeneralRepository`1[T]' violates the constraint of type 'T'.
 ---> System.TypeLoadException: GenericArguments[0], 'ModularERP.Modules.Finance.Features.Currencies.Models.Currency', on 'ModularERP.SharedKernel.Repository.GeneralRepository`1[T]' violates the constraint of type parameter 'T'.
   at System.RuntimeTypeHandle.Instantiate(RuntimeType inst)
   at System.RuntimeType.MakeGenericType(Type[] instantiation)
   --- End of inner exception stack trace ---
   at System.RuntimeType.ValidateGenericArguments(MemberInfo definition, RuntimeType[] genericArguments, Exception e)
   at System.RuntimeType.MakeGenericType(Type[] instantiation)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateOpenGeneric(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot, Boolean throwOnConstraintViolation)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateOpenGeneric(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceDescriptor serviceDescriptor, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)<---

2025-09-15 02:30:19.968 +03:00 [INF] Starting web host...
2025-09-15 02:30:20.110 +03:00 [FTL] Host terminated unexpectedly
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at ModularERP.Program.Main(String[] args) in C:\Users\hossny D. monkey\source\repos\ModularERP\ModularERP\Program.cs:line 97
2025-09-15 02:30:22.849 +03:00 [INF] Starting web host...
2025-09-15 02:30:22.986 +03:00 [FTL] Host terminated unexpectedly
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at ModularERP.Program.Main(String[] args) in C:\Users\hossny D. monkey\source\repos\ModularERP\ModularERP\Program.cs:line 97
2025-09-15 02:30:34.719 +03:00 [INF] Starting web host...
2025-09-15 02:30:34.858 +03:00 [FTL] Host terminated unexpectedly
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at ModularERP.Program.Main(String[] args) in C:\Users\hossny D. monkey\source\repos\ModularERP\ModularERP\Program.cs:line 97
2025-09-15 02:30:41.931 +03:00 [INF] Starting web host...
2025-09-15 02:30:42.070 +03:00 [FTL] Host terminated unexpectedly
Microsoft.Extensions.Hosting.HostAbortedException: The host was aborted.
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.ThrowHostAborted()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.OnNext(KeyValuePair`2 value)
   at System.Diagnostics.DiagnosticListener.Write(String name, Object value)
   at Microsoft.Extensions.Hosting.HostBuilder.ResolveHost(IServiceProvider serviceProvider, DiagnosticListener diagnosticListener)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at ModularERP.Program.Main(String[] args) in C:\Users\hossny D. monkey\source\repos\ModularERP\ModularERP\Program.cs:line 97
2025-09-15 02:30:58.699 +03:00 [INF] Starting web host...
2025-09-15 02:30:59.062 +03:00 [INF] Now listening on: https://localhost:7168
2025-09-15 02:30:59.065 +03:00 [INF] Now listening on: http://localhost:5004
2025-09-15 02:30:59.144 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-15 02:30:59.146 +03:00 [INF] Hosting environment: Development
2025-09-15 02:30:59.147 +03:00 [INF] Content root path: C:\Users\hossny D. monkey\source\repos\ModularERP\ModularERP
2025-09-15 02:31:21.220 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5004/swagger/index.html - null null
2025-09-15 02:31:21.345 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5004/swagger/index.html - 200 null text/html;charset=utf-8 125.4235ms
2025-09-15 02:31:21.371 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5004/_framework/aspnetcore-browser-refresh.js - null null
2025-09-15 02:31:21.378 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5004/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 7.037ms
2025-09-15 02:31:22.401 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5004/_vs/browserLink - null null
2025-09-15 02:31:22.430 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5004/_vs/browserLink - 200 null text/javascript; charset=UTF-8 29.0061ms
2025-09-15 02:31:22.592 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5004/swagger/v1/swagger.json - null null
2025-09-15 02:31:22.619 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5004/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 27.0893ms
2025-09-15 02:31:26.831 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5004/api/Treasury/statistics?companyId=3fa85f64-5717-4562-b3fc-2c963f66afa6 - null null
2025-09-15 02:31:26.839 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5004/api/Treasury/statistics?companyId=3fa85f64-5717-4562-b3fc-2c963f66afa6 - 307 0 null 7.8983ms
2025-09-15 02:31:26.872 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/api/Treasury/statistics?companyId=3fa85f64-5717-4562-b3fc-2c963f66afa6 - null null
2025-09-15 02:31:26.879 +03:00 [INF] CORS policy execution successful.
2025-09-15 02:31:26.895 +03:00 [INF] Request started
2025-09-15 02:31:26.898 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController.GetTreasuryStatistics (ModularERP)'
2025-09-15 02:31:26.915 +03:00 [INF] Route matched with {action = "GetTreasuryStatistics", controller = "Treasury"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[System.Object]]] GetTreasuryStatistics(System.Nullable`1[System.Guid]) on controller ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController (ModularERP).
2025-09-15 02:31:26.921 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-15 02:31:27.574 +03:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-15 02:31:27.790 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-15 02:31:28.310 +03:00 [INF] Executed DbCommand (44ms) [Parameters=[@__request_CompanyId_Value_0='3fa85f64-5717-4562-b3fc-2c963f66afa6', @__p_1='0', @__p_2='2147483647'], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CompanyId], [t].[CreatedAt], [t].[CreatedById], [t].[CurrencyCode], [t].[DepositAcl], [t].[Description], [t].[IsActive], [t].[IsDeleted], [t].[Name], [t].[Status], [t].[UpdatedAt], [t].[UpdatedById], [t].[WithdrawAcl]
FROM [Treasuries] AS [t]
WHERE [t].[IsDeleted] = CAST(0 AS bit) AND [t].[CompanyId] = @__request_CompanyId_Value_0
ORDER BY [t].[Name]
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-09-15 02:31:28.344 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 02:31:28.365 +03:00 [INF] Executed action ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController.GetTreasuryStatistics (ModularERP) in 1444.1651ms
2025-09-15 02:31:28.367 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController.GetTreasuryStatistics (ModularERP)'
2025-09-15 02:31:28.369 +03:00 [INF] Request completed successfully with status code 200
2025-09-15 02:31:28.377 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/api/Treasury/statistics?companyId=3fa85f64-5717-4562-b3fc-2c963f66afa6 - 200 null application/json; charset=utf-8 1504.9684ms
2025-09-15 02:33:20.829 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5004/api/Treasury?companyId=3fa85f64-5717-4562-b3fc-2c963f66afa6&pageNumber=1&pageSize=10 - null null
2025-09-15 02:33:20.834 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5004/api/Treasury?companyId=3fa85f64-5717-4562-b3fc-2c963f66afa6&pageNumber=1&pageSize=10 - 307 0 null 4.7995ms
2025-09-15 02:33:20.850 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/api/Treasury?companyId=3fa85f64-5717-4562-b3fc-2c963f66afa6&pageNumber=1&pageSize=10 - null null
2025-09-15 02:33:20.854 +03:00 [INF] CORS policy execution successful.
2025-09-15 02:33:20.855 +03:00 [INF] Request started
2025-09-15 02:33:20.856 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController.GetAllTreasuries (ModularERP)'
2025-09-15 02:33:20.862 +03:00 [INF] Route matched with {action = "GetAllTreasuries", controller = "Treasury"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[System.Collections.Generic.IEnumerable`1[ModularERP.Modules.Finance.Features.Treasuries.DTO.TreasuryListDto]]]] GetAllTreasuries(System.Nullable`1[System.Guid], System.String, Int32, Int32) on controller ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController (ModularERP).
2025-09-15 02:33:20.921 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__request_CompanyId_Value_0='3fa85f64-5717-4562-b3fc-2c963f66afa6', @__p_1='0', @__p_2='10'], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CompanyId], [t].[CreatedAt], [t].[CreatedById], [t].[CurrencyCode], [t].[DepositAcl], [t].[Description], [t].[IsActive], [t].[IsDeleted], [t].[Name], [t].[Status], [t].[UpdatedAt], [t].[UpdatedById], [t].[WithdrawAcl]
FROM [Treasuries] AS [t]
WHERE [t].[IsDeleted] = CAST(0 AS bit) AND [t].[CompanyId] = @__request_CompanyId_Value_0
ORDER BY [t].[Name]
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-09-15 02:33:20.926 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[System.Collections.Generic.IEnumerable`1[[ModularERP.Modules.Finance.Features.Treasuries.DTO.TreasuryListDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 02:33:20.933 +03:00 [INF] Executed action ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController.GetAllTreasuries (ModularERP) in 67.9354ms
2025-09-15 02:33:20.936 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController.GetAllTreasuries (ModularERP)'
2025-09-15 02:33:20.939 +03:00 [INF] Request completed successfully with status code 200
2025-09-15 02:33:20.940 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/api/Treasury?companyId=3fa85f64-5717-4562-b3fc-2c963f66afa6&pageNumber=1&pageSize=10 - 200 null application/json; charset=utf-8 90.3305ms
2025-09-15 02:34:20.487 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5004/api/Treasury - application/json 201
2025-09-15 02:34:20.492 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5004/api/Treasury - 307 0 null 4.4866ms
2025-09-15 02:34:20.495 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7168/api/Treasury - null null
2025-09-15 02:34:20.499 +03:00 [INF] CORS policy execution successful.
2025-09-15 02:34:20.501 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7168/api/Treasury - 204 null null 5.9036ms
2025-09-15 02:34:20.502 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7168/api/Treasury - application/json 201
2025-09-15 02:34:20.506 +03:00 [INF] CORS policy execution successful.
2025-09-15 02:34:20.508 +03:00 [INF] Request started
2025-09-15 02:34:20.508 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController.CreateTreasury (ModularERP)'
2025-09-15 02:34:20.512 +03:00 [INF] Route matched with {action = "CreateTreasury", controller = "Treasury"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Finance.Features.Treasuries.DTO.TreasuryCreatedDto]]] CreateTreasury(ModularERP.Modules.Finance.Features.Treasuries.DTO.CreateTreasuryDto) on controller ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController (ModularERP).
2025-09-15 02:34:20.560 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__request_Treasury_CompanyId_0='3fa85f64-5717-4562-b3fc-2c963f66afa6', @__request_Treasury_Name_1='Treasury' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[CompanyId], [t].[CreatedAt], [t].[CreatedById], [t].[CurrencyCode], [t].[DepositAcl], [t].[Description], [t].[IsActive], [t].[IsDeleted], [t].[Name], [t].[Status], [t].[UpdatedAt], [t].[UpdatedById], [t].[WithdrawAcl]
FROM [Treasuries] AS [t]
WHERE [t].[IsDeleted] = CAST(0 AS bit) AND [t].[CompanyId] = @__request_Treasury_CompanyId_0 AND [t].[Name] = @__request_Treasury_Name_1
2025-09-15 02:34:20.728 +03:00 [ERR] Failed executing DbCommand (22ms) [Parameters=[@p0='44212d93-ca27-45be-9d42-7b11363ca0f1', @p1='3fa85f64-5717-4562-b3fc-2c963f66afa6', @p2='2025-09-14T23:34:20.5698460Z', @p3=NULL (Size = 4000), @p4='123' (Nullable = false) (Size = 3), @p5='user1' (Nullable = false) (Size = 4000), @p6='anyti=hing' (Size = 4000), @p7='True', @p8='False', @p9='Treasury' (Nullable = false) (Size = 100), @p10='2' (Nullable = false) (Size = 4000), @p11=NULL (DbType = DateTime2), @p12=NULL (Size = 4000), @p13='user1' (Nullable = false) (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Treasuries] ([Id], [CompanyId], [CreatedAt], [CreatedById], [CurrencyCode], [DepositAcl], [Description], [IsActive], [IsDeleted], [Name], [Status], [UpdatedAt], [UpdatedById], [WithdrawAcl])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-09-15 02:34:20.751 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'ModularERP.Modules.Finance.Finance.Infrastructure.Data.FinanceDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Treasuries_Companies_CompanyId". The conflict occurred in database "ModularERP", table "dbo.Companies", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:490a3963-0dea-4782-a8e6-de731817bbb0
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Treasuries_Companies_CompanyId". The conflict occurred in database "ModularERP", table "dbo.Companies", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:490a3963-0dea-4782-a8e6-de731817bbb0
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-09-15 02:34:20.771 +03:00 [INF] Executing ObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Finance.Features.Treasuries.DTO.TreasuryCreatedDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-15 02:34:20.775 +03:00 [INF] Executed action ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController.CreateTreasury (ModularERP) in 259.7664ms
2025-09-15 02:34:20.778 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController.CreateTreasury (ModularERP)'
2025-09-15 02:34:20.779 +03:00 [INF] Request completed successfully with status code 500
2025-09-15 02:34:20.780 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7168/api/Treasury - 500 null application/json; charset=utf-8 278.0912ms
2025-09-15 02:39:26.266 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5004/swagger/index.html - null null
2025-09-15 02:39:26.280 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5004/swagger/index.html - 200 null text/html;charset=utf-8 14.07ms
2025-09-15 02:39:26.314 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5004/_framework/aspnetcore-browser-refresh.js - null null
2025-09-15 02:39:26.322 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5004/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 7.0094ms
2025-09-15 02:39:27.339 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5004/_vs/browserLink - null null
2025-09-15 02:39:27.353 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5004/_vs/browserLink - 200 null text/javascript; charset=UTF-8 13.6329ms
2025-09-15 02:39:27.533 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5004/swagger/v1/swagger.json - null null
2025-09-15 02:39:27.552 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5004/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 19.0714ms
2025-09-15 02:39:40.816 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5004/api/Treasury/statistics?companyId=d36b22ee-69fd-491c-99a6-36faa8dbfd1a - null null
2025-09-15 02:39:40.845 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5004/api/Treasury/statistics?companyId=d36b22ee-69fd-491c-99a6-36faa8dbfd1a - 307 0 null 28.8862ms
2025-09-15 02:39:40.868 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/api/Treasury/statistics?companyId=d36b22ee-69fd-491c-99a6-36faa8dbfd1a - null null
2025-09-15 02:39:40.873 +03:00 [INF] CORS policy execution successful.
2025-09-15 02:39:40.874 +03:00 [INF] Request started
2025-09-15 02:39:40.875 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController.GetTreasuryStatistics (ModularERP)'
2025-09-15 02:39:40.879 +03:00 [INF] Route matched with {action = "GetTreasuryStatistics", controller = "Treasury"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[System.Object]]] GetTreasuryStatistics(System.Nullable`1[System.Guid]) on controller ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController (ModularERP).
2025-09-15 02:39:40.892 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__request_CompanyId_Value_0='d36b22ee-69fd-491c-99a6-36faa8dbfd1a', @__p_1='0', @__p_2='2147483647'], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CompanyId], [t].[CreatedAt], [t].[CreatedById], [t].[CurrencyCode], [t].[DepositAcl], [t].[Description], [t].[IsActive], [t].[IsDeleted], [t].[Name], [t].[Status], [t].[UpdatedAt], [t].[UpdatedById], [t].[WithdrawAcl]
FROM [Treasuries] AS [t]
WHERE [t].[IsDeleted] = CAST(0 AS bit) AND [t].[CompanyId] = @__request_CompanyId_Value_0
ORDER BY [t].[Name]
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-09-15 02:39:40.898 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 02:39:40.900 +03:00 [INF] Executed action ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController.GetTreasuryStatistics (ModularERP) in 17.9582ms
2025-09-15 02:39:40.902 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController.GetTreasuryStatistics (ModularERP)'
2025-09-15 02:39:40.904 +03:00 [INF] Request completed successfully with status code 200
2025-09-15 02:39:40.906 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/api/Treasury/statistics?companyId=d36b22ee-69fd-491c-99a6-36faa8dbfd1a - 200 null application/json; charset=utf-8 37.5286ms
2025-09-15 02:39:57.709 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5004/api/Treasury - application/json 201
2025-09-15 02:39:57.713 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5004/api/Treasury - 307 0 null 4.7872ms
2025-09-15 02:39:57.716 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7168/api/Treasury - null null
2025-09-15 02:39:57.723 +03:00 [INF] CORS policy execution successful.
2025-09-15 02:39:57.725 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7168/api/Treasury - 204 null null 9.3064ms
2025-09-15 02:39:57.726 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7168/api/Treasury - application/json 201
2025-09-15 02:39:57.732 +03:00 [INF] CORS policy execution successful.
2025-09-15 02:39:57.733 +03:00 [INF] Request started
2025-09-15 02:39:57.734 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController.CreateTreasury (ModularERP)'
2025-09-15 02:39:57.736 +03:00 [INF] Route matched with {action = "CreateTreasury", controller = "Treasury"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Finance.Features.Treasuries.DTO.TreasuryCreatedDto]]] CreateTreasury(ModularERP.Modules.Finance.Features.Treasuries.DTO.CreateTreasuryDto) on controller ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController (ModularERP).
2025-09-15 02:39:57.745 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__request_Treasury_CompanyId_0='d36b22ee-69fd-491c-99a6-36faa8dbfd1a', @__request_Treasury_Name_1='Treasury' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[CompanyId], [t].[CreatedAt], [t].[CreatedById], [t].[CurrencyCode], [t].[DepositAcl], [t].[Description], [t].[IsActive], [t].[IsDeleted], [t].[Name], [t].[Status], [t].[UpdatedAt], [t].[UpdatedById], [t].[WithdrawAcl]
FROM [Treasuries] AS [t]
WHERE [t].[IsDeleted] = CAST(0 AS bit) AND [t].[CompanyId] = @__request_Treasury_CompanyId_0 AND [t].[Name] = @__request_Treasury_Name_1
2025-09-15 02:39:57.756 +03:00 [ERR] Failed executing DbCommand (3ms) [Parameters=[@p0='030e3d3e-a500-4f02-9d2d-ad8d1decfefe', @p1='d36b22ee-69fd-491c-99a6-36faa8dbfd1a', @p2='2025-09-14T23:39:57.7511600Z', @p3=NULL (Size = 4000), @p4='123' (Nullable = false) (Size = 3), @p5='user1' (Nullable = false) (Size = 4000), @p6='anyti=hing' (Size = 4000), @p7='True', @p8='False', @p9='Treasury' (Nullable = false) (Size = 100), @p10='2' (Nullable = false) (Size = 4000), @p11=NULL (DbType = DateTime2), @p12=NULL (Size = 4000), @p13='user1' (Nullable = false) (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Treasuries] ([Id], [CompanyId], [CreatedAt], [CreatedById], [CurrencyCode], [DepositAcl], [Description], [IsActive], [IsDeleted], [Name], [Status], [UpdatedAt], [UpdatedById], [WithdrawAcl])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-09-15 02:39:57.763 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'ModularERP.Modules.Finance.Finance.Infrastructure.Data.FinanceDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Treasuries_Currencies_CurrencyCode". The conflict occurred in database "ModularERP", table "dbo.Currencies", column 'Code'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:1973adf4-97a7-42f6-bfc5-8211d5b1d709
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Treasuries_Currencies_CurrencyCode". The conflict occurred in database "ModularERP", table "dbo.Currencies", column 'Code'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:1973adf4-97a7-42f6-bfc5-8211d5b1d709
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-09-15 02:39:57.796 +03:00 [INF] Executing ObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Finance.Features.Treasuries.DTO.TreasuryCreatedDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-15 02:39:57.797 +03:00 [INF] Executed action ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController.CreateTreasury (ModularERP) in 56.0198ms
2025-09-15 02:39:57.801 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController.CreateTreasury (ModularERP)'
2025-09-15 02:39:57.802 +03:00 [INF] Request completed successfully with status code 500
2025-09-15 02:39:57.803 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7168/api/Treasury - 500 null application/json; charset=utf-8 77.0706ms
2025-09-15 02:40:31.873 +03:00 [INF] Starting web host...
2025-09-15 02:40:32.182 +03:00 [INF] Now listening on: https://localhost:7168
2025-09-15 02:40:32.186 +03:00 [INF] Now listening on: http://localhost:5004
2025-09-15 02:40:32.350 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-15 02:40:32.352 +03:00 [INF] Hosting environment: Development
2025-09-15 02:40:32.353 +03:00 [INF] Content root path: C:\Users\hossny D. monkey\source\repos\ModularERP\ModularERP
2025-09-15 02:40:36.516 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5004/swagger/index.html - null null
2025-09-15 02:40:36.654 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5004/swagger/index.html - 200 null text/html;charset=utf-8 138.3864ms
2025-09-15 02:40:36.682 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5004/_framework/aspnetcore-browser-refresh.js - null null
2025-09-15 02:40:36.688 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5004/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 5.8507ms
2025-09-15 02:40:37.711 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5004/_vs/browserLink - null null
2025-09-15 02:40:37.748 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5004/_vs/browserLink - 200 null text/javascript; charset=UTF-8 36.4303ms
2025-09-15 02:40:37.920 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5004/swagger/v1/swagger.json - null null
2025-09-15 02:40:37.951 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5004/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 30.3199ms
2025-09-15 02:40:43.570 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5004/api/Treasury - application/json 201
2025-09-15 02:40:43.577 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5004/api/Treasury - 307 0 null 7.0699ms
2025-09-15 02:40:43.609 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7168/api/Treasury - null null
2025-09-15 02:40:43.615 +03:00 [INF] CORS policy execution successful.
2025-09-15 02:40:43.617 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7168/api/Treasury - 204 null null 7.6439ms
2025-09-15 02:40:43.621 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7168/api/Treasury - application/json 201
2025-09-15 02:40:43.627 +03:00 [INF] CORS policy execution successful.
2025-09-15 02:40:43.638 +03:00 [INF] Request started
2025-09-15 02:40:43.642 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController.CreateTreasury (ModularERP)'
2025-09-15 02:40:43.664 +03:00 [INF] Route matched with {action = "CreateTreasury", controller = "Treasury"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Finance.Features.Treasuries.DTO.TreasuryCreatedDto]]] CreateTreasury(ModularERP.Modules.Finance.Features.Treasuries.DTO.CreateTreasuryDto) on controller ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController (ModularERP).
2025-09-15 02:40:43.669 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-15 02:40:44.401 +03:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-15 02:40:44.609 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-15 02:40:45.069 +03:00 [INF] Executed DbCommand (28ms) [Parameters=[@__request_Treasury_CompanyId_0='d36b22ee-69fd-491c-99a6-36faa8dbfd1a', @__request_Treasury_Name_1='Treasury' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[CompanyId], [t].[CreatedAt], [t].[CreatedById], [t].[CurrencyCode], [t].[DepositAcl], [t].[Description], [t].[IsActive], [t].[IsDeleted], [t].[Name], [t].[Status], [t].[UpdatedAt], [t].[UpdatedById], [t].[WithdrawAcl]
FROM [Treasuries] AS [t]
WHERE [t].[IsDeleted] = CAST(0 AS bit) AND [t].[CompanyId] = @__request_Treasury_CompanyId_0 AND [t].[Name] = @__request_Treasury_Name_1
2025-09-15 02:40:45.277 +03:00 [ERR] Failed executing DbCommand (13ms) [Parameters=[@p0='8e7faccb-5d2a-4118-8630-7e77f430f8bd', @p1='d36b22ee-69fd-491c-99a6-36faa8dbfd1a', @p2='2025-09-14T23:40:45.0964740Z', @p3=NULL (Size = 4000), @p4='123' (Nullable = false) (Size = 3), @p5='user1' (Nullable = false) (Size = 4000), @p6='anyti=hing' (Size = 4000), @p7='True', @p8='False', @p9='Treasury' (Nullable = false) (Size = 100), @p10='2' (Nullable = false) (Size = 4000), @p11=NULL (DbType = DateTime2), @p12=NULL (Size = 4000), @p13='user1' (Nullable = false) (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Treasuries] ([Id], [CompanyId], [CreatedAt], [CreatedById], [CurrencyCode], [DepositAcl], [Description], [IsActive], [IsDeleted], [Name], [Status], [UpdatedAt], [UpdatedById], [WithdrawAcl])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-09-15 02:40:45.313 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'ModularERP.Modules.Finance.Finance.Infrastructure.Data.FinanceDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Treasuries_Currencies_CurrencyCode". The conflict occurred in database "ModularERP", table "dbo.Currencies", column 'Code'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:27283444-500c-49fc-8cbe-72efa2f1dec7
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Treasuries_Currencies_CurrencyCode". The conflict occurred in database "ModularERP", table "dbo.Currencies", column 'Code'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:27283444-500c-49fc-8cbe-72efa2f1dec7
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-09-15 02:40:45.337 +03:00 [INF] Executing ObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Finance.Features.Treasuries.DTO.TreasuryCreatedDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-15 02:40:45.352 +03:00 [INF] Executed action ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController.CreateTreasury (ModularERP) in 1682.9197ms
2025-09-15 02:40:45.355 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController.CreateTreasury (ModularERP)'
2025-09-15 02:40:45.357 +03:00 [INF] Request completed successfully with status code 500
2025-09-15 02:40:45.364 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7168/api/Treasury - 500 null application/json; charset=utf-8 1742.8898ms
2025-09-15 02:42:16.806 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5004/api/Treasury - application/json 201
2025-09-15 02:42:16.818 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5004/api/Treasury - 307 0 null 12.7945ms
2025-09-15 02:42:16.829 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7168/api/Treasury - null null
2025-09-15 02:42:16.837 +03:00 [INF] CORS policy execution successful.
2025-09-15 02:42:16.840 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7168/api/Treasury - 204 null null 11.0366ms
2025-09-15 02:42:16.844 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7168/api/Treasury - application/json 201
2025-09-15 02:42:16.851 +03:00 [INF] CORS policy execution successful.
2025-09-15 02:42:16.853 +03:00 [INF] Request started
2025-09-15 02:42:16.853 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController.CreateTreasury (ModularERP)'
2025-09-15 02:42:16.855 +03:00 [INF] Route matched with {action = "CreateTreasury", controller = "Treasury"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Finance.Features.Treasuries.DTO.TreasuryCreatedDto]]] CreateTreasury(ModularERP.Modules.Finance.Features.Treasuries.DTO.CreateTreasuryDto) on controller ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController (ModularERP).
2025-09-15 02:42:16.919 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__request_Treasury_CompanyId_0='d36b22ee-69fd-491c-99a6-36faa8dbfd1a', @__request_Treasury_Name_1='Treasury' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[CompanyId], [t].[CreatedAt], [t].[CreatedById], [t].[CurrencyCode], [t].[DepositAcl], [t].[Description], [t].[IsActive], [t].[IsDeleted], [t].[Name], [t].[Status], [t].[UpdatedAt], [t].[UpdatedById], [t].[WithdrawAcl]
FROM [Treasuries] AS [t]
WHERE [t].[IsDeleted] = CAST(0 AS bit) AND [t].[CompanyId] = @__request_Treasury_CompanyId_0 AND [t].[Name] = @__request_Treasury_Name_1
2025-09-15 02:42:16.932 +03:00 [ERR] Failed executing DbCommand (3ms) [Parameters=[@p0='d5bf40d5-4ec7-4e6f-be21-00fd7db29b52', @p1='d36b22ee-69fd-491c-99a6-36faa8dbfd1a', @p2='2025-09-14T23:42:16.9258996Z', @p3=NULL (Size = 4000), @p4='EGP' (Nullable = false) (Size = 3), @p5='user1' (Nullable = false) (Size = 4000), @p6='anyti=hing' (Size = 4000), @p7='True', @p8='False', @p9='Treasury' (Nullable = false) (Size = 100), @p10='2' (Nullable = false) (Size = 4000), @p11=NULL (DbType = DateTime2), @p12=NULL (Size = 4000), @p13='user1' (Nullable = false) (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Treasuries] ([Id], [CompanyId], [CreatedAt], [CreatedById], [CurrencyCode], [DepositAcl], [Description], [IsActive], [IsDeleted], [Name], [Status], [UpdatedAt], [UpdatedById], [WithdrawAcl])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-09-15 02:42:16.939 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'ModularERP.Modules.Finance.Finance.Infrastructure.Data.FinanceDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Treasuries_Currencies_CurrencyCode". The conflict occurred in database "ModularERP", table "dbo.Currencies", column 'Code'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:27283444-500c-49fc-8cbe-72efa2f1dec7
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Treasuries_Currencies_CurrencyCode". The conflict occurred in database "ModularERP", table "dbo.Currencies", column 'Code'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:27283444-500c-49fc-8cbe-72efa2f1dec7
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-09-15 02:42:16.981 +03:00 [INF] Executing ObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Finance.Features.Treasuries.DTO.TreasuryCreatedDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-15 02:42:16.984 +03:00 [INF] Executed action ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController.CreateTreasury (ModularERP) in 121.2787ms
2025-09-15 02:42:16.986 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController.CreateTreasury (ModularERP)'
2025-09-15 02:42:16.988 +03:00 [INF] Request completed successfully with status code 500
2025-09-15 02:42:16.989 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7168/api/Treasury - 500 null application/json; charset=utf-8 145.0419ms
2025-09-15 02:45:03.695 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5004/swagger/index.html - null null
2025-09-15 02:45:03.702 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5004/swagger/index.html - 200 null text/html;charset=utf-8 7.0708ms
2025-09-15 02:45:03.736 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5004/_framework/aspnetcore-browser-refresh.js - null null
2025-09-15 02:45:03.743 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5004/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 7.0987ms
2025-09-15 02:45:04.711 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5004/_vs/browserLink - null null
2025-09-15 02:45:04.731 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5004/_vs/browserLink - 200 null text/javascript; charset=UTF-8 20.1488ms
2025-09-15 02:45:04.893 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5004/swagger/v1/swagger.json - null null
2025-09-15 02:45:04.909 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5004/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 15.6705ms
2025-09-15 02:45:10.279 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5004/api/Treasury - application/json 201
2025-09-15 02:45:10.290 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5004/api/Treasury - 307 0 null 11.2276ms
2025-09-15 02:45:10.317 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7168/api/Treasury - null null
2025-09-15 02:45:10.322 +03:00 [INF] CORS policy execution successful.
2025-09-15 02:45:10.324 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7168/api/Treasury - 204 null null 7.8185ms
2025-09-15 02:45:10.332 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7168/api/Treasury - application/json 201
2025-09-15 02:45:10.338 +03:00 [INF] CORS policy execution successful.
2025-09-15 02:45:10.340 +03:00 [INF] Request started
2025-09-15 02:45:10.341 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController.CreateTreasury (ModularERP)'
2025-09-15 02:45:10.343 +03:00 [INF] Route matched with {action = "CreateTreasury", controller = "Treasury"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Finance.Features.Treasuries.DTO.TreasuryCreatedDto]]] CreateTreasury(ModularERP.Modules.Finance.Features.Treasuries.DTO.CreateTreasuryDto) on controller ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController (ModularERP).
2025-09-15 02:45:10.364 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__request_Treasury_CompanyId_0='d36b22ee-69fd-491c-99a6-36faa8dbfd1a', @__request_Treasury_Name_1='Treasury' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[CompanyId], [t].[CreatedAt], [t].[CreatedById], [t].[CurrencyCode], [t].[DepositAcl], [t].[Description], [t].[IsActive], [t].[IsDeleted], [t].[Name], [t].[Status], [t].[UpdatedAt], [t].[UpdatedById], [t].[WithdrawAcl]
FROM [Treasuries] AS [t]
WHERE [t].[IsDeleted] = CAST(0 AS bit) AND [t].[CompanyId] = @__request_Treasury_CompanyId_0 AND [t].[Name] = @__request_Treasury_Name_1
2025-09-15 02:45:10.380 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='e4e33ea7-1475-48cc-be82-c1c3b42bcb18', @p1='d36b22ee-69fd-491c-99a6-36faa8dbfd1a', @p2='2025-09-14T23:45:10.3709779Z', @p3=NULL (Size = 4000), @p4='EGP' (Nullable = false) (Size = 3), @p5='user1' (Nullable = false) (Size = 4000), @p6='anyti=hing' (Size = 4000), @p7='True', @p8='False', @p9='Treasury' (Nullable = false) (Size = 100), @p10='2' (Nullable = false) (Size = 4000), @p11=NULL (DbType = DateTime2), @p12=NULL (Size = 4000), @p13='user1' (Nullable = false) (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Treasuries] ([Id], [CompanyId], [CreatedAt], [CreatedById], [CurrencyCode], [DepositAcl], [Description], [IsActive], [IsDeleted], [Name], [Status], [UpdatedAt], [UpdatedById], [WithdrawAcl])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-09-15 02:45:10.395 +03:00 [INF] Executing CreatedAtActionResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Finance.Features.Treasuries.DTO.TreasuryCreatedDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-15 02:45:10.413 +03:00 [INF] Executed action ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController.CreateTreasury (ModularERP) in 65.3085ms
2025-09-15 02:45:10.415 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController.CreateTreasury (ModularERP)'
2025-09-15 02:45:10.417 +03:00 [INF] Request completed successfully with status code 201
2025-09-15 02:45:10.419 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7168/api/Treasury - 201 null application/json; charset=utf-8 87.3211ms
2025-09-15 02:45:51.900 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5004/api/Treasury/e4e33ea7-1475-48cc-be82-c1c3b42bcb18 - null null
2025-09-15 02:45:51.906 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5004/api/Treasury/e4e33ea7-1475-48cc-be82-c1c3b42bcb18 - 307 0 null 6.4022ms
2025-09-15 02:45:51.909 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/api/Treasury/e4e33ea7-1475-48cc-be82-c1c3b42bcb18 - null null
2025-09-15 02:45:51.916 +03:00 [INF] CORS policy execution successful.
2025-09-15 02:45:51.917 +03:00 [INF] Request started
2025-09-15 02:45:51.919 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController.GetTreasuryById (ModularERP)'
2025-09-15 02:45:51.926 +03:00 [INF] Route matched with {action = "GetTreasuryById", controller = "Treasury"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Finance.Features.Treasuries.DTO.TreasuryDto]]] GetTreasuryById(System.Guid) on controller ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController (ModularERP).
2025-09-15 02:45:51.951 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__request_Id_0='e4e33ea7-1475-48cc-be82-c1c3b42bcb18'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[CompanyId], [t].[CreatedAt], [t].[CreatedById], [t].[CurrencyCode], [t].[DepositAcl], [t].[Description], [t].[IsActive], [t].[IsDeleted], [t].[Name], [t].[Status], [t].[UpdatedAt], [t].[UpdatedById], [t].[WithdrawAcl]
FROM [Treasuries] AS [t]
WHERE [t].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = @__request_Id_0
2025-09-15 02:45:51.976 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__treasury_CompanyId_0='d36b22ee-69fd-491c-99a6-36faa8dbfd1a'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[CreatedAt], [c].[CreatedById], [c].[CurrencyCode], [c].[IsActive], [c].[IsDeleted], [c].[Name], [c].[UpdatedAt], [c].[UpdatedById]
FROM [Companies] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__treasury_CompanyId_0
2025-09-15 02:45:51.990 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__treasury_CurrencyCode_0='EGP' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Code], [c].[CreatedAt], [c].[CreatedById], [c].[Decimals], [c].[Id], [c].[IsActive], [c].[IsDeleted], [c].[Symbol], [c].[UpdatedAt], [c].[UpdatedById]
FROM [Currencies] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Code] = @__treasury_CurrencyCode_0
2025-09-15 02:45:52.047 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__treasury_Id_0='e4e33ea7-1475-48cc-be82-c1c3b42bcb18'], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Treasuries] AS [t]
INNER JOIN [Vouchers] AS [v] ON [t].[Id] = [v].[TreasuryId]
WHERE [t].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = @__treasury_Id_0
2025-09-15 02:45:52.052 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Finance.Features.Treasuries.DTO.TreasuryDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-15 02:45:52.060 +03:00 [INF] Executed action ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController.GetTreasuryById (ModularERP) in 128.8673ms
2025-09-15 02:45:52.063 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController.GetTreasuryById (ModularERP)'
2025-09-15 02:45:52.064 +03:00 [INF] Request completed successfully with status code 200
2025-09-15 02:45:52.065 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/api/Treasury/e4e33ea7-1475-48cc-be82-c1c3b42bcb18 - 200 null application/json; charset=utf-8 155.9412ms
2025-09-15 02:46:14.061 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5004/api/Treasury/by-company/d36b22ee-69fd-491c-99a6-36faa8dbfd1a?pageNumber=1&pageSize=10 - null null
2025-09-15 02:46:14.065 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5004/api/Treasury/by-company/d36b22ee-69fd-491c-99a6-36faa8dbfd1a?pageNumber=1&pageSize=10 - 307 0 null 4.6948ms
2025-09-15 02:46:14.090 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/api/Treasury/by-company/d36b22ee-69fd-491c-99a6-36faa8dbfd1a?pageNumber=1&pageSize=10 - null null
2025-09-15 02:46:14.102 +03:00 [INF] CORS policy execution successful.
2025-09-15 02:46:14.104 +03:00 [INF] Request started
2025-09-15 02:46:14.105 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController.GetTreasuriesByCompany (ModularERP)'
2025-09-15 02:46:14.110 +03:00 [INF] Route matched with {action = "GetTreasuriesByCompany", controller = "Treasury"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[System.Collections.Generic.IEnumerable`1[ModularERP.Modules.Finance.Features.Treasuries.DTO.TreasuryListDto]]]] GetTreasuriesByCompany(System.Guid, Int32, Int32) on controller ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController (ModularERP).
2025-09-15 02:46:14.144 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@__request_CompanyId_Value_0='d36b22ee-69fd-491c-99a6-36faa8dbfd1a', @__p_1='0', @__p_2='10'], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CompanyId], [t].[CreatedAt], [t].[CreatedById], [t].[CurrencyCode], [t].[DepositAcl], [t].[Description], [t].[IsActive], [t].[IsDeleted], [t].[Name], [t].[Status], [t].[UpdatedAt], [t].[UpdatedById], [t].[WithdrawAcl]
FROM [Treasuries] AS [t]
WHERE [t].[IsDeleted] = CAST(0 AS bit) AND [t].[CompanyId] = @__request_CompanyId_Value_0
ORDER BY [t].[Name]
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-09-15 02:46:14.155 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__treasury_CompanyId_0='d36b22ee-69fd-491c-99a6-36faa8dbfd1a'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[CreatedAt], [c].[CreatedById], [c].[CurrencyCode], [c].[IsActive], [c].[IsDeleted], [c].[Name], [c].[UpdatedAt], [c].[UpdatedById]
FROM [Companies] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__treasury_CompanyId_0
2025-09-15 02:46:14.164 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__treasury_CurrencyCode_0='EGP' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Code], [c].[CreatedAt], [c].[CreatedById], [c].[Decimals], [c].[Id], [c].[IsActive], [c].[IsDeleted], [c].[Symbol], [c].[UpdatedAt], [c].[UpdatedById]
FROM [Currencies] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Code] = @__treasury_CurrencyCode_0
2025-09-15 02:46:14.172 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__treasury_Id_0='e4e33ea7-1475-48cc-be82-c1c3b42bcb18'], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Treasuries] AS [t]
INNER JOIN [Vouchers] AS [v] ON [t].[Id] = [v].[TreasuryId]
WHERE [t].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = @__treasury_Id_0
2025-09-15 02:46:14.178 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[System.Collections.Generic.IEnumerable`1[[ModularERP.Modules.Finance.Features.Treasuries.DTO.TreasuryListDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 02:46:14.183 +03:00 [INF] Executed action ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController.GetTreasuriesByCompany (ModularERP) in 68.745ms
2025-09-15 02:46:14.186 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController.GetTreasuriesByCompany (ModularERP)'
2025-09-15 02:46:14.187 +03:00 [INF] Request completed successfully with status code 200
2025-09-15 02:46:14.188 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/api/Treasury/by-company/d36b22ee-69fd-491c-99a6-36faa8dbfd1a?pageNumber=1&pageSize=10 - 200 null application/json; charset=utf-8 98.3462ms
2025-09-15 14:08:16.771 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5004/api/Treasury/e4e33ea7-1475-48cc-be82-c1c3b42bcb18 - application/json 244
2025-09-15 14:08:16.775 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5004/api/Treasury/e4e33ea7-1475-48cc-be82-c1c3b42bcb18 - 307 0 null 3.6627ms
2025-09-15 14:08:16.792 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7168/api/Treasury/e4e33ea7-1475-48cc-be82-c1c3b42bcb18 - null null
2025-09-15 14:08:16.796 +03:00 [INF] CORS policy execution successful.
2025-09-15 14:08:16.798 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7168/api/Treasury/e4e33ea7-1475-48cc-be82-c1c3b42bcb18 - 204 null null 6.0839ms
2025-09-15 14:08:16.800 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7168/api/Treasury/e4e33ea7-1475-48cc-be82-c1c3b42bcb18 - application/json 244
2025-09-15 14:08:16.809 +03:00 [INF] CORS policy execution successful.
2025-09-15 14:08:16.810 +03:00 [INF] Request started
2025-09-15 14:08:16.811 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController.UpdateTreasury (ModularERP)'
2025-09-15 14:08:16.817 +03:00 [INF] Route matched with {action = "UpdateTreasury", controller = "Treasury"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[System.Boolean]]] UpdateTreasury(System.Guid, ModularERP.Modules.Finance.Features.Treasuries.DTO.UpdateTreasuryDto) on controller ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController (ModularERP).
2025-09-15 14:08:16.828 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 14:08:16.831 +03:00 [INF] Executed action ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController.UpdateTreasury (ModularERP) in 10.5299ms
2025-09-15 14:08:16.834 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController.UpdateTreasury (ModularERP)'
2025-09-15 14:08:16.836 +03:00 [INF] Request completed successfully with status code 400
2025-09-15 14:08:16.838 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7168/api/Treasury/e4e33ea7-1475-48cc-be82-c1c3b42bcb18 - 400 null application/json; charset=utf-8 38.3319ms
2025-09-15 14:09:43.985 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5004/api/Treasury/e4e33ea7-1475-48cc-be82-c1c3b42bcb18 - application/json 244
2025-09-15 14:09:43.990 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5004/api/Treasury/e4e33ea7-1475-48cc-be82-c1c3b42bcb18 - 307 0 null 4.8766ms
2025-09-15 14:09:44.018 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7168/api/Treasury/e4e33ea7-1475-48cc-be82-c1c3b42bcb18 - null null
2025-09-15 14:09:44.029 +03:00 [INF] CORS policy execution successful.
2025-09-15 14:09:44.032 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7168/api/Treasury/e4e33ea7-1475-48cc-be82-c1c3b42bcb18 - 204 null null 13.6606ms
2025-09-15 14:09:44.034 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7168/api/Treasury/e4e33ea7-1475-48cc-be82-c1c3b42bcb18 - application/json 244
2025-09-15 14:09:44.039 +03:00 [INF] CORS policy execution successful.
2025-09-15 14:09:44.040 +03:00 [INF] Request started
2025-09-15 14:09:44.043 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController.UpdateTreasury (ModularERP)'
2025-09-15 14:09:44.045 +03:00 [INF] Route matched with {action = "UpdateTreasury", controller = "Treasury"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[System.Boolean]]] UpdateTreasury(System.Guid, ModularERP.Modules.Finance.Features.Treasuries.DTO.UpdateTreasuryDto) on controller ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController (ModularERP).
2025-09-15 14:09:44.068 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__request_Treasury_Id_0='e4e33ea7-1475-48cc-be82-c1c3b42bcb18'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[CompanyId], [t].[CreatedAt], [t].[CreatedById], [t].[CurrencyCode], [t].[DepositAcl], [t].[Description], [t].[IsActive], [t].[IsDeleted], [t].[Name], [t].[Status], [t].[UpdatedAt], [t].[UpdatedById], [t].[WithdrawAcl]
FROM [Treasuries] AS [t]
WHERE [t].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = @__request_Treasury_Id_0
2025-09-15 14:09:44.080 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__request_Treasury_CompanyId_0='d36b22ee-69fd-491c-99a6-36faa8dbfd1a', @__request_Treasury_Name_1='Trea1' (Size = 100), @__request_Treasury_Id_2='e4e33ea7-1475-48cc-be82-c1c3b42bcb18'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[CompanyId], [t].[CreatedAt], [t].[CreatedById], [t].[CurrencyCode], [t].[DepositAcl], [t].[Description], [t].[IsActive], [t].[IsDeleted], [t].[Name], [t].[Status], [t].[UpdatedAt], [t].[UpdatedById], [t].[WithdrawAcl]
FROM [Treasuries] AS [t]
WHERE [t].[IsDeleted] = CAST(0 AS bit) AND [t].[CompanyId] = @__request_Treasury_CompanyId_0 AND [t].[Name] = @__request_Treasury_Name_1 AND [t].[Id] <> @__request_Treasury_Id_2
2025-09-15 14:09:44.105 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@p13='e4e33ea7-1475-48cc-be82-c1c3b42bcb18', @p0='d36b22ee-69fd-491c-99a6-36faa8dbfd1a', @p1='2025-09-14T23:45:10.3709779', @p2=NULL (Size = 4000), @p3='EGP' (Nullable = false) (Size = 3), @p4='user2' (Nullable = false) (Size = 4000), @p5='anything' (Size = 4000), @p6='True', @p7='False', @p8='Trea1' (Nullable = false) (Size = 100), @p9='Active' (Nullable = false) (Size = 4000), @p10='2025-09-15T11:09:44.0869008Z' (Nullable = true), @p11=NULL (Size = 4000), @p12='user1' (Nullable = false) (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Treasuries] SET [CompanyId] = @p0, [CreatedAt] = @p1, [CreatedById] = @p2, [CurrencyCode] = @p3, [DepositAcl] = @p4, [Description] = @p5, [IsActive] = @p6, [IsDeleted] = @p7, [Name] = @p8, [Status] = @p9, [UpdatedAt] = @p10, [UpdatedById] = @p11, [WithdrawAcl] = @p12
OUTPUT 1
WHERE [Id] = @p13;
2025-09-15 14:09:44.114 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 14:09:44.117 +03:00 [INF] Executed action ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController.UpdateTreasury (ModularERP) in 69.2164ms
2025-09-15 14:09:44.119 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController.UpdateTreasury (ModularERP)'
2025-09-15 14:09:44.121 +03:00 [INF] Request completed successfully with status code 200
2025-09-15 14:09:44.122 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7168/api/Treasury/e4e33ea7-1475-48cc-be82-c1c3b42bcb18 - 200 null application/json; charset=utf-8 88.8472ms
2025-09-15 14:10:16.325 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5004/api/Treasury/statistics?companyId=d36b22ee-69fd-491c-99a6-36faa8dbfd1a - null null
2025-09-15 14:10:16.329 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5004/api/Treasury/statistics?companyId=d36b22ee-69fd-491c-99a6-36faa8dbfd1a - 307 0 null 3.8172ms
2025-09-15 14:10:16.334 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/api/Treasury/statistics?companyId=d36b22ee-69fd-491c-99a6-36faa8dbfd1a - null null
2025-09-15 14:10:16.339 +03:00 [INF] CORS policy execution successful.
2025-09-15 14:10:16.340 +03:00 [INF] Request started
2025-09-15 14:10:16.341 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController.GetTreasuryStatistics (ModularERP)'
2025-09-15 14:10:16.344 +03:00 [INF] Route matched with {action = "GetTreasuryStatistics", controller = "Treasury"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[System.Object]]] GetTreasuryStatistics(System.Nullable`1[System.Guid]) on controller ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController (ModularERP).
2025-09-15 14:10:16.356 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__request_CompanyId_Value_0='d36b22ee-69fd-491c-99a6-36faa8dbfd1a', @__p_1='0', @__p_2='2147483647'], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CompanyId], [t].[CreatedAt], [t].[CreatedById], [t].[CurrencyCode], [t].[DepositAcl], [t].[Description], [t].[IsActive], [t].[IsDeleted], [t].[Name], [t].[Status], [t].[UpdatedAt], [t].[UpdatedById], [t].[WithdrawAcl]
FROM [Treasuries] AS [t]
WHERE [t].[IsDeleted] = CAST(0 AS bit) AND [t].[CompanyId] = @__request_CompanyId_Value_0
ORDER BY [t].[Name]
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-09-15 14:10:16.363 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__treasury_CompanyId_0='d36b22ee-69fd-491c-99a6-36faa8dbfd1a'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[CreatedAt], [c].[CreatedById], [c].[CurrencyCode], [c].[IsActive], [c].[IsDeleted], [c].[Name], [c].[UpdatedAt], [c].[UpdatedById]
FROM [Companies] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__treasury_CompanyId_0
2025-09-15 14:10:16.370 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__treasury_CurrencyCode_0='EGP' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Code], [c].[CreatedAt], [c].[CreatedById], [c].[Decimals], [c].[Id], [c].[IsActive], [c].[IsDeleted], [c].[Symbol], [c].[UpdatedAt], [c].[UpdatedById]
FROM [Currencies] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Code] = @__treasury_CurrencyCode_0
2025-09-15 14:10:16.377 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__treasury_Id_0='e4e33ea7-1475-48cc-be82-c1c3b42bcb18'], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Treasuries] AS [t]
INNER JOIN [Vouchers] AS [v] ON [t].[Id] = [v].[TreasuryId]
WHERE [t].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = @__treasury_Id_0
2025-09-15 14:10:16.385 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 14:10:16.393 +03:00 [INF] Executed action ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController.GetTreasuryStatistics (ModularERP) in 42.4625ms
2025-09-15 14:10:16.396 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController.GetTreasuryStatistics (ModularERP)'
2025-09-15 14:10:16.398 +03:00 [INF] Request completed successfully with status code 200
2025-09-15 14:10:16.400 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/api/Treasury/statistics?companyId=d36b22ee-69fd-491c-99a6-36faa8dbfd1a - 200 null application/json; charset=utf-8 66.0638ms
2025-09-15 14:11:57.494 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5004/api/Treasury?companyId=d36b22ee-69fd-491c-99a6-36faa8dbfd1a&searchTerm=Trea&pageNumber=1&pageSize=10 - null null
2025-09-15 14:11:57.499 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5004/api/Treasury?companyId=d36b22ee-69fd-491c-99a6-36faa8dbfd1a&searchTerm=Trea&pageNumber=1&pageSize=10 - 307 0 null 5.1113ms
2025-09-15 14:11:57.527 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/api/Treasury?companyId=d36b22ee-69fd-491c-99a6-36faa8dbfd1a&searchTerm=Trea&pageNumber=1&pageSize=10 - null null
2025-09-15 14:11:57.538 +03:00 [INF] CORS policy execution successful.
2025-09-15 14:11:57.540 +03:00 [INF] Request started
2025-09-15 14:11:57.541 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController.GetAllTreasuries (ModularERP)'
2025-09-15 14:11:57.545 +03:00 [INF] Route matched with {action = "GetAllTreasuries", controller = "Treasury"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[System.Collections.Generic.IEnumerable`1[ModularERP.Modules.Finance.Features.Treasuries.DTO.TreasuryListDto]]]] GetAllTreasuries(System.Nullable`1[System.Guid], System.String, Int32, Int32) on controller ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController (ModularERP).
2025-09-15 14:11:57.582 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@__request_CompanyId_Value_0='d36b22ee-69fd-491c-99a6-36faa8dbfd1a', @__request_SearchTerm_1_contains='%Trea%' (Size = 100), @__request_SearchTerm_1_contains_1='%Trea%' (Size = 4000), @__p_2='0', @__p_3='10'], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CompanyId], [t].[CreatedAt], [t].[CreatedById], [t].[CurrencyCode], [t].[DepositAcl], [t].[Description], [t].[IsActive], [t].[IsDeleted], [t].[Name], [t].[Status], [t].[UpdatedAt], [t].[UpdatedById], [t].[WithdrawAcl]
FROM [Treasuries] AS [t]
WHERE [t].[IsDeleted] = CAST(0 AS bit) AND [t].[CompanyId] = @__request_CompanyId_Value_0 AND ([t].[Name] LIKE @__request_SearchTerm_1_contains ESCAPE N'\' OR ([t].[Description] IS NOT NULL AND [t].[Description] LIKE @__request_SearchTerm_1_contains_1 ESCAPE N'\'))
ORDER BY [t].[Name]
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-09-15 14:11:57.588 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__treasury_CompanyId_0='d36b22ee-69fd-491c-99a6-36faa8dbfd1a'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[CreatedAt], [c].[CreatedById], [c].[CurrencyCode], [c].[IsActive], [c].[IsDeleted], [c].[Name], [c].[UpdatedAt], [c].[UpdatedById]
FROM [Companies] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__treasury_CompanyId_0
2025-09-15 14:11:57.593 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__treasury_CurrencyCode_0='EGP' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Code], [c].[CreatedAt], [c].[CreatedById], [c].[Decimals], [c].[Id], [c].[IsActive], [c].[IsDeleted], [c].[Symbol], [c].[UpdatedAt], [c].[UpdatedById]
FROM [Currencies] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Code] = @__treasury_CurrencyCode_0
2025-09-15 14:11:57.604 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__treasury_Id_0='e4e33ea7-1475-48cc-be82-c1c3b42bcb18'], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Treasuries] AS [t]
INNER JOIN [Vouchers] AS [v] ON [t].[Id] = [v].[TreasuryId]
WHERE [t].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = @__treasury_Id_0
2025-09-15 14:11:57.607 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[System.Collections.Generic.IEnumerable`1[[ModularERP.Modules.Finance.Features.Treasuries.DTO.TreasuryListDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 14:11:57.609 +03:00 [INF] Executed action ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController.GetAllTreasuries (ModularERP) in 57.365ms
2025-09-15 14:11:57.611 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController.GetAllTreasuries (ModularERP)'
2025-09-15 14:11:57.616 +03:00 [INF] Request completed successfully with status code 200
2025-09-15 14:11:57.617 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/api/Treasury?companyId=d36b22ee-69fd-491c-99a6-36faa8dbfd1a&searchTerm=Trea&pageNumber=1&pageSize=10 - 200 null application/json; charset=utf-8 90.0779ms
2025-09-15 14:12:02.340 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5004/api/Treasury?companyId=d36b22ee-69fd-491c-99a6-36faa8dbfd1a&searchTerm=Treasf&pageNumber=1&pageSize=10 - null null
2025-09-15 14:12:02.347 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5004/api/Treasury?companyId=d36b22ee-69fd-491c-99a6-36faa8dbfd1a&searchTerm=Treasf&pageNumber=1&pageSize=10 - 307 0 null 16.7977ms
2025-09-15 14:12:02.357 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/api/Treasury?companyId=d36b22ee-69fd-491c-99a6-36faa8dbfd1a&searchTerm=Treasf&pageNumber=1&pageSize=10 - null null
2025-09-15 14:12:02.366 +03:00 [INF] CORS policy execution successful.
2025-09-15 14:12:02.366 +03:00 [INF] Request started
2025-09-15 14:12:02.367 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController.GetAllTreasuries (ModularERP)'
2025-09-15 14:12:02.369 +03:00 [INF] Route matched with {action = "GetAllTreasuries", controller = "Treasury"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[System.Collections.Generic.IEnumerable`1[ModularERP.Modules.Finance.Features.Treasuries.DTO.TreasuryListDto]]]] GetAllTreasuries(System.Nullable`1[System.Guid], System.String, Int32, Int32) on controller ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController (ModularERP).
2025-09-15 14:12:02.376 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__request_CompanyId_Value_0='d36b22ee-69fd-491c-99a6-36faa8dbfd1a', @__request_SearchTerm_1_contains='%Treasf%' (Size = 100), @__request_SearchTerm_1_contains_1='%Treasf%' (Size = 4000), @__p_2='0', @__p_3='10'], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CompanyId], [t].[CreatedAt], [t].[CreatedById], [t].[CurrencyCode], [t].[DepositAcl], [t].[Description], [t].[IsActive], [t].[IsDeleted], [t].[Name], [t].[Status], [t].[UpdatedAt], [t].[UpdatedById], [t].[WithdrawAcl]
FROM [Treasuries] AS [t]
WHERE [t].[IsDeleted] = CAST(0 AS bit) AND [t].[CompanyId] = @__request_CompanyId_Value_0 AND ([t].[Name] LIKE @__request_SearchTerm_1_contains ESCAPE N'\' OR ([t].[Description] IS NOT NULL AND [t].[Description] LIKE @__request_SearchTerm_1_contains_1 ESCAPE N'\'))
ORDER BY [t].[Name]
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-09-15 14:12:02.382 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[System.Collections.Generic.IEnumerable`1[[ModularERP.Modules.Finance.Features.Treasuries.DTO.TreasuryListDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 14:12:02.385 +03:00 [INF] Executed action ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController.GetAllTreasuries (ModularERP) in 10.8889ms
2025-09-15 14:12:02.389 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController.GetAllTreasuries (ModularERP)'
2025-09-15 14:12:02.391 +03:00 [INF] Request completed successfully with status code 200
2025-09-15 14:12:02.392 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/api/Treasury?companyId=d36b22ee-69fd-491c-99a6-36faa8dbfd1a&searchTerm=Treasf&pageNumber=1&pageSize=10 - 200 null application/json; charset=utf-8 34.5854ms
2025-09-15 14:12:07.708 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5004/api/Treasury?companyId=d36b22ee-69fd-491c-99a6-36faa8dbfd1a&searchTerm=Trea&pageNumber=1&pageSize=10 - null null
2025-09-15 14:12:07.712 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5004/api/Treasury?companyId=d36b22ee-69fd-491c-99a6-36faa8dbfd1a&searchTerm=Trea&pageNumber=1&pageSize=10 - 307 0 null 4.228ms
2025-09-15 14:12:07.715 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/api/Treasury?companyId=d36b22ee-69fd-491c-99a6-36faa8dbfd1a&searchTerm=Trea&pageNumber=1&pageSize=10 - null null
2025-09-15 14:12:07.722 +03:00 [INF] CORS policy execution successful.
2025-09-15 14:12:07.724 +03:00 [INF] Request started
2025-09-15 14:12:07.725 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController.GetAllTreasuries (ModularERP)'
2025-09-15 14:12:07.729 +03:00 [INF] Route matched with {action = "GetAllTreasuries", controller = "Treasury"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[System.Collections.Generic.IEnumerable`1[ModularERP.Modules.Finance.Features.Treasuries.DTO.TreasuryListDto]]]] GetAllTreasuries(System.Nullable`1[System.Guid], System.String, Int32, Int32) on controller ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController (ModularERP).
2025-09-15 14:12:07.737 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__request_CompanyId_Value_0='d36b22ee-69fd-491c-99a6-36faa8dbfd1a', @__request_SearchTerm_1_contains='%Trea%' (Size = 100), @__request_SearchTerm_1_contains_1='%Trea%' (Size = 4000), @__p_2='0', @__p_3='10'], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CompanyId], [t].[CreatedAt], [t].[CreatedById], [t].[CurrencyCode], [t].[DepositAcl], [t].[Description], [t].[IsActive], [t].[IsDeleted], [t].[Name], [t].[Status], [t].[UpdatedAt], [t].[UpdatedById], [t].[WithdrawAcl]
FROM [Treasuries] AS [t]
WHERE [t].[IsDeleted] = CAST(0 AS bit) AND [t].[CompanyId] = @__request_CompanyId_Value_0 AND ([t].[Name] LIKE @__request_SearchTerm_1_contains ESCAPE N'\' OR ([t].[Description] IS NOT NULL AND [t].[Description] LIKE @__request_SearchTerm_1_contains_1 ESCAPE N'\'))
ORDER BY [t].[Name]
OFFSET @__p_2 ROWS FETCH NEXT @__p_3 ROWS ONLY
2025-09-15 14:12:07.745 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__treasury_CompanyId_0='d36b22ee-69fd-491c-99a6-36faa8dbfd1a'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[CreatedAt], [c].[CreatedById], [c].[CurrencyCode], [c].[IsActive], [c].[IsDeleted], [c].[Name], [c].[UpdatedAt], [c].[UpdatedById]
FROM [Companies] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__treasury_CompanyId_0
2025-09-15 14:12:07.752 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__treasury_CurrencyCode_0='EGP' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Code], [c].[CreatedAt], [c].[CreatedById], [c].[Decimals], [c].[Id], [c].[IsActive], [c].[IsDeleted], [c].[Symbol], [c].[UpdatedAt], [c].[UpdatedById]
FROM [Currencies] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Code] = @__treasury_CurrencyCode_0
2025-09-15 14:12:07.761 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__treasury_Id_0='e4e33ea7-1475-48cc-be82-c1c3b42bcb18'], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Treasuries] AS [t]
INNER JOIN [Vouchers] AS [v] ON [t].[Id] = [v].[TreasuryId]
WHERE [t].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = @__treasury_Id_0
2025-09-15 14:12:07.765 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[System.Collections.Generic.IEnumerable`1[[ModularERP.Modules.Finance.Features.Treasuries.DTO.TreasuryListDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 14:12:07.768 +03:00 [INF] Executed action ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController.GetAllTreasuries (ModularERP) in 35.3109ms
2025-09-15 14:12:07.770 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController.GetAllTreasuries (ModularERP)'
2025-09-15 14:12:07.772 +03:00 [INF] Request completed successfully with status code 200
2025-09-15 14:12:07.773 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/api/Treasury?companyId=d36b22ee-69fd-491c-99a6-36faa8dbfd1a&searchTerm=Trea&pageNumber=1&pageSize=10 - 200 null application/json; charset=utf-8 57.8155ms
2025-09-15 14:54:12.750 +03:00 [INF] Starting web host...
2025-09-15 14:54:13.128 +03:00 [INF] Now listening on: https://localhost:7168
2025-09-15 14:54:13.131 +03:00 [INF] Now listening on: http://localhost:5004
2025-09-15 14:54:13.206 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-15 14:54:13.208 +03:00 [INF] Hosting environment: Development
2025-09-15 14:54:13.210 +03:00 [INF] Content root path: C:\Users\hossny D. monkey\source\repos\ModularERP\ModularERP
2025-09-15 14:54:33.670 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5004/swagger/index.html - null null
2025-09-15 14:54:33.794 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5004/swagger/index.html - 200 null text/html;charset=utf-8 124.4708ms
2025-09-15 14:54:33.840 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5004/_framework/aspnetcore-browser-refresh.js - null null
2025-09-15 14:54:33.851 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5004/_framework/aspnetcore-browser-refresh.js - 200 16505 application/javascript; charset=utf-8 10.4114ms
2025-09-15 14:54:34.988 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5004/_vs/browserLink - null null
2025-09-15 14:54:35.022 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5004/_vs/browserLink - 200 null text/javascript; charset=UTF-8 33.4879ms
2025-09-15 14:54:35.202 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5004/swagger/v1/swagger.json - null null
2025-09-15 14:54:35.236 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5004/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 34.0208ms
2025-09-15 14:54:41.828 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5004/api/Treasury/by-company/d36b22ee-69fd-491c-99a6-36faa8dbfd1a?pageNumber=1&pageSize=10 - null null
2025-09-15 14:54:41.861 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5004/api/Treasury/by-company/d36b22ee-69fd-491c-99a6-36faa8dbfd1a?pageNumber=1&pageSize=10 - 307 0 null 32.8297ms
2025-09-15 14:54:41.925 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/api/Treasury/by-company/d36b22ee-69fd-491c-99a6-36faa8dbfd1a?pageNumber=1&pageSize=10 - null null
2025-09-15 14:54:41.931 +03:00 [INF] CORS policy execution successful.
2025-09-15 14:54:41.941 +03:00 [INF] Request started
2025-09-15 14:54:41.944 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController.GetTreasuriesByCompany (ModularERP)'
2025-09-15 14:54:41.962 +03:00 [INF] Route matched with {action = "GetTreasuriesByCompany", controller = "Treasury"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[System.Collections.Generic.IEnumerable`1[ModularERP.Modules.Finance.Features.Treasuries.DTO.TreasuryListDto]]]] GetTreasuriesByCompany(System.Guid, Int32, Int32) on controller ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController (ModularERP).
2025-09-15 14:54:41.969 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-15 14:54:42.576 +03:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-15 14:54:42.767 +03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-09-15 14:54:43.209 +03:00 [INF] Executed DbCommand (28ms) [Parameters=[@__request_CompanyId_0='d36b22ee-69fd-491c-99a6-36faa8dbfd1a', @__p_1='0', @__p_2='10'], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CompanyId], [t].[CreatedAt], [t].[CreatedById], [t].[CurrencyCode], [t].[DepositAcl], [t].[Description], [t].[IsActive], [t].[IsDeleted], [t].[Name], [t].[Status], [t].[UpdatedAt], [t].[UpdatedById], [t].[WithdrawAcl]
FROM [Treasuries] AS [t]
WHERE [t].[IsDeleted] = CAST(0 AS bit) AND [t].[CompanyId] = @__request_CompanyId_0
ORDER BY [t].[Name]
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-09-15 14:54:43.251 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__treasury_CompanyId_0='d36b22ee-69fd-491c-99a6-36faa8dbfd1a'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[CreatedAt], [c].[CreatedById], [c].[CurrencyCode], [c].[IsActive], [c].[IsDeleted], [c].[Name], [c].[UpdatedAt], [c].[UpdatedById]
FROM [Companies] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Id] = @__treasury_CompanyId_0
2025-09-15 14:54:43.263 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__treasury_CurrencyCode_0='EGP' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Code], [c].[CreatedAt], [c].[CreatedById], [c].[Decimals], [c].[Id], [c].[IsActive], [c].[IsDeleted], [c].[Symbol], [c].[UpdatedAt], [c].[UpdatedById]
FROM [Currencies] AS [c]
WHERE [c].[IsDeleted] = CAST(0 AS bit) AND [c].[Code] = @__treasury_CurrencyCode_0
2025-09-15 14:54:43.327 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@__treasury_Id_0='e4e33ea7-1475-48cc-be82-c1c3b42bcb18'], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Treasuries] AS [t]
INNER JOIN [Vouchers] AS [v] ON [t].[Id] = [v].[TreasuryId]
WHERE [t].[IsDeleted] = CAST(0 AS bit) AND [t].[Id] = @__treasury_Id_0
2025-09-15 14:54:43.337 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[System.Collections.Generic.IEnumerable`1[[ModularERP.Modules.Finance.Features.Treasuries.DTO.TreasuryListDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-15 14:54:43.356 +03:00 [INF] Executed action ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController.GetTreasuriesByCompany (ModularERP) in 1387.9029ms
2025-09-15 14:54:43.359 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController.GetTreasuriesByCompany (ModularERP)'
2025-09-15 14:54:43.361 +03:00 [INF] Request completed successfully with status code 200
2025-09-15 14:54:43.367 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/api/Treasury/by-company/d36b22ee-69fd-491c-99a6-36faa8dbfd1a?pageNumber=1&pageSize=10 - 200 null application/json; charset=utf-8 1442.3476ms
2025-09-15 14:55:07.254 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5004/api/Treasury/statistics?companyId=d36b22ee-69fd-491c-99a6-36faa8dbfd1a - null null
2025-09-15 14:55:07.259 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5004/api/Treasury/statistics?companyId=d36b22ee-69fd-491c-99a6-36faa8dbfd1a - 307 0 null 4.6334ms
2025-09-15 14:55:07.263 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7168/api/Treasury/statistics?companyId=d36b22ee-69fd-491c-99a6-36faa8dbfd1a - null null
2025-09-15 14:55:07.267 +03:00 [INF] CORS policy execution successful.
2025-09-15 14:55:07.268 +03:00 [INF] Request started
2025-09-15 14:55:07.269 +03:00 [INF] Executing endpoint 'ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController.GetTreasuryStatistics (ModularERP)'
2025-09-15 14:55:07.275 +03:00 [INF] Route matched with {action = "GetTreasuryStatistics", controller = "Treasury"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[ModularERP.Common.ViewModel.ResponseViewModel`1[ModularERP.Modules.Finance.Features.Treasuries.DTO.TreasuryStatisticsDto]]] GetTreasuryStatistics(System.Nullable`1[System.Guid]) on controller ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController (ModularERP).
2025-09-15 14:55:07.340 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__request_CompanyId_Value_0='d36b22ee-69fd-491c-99a6-36faa8dbfd1a'], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CompanyId], [t].[CreatedAt], [t].[CreatedById], [t].[CurrencyCode], [t].[DepositAcl], [t].[Description], [t].[IsActive], [t].[IsDeleted], [t].[Name], [t].[Status], [t].[UpdatedAt], [t].[UpdatedById], [t].[WithdrawAcl]
FROM [Treasuries] AS [t]
WHERE [t].[IsDeleted] = CAST(0 AS bit) AND [t].[CompanyId] = @__request_CompanyId_Value_0
2025-09-15 14:55:07.346 +03:00 [INF] Executing OkObjectResult, writing value of type 'ModularERP.Common.ViewModel.ResponseViewModel`1[[ModularERP.Modules.Finance.Features.Treasuries.DTO.TreasuryStatisticsDto, ModularERP, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-15 14:55:07.352 +03:00 [INF] Executed action ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController.GetTreasuryStatistics (ModularERP) in 74.5355ms
2025-09-15 14:55:07.355 +03:00 [INF] Executed endpoint 'ModularERP.Modules.Finance.Features.Treasuries.Controllers.TreasuryController.GetTreasuryStatistics (ModularERP)'
2025-09-15 14:55:07.357 +03:00 [INF] Request completed successfully with status code 200
2025-09-15 14:55:07.358 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7168/api/Treasury/statistics?companyId=d36b22ee-69fd-491c-99a6-36faa8dbfd1a - 200 null application/json; charset=utf-8 95.4198ms
